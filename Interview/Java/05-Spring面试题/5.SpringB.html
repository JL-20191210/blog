<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.17" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.58" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta name="keywords" content="Springé¢è¯•é¢˜,Spring,é¢è¯•é¢˜,å…«è‚¡æ–‡,java,springå…¨å®¶æ¡¶,springå…«è‚¡"><title>Springé¢è¯•é¢˜ï¼Œ41é“Springå…«è‚¡æ–‡ï¼ˆ1.3ä¸‡å­—63å¼ æ‰‹ç»˜å›¾ï¼‰ï¼Œé¢æ¸£é€†è¢­å¿…çœ‹ğŸ‘ | å°æ»¡</title><meta name="description" content="ä¸‹è½½æ¬¡æ•°è¶… 1 ä¸‡æ¬¡ï¼Œ1.3 ä¸‡å­— 63 å¼ æ‰‹ç»˜å›¾ï¼Œè¯¦è§£ 41 é“ Spring é¢è¯•é«˜é¢‘é¢˜ï¼ˆè®©å¤©ä¸‹æ²¡æœ‰éš¾èƒŒçš„å…«è‚¡ï¼‰ï¼Œé¢æ¸£èƒŒä¼šè¿™äº› Spring å…«è‚¡æ–‡ï¼Œè¿™æ¬¡åŠæ‰“é¢è¯•å®˜ï¼Œæˆ‘è§‰å¾—ç¨³äº†ï¼ˆæ‰‹åŠ¨ dogï¼‰ã€‚">
    <link rel="stylesheet" href="/blog/assets/css/styles.6c7a3e47.css">
    <link rel="preload" href="/blog/assets/js/runtime~app.5b07cc97.js" as="script"><link rel="preload" href="/blog/assets/css/styles.6c7a3e47.css" as="style"><link rel="preload" href="/blog/assets/js/12710.15d38a93.js" as="script"><link rel="preload" href="/blog/assets/js/app.07bc7e99.js" as="script">
    <link rel="prefetch" href="/blog/assets/js/Interview_sanfene_redis.html.0286c4ae.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_sanfene_Javaçº¿ç¨‹.html.24f761b0.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_03-Javaå¹¶å‘ç¼–ç¨‹é¢è¯•é¢˜_3.Javaçº¿ç¨‹.html.f9ba31c8.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_07-Redisé¢è¯•é¢˜_7.Redisé¢è¯•é¢˜B.html.c45db3f4.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_06-MySQLé¢è¯•é¢˜_6.MySQLé¢è¯•é¢˜A.html.c71d7a66.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_sanfene_mysql.html.c8d93c72.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å…¥é—¨åˆ°èµ·é£_31.å¤šçº¿ç¨‹_jucé¢å¤–æ‰©å±•èµ„æ–™_å¤šçº¿ç¨‹ï¼ˆé¢å¤–æ‰©å±•ï¼‰.html.cff3053c.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_Redis_2.å®æˆ˜_Rediså®æˆ˜ç¯‡.html.d98fbee2.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_Redis_2.å®æˆ˜_Rediså®æˆ˜ç¯‡-åœ¨çº¿.html.88494933.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_05-Springé¢è¯•é¢˜_5.SpringA.html.9c0a92a2.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_sanfene_spring.html.68f15681.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_05-Springé¢è¯•é¢˜_5.SpringB.html.06f2de46.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_MySQL_MySQLé¢æ¸£84.html.475a0f87.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_03-Mavené«˜çº§ç¬”è®°_POMæ–‡ä»¶å¸®åŠ©æ–‡æ¡£.html.44fa84a5.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_02-SpringMVCç¬”è®°_SpringMVC_day01_SpringMVC_day01.html.df4052b6.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_sanfene_JavaåŸºç¡€.html.5eb5f678.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_01-JavaåŸºç¡€é¢è¯•é¢˜_1.JavaåŸºç¡€é¢è¯•é¢˜A.html.e6491872.js" as="script"><link rel="prefetch" href="/blog/assets/js/Netty_01Netty-nio.html.276942d9.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_02-SpringMVCç¬”è®°_SpringMVC_day02_SpringMVC_day02.html.de0be868.js" as="script"><link rel="prefetch" href="/blog/assets/js/Netty_04Netty-ä¼˜åŒ–ä¸æºç .html.5e97573a.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_01-Springç¬”è®°_spring_day03_Spring_day03.html.46a9fef8.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_03-Javaå¹¶å‘ç¼–ç¨‹é¢è¯•é¢˜_3.Javaå¹¶å‘ç¼–ç¨‹é¢è¯•é¢˜.html.e7754c15.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Spring_Springé¢è¯•é¢˜41.html.f0c65c41.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_05-Mybatisplusç¬”è®°_MyBatisPlus.html.0608d881.js" as="script"><link rel="prefetch" href="/blog/assets/js/Netty_03Netty-è¿›é˜¶.html.6fc84fce.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å…¥é—¨åˆ°èµ·é£_31.å¤šçº¿ç¨‹_å¤šçº¿ç¨‹02.html.cd02eee1.js" as="script"><link rel="prefetch" href="/blog/assets/js/Mybatis_Mybatis Plus_Mybatis Plusç¬”è®°.html.9365922f.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_0.ç¬”è®°_Linuxç³»ç»Ÿè½¯ä»¶å®‰è£….html.a03ba364.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_01-Springç¬”è®°_spring_day02_Spring_day02.html.c569030a.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_01-Springç¬”è®°_spring_day01_Spring_day01.html.3ac3f14a.js" as="script"><link rel="prefetch" href="/blog/assets/js/Netty_02Netty-å…¥é—¨.html.8e52bd7b.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_01-JavaåŸºç¡€é¢è¯•é¢˜_1.JavaåŸºç¡€é¢è¯•é¢˜.html.524a21fc.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å…¥é—¨åˆ°èµ·é£_35.åå°„_åŠ¨æ€ä»£ç†_35.åå°„_åŠ¨æ€ä»£ç†.html.dbc8eee0.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_Redis_3.é«˜çº§_02-å¤šçº§ç¼“å­˜_å¤šçº§ç¼“å­˜.html.1b77c902.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_sanfene_jvm.html.5b423363.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_04-Javaè™šæ‹Ÿæœºé¢è¯•é¢˜_4.JVM.html.59b5bfa0.js" as="script"><link rel="prefetch" href="/blog/assets/js/MQ_RabbitMQ_åŸºç¡€_MQåŸºç¡€.html.41390359.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_03-Mavené«˜çº§ç¬”è®°_Mavené«˜çº§.html.270538a7.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MySQLå­¦ä¹ ç¬”è®°_MySQLå­¦ä¹ ç¬”è®°.html.17191d56.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_å®ç”¨_ES_è®²ä¹‰-åˆ†å¸ƒå¼æœç´¢å¼•æ“02.html.2366ab43.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_06-MySQLé¢è¯•é¢˜_6.MySQLé¢è¯•é¢˜.html.3873e670.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_07-Redisé¢è¯•é¢˜_7.Redisé¢è¯•é¢˜A.html.94f2e464.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å…¥é—¨åˆ°èµ·é£_31.å¤šçº¿ç¨‹_å¤šçº¿ç¨‹01.html.13b4dd82.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_Redis_1.å…¥é—¨_RedisåŸºç¡€ç¯‡.html.84d95a80.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_sanfene_mybatis.html.48f5c337.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_05-Springé¢è¯•é¢˜_5.Springé¢è¯•é¢˜.html.2a5749c3.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å…¥é—¨åˆ°èµ·é£_26.é›†åˆï¼ˆStreamæµ_æ–¹æ³•å¼•ç”¨ï¼‰_streamæµå’Œæ–¹æ³•å¼•ç”¨.html.e6e8148c.js" as="script"><link rel="prefetch" href="/blog/assets/js/MQ_RabbitMQ_é«˜çº§_MQé«˜çº§.html.4dc62c19.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_è¿›é˜¶_ç¬”è®°-è¿›é˜¶ç¯‡.html.38ebd1f1.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_04-SpringBootç¬”è®°_SpringBoot.html.c516c238.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_sanfene_Javaé›†åˆæ¡†æ¶.html.634f2c90.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_02-Javaé›†åˆé¢è¯•é¢˜_2.Javaé›†åˆæ¡†æ¶ç¯‡A.html.3468ff92.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_å®ç”¨_ES_è®²ä¹‰-åˆ†å¸ƒå¼æœç´¢å¼•æ“01.html.fa8a2050.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_02-Javaé›†åˆé¢è¯•é¢˜_2.Javaé›†åˆé¢è¯•é¢˜.html.ba16f2b4.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_sanfene_network.html.057aa6a7.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MyCaté…ç½®æ–‡ä»¶_schema.html.f95b551b.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2021_04æ¡†æ¶ç¯‡_æ¡†æ¶ç¯‡è®²ä¹‰.html.12c9ea05.js" as="script"><link rel="prefetch" href="/blog/assets/js/è£…æœº_Intelæ¡Œé¢å¤„ç†å™¨è§„æ ¼.html.81a8384a.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2021_01åŸºç¡€ç¯‡_åŸºç¡€ç¯‡è®²ä¹‰.html.fd1648ce.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_åŸºç¡€_å¤šè¡¨æŸ¥è¯¢æ¼”ç¤º.html.052f61a3.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringBoot_æ—¥å¿—æ¡†æ¶_Spring Boot æ•´åˆ Log4j2.html.867c0721.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_Redis_4.åŸç†_åŸç†ç¯‡.html.4ffa6e0a.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_å®ç”¨_MQ_RabbitMQ.html.108944c0.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å…¥é—¨åˆ°èµ·é£_15.é¢å‘å¯¹è±¡è¿›é˜¶ï¼ˆæŠ½è±¡ç±»_æ¥å£_å†…éƒ¨ç±»ï¼‰_day03ç¬”è®°.html.97de14fd.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_01-Springç¬”è®°_AOP_æ€§èƒ½ç›‘æ§åˆ‡é¢.html.4c8c8c80.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_Redis_3.é«˜çº§_03-Redisæœ€ä½³å®è·µ_Redisé«˜çº§ç¯‡ä¹‹æœ€ä½³å®è·µ.html.1753eedd.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_é«˜çº§_Sentinel_å¾®æœåŠ¡ä¿æŠ¤.html.750efdda.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_åŸºç¡€_çº¦æŸåŠå¤šè¡¨å…³ç³»æ¼”ç¤º.html.7ee11563.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_é«˜çº§_åˆ†å¸ƒå¼äº‹åŠ¡_åˆ†å¸ƒå¼äº‹åŠ¡.html.e33d05cd.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å…¥é—¨åˆ°èµ·é£_23.é›†åˆï¼ˆæ³›å‹_Set_æ•°æ®ç»“æ„)_é›†åˆ02.html.c4c2e2e3.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å…¥é—¨åˆ°èµ·é£_22.é›†åˆï¼ˆListé›†åˆï¼‰_é›†åˆ01.html.f67fe261.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_sanfene_rocketmq.html.00a75ed1.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_sanfene_è®¾è®¡æ¨¡å¼.html.30be772a.js" as="script"><link rel="prefetch" href="/blog/assets/js/Python_åŸºç¡€_æ ¸å¿ƒæ•°æ®ç±»å‹.html.1dbd881a.js" as="script"><link rel="prefetch" href="/blog/assets/js/è£…æœº_AMDæ¡Œé¢å¤„ç†å™¨è§„æ ¼.html.754a9807.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_sanfene_å¾®æœåŠ¡.html.f3b3ce52.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_åŸºç¡€_å¤šè¡¨æŸ¥è¯¢æ¡ˆä¾‹æ¼”ç¤º.html.132ba5cc.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_sanfene_os.html.b9ad3efc.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Spring_Springé¢è¯•é¢˜åˆ†æåŠæ€»ç»“.html.760df3b6.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_è¿ç»´_è¿ç»´ç¯‡.html.01f09e6c.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_å®ç”¨_Docker_Dockerå®ç”¨ç¯‡.html.c1a71cac.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_04-Javaè™šæ‹Ÿæœºé¢è¯•é¢˜_4.Javaè™šæ‹Ÿæœºé¢è¯•é¢˜.html.77780649.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_é«˜çº§_Seata_seataçš„éƒ¨ç½²å’Œé›†æˆ.html.1df967b9.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MyCaté…ç½®æ–‡ä»¶_rule.html.837d67e4.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_Redis_è¯¾å‰èµ„æ–™_Redisé›†ç¾¤.html.8aaba09c.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_Redis_éšç¬”_ä»€ä¹ˆæ˜¯è·³è¡¨.html.8493aeea.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_8.Shellä¸è„šæœ¬ç¼–ç¨‹_Shellç¼–ç¨‹.html.1186d432.js" as="script"><link rel="prefetch" href="/blog/assets/js/Vue_è¡¨å•éªŒè¯.html.1d4b13b9.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_åŸºç¡€_å‡½æ•°æ¼”ç¤º.html.589318d7.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_å®ç”¨_ES_4.å®‰è£…elasticsearch.html.569661db.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_Java8ç‰¹æ€§_Java Stream API.html.59cbd40f.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_Java8ç‰¹æ€§_å‡½æ•°å¼æ¥å£.html.e3311c0c.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_MySQL_MySQLé«˜é¢‘60.html.31eb5551.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_08-æ•°æ®ç»“æ„é¢è¯•é¢˜_8.æ•°æ®ç»“æ„é¢è¯•é¢˜.html.32fb4218.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_åŸºç¡€_ç¬”è®°-åŸºç¡€ç¯‡.html.4effae1b.js" as="script"><link rel="prefetch" href="/blog/assets/js/Python_çˆ¬è™«_æ ·ä¾‹.html.b82eb27f.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•å‡†å¤‡_äº¬ä¸œé¢è¯•é¢˜å‡†å¤‡.html.0ffc41c4.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_AåŸºç¡€_1.è¡¥å……- FSTæ¡†æ¶ä½¿ç”¨.html.ba8ada39.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_é¢è¯•é¢˜_1.è¡¥å……- FSTæ¡†æ¶ä½¿ç”¨.html.f0f1903a.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_MySQL_MySQLé«˜é¢‘60-ä¼˜åŒ–ç‰ˆ.html.ac02e604.js" as="script"><link rel="prefetch" href="/blog/assets/js/Spring_æ³¨è§£_@ControllerAdvice.html.b6affcf2.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_Java8ç‰¹æ€§_æ·±å…¥ç†è§£ Stream API.html.6c954c8f.js" as="script"><link rel="prefetch" href="/blog/assets/js/60849.39f42502.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_09-MQé¢è¯•é¢˜_RabbitMQé¢è¯•é¢˜A.html.93f202d8.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_Redis_3.é«˜çº§_01-åˆ†å¸ƒå¼ç¼“å­˜_Redisé«˜çº§-åˆ†å¸ƒå¼ç¼“å­˜.html.d5c815f6.js" as="script"><link rel="prefetch" href="/blog/assets/js/48300.3ee19ba5.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_10-åˆ†å¸ƒå¼_åˆ†å¸ƒå¼.html.2b2b5160.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_sanfene_åˆ†å¸ƒå¼.html.bcd4e92c.js" as="script"><link rel="prefetch" href="/blog/assets/js/Netty_Channel.html.3214a737.js" as="script"><link rel="prefetch" href="/blog/assets/js/34214.fa3e0c09.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_Redis_è¯¾å‰èµ„æ–™_æ¡ˆä¾‹å¯¼å…¥è¯´æ˜.html.ffb85e6d.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_13.æœåŠ¡ä¸è‡ªåŠ¨åŒ–ç®¡ç†_Linux æœåŠ¡å™¨æ€§èƒ½æŸ¥çœ‹å‘½ä»¤.html.d2882089.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MyCaté…ç½®æ–‡ä»¶_server.html.36a775fa.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_åŸºç¡€_å‡½æ•°.html.7ad0084b.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringMVC_æ ¡éªŒ_Hibernate Validator.html.f1e24450.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_Java8ç‰¹æ€§_æ·±å…¥ç†è§£ Java Collector.html.93b373f6.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_sanfene_netty.html.0112b144.js" as="script"><link rel="prefetch" href="/blog/assets/js/é¡¹ç›®å®æˆ˜_è°·ç²’å•†åŸ_æ¿ä¹¦_æ•°æ®æ ¡éªŒ.html.7a04b0b6.js" as="script"><link rel="prefetch" href="/blog/assets/js/Docker_ç§æœ‰äº‘_ç©å®¢äº‘.html.dbed3c70.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_01-Springç¬”è®°_AOP_å…¥å‚å¤„ç†åˆ‡é¢.html.6e62afae.js" as="script"><link rel="prefetch" href="/blog/assets/js/è®¾è®¡æ¨¡å¼_Aåˆ›å»ºå‹_bå·¥å‚æ¨¡å¼.html.33521137.js" as="script"><link rel="prefetch" href="/blog/assets/js/Mybatis_Mybatis Plus_æ³¨è§£_@TableField.html.4ff8f1fe.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringMVC_æ ¡éªŒ_è‡ªå®šä¹‰æ ¡éªŒ.html.86bf2a0c.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2023_08å¹¶å‘ç¼–ç¨‹_01åŸºç¡€çŸ¥è¯†_8.notify()å’Œ notifyAll()æœ‰ä»€ä¹ˆåŒºåˆ«.html.9b0c7031.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_01-Springç¬”è®°_AOP_åŸºäºæ³¨è§£çš„ AOP æ—¥å¿—åˆ‡é¢.html.ac07279f.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_AåŸºç¡€_3.æ‰©å±•-å¼‚å¸¸å¤„ç†æ³¨æ„ç‚¹.html.f523009a.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_é¢è¯•é¢˜_3.æ‰©å±•-å¼‚å¸¸å¤„ç†æ³¨æ„ç‚¹.html.83bdbb12.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_Redis_è¯¾å‰èµ„æ–™_å®‰è£…OpenResty.html.74f44156.js" as="script"><link rel="prefetch" href="/blog/assets/js/Mybatis_Mybatis Plus_æ¥å£_MetaObjectHandleræ¥å£æ–‡æ¡£.html.12c341a2.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_é˜Ÿåˆ—_ArrayDeque.html.ed65786d.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_åŸºç¡€_äº‹åŠ¡æ“ä½œæ¼”ç¤º.html.ac44426f.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_0.ç¬”è®°_Linuxè¯¾ç¨‹ç¬”è®°.html.f475d1ec.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_å®ç”¨_ES_8.å¸¸è§æŸ¥è¯¢ç±»å‹.html.dd7ad357.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_å®ç”¨_Docker_Centos7å®‰è£…Docker.html.dcfc0e64.js" as="script"><link rel="prefetch" href="/blog/assets/js/emoji.html.a51767b6.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2021_03è™šæ‹Ÿæœº_è™šæ‹Ÿæœºç¯‡è®²ä¹‰.html.5e662b5a.js" as="script"><link rel="prefetch" href="/blog/assets/js/Spring_æ³¨è§£_@InitBinder.html.dfb600fd.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_AåŸºç¡€_17.JDKåŠ¨æ€ä»£ç†å’ŒCGLIBåŠ¨æ€ä»£ç†æœ‰ä»€ä¹ˆåŒºåˆ«.html.5e3242d9.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_é¢è¯•é¢˜_17.JDKåŠ¨æ€ä»£ç†å’ŒCGLIBåŠ¨æ€ä»£ç†æœ‰ä»€ä¹ˆåŒºåˆ«.html.5d94d59a.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2023_08å¹¶å‘ç¼–ç¨‹_01åŸºç¡€çŸ¥è¯†_10. å¦‚ä½•åœæ­¢ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹.html.9d91be3d.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_Java8ç‰¹æ€§_æ·±å…¥ç†è§£ Java ä¸­çš„é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•.html.4407513d.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_sanfene_linux.html.0f3075e4.js" as="script"><link rel="prefetch" href="/blog/assets/js/é¡¹ç›®å®æˆ˜_è°·ç²’å•†åŸ_æŠ¥é”™è®°å½•_æµ‹è¯•æ–¹æ³•å¯åŠ¨ç©ºæŒ‡é’ˆ.html.8f332f7d.js" as="script"><link rel="prefetch" href="/blog/assets/js/è®¾è®¡æ¨¡å¼_ä»£ç†æ¨¡å¼.html.307dfb55.js" as="script"><link rel="prefetch" href="/blog/assets/js/è®¡ç®—æœºåŸºç¡€_ç½‘ç»œ_socketæ˜¯ä»€ä¹ˆ.html.6477332a.js" as="script"><link rel="prefetch" href="/blog/assets/js/Spring_æ³¨è§£_å…ƒæ³¨è§£.html.1f12c058.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2023_08å¹¶å‘ç¼–ç¨‹_01åŸºç¡€çŸ¥è¯†_3.åˆ›å»ºçº¿ç¨‹çš„å››ç§æ–¹å¼.html.f54a02a9.js" as="script"><link rel="prefetch" href="/blog/assets/js/40611.4644bae7.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_jstackç”¨æ³•.html.835d2afe.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_Alibaba-OSS_é˜¿é‡Œäº‘ossä½¿ç”¨è®°å½•.html.ea0cd2cc.js" as="script"><link rel="prefetch" href="/blog/assets/js/Mybatis_Mybatis Plus_æ¥å£_MetaObjectHandlerç¤ºä¾‹.html.4efccaa4.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringMVC_æ ¡éªŒ_JSR303æ•°å­—æ ¡éªŒ.html.e2275b16.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_262.è¡Œç¨‹å’Œç”¨æˆ·.html.8bd8e9da.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Java_Java ä¸­çš„æ·±æ‹·è´å®ç°æ–¹å¼.html.b3f1bf54.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Java_LSP è®¾è®¡åŸåˆ™åä¾‹.html.03e7c579.js" as="script"><link rel="prefetch" href="/blog/assets/js/è®¾è®¡æ¨¡å¼_Cè¡Œä¸ºå‹_aè§‚å¯Ÿè€…æ¨¡å¼.html.1a217de1.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_01-Springç¬”è®°_éšç¬”_Springéšç¬”.html.a213478a.js" as="script"><link rel="prefetch" href="/blog/assets/js/CICD_Jenkins é…ç½®åç«¯å·¥ç¨‹ï¼Œè‡ªåŠ¨æ‹‰å–ä»£ç ã€æ‰“åŒ…ä¸é‡æ–°éƒ¨ç½².html.c14fdeb5.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringBoot_æ—¥å¿—æ¡†æ¶_Logback åˆ‡æ¢åˆ° Log4j2.html.b6953a7b.js" as="script"><link rel="prefetch" href="/blog/assets/js/Spring_æ³¨è§£_@EnableTransactionManagement.html.675c265b.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_2.å†…å­˜ç»“æ„_2.5æ–¹æ³•åŒº.html.f109c320.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_Java8ç‰¹æ€§_æ·±å…¥ç†è§£ Java Optional ç±».html.e5509be0.js" as="script"><link rel="prefetch" href="/blog/assets/js/Mybatis_Mybatis Plus_this.page().html.4b65b971.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_Java8ç‰¹æ€§_æ·±å…¥ç†è§£ Java 8 æ–°ç‰¹æ€§ï¼šä»æ ¸å¿ƒåˆ°å®è·µ.html.ee87173d.js" as="script"><link rel="prefetch" href="/blog/assets/js/é¡¹ç›®å®æˆ˜_ä¸ªäººåšå®¢_å‰ç«¯éƒ¨ç½².html.7ccf5612.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_MySQL_é”è¯¦è§£.html.9e56f82a.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringBoot_æ³¨è§£_@ConfigurationProperties.html.d6fa4f99.js" as="script"><link rel="prefetch" href="/blog/assets/js/Vue_vueæ¨¡æ¿.html.3c45406b.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å…¥é—¨åˆ°èµ·é£_35.åå°„_åŠ¨æ€ä»£ç†_åå°„.html.9fae427b.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_AåŸºç¡€_16.ä»€ä¹ˆæ˜¯Javaä¸­çš„åŠ¨æ€ä»£ç†.html.735e8e9f.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_é¢è¯•é¢˜_16.ä»€ä¹ˆæ˜¯Javaä¸­çš„åŠ¨æ€ä»£ç†.html.bb8abfbb.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Java_ä»£ç†æ¨¡å¼ï¼ˆProxy Patternï¼‰.html.618ad1ab.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_AåŸºç¡€_5.ä»€ä¹ˆæ˜¯Javaçš„å¤šæ€.html.582e8612.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_é¢è¯•é¢˜_5.ä»€ä¹ˆæ˜¯Javaçš„å¤šæ€.html.c9538290.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_Redis_è¯¾å‰èµ„æ–™_å®‰è£…Canal.html.eca6c6c7.js" as="script"><link rel="prefetch" href="/blog/assets/js/è®¾è®¡æ¨¡å¼_Aåˆ›å»ºå‹_aå•ä¾‹æ¨¡å¼.html.a617a8cf.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MySQLå°ç™½_mysqlæ˜¯ä»€ä¹ˆ_æ¶æ„æ˜¯æ€ä¹ˆæ ·çš„.html.90369239.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_åŸºç¡€_æ•°æ®åº“æ§åˆ¶è¯­è¨€DCL.html.6e262ce8.js" as="script"><link rel="prefetch" href="/blog/assets/js/Spring_æ³¨è§£_@Import.html.d6e348d3.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_éšç¬”_Java çš„å¼•ç”¨ä¼ é€’æœºåˆ¶.html.3e64511e.js" as="script"><link rel="prefetch" href="/blog/assets/js/Docker_éšç¬”_docker-composeå®‰è£…è½¯ä»¶.html.dd082ab5.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_æ•°æ®ç»“æ„_ä»€ä¹ˆæ˜¯è·³è¡¨.html.e8e21a6b.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_String_Javaä¸­é‡å†™toString.html.cfe084d4.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_607.é”€å”®å‘˜.html.700c3a8e.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringBoot_æ³¨è§£_@EnableConfigurationProperties.html.3df698c0.js" as="script"><link rel="prefetch" href="/blog/assets/js/è®¾è®¡æ¨¡å¼_Bç»“æ„å‹_é€‚é…å™¨æ¨¡å¼.html.289eb72a.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_é«˜çº§_Seata_é…ç½®æ–‡ä»¶.html.ed31c587.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Spring_Spring å®ä¾‹åŒ– Bean çš„å››ç§æ–¹å¼.html.5bc902d2.js" as="script"><link rel="prefetch" href="/blog/assets/js/è®¾è®¡æ¨¡å¼_Cè¡Œä¸ºå‹_bç­–ç•¥æ¨¡å¼.html.6c1eebce.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_2.å†…å­˜ç»“æ„_2.6ç›´æ¥å†…å­˜.html.bab6eedb.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_AåŸºç¡€_7.Java ä¸æ”¯æŒå¤šé‡ç»§æ‰¿.html.049b3c41.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_é¢è¯•é¢˜_7.Java ä¸æ”¯æŒå¤šé‡ç»§æ‰¿.html.05d57fbf.js" as="script"><link rel="prefetch" href="/blog/assets/js/87583.28addbdd.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Java_æ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©çº¿ç¨‹æ± å‚æ•°.html.c9470b27.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_185.éƒ¨é—¨å·¥èµ„å‰ä¸‰é«˜çš„æ‰€æœ‰å‘˜å·¥.html.8501414e.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_é«˜çº§_Jmeter_3.sentinelè§„åˆ™æŒä¹…åŒ–.html.940a7cec.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2021_02å¹¶å‘ç¯‡_å¹¶å‘ç¯‡è®²ä¹‰.html.d1f3ebb0.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_03-Mavené«˜çº§ç¬”è®°_éšç¬”_packagingç±»å‹.html.71ed9684.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_AåŸºç¡€_6.Javaä¸­çš„å‚æ•°ä¼ é€’æ˜¯æŒ‰å€¼è¿˜æ˜¯æŒ‰å¼•ç”¨.html.671e2e5a.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_é¢è¯•é¢˜_6.Javaä¸­çš„å‚æ•°ä¼ é€’æ˜¯æŒ‰å€¼è¿˜æ˜¯æŒ‰å¼•ç”¨.html.a265d76c.js" as="script"><link rel="prefetch" href="/blog/assets/js/Mybatis_Mybatis Plus_wrapper.and().html.8316c195.js" as="script"><link rel="prefetch" href="/blog/assets/js/å­¦ä¹ è·¯çº¿.html.0b64c59e.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Java_æ¥å£éš”ç¦»åŸåˆ™ï¼ˆISPï¼‰.html.d381d887.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Java_å¼€æ”¾å°é—­åŸåˆ™ï¼ˆOCPï¼‰.html.080b85f3.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å…¥é—¨åˆ°èµ·é£_31.å¤šçº¿ç¨‹_å¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯_2.happens-beforeåŸåˆ™.html.c7682bf5.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_07-Redisé¢è¯•é¢˜_7.Redisé¢è¯•é¢˜.html.608ca372.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_601.ä½“è‚²é¦†çš„äººæµé‡.html.f838f49e.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2023_08å¹¶å‘ç¼–ç¨‹_01åŸºç¡€çŸ¥è¯†_9.åœ¨ java ä¸­ wait å’Œ sleep æ–¹æ³•çš„ä¸åŒ.html.91a70cf9.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_å®ç”¨_Nacos_2.é…ç½®ä¸­å¿ƒ.html.b29dd97e.js" as="script"><link rel="prefetch" href="/blog/assets/js/87096.9698059e.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å¼‚å¸¸_try-with-resourcesè‡ªåŠ¨å…³é—­èµ„æº.html.21d0bca1.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Java_é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰.html.3166841c.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_4. JVMæ€§èƒ½è°ƒä¼˜ä¸ç›‘æ§å·¥å…·_4.1JVMå¸¸è§ OOM é”™è¯¯ç±»å‹ä¸æ’æŸ¥.html.36fec502.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_608.æ ‘èŠ‚ç‚¹.html.02ca4a60.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_5.è½¯ä»¶åŒ…ç®¡ç†_ä¿®æ”¹yumæº.html.caa89064.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Java_synchronized è¯¦è§£.html.61e523f1.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Java_ä»€ä¹ˆæ˜¯å›è°ƒåœ°ç‹±.html.66868a5f.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_1. JVM æ¶æ„ä¸ç±»åŠ è½½_1.3ç±»çš„åˆå§‹åŒ–ä¸åŠ è½½çš„è§¦å‘æ¡ä»¶.html.21caf559.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_AåŸºç¡€_8.Javaé¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹ç¼–ç¨‹çš„åŒºåˆ«.html.7b8bd3bc.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_AåŸºç¡€_9.Javaæ–¹æ³•é‡è½½å’Œé‡å†™ä¹‹é—´çš„åŒºåˆ«.html.546de22e.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_é¢è¯•é¢˜_8.Javaé¢å‘å¯¹è±¡å’Œé¢å‘è¿‡ç¨‹ç¼–ç¨‹çš„åŒºåˆ«.html.64e63a49.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_é¢è¯•é¢˜_9.Javaæ–¹æ³•é‡è½½å’Œé‡å†™ä¹‹é—´çš„åŒºåˆ«.html.40d36ab9.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Java_ä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDIPï¼‰.html.a499a2c3.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_MySQL_MySQLé»‘é©¬23.html.ab3faf7e.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2023_08å¹¶å‘ç¼–ç¨‹_02å¹¶å‘å®‰å…¨_2.synchronizedå…³é”®å­—çš„åº•å±‚åŸç†-è¿›é˜¶.html.3e7c5321.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_AåŸºç¡€_11.Java8æ–°ç‰¹æ€§.html.23f9776d.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_é¢è¯•é¢˜_11.Java8æ–°ç‰¹æ€§.html.a98b11c9.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Java_AQSï¼ˆAbstractQueuedSynchronizerï¼‰è¯¦è§£.html.c8aae121.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_184.éƒ¨é—¨å·¥èµ„æœ€é«˜çš„å‘˜å·¥.html.dd9695ab.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_éšç¬”_CTEå…¨é¢è§£æd.html.6312a968.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_å®ç”¨_Nacos_5.Nacoså¤šèŠ‚ç‚¹éƒ¨ç½².html.8456cb97.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_å®ç”¨_ES_10.åˆ†é¡µ.html.cedf9def.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Java_æœ€å°‘çŸ¥è¯†åŸåˆ™ï¼ˆLoDï¼‰.html.4423383c.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2023_08å¹¶å‘ç¼–ç¨‹_02å¹¶å‘å®‰å…¨_1.è®²ä¸€ä¸‹synchronizedå…³é”®å­—çš„åº•å±‚åŸç†.html.bdd0f6cf.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_1. JVM æ¶æ„ä¸ç±»åŠ è½½_1.2ç±»åŠ è½½æœºåˆ¶è¯¦è§£.html.ede4775f.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_4.ç³»ç»Ÿä¸è¿›ç¨‹ç®¡ç†_initå‘½ä»¤è¯¦è§£.html.f7dcea5f.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_4.ç³»ç»Ÿä¸è¿›ç¨‹ç®¡ç†_æŸ¥çœ‹ç³»ç»Ÿé…ç½®.html.71500e4a.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_JVM_åŒäº²å§”æ´¾æ¨¡å‹.html.5cdef243.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_é«˜çº§_Seata_å››ç§åˆ†å¸ƒå¼äº‹åŠ¡æ¨¡å¼.html.d9994c2d.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_2.å†…å­˜ç»“æ„ä¸å¹¶å‘å†…å­˜æ¨¡å‹_2.2Javaå†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰ä¸happens-before åŸåˆ™.html.08204e52.js" as="script"><link rel="prefetch" href="/blog/assets/js/Bug_mavenåˆ·æ–°æ—¶è¯­è¨€åŸºæœ¬é‡ç½®é—®é¢˜.html.51d7a73b.js" as="script"><link rel="prefetch" href="/blog/assets/js/MQ_RabbitMQ_ä»€ä¹ˆæ˜¯RabbitMQ.html.6e3d2053.js" as="script"><link rel="prefetch" href="/blog/assets/js/Mybatis_Mybatis_æ‰¹é‡æ’å…¥æ–¹å¼.html.2607328c.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_å®ç”¨_MQ_å®‰è£…_RabbitMQéƒ¨ç½²æŒ‡å—.html.c7bd6a71.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_585.2016å¹´çš„æŠ•èµ„.html.4e5b9db5.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_éšç¬”_FROM A_ B ä¸ JOIN çš„åŒºåˆ«.html.52e8265a.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Java_é”çš„çŠ¶æ€è¯¦è§£ï¼ˆåå‘é” â†’ è½»é‡çº§é” â†’ é‡é‡çº§é”ï¼‰.html.7679dc05.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2023_08å¹¶å‘ç¼–ç¨‹_02å¹¶å‘å®‰å…¨_5.è¯·è°ˆè°ˆä½ å¯¹ volatile çš„ç†è§£.html.9dc59c8d.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_ç®—æ³•_åŠ›æ‰£_å­—ç¬¦ä¸²_415.å­—ç¬¦ä¸²ç›¸åŠ .html.c4c9a9ec.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Java_volatile è¯¦è§£.html.65b9fad6.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2023_08å¹¶å‘ç¼–ç¨‹_01åŸºç¡€çŸ¥è¯†_6.çº¿ç¨‹åŒ…æ‹¬å“ªäº›çŠ¶æ€ï¼ŒçŠ¶æ€ä¹‹é—´æ˜¯å¦‚ä½•å˜åŒ–çš„.html.b0d2e096.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_4.ç³»ç»Ÿä¸è¿›ç¨‹ç®¡ç†_æŸ¥è¯¢å®‰è£…ä½ç½®.html.107ea7e4.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2023_08å¹¶å‘ç¼–ç¨‹_02å¹¶å‘å®‰å…¨_4.CASæ˜¯ä»€ä¹ˆï¼ˆå«ä¹è§‚æ‚²è§‚é”ï¼‰.html.8a33b038.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_175.ç»„åˆä¸¤ä¸ªè¡¨.html.58353c6c.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2023_08å¹¶å‘ç¼–ç¨‹_02å¹¶å‘å®‰å…¨_11.æ­»é”äº§ç”Ÿçš„æ¡ä»¶.html.bd8153ae.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_550.æ¸¸æˆç©æ³•åˆ†æ IV.html.cfdb921c.js" as="script"><link rel="prefetch" href="/blog/assets/js/Docker_éšç¬”_æŸ¥çœ‹é•œåƒæ¶æ„.html.c70c3e3a.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_AåŸºç¡€_15.Javaä¸­çš„hashCodeå’Œequalsæ–¹æ³•ä¹‹é—´æœ‰ä»€ä¹ˆå…³ç³».html.afc56aaf.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_é¢è¯•é¢˜_15.Javaä¸­çš„hashCodeå’Œequalsæ–¹æ³•ä¹‹é—´æœ‰ä»€ä¹ˆå…³ç³».html.a6a53f4a.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Java_ConcurrentHashMap çš„ put æ“ä½œä¸­ CAS å’Œ synchronized çš„ä½¿ç”¨.html.bdd99579.js" as="script"><link rel="prefetch" href="/blog/assets/js/Docker_éšç¬”_Dockerfile æ„å»º Spring Boot é•œåƒå¹¶è¿è¡ŒæœåŠ¡.html.2708f12b.js" as="script"><link rel="prefetch" href="/blog/assets/js/è£…æœº_ç”µè„‘è£…æœºè¿›é˜¶.html.803808fb.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_JVM_JVM ç±»åŠ è½½ä¸ç±»åˆå§‹åŒ–è¯¦è§£.html.03dffa37.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_02-SpringMVCç¬”è®°_éšç¬”_SpringMVCéšç¬”.html.4256e059.js" as="script"><link rel="prefetch" href="/blog/assets/js/27124.92624cc2.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_Redis_Redis æ˜¯ä»€ä¹ˆï¼Ÿæ¶æ„æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ.html.99c350f4.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_ç®—æ³•_åŠ›æ‰£_å­—ç¬¦ä¸²_784.å­—æ¯å¤§å°å†™å…¨æ’åˆ—.html.1504853d.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_577.å‘˜å·¥å¥–é‡‘.html.7f1f8deb.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Java_å†…å­˜å±éšœï¼ˆMemory Barrierï¼‰è¯¦è§£.html.c9362df2.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_åŸºç¡€_DCLè¯­å¥æ¼”ç¤º.html.24b350a0.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_619.åªå‡ºç°ä¸€æ¬¡çš„æœ€å¤§æ•°å­—.html.ceaa1710.js" as="script"><link rel="prefetch" href="/blog/assets/js/Spring_Junit_ç”Ÿå‘½å‘¨æœŸæ³¨è§£.html.b917412e.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MySQLå®‰å…¨é…ç½®_æ•°æ®åº“å®‰å…¨é…ç½®.html.3478a04c.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_æ ¸å¿ƒç±»åº“_System ç±»è¯¦è§£.html.e0fb77b9.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2023_08å¹¶å‘ç¼–ç¨‹_02å¹¶å‘å®‰å…¨_7.ä»€ä¹ˆæ˜¯å¯é‡å…¥é”.html.61649fca.js" as="script"><link rel="prefetch" href="/blog/assets/js/é¡¹ç›®å®æˆ˜_è°·ç²’å•†åŸ_æŠ¥é”™è®°å½•_äººäººåå°æ³¨å†Œè‡³Nacosç‰ˆæœ¬é—®é¢˜.html.4a5a3f6c.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringBoot_lombokæ³¨è§£_@RequiredArgsConstructor.html.0eaaeae8.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_177.ç¬¬Né«˜çš„è–ªæ°´.html.f914eef1.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Java_String vs StringBuffer vs StringBuilder.html.2ac590e9.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2023_08å¹¶å‘ç¼–ç¨‹_01åŸºç¡€çŸ¥è¯†_7.æ–°å»º T1ã€T2ã€T3 ä¸‰ä¸ªçº¿ç¨‹ï¼Œå¦‚ä½•ä¿è¯å®ƒä»¬æŒ‰é¡ºåºæ‰§è¡Œ.html.de7b954b.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_2.å†…å­˜ç»“æ„ä¸å¹¶å‘å†…å­˜æ¨¡å‹_2.3ç›´æ¥å†…å­˜DirectMemoryçš„ä½¿ç”¨ä¸é£é™©.html.027e23d1.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Java_å­—ç¬¦ä¸²æ‹¼æ¥ä¸æ€§èƒ½ä¼˜åŒ–.html.c7b266d5.js" as="script"><link rel="prefetch" href="/blog/assets/js/Docker_éšç¬”_é•œåƒå¯¼å…¥å¯¼å‡º.html.459efbc5.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å…¥é—¨åˆ°èµ·é£_31.å¤šçº¿ç¨‹_å¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯_1.Javaå†…å­˜æ¨¡å‹.html.a8e00246.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_å®ç”¨_ES_9.copy_toçš„ç”¨æ³•.html.ba1d3aa7.js" as="script"><link rel="prefetch" href="/blog/assets/js/Netty_API_API.html.aed69c9f.js" as="script"><link rel="prefetch" href="/blog/assets/js/Docker_ç§æœ‰äº‘_ç§æœ‰äº‘éƒ¨ç½²è½¯ä»¶.html.becd4e2a.js" as="script"><link rel="prefetch" href="/blog/assets/js/CICD_Jenkins é…ç½®å‰ç«¯å·¥ç¨‹ï¼Œè‡ªåŠ¨æ‹‰å–ä»£ç ã€æ‰“åŒ…ä¸ä¸Šä¼ äº‘æœåŠ¡å™¨.html.f0b7df24.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Java_CompletableFuture ä½¿ç”¨è¯¦è§£.html.7498c471.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Java_CopyOnWriteArrayList è¯¦è§£.html.7973ce47.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å…¥é—¨åˆ°èµ·é£_35.åå°„_åŠ¨æ€ä»£ç†_getMethods()å’ŒgetDeclaredMethods()çš„åŒºåˆ«.html.19f34463.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Java_å•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼‰.html.6b4297e8.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MySQLå®‰è£…æ–‡æ¡£-Linux_MySQL-Linux-yumåŠdockerå®‰è£….html.745e1748.js" as="script"><link rel="prefetch" href="/blog/assets/js/Docker_éšç¬”_dockerå®‰è£…jenkinsåŠé…ç½®.html.da7c1d8b.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Git_Merge VS Rebase.html.40788ac9.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_183.ä»ä¸è®¢è´­çš„å®¢æˆ·.html.e603ce93.js" as="script"><link rel="prefetch" href="/blog/assets/js/Spring_æ³¨è§£_@FeignClient.html.80615f37.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_626.æ¢åº§ä½.html.82ead62a.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MySQLå®‰è£…æ–‡æ¡£-Linux_MySQL-Linuxç¦»çº¿å®‰è£….html.2ef2bbaa.js" as="script"><link rel="prefetch" href="/blog/assets/js/Mybatis_Mybatis Plus_æ–°ç‰ˆåˆ†é¡µæ’ä»¶.html.6cf93fd3.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_3.GCåƒåœ¾å›æ”¶æœºåˆ¶_3.4 GC å‚æ•°è°ƒä¼˜å®æˆ˜ç­–ç•¥.html.d8183e84.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_4. JVMæ€§èƒ½è°ƒä¼˜ä¸ç›‘æ§å·¥å…·_4.3å¸¸è§å†…å­˜æ³„æ¼æ¨¡å¼ä¸å®šä½æŠ€å·§.html.47b2516c.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å…¥é—¨åˆ°èµ·é£_35.åå°„_åŠ¨æ€ä»£ç†_getDeclaredField()å’ŒgetField()åŒºåˆ«.html.a09b9582.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Java_ä¸ºä»€ä¹ˆ ArrayList ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„.html.eea72b5b.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Java_ConcurrentHashMap è¯¦è§£.html.82b7b57b.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å…¥é—¨åˆ°èµ·é£_31.å¤šçº¿ç¨‹_å¤šçº¿ç¨‹æ€»ç»“.html.c759fde8.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_2.å†…å­˜ç»“æ„ä¸å¹¶å‘å†…å­˜æ¨¡å‹_2.1JVMå†…å­˜ç»“æ„è¯¦è§£ï¼ˆå †ã€æ ˆã€æ–¹æ³•åŒºç­‰ï¼‰.html.96804b02.js" as="script"><link rel="prefetch" href="/blog/assets/js/Docker_éšç¬”_Dockerå®¹å™¨ä¸å®¿ä¸»æœºæ—¶é—´åŒæ­¥.html.3b0590fa.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_ç®—æ³•_åŠ›æ‰£_å­—ç¬¦ä¸²_541.åè½¬å­—ç¬¦ä¸² II.html.9ded453a.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_176.ç¬¬äºŒé«˜çš„è–ªæ°´.html.0bfe54d2.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_602.å¥½å‹ç”³è¯· II ï¼šè°æœ‰æœ€å¤šçš„å¥½å‹.html.1261e7c6.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_180.è¿ç»­å‡ºç°çš„æ•°å­—.html.624a128e.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_620.æœ‰è¶£çš„ç”µå½±.html.23782b6c.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MySQLå®‰å…¨é…ç½®_æ•°æ®åº“éš”ç¦»çº§åˆ«.html.95b0e396.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_9.ç£ç›˜ç®¡ç†ä¸å­˜å‚¨_ç¡¬ç›˜æŒ‚è½½.html.c89f7fef.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MySQLæ•…éšœä¿®å¤_Navicatè¿æ¥mysqlæŠ¥é”™.html.596df1ac.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Java_PriorityQueue.html.47e4622d.js" as="script"><link rel="prefetch" href="/blog/assets/js/VCS_Git_æœ¬åœ°é¡¹ç›®æ¨é€è‡³è¿œç¨‹åº“.html.c069015f.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_cpu loadè¿‡é«˜é—®é¢˜.html.57d36fe3.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_1. JVM æ¶æ„ä¸ç±»åŠ è½½_1.1æ¶æ„ç»„æˆä¸æ‰§è¡Œæµç¨‹.html.caec0c39.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_01-Springç¬”è®°_AOP_æ—¥å¿—åˆ‡é¢æ’é™¤è·¯å¾„.html.407aa222.js" as="script"><link rel="prefetch" href="/blog/assets/js/Netty_é‡Šæ”¾ByteBuf.html.d15dc7ac.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2023_08å¹¶å‘ç¼–ç¨‹_02å¹¶å‘å®‰å…¨_8.ä»€ä¹ˆæ˜¯è‡ªæ—‹é”.html.e091e46c.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_570.è‡³å°‘æœ‰5åç›´æ¥ä¸‹å±çš„ç»ç†.html.6146537e.js" as="script"><link rel="prefetch" href="/blog/assets/js/Spring_æ³¨è§£_æ³¨è§£@RequestMappingã€@PostMappingã€@GetMapping.html.1fcf37fc.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_é«˜çº§_Jmeter_1.MACå®‰è£…JMeter.html.371361c1.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Java_hashCode() ä¸ equals() çš„å…³ç³».html.37e1996c.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_595.å¤§çš„å›½å®¶.html.3ecb4f75.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_å®ç”¨_ES_7.åˆ›å»ºç´¢å¼•åº“.html.30c0002d.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_196.åˆ é™¤é‡å¤çš„ç”µå­é‚®ç®±.html.c8b4e803.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_197.ä¸Šå‡çš„æ¸©åº¦.html.aa8fb619.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_é«˜çº§_Seata_seata1.4.2å‡çº§2.0.0æ³¨æ„ç‚¹.html.1bedbbe6.js" as="script"><link rel="prefetch" href="/blog/assets/js/Docker_ç§æœ‰äº‘_å‰åç«¯åˆ†ç¦»åšå®¢é¡¹ç›®.html.5fb906a3.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_3.GCåƒåœ¾å›æ”¶æœºåˆ¶_3.3 GC æ—¥å¿—å‚æ•°è¯¦è§£ä¸æ¡ˆä¾‹åˆ†æ.html.cd9074de.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_5.æ€§èƒ½è¯Šæ–­ä¸è¿ç»´å·¥å…·æ¨è_5.1JDK å‘½ä»¤è¡Œå·¥å…·å…¨æ™¯å›¾ä¸å…¸å‹ç”¨é€”.html.0d2dcf05.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_æ¶æ„_å­¦ä¹ è·¯çº¿.html.3609357c.js" as="script"><link rel="prefetch" href="/blog/assets/js/MQ_Kafka_å‘é€æ¥æ”¶demo.html.c7fbf715.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_3.GCåƒåœ¾å›æ”¶æœºåˆ¶_3.2 CMSã€G1ã€ZGCã€Shenandoah å¯¹æ¯”.html.449a16d4.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_586.è®¢å•æœ€å¤šçš„å®¢æˆ·.html.7fd101a7.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_13.æœåŠ¡ä¸è‡ªåŠ¨åŒ–ç®¡ç†_systemctl.html.cae58440.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_AåŸºç¡€_14.Java ä¸­ hashCode_equals æ–¹æ³•å’Œ__ æ“ä½œç¬¦.html.1db60aff.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_é¢è¯•é¢˜_14.Java ä¸­ hashCode_equals æ–¹æ³•å’Œ__ æ“ä½œç¬¦.html.02289754.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_584.å¯»æ‰¾ç”¨æˆ·æ¨èäºº.html.6bba7fed.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_178.åˆ†æ•°æ’å.html.a6407e4b.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_596.è¶…è¿‡ 5 åå­¦ç”Ÿçš„è¯¾.html.379fa891.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_3.GCåƒåœ¾å›æ”¶æœºåˆ¶_3.1 Java åƒåœ¾å›æ”¶ç®—æ³•ä¸åˆ†ä»£æœºåˆ¶.html.40528f7e.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_511.æ¸¸æˆç©æ³•åˆ†æ I.html.ad4d27c8.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_GCç±»å‹.html.956efd3c.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_01-Springç¬”è®°_éšç¬”_Springæ³¨è§£.html.b05cc95b.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_å®ç”¨_ES_1.ä»€ä¹ˆæ˜¯ES.html.1412b54e.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_181.è¶…è¿‡ç»ç†æ”¶å…¥çš„å‘˜å·¥.html.0ad796c0.js" as="script"><link rel="prefetch" href="/blog/assets/js/81434.b756e60f.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_610.åˆ¤æ–­ä¸‰è§’å½¢.html.214e3071.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_4. JVMæ€§èƒ½è°ƒä¼˜ä¸ç›‘æ§å·¥å…·_4.2å¦‚ä½•åˆ†æ Java å †è½¬å‚¨æ–‡ä»¶ï¼ˆhprofï¼‰.html.fffe2a55.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_OOM.html.652cb72c.js" as="script"><link rel="prefetch" href="/blog/assets/js/Le Penseur_åšä¸€ä¸ªå†…æ ¸ç¨³å®šçš„äºº.html.71bd9c2a.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MySQLå®‰å…¨é…ç½®_MySQLæ•°æ®åº“æˆæƒç®¡ç†.html.478d525f.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Java_Javaæ³¨è§£åŸç†.html.57953bb9.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_é¢è¯•é¢˜_4.Javaçš„ä¼˜åŠ¿.html.e6a40bc6.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_AåŸºç¡€_4.Javaçš„ä¼˜åŠ¿.html.ad171d14.js" as="script"><link rel="prefetch" href="/blog/assets/js/Bug_Java_InaccessibleObjectException.html.5219e853.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_éšç¬”_Java ä¸­å¼•ç”¨ç±»å‹åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ–¹å¼.html.281e4654.js" as="script"><link rel="prefetch" href="/blog/assets/js/Le Penseur_ç«‹ä½“çš„äººè€Œä¸æ˜¯å¹³é¢çš„äºº.html.9ef0e04e.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MyCatå®‰è£…æ–‡æ¡£_MyCatå®‰è£…æ–‡æ¡£.html.d492abe5.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_ç®—æ³•_åŠ›æ‰£_å­—ç¬¦ä¸²_344.åè½¬å­—ç¬¦ä¸².html.3c3c67c7.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•è®°å½•_ä¸­ç”µé‡‘ä¿¡.html.b5492ae1.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_index.html.f7b9099b.js" as="script"><link rel="prefetch" href="/blog/assets/js/Netty_å…³é—­äº‹ä»¶å¾ªç¯ç»„.html.f766844e.js" as="script"><link rel="prefetch" href="/blog/assets/js/81316.d360a347.js" as="script"><link rel="prefetch" href="/blog/assets/js/Netty_æ ¸å¿ƒæ¦‚å¿µç†è§£.html.6718f95f.js" as="script"><link rel="prefetch" href="/blog/assets/js/42275.93cd7f21.js" as="script"><link rel="prefetch" href="/blog/assets/js/Docker_éšç¬”_dockerå®‰è£…è½¯ä»¶.html.cc7f7df0.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_OS_ç”¨æˆ·æ€ä¸å†…æ ¸æ€åˆ‡æ¢è¯¦è§£.html.5018ad12.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_2.æ–‡ä»¶ç³»ç»Ÿ_è½¯ç¡¬é“¾æ¥.html.36ad5eae.js" as="script"><link rel="prefetch" href="/blog/assets/js/CICD_Jenkins é…ç½®åç«¯ï¼šè‡ªåŠ¨æ„å»º Docker é•œåƒã€è¿è¡Œå®¹å™¨æœåŠ¡.html.77b0effa.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_JVM_åƒåœ¾å›æ”¶å™¨ CMS ä¸ G1 çš„åŒºåˆ«è¯¦è§£.html.e8e23282.js" as="script"><link rel="prefetch" href="/blog/assets/js/21317.0c91ade5.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_AåŸºç¡€_10.Javaå†…éƒ¨ç±»åŠä½œç”¨.html.d0e13488.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_é¢è¯•é¢˜_10.Javaå†…éƒ¨ç±»åŠä½œç”¨.html.2d106f27.js" as="script"><link rel="prefetch" href="/blog/assets/js/26873.343cbf8d.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_6.ç½‘ç»œé…ç½®ä¸ç®¡ç†_å…³é—­ç«¯å£å ç”¨è¿›ç¨‹.html.3cf08e6a.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_å®ç”¨_Nacos_3.ç½‘å…³é…ç½®.html.01ed9c33.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_6. æœåŠ¡å™¨ä¸å®¹å™¨çº¿ç¨‹æ¨¡å‹è°ƒä¼˜_6.1Tomcat çº¿ç¨‹æ¨¡å‹è¯¦è§£ä¸è°ƒä¼˜æŒ‡å—.html.0b770676.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_AåŸºç¡€_12.JDKå’ŒJREåŒºåˆ«.html.2b3e129d.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_é¢è¯•é¢˜_12.JDKå’ŒJREåŒºåˆ«.html.58f30852.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_5.æ€§èƒ½è¯Šæ–­ä¸è¿ç»´å·¥å…·æ¨è_5.3Arthas ä½¿ç”¨æŒ‡å—åŠå¸¸ç”¨å‘½ä»¤è§£æ.html.3a105f07.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Spring_Spring ä¸‰çº§ç¼“å­˜è§£å†³å¾ªç¯ä¾èµ–è¯¦è§£.html.1465d647.js" as="script"><link rel="prefetch" href="/blog/assets/js/ç½‘ç»œ_L2TPå’ŒIPsecåè®®å¸¸è§è½¯ä»¶å’Œå·¥å…·.html.91cbb5ae.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MySQLä¼˜åŒ–_unionå’ŒunionAll.html.9c20b2a0.js" as="script"><link rel="prefetch" href="/blog/assets/js/Docker_éšç¬”_pull.html.44394d97.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_çƒ­ç‚¹é¢è¯•é¢˜_çƒ­ç‚¹é¢è¯•é¢˜.html.bbf12268.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_1.å®‰è£…ä¸é…ç½®_V2rayå®‰è£….html.8a275489.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_182.æŸ¥æ‰¾é‡å¤çš„ç”µå­é‚®ç®±.html.cd97846b.js" as="script"><link rel="prefetch" href="/blog/assets/js/Spring_SpringBootæ— æ•°æ®æºå¯åŠ¨.html.e2d9a0c8.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_4.ç³»ç»Ÿä¸è¿›ç¨‹ç®¡ç†_Ubuntuå‘½ä»¤è¡Œå›¾å½¢åŒ–ç•Œé¢åˆ‡æ¢.html.7f6331d5.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å·¥å…·ç±»_BeanUtil.html.21b8dfab.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_é«˜çº§_Jmeter_2.Jmeterå¿«é€Ÿå…¥é—¨.html.ada282d8.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MySQLå®‰è£…æ–‡æ¡£-Windows_MySQLå®‰è£….html.f4180953.js" as="script"><link rel="prefetch" href="/blog/assets/js/Mybatis_Mybatis_é€»è¾‘åˆ é™¤.html.b503f3ed.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_JVM_åƒåœ¾å›æ”¶ç®—æ³•å“ªäº›é˜¶æ®µä¼šstop the world.html.6407dff3.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Java_Java_å¤šæ€_è®¾è®¡æ¨¡å¼.html.24af44e4.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_5.æ€§èƒ½è¯Šæ–­ä¸è¿ç»´å·¥å…·æ¨è_5.2ä½¿ç”¨ Java Mission Controlï¼ˆJMCï¼‰è¿›è¡Œæ€§èƒ½åˆ†æ.html.5bd378f4.js" as="script"><link rel="prefetch" href="/blog/assets/js/5663.892fda56.js" as="script"><link rel="prefetch" href="/blog/assets/js/è®¾è®¡æ¨¡å¼_è®¾è®¡æ¨¡å¼.html.d6fbc67a.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_10. JVMé¢è¯•é«˜é¢‘é—®ç­”_10.1JVMé¢è¯•é«˜é¢‘é—®ç­”æ±‡æ€».html.91dadb49.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Linux_Linux çš„è½¯é“¾æ¥ä¸ç¡¬é“¾æ¥.html.99b91d68.js" as="script"><link rel="prefetch" href="/blog/assets/js/Netty_API_ExecutorService.html.7b20dfc2.js" as="script"><link rel="prefetch" href="/blog/assets/js/é¡¹ç›®å®æˆ˜_è°·ç²’å•†åŸ_å…³é—­eslintæ£€æŸ¥.html.0edbe5eb.js" as="script"><link rel="prefetch" href="/blog/assets/js/è£…æœº_N1ç›’å­_N1ç›’å­é…ç½®AdGuardåŠpasswall.html.810d8d98.js" as="script"><link rel="prefetch" href="/blog/assets/js/VCS_Git_åˆ é™¤æœ€è¿‘ä¸€æ¬¡æ¨é€.html.b83830e3.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_03-Mavené«˜çº§ç¬”è®°_éšç¬”_pomä¸­çš„relativePath.html.9a93f81b.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å…¥é—¨åˆ°èµ·é£_15.é¢å‘å¯¹è±¡è¿›é˜¶ï¼ˆæŠ½è±¡ç±»_æ¥å£_å†…éƒ¨ç±»ï¼‰_è¯¾å ‚ç¬”è®°.html.07d99c09.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2023_08å¹¶å‘ç¼–ç¨‹_02å¹¶å‘å®‰å…¨_12.èŠä¸€ä¸‹ConcurrentHashMap .html.f5f71e9f.js" as="script"><link rel="prefetch" href="/blog/assets/js/ç½‘ç»œ_L2TPIPsec.html.a6aa5fbf.js" as="script"><link rel="prefetch" href="/blog/assets/js/VCS_Git_å¿½ç•¥ideaæ–‡ä»¶å¤¹.html.0be2f29e.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_è¿›é˜¶_1.ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‡ºç°è¯»å–è®°å½•çš„äº‹åŠ¡idæ¯”åˆ›å»ºreadviewçš„äº‹åŠ¡idå¤§.html.b7777e9a.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2023_08å¹¶å‘ç¼–ç¨‹_02å¹¶å‘å®‰å…¨_13.å¯¼è‡´å¹¶å‘ç¨‹åºå‡ºç°é—®é¢˜çš„æ ¹æœ¬åŸå› æ˜¯ä»€ä¹ˆ.html.f6bb777e.js" as="script"><link rel="prefetch" href="/blog/assets/js/Spring_æ³¨è§£_@ResponseBody.html.4093a3b2.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_åŸºç¡€_MySQLæ•°æ®ç±»å‹.html.c7569f89.js" as="script"><link rel="prefetch" href="/blog/assets/js/21901.42b8e43b.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_7.æ–‡ä»¶ä¸ç›®å½•ç®¡ç†_dos2unixæ¢è¡Œç¬¦æ¸…ç†.html.97757e00.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2023_08å¹¶å‘ç¼–ç¨‹_02å¹¶å‘å®‰å…¨_9.ReentrantLockçš„å®ç°åŸç†.html.06906a93.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_7. JVMè°ƒä¼˜å®æˆ˜æ€»ç»“ä¸æ¡ˆä¾‹_7.1JVM è°ƒä¼˜å®æˆ˜æ€»ç»“ä¸æ¡ˆä¾‹åˆ†æ.html.195cfe23.js" as="script"><link rel="prefetch" href="/blog/assets/js/é¡¹ç›®å®æˆ˜_è°·ç²’å•†åŸ_æŠ¥é”™è®°å½•_äººäººå‰ç«¯å¯åŠ¨å¤±è´¥.html.1d13688c.js" as="script"><link rel="prefetch" href="/blog/assets/js/Docker_éšç¬”_ç‰¹æƒæ¨¡å¼.html.e7fde61a.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Java_é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™ï¼ˆSOLID åŠç›¸å…³ï¼‰.html.e6eef6fc.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_3.ç”¨æˆ·ä¸ç»„ç®¡ç†_å•ç”¨æˆ·æ¨¡å¼é‡ç½®å¯†ç .html.61e5cb66.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_AåŸºç¡€_7.Javaä¸æ”¯æŒå¤šé‡ç»§æ‰¿.html.bad11a11.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_é¢è¯•é¢˜_7.Javaä¸æ”¯æŒå¤šé‡ç»§æ‰¿.html.1b665a7f.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MySQLå¸è½½æ–‡æ¡£-Linux_MySQLå¸è½½-Linux.html.ec26d63a.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_2.1.å¹´è½»ä»£è€å¹´ä»£.html.15a43a14.js" as="script"><link rel="prefetch" href="/blog/assets/js/Nginx_413 (Request Entity Too Large).html.aad1abc6.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_9. é«˜çº§è°ƒè¯•æŠ€å·§ä¸å·¥å…·é“¾æ•´åˆ_9.1JVMé«˜çº§è°ƒè¯•æŠ€å·§ä¸å·¥å…·é“¾æ•´åˆ.html.7311f9bb.js" as="script"><link rel="prefetch" href="/blog/assets/js/Spring_æ³¨è§£_@JsonFormat.html.4bf5956d.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2023_08å¹¶å‘ç¼–ç¨‹_02å¹¶å‘å®‰å…¨_6.ä»€ä¹ˆæ˜¯AQS.html.545675c5.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_AåŸºç¡€_1.åºåˆ—åŒ–ä¸ååºåˆ—åŒ–.html.30fea254.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_é¢è¯•é¢˜_1.åºåˆ—åŒ–ä¸ååºåˆ—åŒ–.html.3ef46f5a.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_8. JVMé«˜çº§æ€§èƒ½åˆ†æå·¥å…·_8.2JVM æ€§èƒ½è°ƒä¼˜å®æˆ˜æ¡ˆä¾‹è§£æ.html.46fc268e.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_è¿ç»´_MyCaté…ç½®ä¿¡æ¯å«ä¹‰.html.fb2d77af.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_index.html.bd8c4b6b.js" as="script"><link rel="prefetch" href="/blog/assets/js/è£…æœº_ç”µè„‘é…ç½®.html.e20a7999.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MySQLæ•…éšœä¿®å¤_mysql-uroot-pæŠ¥é”™.html.45625657.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å…¥é—¨åˆ°èµ·é£_35.åå°„_åŠ¨æ€ä»£ç†_åå°„_åŠ¨æ€ä»£ç†æ€»ç»“.html.5fc80daa.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•è®°å½•_é¢è¯•é¢˜è®°å½•.html.6e36e472.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_2.å†…å­˜ç»“æ„_2.2è™šæ‹Ÿæœºæ ˆ.html.330e8898.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_8. JVMé«˜çº§æ€§èƒ½åˆ†æå·¥å…·_8.1JVM é«˜çº§æ€§èƒ½åˆ†æå·¥å…·ä»‹ç».html.ab0c42fd.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_Redis_2.å®æˆ˜_pending-list.html.dbc15200.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MySQLå¸è½½æ–‡æ¡£-Windows_MySQLå¸è½½æ–‡æ¡£-Windowsç‰ˆ.html.dc131cc6.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å…¥é—¨åˆ°èµ·é£_35.åå°„_åŠ¨æ€ä»£ç†_å­—èŠ‚ç å¯¹è±¡.html.d5b99b51.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_1.å®‰è£…ä¸é…ç½®_ä¸»è¦æ¶æ„.html.40887dfa.js" as="script"><link rel="prefetch" href="/blog/assets/js/Docker_éšç¬”_å®‰è£…NocoDB.html.d8c45dea.js" as="script"><link rel="prefetch" href="/blog/assets/js/95292.1e1e16d5.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MySQLæ•…éšœä¿®å¤_caching_sha2_passwordæ— æ³•åŠ è½½.html.d4ea7486.js" as="script"><link rel="prefetch" href="/blog/assets/js/ç½‘ç»œ_åˆ·æ–°dnsç¼“å­˜.html.d7814229.js" as="script"><link rel="prefetch" href="/blog/assets/js/Mybatis_Mybatis Plus_åŠ¨æ€æ„å»ºæŸ¥è¯¢æ¡ä»¶.html.e782ca3f.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_Bä¸­ç­‰_1.Javaä¸­Stringã€StringBufferå’ŒStringBuilderçš„åŒºåˆ«.html.b7d4a667.js" as="script"><link rel="prefetch" href="/blog/assets/js/å‰ç«¯_node_nvmæ›´æ¢é•œåƒæº.html.b2acda58.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_AåŸºç¡€_2.ä¸å¯å˜ç±».html.1a08eb0d.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_é¢è¯•é¢˜_2.ä¸å¯å˜ç±».html.ea15d156.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_AåŸºç¡€_13.ä½ ä½¿ç”¨è¿‡å“ªäº›JDKå·¥å…·.html.7d2bf1a5.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_é¢è¯•é¢˜_13.ä½ ä½¿ç”¨è¿‡å“ªäº›JDKå·¥å…·.html.36b12236.js" as="script"><link rel="prefetch" href="/blog/assets/js/Mybatis_Mybatis Plus_QueryWrapper vs LambdaQueryWrapper.html.d59046cb.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_å®ç”¨_ES_3.åŸºæœ¬æ¦‚å¿µ.html.8e3f9f40.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_å®ç”¨_Nacos_0.å®‰è£…ä¸å¯åŠ¨.html.89bd120e.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_å·¥å…·_é—ªå›-flashback.html.8e629adf.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2023_08å¹¶å‘ç¼–ç¨‹_01åŸºç¡€çŸ¥è¯†_1.çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«.html.9d30aa5e.js" as="script"><link rel="prefetch" href="/blog/assets/js/Mybatis_Mybatis Plus_queryWrapperè‡ªå®šä¹‰SQL.html.0ea78bf0.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_AåŸºç¡€_3.Exceptionå’ŒErrorçš„åŒºåˆ«.html.b2ce431c.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_é¢è¯•é¢˜_3.Exceptionå’ŒErrorçš„åŒºåˆ«.html.94872ed7.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2023_08å¹¶å‘ç¼–ç¨‹_01åŸºç¡€çŸ¥è¯†_2.å¹¶è¡Œå’Œå¹¶å‘æœ‰ä»€ä¹ˆåŒºåˆ«.html.1dfe94f5.js" as="script"><link rel="prefetch" href="/blog/assets/js/Spring_Spring5.xæ¦‚è¿°.html.345fb779.js" as="script"><link rel="prefetch" href="/blog/assets/js/Mybatis_Mybatis Plus_where 1_1.html.012f691b.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_å®ç”¨_Nacos_1.æ³¨å†Œä¸­å¿ƒ.html.b72894ad.js" as="script"><link rel="prefetch" href="/blog/assets/js/Python_åŸºç¡€_0.å‰è¨€.html.9a9a3601.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_2.å†…å­˜ç»“æ„_2.3æœ¬åœ°æ–¹æ³•æ ˆ.html.11cdb8eb.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2023_08å¹¶å‘ç¼–ç¨‹_02å¹¶å‘å®‰å…¨_3.ä½ è°ˆè°ˆ JMMï¼ˆJava å†…å­˜æ¨¡å‹ï¼‰.html.42998293.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_2.å†…å­˜ç»“æ„_2.1ç¨‹åºè®¡æ•°å™¨.html.f39d01b8.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_4.ç³»ç»Ÿä¸è¿›ç¨‹ç®¡ç†_daemon-reload.html.4e1ce107.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MyCat-Webå®‰è£…æ–‡æ¡£_MyCat-webå®‰è£…æ–‡æ¡£.html.a9fa5e0a.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_Bä¸­ç­‰_2.Javaä¸­volatileå…³é”®å­—çš„ä½œç”¨.html.1ea7c250.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_åŸºç¡€_äº‹åŠ¡ACIDåŸåˆ™.html.838e3d05.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2023_08å¹¶å‘ç¼–ç¨‹_02å¹¶å‘å®‰å…¨_10.synchronizedå’ŒLockæœ‰ä»€ä¹ˆåŒºåˆ«.html.9ed2b29f.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2023_08å¹¶å‘ç¼–ç¨‹_02å¹¶å‘å®‰å…¨_12.å¦‚ä½•è¿›è¡Œæ­»é”åˆ¤æ–­.html.87e0947e.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_é«˜çº§_index.html.c9257c28.js" as="script"><link rel="prefetch" href="/blog/assets/js/14903.a286806b.js" as="script"><link rel="prefetch" href="/blog/assets/js/å‰ç«¯_node_npmæ›´æ¢é•œåƒæº.html.03210df9.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å”¯æ‰‹ç†Ÿå°”_equalsä¸ç­‰å·.html.592e5bc5.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_4.ç³»ç»Ÿä¸è¿›ç¨‹ç®¡ç†_rc.local.html.73d0fb79.js" as="script"><link rel="prefetch" href="/blog/assets/js/é¡¹ç›®å®æˆ˜_è°·ç²’å•†åŸ_è·¨åŸŸ.html.b08f3c80.js" as="script"><link rel="prefetch" href="/blog/assets/js/42916.31234321.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_å®ç”¨_ES_5.åˆ†è¯å™¨.html.64dc7889.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_2.å†…å­˜ç»“æ„_2.4å †.html.30ac9f74.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_ç©ºå€¼å’Œnullå€¼.html.28e8b0bd.js" as="script"><link rel="prefetch" href="/blog/assets/js/42240.ee1637d8.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_index.html.56171422.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_Redis_è§†é¢‘æ•™ç¨‹.html.a1bcc56e.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_2.å†…å­˜ç»“æ„.html.777fb4bd.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_å®ç”¨_Nacos_4.NacosæŒ‡å®šæœåŠ¡ç«¯IP.html.5373f033.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_15.æ•…éšœæ’é™¤ä¸ä¿®å¤_reset-failed.html.7a2d0fbb.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_02-SpringMVCç¬”è®°_éšç¬”_SpringMVCæ³¨è§£.html.57c8f6fa.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2023_08å¹¶å‘ç¼–ç¨‹_01åŸºç¡€çŸ¥è¯†_4.runnable å’Œ callable æœ‰ä»€ä¹ˆåŒºåˆ«.html.ab25491e.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_å®ç”¨_ES_6.mappingå¸¸è§å±æ€§.html.fde8b1be.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_1.å­¦ä¹ JVMæœ‰ä»€ä¹ˆç”¨.html.27f50e12.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_é«˜çº§_Seata_æ¨¡å¼æ€»ç»“.html.a9721858.js" as="script"><link rel="prefetch" href="/blog/assets/js/å­¦ä¹ è®°å½•.html.24dcc78e.js" as="script"><link rel="prefetch" href="/blog/assets/js/é¡¹ç›®å®æˆ˜_è°·ç²’å•†åŸ_æŠ¥é”™è®°å½•_å®šæ—¶ä»»åŠ¡å¯åŠ¨å¤±è´¥.html.3ee86467.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_è¿›é˜¶_1.ä¸ºä»€ä¹ˆInnoDBå­˜å‚¨å¼•æ“é€‰æ‹©ä½¿ç”¨B_treeç´¢å¼•ç»“æ„.html.43ed9dbb.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2023_08å¹¶å‘ç¼–ç¨‹_01åŸºç¡€çŸ¥è¯†_5.çº¿ç¨‹çš„ run()å’Œ start()æœ‰ä»€ä¹ˆåŒºåˆ«.html.ed36c1ac.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_å®ç”¨_ES_2.å€’æ’ç´¢å¼•.html.02a709ab.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_é«˜çº§_Sentinel_bug_windowsç‰ˆsentinelè¿è¡ŒæŠ¥é”™é—®é¢˜å¤„ç†Unable to make protected final java.lang.Class java.lang.ClassLoader.define.html.6a38fe2f.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_String_isNotEmptyå’ŒisNotBlank.html.369d75b1.js" as="script"><link rel="prefetch" href="/blog/assets/js/é¡¹ç›®å®æˆ˜_è°·ç²’å•†åŸ_æŠ¥é”™è®°å½•_SpringBootè¯»å–ValidationMessages.propertiesï¼Œä¸­æ–‡ä¹±ç .html.d56ccb83.js" as="script"><link rel="prefetch" href="/blog/assets/js/è£…æœº_é£ç‰›OSå¼€å…³å±å¹•.html.b7162650.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_é«˜çº§_Seata_TC_TM_RM.html.0d33a6b2.js" as="script"><link rel="prefetch" href="/blog/assets/js/é¡¹ç›®å®æˆ˜_è°·ç²’å•†åŸ_æŠ¥é”™è®°å½•_æ‰¾ä¸åˆ°ç¬¦å·.html.84883426.js" as="script"><link rel="prefetch" href="/blog/assets/js/Vue_index.html.e36c6823.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2023_08å¹¶å‘ç¼–ç¨‹_index.html.104ec642.js" as="script"><link rel="prefetch" href="/blog/assets/js/æ–‡ç« åˆ†ç±»åŠæ ‡ç­¾.html.412063db.js" as="script"><link rel="prefetch" href="/blog/assets/js/é¡¹ç›®å®æˆ˜_è°·ç²’å•†åŸ_æŠ¥é”™è®°å½•_æœåŠ¡åˆ—è¡¨ä¸ºç©º.html.b079278d.js" as="script"><link rel="prefetch" href="/blog/assets/js/è£…æœº_é£ç‰›OSåˆç›–ä¸ä¼‘çœ .html.cbb4d240.js" as="script"><link rel="prefetch" href="/blog/assets/js/é¡¹ç›®å®æˆ˜_è°·ç²’å•†åŸ_è§†é¢‘æ•™ç¨‹.html.8fcb633c.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_index.html.a6a34408.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_å®ç”¨_ES_è§†é¢‘æ•™ç¨‹.html.9940368b.js" as="script"><link rel="prefetch" href="/blog/assets/js/Netty_1.é»‘é©¬è§†é¢‘æ•™ç¨‹.html.32df691c.js" as="script"><link rel="prefetch" href="/blog/assets/js/index.html.101d22b8.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_é›·ä¸°é˜³Javaè§†é¢‘.html.624075ac.js" as="script"><link rel="prefetch" href="/blog/assets/js/Spring_æ³¨è§£_@JsonInclude.html.9d4f2583.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_index.html.607f9dac.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_é»‘é©¬JVM.html.e92ef57d.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å·¥å…·ç±»_Javaå¸¸ç”¨å·¥å…·åŒ….html.a39f2b2b.js" as="script"><link rel="prefetch" href="/blog/assets/js/40676.55bf3d3f.js" as="script"><link rel="prefetch" href="/blog/assets/js/53021.61752250.js" as="script"><link rel="prefetch" href="/blog/assets/js/è½¯ä»¶å·¥ç¨‹_UMLå›¾_UMLç±»å›¾ç»˜åˆ¶.html.98056d55.js" as="script"><link rel="prefetch" href="/blog/assets/js/Python_åŸºç¡€_video.html.1ba631ac.js" as="script"><link rel="prefetch" href="/blog/assets/js/Docker_éšç¬”_æŸ¥çœ‹æ•°æ®å·ç›®å½•.html.d6571100.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_AåŸºç¡€_18.æ¥å£å’ŒæŠ½è±¡ç±»æœ‰ä»€ä¹ˆåŒºåˆ«.html.a9f378e5.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_index.html.8e725f92.js" as="script"><link rel="prefetch" href="/blog/assets/js/é¡¹ç›®å®æˆ˜_è°·ç²’å•†åŸ_index.html.29ab8bbf.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å…¥é—¨åˆ°èµ·é£_15.é¢å‘å¯¹è±¡è¿›é˜¶ï¼ˆæŠ½è±¡ç±»_æ¥å£_å†…éƒ¨ç±»ï¼‰_index.html.22409c55.js" as="script"><link rel="prefetch" href="/blog/assets/js/73160.ebbe013a.js" as="script"><link rel="prefetch" href="/blog/assets/js/intro.html.2ec8ecc0.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_å®ç”¨_Nacos_index.html.c5ea9dce.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_6. æœåŠ¡å™¨ä¸å®¹å™¨çº¿ç¨‹æ¨¡å‹è°ƒä¼˜_index.html.eeefea13.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_9. é«˜çº§è°ƒè¯•æŠ€å·§ä¸å·¥å…·é“¾æ•´åˆ_index.html.91392b08.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringMVC_æ ¡éªŒ_index.html.8d05bbd5.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å…¥é—¨åˆ°èµ·é£_26.é›†åˆï¼ˆStreamæµ_æ–¹æ³•å¼•ç”¨ï¼‰_index.html.7931a7d2.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å…¥é—¨åˆ°èµ·é£_23.é›†åˆï¼ˆæ³›å‹_Set_æ•°æ®ç»“æ„)_index.html.efae9a6c.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_2.å†…å­˜ç»“æ„ä¸å¹¶å‘å†…å­˜æ¨¡å‹_index.html.d09156d1.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_5.æ€§èƒ½è¯Šæ–­ä¸è¿ç»´å·¥å…·æ¨è_index.html.cb0798d6.js" as="script"><link rel="prefetch" href="/blog/assets/js/68984.a201f555.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_7. JVMè°ƒä¼˜å®æˆ˜æ€»ç»“ä¸æ¡ˆä¾‹_index.html.56116338.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_4. JVMæ€§èƒ½è°ƒä¼˜ä¸ç›‘æ§å·¥å…·_index.html.44598787.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å…¥é—¨åˆ°èµ·é£_31.å¤šçº¿ç¨‹_å¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯_index.html.acc8b193.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_8. JVMé«˜çº§æ€§èƒ½åˆ†æå·¥å…·_index.html.371540c0.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å…¥é—¨åˆ°èµ·é£_31.å¤šçº¿ç¨‹_jucé¢å¤–æ‰©å±•èµ„æ–™_index.html.ee9fc9ed.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_åŒäº²å§”æ´¾æ¨¡å‹_index.html.bb881d5b.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_åå°„åŠ¨æ€ä»£ç†_index.html.ee455e69.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_springcloudå®ç”¨ç¯‡_index.html.b6246f19.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_springcloudé«˜çº§ç¯‡_index.html.b4483d98.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å…¥é—¨åˆ°èµ·é£_22.é›†åˆï¼ˆListé›†åˆï¼‰_index.html.852e2cbb.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_1. JVM æ¶æ„ä¸ç±»åŠ è½½_index.html.b4c74aa5.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_åˆ†å¸ƒå¼äº‹åŠ¡_index.html.6119a13f.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_åˆ‡ç‚¹è¡¨è¾¾å¼_index.html.83760b17.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_å‘½ä»¤è¡Œå·¥å…·_index.html.9c2cbe3e.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_å½©è‰²æ§åˆ¶å°_index.html.31a08bed.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_æ—¥å¿—åˆ†æ¨¡å—_index.html.35179680.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_æ¶ˆæ¯ä¸­é—´ä»¶_index.html.263d480e.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_å›æ”¶å™¨å¯¹æ¯”_index.html.3786242c.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_æ•°æ®åº“åŸç†_index.html.c2b98f74.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_10. JVMé¢è¯•é«˜é¢‘é—®ç­”_index.html.71f8e4c3.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_javaå†…å­˜æ¨¡å‹_index.html.e0697c76.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å…¥é—¨åˆ°èµ·é£_35.åå°„_åŠ¨æ€ä»£ç†_index.html.3623ae4b.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_spring-boot-é…ç½®_index.html.f10e4fe4.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_ä½¿ç”¨æŒ‡å—_index.html.671b66de.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_ä¾èµ–æ³¨å…¥_index.html.d5eb5c0c.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_åšå®¢ä¸“æ _index.html.dcb82f01.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_æ€§èƒ½ä¼˜åŒ–_index.html.174fda86.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_æ€§èƒ½åˆ†æ_index.html.a01f33a2.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_æ€§èƒ½æ’æŸ¥_index.html.da8b8bcb.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_æ—¥å¿—ç³»ç»Ÿ_index.html.c5d52826.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_æ¶ˆæ¯é˜Ÿåˆ—_index.html.c262e853.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_ç½‘ç»œç¼–ç¨‹_index.html.9fbff410.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_è¯Šæ–­å·¥å…·_index.html.058b28c3.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_è°ƒè¯•è¯Šæ–­_index.html.240d7a78.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_è¿ç»´å·¥å…·_index.html.e1b23343.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_é¢æ¸£é€†è¢­_index.html.ca360068.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_é¡¹ç›®å®æˆ˜_index.html.4c25dc84.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_java-mission-control_index.html.177b4357.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_ä¸€å‘½é€Ÿé€š_3.GCåƒåœ¾å›æ”¶æœºåˆ¶_index.html.22f156f1.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_å†…å­˜æ³„æ¼_index.html.e3bfbd08.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_æ•…éšœæ’æŸ¥_index.html.8e9d645c.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_æ€§èƒ½è°ƒä¼˜_index.html.c7352e80.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2023_08å¹¶å‘ç¼–ç¨‹_01åŸºç¡€çŸ¥è¯†_index.html.1f9b73df.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2023_08å¹¶å‘ç¼–ç¨‹_02å¹¶å‘å®‰å…¨_index.html.c02151fb.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_03-Javaå¹¶å‘ç¼–ç¨‹é¢è¯•é¢˜_index.html.bbcfb397.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_ä¸‰çº§ç¼“å­˜_index.html.3b783f0e.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_ä¾èµ–æ³¨å…¥_index.html.70b1c399.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_å†…å­˜æ³„æ¼_index.html.76dac890.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_å†…å­˜ç®¡ç†_index.html.c5924452.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_å†…å­˜ç»“æ„_index.html.5e3e3af4.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_å‚æ•°è°ƒä¼˜_index.html.47339369.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_åŸºç¡€çŸ¥è¯†_index.html.d6f0ee21.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_å®æˆ˜ç»éªŒ_index.html.fd35520a.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_å¸¸ç”¨å‘½ä»¤_index.html.d5da01cd.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_å¼‚æ­¥æ—¥å¿—_index.html.22c45607.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_å¾ªç¯ä¾èµ–_index.html.1ec11ce4.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_æ€§èƒ½ä¼˜åŒ–_index.html.5b112d2b.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_æ€§èƒ½åˆ†æ_index.html.f65c4e1e.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_æ€§èƒ½ç›‘æ§_index.html.4a3cb4a4.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_æ€§èƒ½è°ƒä¼˜_index.html.40fd640c.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_æ¥å£æ–‡æ¡£_index.html.a59fb9d7.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_æ¥å£ç¤ºä¾‹_index.html.750f9baa.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_æ•…éšœæ’æŸ¥_index.html.ee136a71.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_æ—¥å¿—åˆ‡é¢_index.html.a1d788b5.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_æœºåˆ¶è¯¦è§£_index.html.c9a68460.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_æ¡ˆä¾‹åˆ†æ_index.html.1a7b178f.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_ç‰ˆæœ¬æ§åˆ¶_index.html.7177b60c.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_ç³»ç»Ÿç›‘æ§_index.html.aab80388.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_ç½‘ç»œç¼–ç¨‹_index.html.34173ca6.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_è‡ªåŠ¨ç”Ÿæˆ_index.html.0a0a078f.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_è§¦å‘æ¡ä»¶_index.html.edbf7dd2.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_è¯¾å ‚éšç¬”_index.html.1dce966d.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_è°ƒä¼˜å®æˆ˜_index.html.b28719a3.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_è°ƒè¯•å·¥å…·_index.html.1e86d5f2.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_è°ƒè¯•æŠ€å·§_index.html.496a29d5.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_é…ç½®æ–‡ä»¶_index.html.d2cbe584.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_é˜…è¯»å®Œæ¯•_index.html.8d425f70.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_é¢æ¸£é€†è¢­_index.html.3e7757c7.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_é«˜çº§ç‰¹æ€§_index.html.f567c504.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_é«˜é¢‘é—®é¢˜_index.html.6a2c7b6b.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_å†…å­˜æ’æŸ¥_index.html.69a2d80d.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_åˆ†åº“åˆ†è¡¨_index.html.0e1428fe.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_å¤šçº§æ—¥å¿—_index.html.2fd85b7d.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_æ‰§è¡Œæµç¨‹_index.html.40078662.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_æ—¥å¿—å½’æ¡£_index.html.9497491d.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_æ„é€ å‡½æ•°_index.html.3c271695.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_ç›´æ¥å†…å­˜_index.html.91475e51.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_çº¿ç¨‹æ¨¡å‹_index.html.231dae3e.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_13.æœåŠ¡ä¸è‡ªåŠ¨åŒ–ç®¡ç†_index.html.9c87d522.js" as="script"><link rel="prefetch" href="/blog/assets/js/é¡¹ç›®å®æˆ˜_è°·ç²’å•†åŸ_æŠ¥é”™è®°å½•_index.html.70f7c181.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_08-æ•°æ®ç»“æ„é¢è¯•é¢˜_index.html.195976d5.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_æœåŠ¡å™¨_index.html.5995da34.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_é¢è¯•é¢˜_index.html.845f8417.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_ä¸­é—´ä»¶_index.html.97ec3efb.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_04-Javaè™šæ‹Ÿæœºé¢è¯•é¢˜_index.html.9821df56.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_javaåŸºç¡€_index.html.6ae7f865.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_æ•°æ®åº“_index.html.83e606c4.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_dockerå®‰è£…_index.html.8b93a24a.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_javaé«˜çº§_index.html.c878be91.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_mybatis-plus_index.html.c04e2de5.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_java8ç‰¹æ€§_index.html.275356c9.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_happens-before_index.html.65ed2ea4.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_stop-the-world_index.html.01b1690a.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_Redis_3.é«˜çº§_01-åˆ†å¸ƒå¼ç¼“å­˜_index.html.94233e6d.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_Redis_3.é«˜çº§_03-Redisæœ€ä½³å®è·µ_index.html.0f697d28.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_15.æ•…éšœæ’é™¤ä¸ä¿®å¤_index.html.e8992ef7.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_ä½è´¨é‡_index.html.79d8906a.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_åˆå§‹åŒ–_index.html.bc7fe59a.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_å †åˆ†æ_index.html.5c30e37b.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_å¤šçº¿ç¨‹_index.html.9117e7ac.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_å·¥å…·é“¾_index.html.bec5721f.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_æ–¹æ³•åŒº_index.html.efe49882.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_ç±»åŠ è½½_index.html.26bf24f2.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_è™šæ‹Ÿæœº_index.html.e51786c3.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_è¿æ¥æ± _index.html.fa2d3d68.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_å¯è§†åŒ–_index.html.54e87301.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_ç§æœ‰äº‘_index.html.d8414901.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_é¢è¯•é¢˜_index.html.e0348b12.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_é«˜è´¨é‡_index.html.23bd3270.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_gcæœºåˆ¶_index.html.761b9ddc.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_springcloud_index.html.43c30a9b.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_javaåŸºç¡€_index.html.f180dfb2.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_å¾®æœåŠ¡_index.html.130cbbc0.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_6.ç½‘ç»œé…ç½®ä¸ç®¡ç†_index.html.3e11fb6a.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_7.æ–‡ä»¶ä¸ç›®å½•ç®¡ç†_index.html.391a9e03.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_9.ç£ç›˜ç®¡ç†ä¸å­˜å‚¨_index.html.6a488e15.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_spring-boot_index.html.b3b456a1.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MySQLå¸è½½æ–‡æ¡£-Windows_index.html.6ed31eec.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MySQLå®‰è£…æ–‡æ¡£-Windows_index.html.d4ae3486.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_æ•°æ®ç»“æ„_index.html.2599effa.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_4.ç³»ç»Ÿä¸è¿›ç¨‹ç®¡ç†_index.html.4322bebf.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_middleware_index.html.9282224a.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_springboot_index.html.99adb94f.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_directmemory_index.html.121087f8.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_matåˆ†æ_index.html.f81ddca1.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_sqlä¼˜åŒ–_index.html.86be5054.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_yumå®‰è£…_index.html.1c491b07.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_01-JavaåŸºç¡€é¢è¯•é¢˜_index.html.1c0203ef.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MySQLå¸è½½æ–‡æ¡£-Linux_index.html.77099bd5.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MySQLå®‰è£…æ–‡æ¡£-Linux_index.html.20254fd7.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_02-Javaé›†åˆé¢è¯•é¢˜_index.html.e39faa3d.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_å®æˆ˜_index.html.992f8ceb.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_ç½‘ç»œ_index.html.0135c50b.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_è£…æœº_index.html.ee8a94bd.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_é¢è¯•_index.html.ca097731.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_é¡¹ç›®_index.html.e4746c05.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_gcæ—¥å¿—_index.html.87312dc2.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_gcè¯Šæ–­_index.html.d128e952.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_gcè°ƒä¼˜_index.html.06ec023d.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_gcé˜¶æ®µ_index.html.30749003.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_å·¥å…·_index.html.bd49473f.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_seåŸºç¡€_index.html.7e3cf171.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_index.html.e2b2991e.js" as="script"><link rel="prefetch" href="/blog/assets/js/Python_index.html.c8abaf0e.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_shenandoah_index.html.180796e7.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_Redis_3.é«˜çº§_02-å¤šçº§ç¼“å­˜_index.html.5fb4ff45.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_é«˜çº§_åˆ†å¸ƒå¼äº‹åŠ¡_index.html.c1c1dced.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MyCat-Webå®‰è£…æ–‡æ¡£_index.html.92b1f233.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_index.html.342dbd4c.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_markdown_index.html.162868dd.js" as="script"><link rel="prefetch" href="/blog/assets/js/é¡¹ç›®å®æˆ˜_è°·ç²’å•†åŸ_æ¿ä¹¦_index.html.b67917d1.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_8.Shellä¸è„šæœ¬ç¼–ç¨‹_index.html.ffe1c3a5.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å…¥é—¨åˆ°èµ·é£_31.å¤šçº¿ç¨‹_index.html.602d3354.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_3.ç”¨æˆ·ä¸ç»„ç®¡ç†_index.html.6da59a49.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_mybatis_index.html.4894bb25.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_äº†è§£_index.html.ecd9648d.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_äº‹åŠ¡_index.html.0044a2c4.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_ä½¿ç”¨_index.html.5131d3b6.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_å…¥é—¨_index.html.eed26a51.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_å¸è½½_index.html.b1697353.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_åå°„_index.html.32f1407b.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_å‘½ä»¤_index.html.69b1e459.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_å‘ç‹_index.html.9cce34bb.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_åŸºç¡€_index.html.eb3a8149.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_å®‰å…¨_index.html.bfcd235b.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_å®‰è£…_index.html.e2d6e1a3.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_å®¹å™¨_index.html.2255a6fc.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_å¿…èƒŒ_index.html.04b1ce12.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_æ€»ç»“_index.html.29b9f11f.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_æ’æŸ¥_index.html.0daa08f8.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_æ’ä»¶_index.html.d014632d.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_æ•™ç¨‹_index.html.f19541da.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_æ¶æ„_index.html.9fc77fec.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_çˆ¬è™«_index.html.2f540f9c.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_ç›®å½•_index.html.1896117b.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_ç¬”è®°_index.html.47e511bd.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_ç®€å•_index.html.3aefd89b.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_ç»éªŒ_index.html.499f6253.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_ç½‘ç»œ_index.html.7f3a9817.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_è£…æœº_index.html.8bfd3100.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_è¯Šæ–­_index.html.2dad8eee.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_è¸©å‘_index.html.44ea6bd5.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_è¿ç»´_index.html.76037aa9.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_é‡ç‚¹_index.html.e49eed21.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_é•œåƒ_index.html.9b6c5d59.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_é¢è¯•_index.html.e8279c83.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_é£é™©_index.html.38431b65.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringBoot_index.html.99c2b09d.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_å¹¶å‘_index.html.dab5cb78.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_æŸ¥è¯¢_index.html.8bf196b3.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_æ³¨è§£_index.html.29427b89.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_è®²ä¹‰_index.html.f2836424.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_windows_index.html.a0d63f6b.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_devops_index.html.5f93dbaf.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_docker_index.html.5b2fa542.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_lombok_index.html.d7b729bf.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_python_index.html.f127ec96.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_tomcat_index.html.effa5c76.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_rabbitmq_index.html.0d6500e0.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringMVC_index.html.5b446489.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_spring_index.html.2fdc451d.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_sentinel_index.html.8336fbff.js" as="script"><link rel="prefetch" href="/blog/assets/js/é¡¹ç›®å®æˆ˜_ä¸ªäººåšå®¢_index.html.2313e13d.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_linux_index.html.f3228c14.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_maven_index.html.7d60d030.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_mycat_index.html.86a2db6b.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_mysql_index.html.26b31028.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_netty_index.html.fa203ef0.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_nginx_index.html.407b8d93.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_redis_index.html.4cbc3ebc.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_jenkins_index.html.2191329b.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_ç®—æ³•_åŠ›æ‰£_å­—ç¬¦ä¸²_index.html.58b0837e.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_nacos_index.html.c1176a12.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MyCatå®‰è£…æ–‡æ¡£_index.html.76c9f340.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MyCaté…ç½®æ–‡ä»¶_index.html.a7c285e2.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MySQLå­¦ä¹ ç¬”è®°_index.html.be35453d.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MySQLå®‰å…¨é…ç½®_index.html.aafb2055.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MySQLæ•…éšœä¿®å¤_index.html.aca33ef0.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_arthas_index.html.3a80533f.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_lombok_index.html.df6bbda8.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_rebase_index.html.7fb84a87.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_spring_index.html.159371bd.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_tomcat_index.html.202f6e83.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_java_index.html.9d6f99cf.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_çƒ­ç‚¹é¢è¯•é¢˜_index.html.1992ee3f.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2021_01åŸºç¡€ç¯‡_index.html.b31021c1.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2021_02å¹¶å‘ç¯‡_index.html.d71d4fdc.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2021_03è™šæ‹Ÿæœº_index.html.79412479.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_03-Mavené«˜çº§ç¬”è®°_index.html.23d2c968.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_log4j2_index.html.3ec8af8c.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_05-Springé¢è¯•é¢˜_index.html.16859e1b.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_1.å®‰è£…ä¸é…ç½®_index.html.409252b0.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_06-MySQLé¢è¯•é¢˜_index.html.97ec8c59.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2021_04æ¡†æ¶ç¯‡_index.html.5df17691.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_5.è½¯ä»¶åŒ…ç®¡ç†_index.html.56426779.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_git_index.html.5580a9b7.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_error_index.html.653dfe72.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_linux_index.html.a2b86b09.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_merge_index.html.591e3107.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_seata_index.html.78f4240a.js" as="script"><link rel="prefetch" href="/blog/assets/js/Spring_index.html.1f301026.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_aop_index.html.6d2b723a.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_jvm_index.html.92fde854.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_vue_index.html.10b01273.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_hprof_index.html.c4aa97c7.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_mysql_index.html.19e39304.js" as="script"><link rel="prefetch" href="/blog/assets/js/è®¾è®¡æ¨¡å¼_Aåˆ›å»ºå‹_index.html.f1927c50.js" as="script"><link rel="prefetch" href="/blog/assets/js/è®¾è®¡æ¨¡å¼_Bç»“æ„å‹_index.html.d2b8e86f.js" as="script"><link rel="prefetch" href="/blog/assets/js/è®¾è®¡æ¨¡å¼_Cè¡Œä¸ºå‹_index.html.0bed5114.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_07-Redisé¢è¯•é¢˜_index.html.dc9fd3e0.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_æ ˆ_index.html.2e806965.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_å †_index.html.95c45ee9.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_es_index.html.c387c936.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_gc_index.html.05e6980c.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_cicd_index.html.b68870fd.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_java_index.html.85792326.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_02-SpringMVCç¬”è®°_SpringMVC_day02_index.html.708dfdbe.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å…¥é—¨åˆ°èµ·é£_index.html.061d0c61.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_02-SpringMVCç¬”è®°_SpringMVC_day01_index.html.4400276d.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_03-Mavené«˜çº§ç¬”è®°_éšç¬”_index.html.fe7944a7.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_aop_index.html.481d66e7.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_bug_index.html.d3c9f1e6.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_cms_index.html.2b12fb9c.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_git_index.html.5530e766.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_jdk_index.html.8c3ed87a.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_jfr_index.html.41078f2a.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_jmc_index.html.1e6c3b4c.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_jmm_index.html.7d4fe930.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_jvm_index.html.f9e6a3ef.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_mat_index.html.cd8218e7.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_oom_index.html.54f599ba.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_sql_index.html.d516984a.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_zgc_index.html.18159c57.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_api_index.html.d4b193c8.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_05-Mybatisplusç¬”è®°_index.html.73c75f79.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_Redis_è¯¾å‰èµ„æ–™_index.html.2dc54da9.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_04-SpringBootç¬”è®°_index.html.a8139618.js" as="script"><link rel="prefetch" href="/blog/assets/js/è®¡ç®—æœºåŸºç¡€_index.html.16af6a45.js" as="script"><link rel="prefetch" href="/blog/assets/js/è®¡ç®—æœºåŸºç¡€_ç½‘ç»œ_index.html.59ade7a5.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_09-MQé¢è¯•é¢˜_index.html.05a0bdae.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_g1_index.html.6f8e2ae6.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_gc_index.html.712d0144.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_mq_index.html.112d0856.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_MySQL_index.html.ca7e6b9b.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Spring_index.html.6badc370.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_2.æ–‡ä»¶ç³»ç»Ÿ_index.html.66b6860c.js" as="script"><link rel="prefetch" href="/blog/assets/js/Nginx_index.html.d6a4fd99.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_02-SpringMVCç¬”è®°_index.html.3cf013f0.js" as="script"><link rel="prefetch" href="/blog/assets/js/42771.91a1b5e9.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringBoot_æ—¥å¿—æ¡†æ¶_index.html.b9d6f5fb.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•å‡†å¤‡_index.html.ee010531.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Linux_index.html.77c49e79.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•è®°å½•_index.html.e7d672b3.js" as="script"><link rel="prefetch" href="/blog/assets/js/JVM_2.å†…å­˜ç»“æ„_index.html.afc97288.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_Redis_index.html.2dcb5bb3.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_10-åˆ†å¸ƒå¼_index.html.b5166b8d.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Java_index.html.c5f2754c.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_01-Springç¬”è®°_spring_day02_index.html.727b3c45.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_01-Springç¬”è®°_spring_day03_index.html.448dc846.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_01-Springç¬”è®°_spring_day01_index.html.06d1d668.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2021_index.html.ba029d6e.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é»‘é©¬Java2023_index.html.bc3840c0.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_Git_index.html.ce1f374e.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_JVM_index.html.e899bf15.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å”¯æ‰‹ç†Ÿå°”_index.html.5888d89e.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_æ ¸å¿ƒç±»åº“_index.html.86b419fc.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_02-SpringMVCç¬”è®°_éšç¬”_index.html.715a478d.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_å®ç”¨_MQ_å®‰è£…_index.html.b52d30c4.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MySQLä¼˜åŒ–_index.html.4c7a55cb.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_MySQLå°ç™½_index.html.04fb5ad7.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_é¢è¯•ç­”é¢˜å¡_OS_index.html.a265aefd.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_01-Springç¬”è®°_éšç¬”_index.html.8b6382c6.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_01-Springç¬”è®°_index.html.c25d12cf.js" as="script"><link rel="prefetch" href="/blog/assets/js/è½¯ä»¶å·¥ç¨‹_UMLå›¾_index.html.ba92dd63.js" as="script"><link rel="prefetch" href="/blog/assets/js/Netty_index.html.65db1c6d.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_index.html.155c8344.js" as="script"><link rel="prefetch" href="/blog/assets/js/é¡¹ç›®å®æˆ˜_index.html.7d05baa1.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_ç®—æ³•_åŠ›æ‰£_index.html.2b0d61cd.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringBoot_lombokæ³¨è§£_index.html.e64cc0ae.js" as="script"><link rel="prefetch" href="/blog/assets/js/timeline_index.html.7b2ea859.js" as="script"><link rel="prefetch" href="/blog/assets/js/è®¾è®¡æ¨¡å¼_index.html.f6e07426.js" as="script"><link rel="prefetch" href="/blog/assets/js/è½¯ä»¶å·¥ç¨‹_index.html.2a6c3928.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_é«˜çº§_Sentinel_index.html.c5d06934.js" as="script"><link rel="prefetch" href="/blog/assets/js/è£…æœº_N1ç›’å­_index.html.ed425b9e.js" as="script"><link rel="prefetch" href="/blog/assets/js/Docker_index.html.1c24ae43.js" as="script"><link rel="prefetch" href="/blog/assets/js/Mybatis_Mybatis Plus_æ¥å£_index.html.0f5efd49.js" as="script"><link rel="prefetch" href="/blog/assets/js/Mybatis_Mybatis Plus_æ³¨è§£_index.html.8b185c03.js" as="script"><link rel="prefetch" href="/blog/assets/js/Docker_ç§æœ‰äº‘_index.html.075064de.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_Redis_1.å…¥é—¨_index.html.5b9e9ef9.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_Redis_2.å®æˆ˜_index.html.6be686a7.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_Redis_3.é«˜çº§_index.html.5a335cba.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_Redis_4.åŸç†_index.html.b2e59685.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_Java8ç‰¹æ€§_index.html.eecfb5cd.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_é¢è¯•é¢˜_index.html.117bb112.js" as="script"><link rel="prefetch" href="/blog/assets/js/article_index.html.569e8c23.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_index.html.2856d096.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_SQLåˆ·é¢˜_index.html.0dc0ebdc.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å·¥å…·ç±»_index.html.f33c625a.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_å®ç”¨_Docker_index.html.865e8687.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_é«˜çº§_Jmeter_index.html.59404b3f.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_é«˜çº§_Sentinel_bug_index.html.cb4ac0bc.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_AåŸºç¡€_index.html.f6081939.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_Bä¸­ç­‰_index.html.50b4686d.js" as="script"><link rel="prefetch" href="/blog/assets/js/Mybatis_Mybatis Plus_index.html.07c14222.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_é«˜çº§_Seata_index.html.cce0a084.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_åŸºç¡€_index.html.cea81701.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_å·¥å…·_index.html.1773e91c.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_è¿›é˜¶_index.html.742b1e03.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_éšç¬”_index.html.49062f21.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_Redis_éšç¬”_index.html.a3746d8d.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_Alibaba-OSS_index.html.60c75623.js" as="script"><link rel="prefetch" href="/blog/assets/js/star_index.html.afb8a4ab.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_MySQL_è¿ç»´_index.html.03942232.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_index.html.13f4f231.js" as="script"><link rel="prefetch" href="/blog/assets/js/Linux_0.ç¬”è®°_index.html.3023fc28.js" as="script"><link rel="prefetch" href="/blog/assets/js/MQ_RabbitMQ_åŸºç¡€_index.html.54c2bd7a.js" as="script"><link rel="prefetch" href="/blog/assets/js/MQ_RabbitMQ_é«˜çº§_index.html.b25db897.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_åŸºç¡€_index.html.af52f5a3.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_å®ç”¨_index.html.794ad781.js" as="script"><link rel="prefetch" href="/blog/assets/js/SSM_01-Springç¬”è®°_AOP_index.html.4c4da2e0.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringBoot_æ³¨è§£_index.html.4f4df5c6.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_ç®—æ³•_index.html.eda753a7.js" as="script"><link rel="prefetch" href="/blog/assets/js/Docker_éšç¬”_index.html.8a138fac.js" as="script"><link rel="prefetch" href="/blog/assets/js/Python_åŸºç¡€_index.html.3d54bf3d.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_å®ç”¨_ES_index.html.ec44908e.js" as="script"><link rel="prefetch" href="/blog/assets/js/SpringCloud_å®ç”¨_MQ_index.html.11b9ddb1.js" as="script"><link rel="prefetch" href="/blog/assets/js/Spring_æ³¨è§£_index.html.899d1ded.js" as="script"><link rel="prefetch" href="/blog/assets/js/Python_çˆ¬è™«_index.html.6b49fe8f.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_å¼‚å¸¸_index.html.7adb20a6.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_æ¶æ„_index.html.dc66d304.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_é˜Ÿåˆ—_index.html.bac1c5b9.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_éšç¬”_index.html.c49db34a.js" as="script"><link rel="prefetch" href="/blog/assets/js/Le Penseur_index.html.47c9d2d5.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_sanfene_index.html.c06543c4.js" as="script"><link rel="prefetch" href="/blog/assets/js/å‰ç«¯_node_index.html.cb067259.js" as="script"><link rel="prefetch" href="/blog/assets/js/å‰ç«¯_index.html.9f5f0777.js" as="script"><link rel="prefetch" href="/blog/assets/js/ç½‘ç»œ_index.html.fd93de38.js" as="script"><link rel="prefetch" href="/blog/assets/js/è£…æœº_index.html.11f29d09.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Java_index.html.d4b1d0fc.js" as="script"><link rel="prefetch" href="/blog/assets/js/MQ_RabbitMQ_index.html.02e2b7c7.js" as="script"><link rel="prefetch" href="/blog/assets/js/Mybatis_Mybatis_index.html.527c3a0a.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_Spring_index.html.fed455af.js" as="script"><link rel="prefetch" href="/blog/assets/js/Interview_MySQL_index.html.9854a4ab.js" as="script"><link rel="prefetch" href="/blog/assets/js/Database_index.html.01e6f15b.js" as="script"><link rel="prefetch" href="/blog/assets/js/Spring_Junit_index.html.6d8317b3.js" as="script"><link rel="prefetch" href="/blog/assets/js/Java_String_index.html.23f21b58.js" as="script"><link rel="prefetch" href="/blog/assets/js/Mybatis_index.html.6296d9d5.js" as="script"><link rel="prefetch" href="/blog/assets/js/MQ_Kafka_index.html.196b4b76.js" as="script"><link rel="prefetch" href="/blog/assets/js/Bug_Java_index.html.6665c673.js" as="script"><link rel="prefetch" href="/blog/assets/js/Netty_API_index.html.104827b3.js" as="script"><link rel="prefetch" href="/blog/assets/js/VCS_Git_index.html.4bfded9d.js" as="script"><link rel="prefetch" href="/blog/assets/js/CICD_index.html.779a49fe.js" as="script"><link rel="prefetch" href="/blog/assets/js/Bug_index.html.48809fbd.js" as="script"><link rel="prefetch" href="/blog/assets/js/VCS_index.html.2dd3e119.js" as="script"><link rel="prefetch" href="/blog/assets/js/404.html.7b058f71.js" as="script"><link rel="prefetch" href="/blog/assets/js/MQ_index.html.03446d9b.js" as="script"><link rel="prefetch" href="/blog/assets/js/52666.bc9abe6c.js" as="script"><link rel="prefetch" href="/blog/assets/js/78070.ebbf2996.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/blog/" aria-label="å¸¦æˆ‘å›å®¶"><img class="vp-nav-logo" src="/blog/assets/images/avatar.png" alt><!----><span class="vp-site-name hide-in-pad">å°æ»¡</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/blog/" aria-label="ä¸»é¡µ"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->ä¸»é¡µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="åç«¯"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-code" style=""></span>åç«¯<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/blog/Java/" aria-label="Java"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-java" style=""></span><!--]-->Java<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/blog/Python/" aria-label="Python"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-python" style=""></span><!--]-->Python<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/blog/JVM/" aria-label="JVM"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-microchip" style=""></span><!--]-->JVM<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/blog/Vue/" aria-label="Vue"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-vuejs" style=""></span><!--]-->Vue<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Spring"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-leaf" style=""></span>Spring<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/blog/Spring/" aria-label="Spring"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-leaf" style=""></span><!--]-->Spring<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/blog/SpringBoot/" aria-label="SpringBoot"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-leaf" style=""></span><!--]-->SpringBoot<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/blog/SpringMVC/" aria-label="SpringMVC"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-leaf" style=""></span><!--]-->SpringMVC<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/blog/SSM/" aria-label="SSM"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-leaf" style=""></span><!--]-->SSM<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="SpringCloud"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-cloud" style=""></span>SpringCloud<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/blog/SpringCloud/%E9%AB%98%E7%BA%A7/" aria-label="é«˜çº§ç¯‡"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-web-awesome" style=""></span><!--]-->é«˜çº§ç¯‡<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="æ•°æ®åº“"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-database" style=""></span>æ•°æ®åº“<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/blog/Database/MySQL/" aria-label="MySQL"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-database" style=""></span><!--]-->MySQL<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/blog/Database/Redis/" aria-label="Redis"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-server" style=""></span><!--]-->Redis<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/blog/Docker/" aria-label="Docker"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-docker" style=""></span><!--]-->Docker<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Linux"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-linux" style=""></span>Linux<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/blog/Linux/" aria-label="Linux"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-linux" style=""></span><!--]-->Linux<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/blog/Netty/" aria-label="Netty"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-n" style=""></span><!--]-->Netty<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="é¡¹ç›®å®æˆ˜"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-product-hunt" style=""></span>é¡¹ç›®å®æˆ˜<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/blog/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/%E8%B0%B7%E7%B2%92%E5%95%86%E5%9F%8E/" aria-label="è°·ç²’å•†åŸ"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-codepen" style=""></span><!--]-->è°·ç²’å•†åŸ<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/blog/Interview/" aria-label="é¢è¯•é¢˜"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-book-tanakh" style=""></span><!--]-->é¢è¯•é¢˜<!----></a></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/JL-20191210/blog" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-outlook-dropdown"><!----></div></button></div><!----><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><span class="font-icon icon fa-fw fa-sm fa-brands fa-java" style=""></span><span class="vp-sidebar-title">Java</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/blog/Interview/Java/" aria-label="Java"><!--[--><span class="font-icon icon fa-fw fa-sm fa-brands fa-java" style=""></span><!--]-->Java<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">01 JavaåŸºç¡€é¢è¯•é¢˜</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">02 Javaé›†åˆé¢è¯•é¢˜</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">03 Javaå¹¶å‘ç¼–ç¨‹é¢è¯•é¢˜</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">04 Javaè™šæ‹Ÿæœºé¢è¯•é¢˜</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">05 Springé¢è¯•é¢˜</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/blog/Interview/Java/05-Spring%E9%9D%A2%E8%AF%95%E9%A2%98/5.Spring%E9%9D%A2%E8%AF%95%E9%A2%98.html" aria-label="Springé¢è¯•é¢˜"><!---->Springé¢è¯•é¢˜<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/blog/Interview/Java/05-Spring%E9%9D%A2%E8%AF%95%E9%A2%98/5.SpringA.html" aria-label="é¢æ¸£é€†è¢­-Spring"><!---->é¢æ¸£é€†è¢­-Spring<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/blog/Interview/Java/05-Spring%E9%9D%A2%E8%AF%95%E9%A2%98/5.SpringB.html" aria-label="é¢æ¸£é€†è¢­-Spring"><!---->é¢æ¸£é€†è¢­-Spring<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">06 My SQLé¢è¯•é¢˜</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">07 Redisé¢è¯•é¢˜</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">08 æ•°æ®ç»“æ„é¢è¯•é¢˜</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">09 MQé¢è¯•é¢˜</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">10 åˆ†å¸ƒå¼</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">AåŸºç¡€</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Bä¸­ç­‰</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">çƒ­ç‚¹é¢è¯•é¢˜</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">My SQL</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Sanfene</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Spring</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">SQLåˆ·é¢˜</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">ç®—æ³•</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">é¢è¯•å‡†å¤‡</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fa-solid fa-file-pen" style=""></span><span class="vp-sidebar-title">é¢è¯•ç­”é¢˜å¡</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">é¢è¯•è®°å½•</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">é»‘é©¬ Java2021</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">é»‘é©¬ Java2023</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Springé¢è¯•é¢˜ï¼Œ41é“Springå…«è‚¡æ–‡ï¼ˆ1.3ä¸‡å­—63å¼ æ‰‹ç»˜å›¾ï¼‰ï¼Œé¢æ¸£é€†è¢­å¿…çœ‹ğŸ‘</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">ä¸‰åˆ†æ¶&amp;æ²‰é»˜ç‹äºŒ</span></span><span property="author" content="ä¸‰åˆ†æ¶&amp;æ²‰é»˜ç‹äºŒ"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2025å¹´7æœˆ17æ—¥</span><meta property="datePublished" content="2025-07-17T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 134 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT134M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color3 clickable" role="navigation">é¢æ¸£é€†è¢­</span><!--]--><meta property="articleSection" content="é¢æ¸£é€†è¢­"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color3 clickable" role="navigation">é¢æ¸£é€†è¢­</span><span class="page-tag-item color1 clickable" role="navigation">Spring</span><span class="page-tag-item color1 clickable" role="navigation">é¢è¯•é¢˜</span><!--]--><meta property="keywords" content="é¢æ¸£é€†è¢­,Spring,é¢è¯•é¢˜"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#å‰è¨€">å‰è¨€</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#åŸºç¡€">åŸºç¡€</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-springæ˜¯ä»€ä¹ˆ">1.Springæ˜¯ä»€ä¹ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-springæœ‰å“ªäº›æ¨¡å—å‘¢">2.Springæœ‰å“ªäº›æ¨¡å—å‘¢ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-springæœ‰å“ªäº›å¸¸ç”¨æ³¨è§£å‘¢">3.Springæœ‰å“ªäº›å¸¸ç”¨æ³¨è§£å‘¢ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-ğŸŒŸspringç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼">4.ğŸŒŸSpringç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-springå®¹å™¨å’Œwebå®¹å™¨ä¹‹é—´çš„åŒºåˆ«çŸ¥é“å—-è¡¥å……">5.Springå®¹å™¨å’ŒWebå®¹å™¨ä¹‹é—´çš„åŒºåˆ«çŸ¥é“å—ï¼Ÿï¼ˆè¡¥å……ï¼‰</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ioc">IoC</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_6-ğŸŒŸè¯´ä¸€è¯´ä»€ä¹ˆæ˜¯ioc">6.ğŸŒŸè¯´ä¸€è¯´ä»€ä¹ˆæ˜¯IoCï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_7-èƒ½è¯´ä¸€ä¸‹iocçš„å®ç°æœºåˆ¶å—">7.èƒ½è¯´ä¸€ä¸‹IoCçš„å®ç°æœºåˆ¶å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_8-è¯´è¯´beanfactoryå’Œapplicantcontextçš„åŒºåˆ«">8.è¯´è¯´BeanFactoryå’ŒApplicantContextçš„åŒºåˆ«?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_9-ğŸŒŸé¡¹ç›®å¯åŠ¨æ—¶springçš„iocä¼šåšä»€ä¹ˆ">9.ğŸŒŸé¡¹ç›®å¯åŠ¨æ—¶Springçš„IoCä¼šåšä»€ä¹ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_10-ä½ æ˜¯æ€ä¹ˆç†è§£beançš„">10.ä½ æ˜¯æ€ä¹ˆç†è§£Beançš„ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_11-ğŸŒŸèƒ½è¯´ä¸€ä¸‹beançš„ç”Ÿå‘½å‘¨æœŸå—">11.ğŸŒŸèƒ½è¯´ä¸€ä¸‹Beançš„ç”Ÿå‘½å‘¨æœŸå—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_12-ä¸ºä»€ä¹ˆideaä¸æ¨èä½¿ç”¨-autowiredæ³¨è§£æ³¨å…¥bean">12.ä¸ºä»€ä¹ˆIDEAä¸æ¨èä½¿ç”¨@Autowiredæ³¨è§£æ³¨å…¥Beanï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_13-autowiredçš„å®ç°åŸç†äº†è§£å—">13.@Autowiredçš„å®ç°åŸç†äº†è§£å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_14-ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…">14.ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_15-beançš„ä½œç”¨åŸŸæœ‰å“ªäº›">15.Beançš„ä½œç”¨åŸŸæœ‰å“ªäº›?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_16-springä¸­çš„å•ä¾‹beanä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜å—">16.Springä¸­çš„å•ä¾‹Beanä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_17-ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–">17.ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_18-ğŸŒŸspringæ€ä¹ˆè§£å†³å¾ªç¯ä¾èµ–å‘¢">18.ğŸŒŸSpringæ€ä¹ˆè§£å†³å¾ªç¯ä¾èµ–å‘¢ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_19-ä¸ºä»€ä¹ˆéœ€è¦ä¸‰çº§ç¼“å­˜è€Œä¸æ˜¯ä¸¤çº§">19.ä¸ºä»€ä¹ˆéœ€è¦ä¸‰çº§ç¼“å­˜è€Œä¸æ˜¯ä¸¤çº§ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#aop">AOP</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_20-ğŸŒŸè¯´è¯´ä»€ä¹ˆæ˜¯-aop">20.ğŸŒŸè¯´è¯´ä»€ä¹ˆæ˜¯ AOPï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_21-ğŸŒŸaopçš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›">21.ğŸŒŸAOPçš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_22-è¯´è¯´-spring-aop-å’Œ-aspectj-åŒºåˆ«">22.è¯´è¯´ Spring AOP å’Œ AspectJ åŒºåˆ«?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_23-è¯´è¯´-aop-å’Œåå°„çš„åŒºåˆ«-è¡¥å……">23.è¯´è¯´ AOP å’Œåå°„çš„åŒºåˆ«ï¼Ÿï¼ˆè¡¥å……ï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_24-ğŸŒŸè¯´è¯´jdkåŠ¨æ€ä»£ç†å’Œcglibä»£ç†çš„åŒºåˆ«">24.ğŸŒŸè¯´è¯´JDKåŠ¨æ€ä»£ç†å’ŒCGLIBä»£ç†çš„åŒºåˆ«ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#äº‹åŠ¡">äº‹åŠ¡</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_25-ğŸŒŸè¯´è¯´ä½ å¯¹springäº‹åŠ¡çš„ç†è§£">25.ğŸŒŸè¯´è¯´ä½ å¯¹Springäº‹åŠ¡çš„ç†è§£ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_26-å£°æ˜å¼äº‹åŠ¡çš„å®ç°åŸç†äº†è§£å—">26.å£°æ˜å¼äº‹åŠ¡çš„å®ç°åŸç†äº†è§£å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_27-transactionalåœ¨å“ªäº›æƒ…å†µä¸‹ä¼šå¤±æ•ˆ">27.@Transactionalåœ¨å“ªäº›æƒ…å†µä¸‹ä¼šå¤±æ•ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_28-è¯´è¯´springäº‹åŠ¡çš„éš”ç¦»çº§åˆ«">28.è¯´è¯´Springäº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_29-ğŸŒŸè¯´è¯´springçš„äº‹åŠ¡ä¼ æ’­æœºåˆ¶">29.ğŸŒŸè¯´è¯´Springçš„äº‹åŠ¡ä¼ æ’­æœºåˆ¶ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#mvc">MVC</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_30-spring-mvc-çš„æ ¸å¿ƒç»„ä»¶æœ‰å“ªäº›">30.Spring MVC çš„æ ¸å¿ƒç»„ä»¶æœ‰å“ªäº›ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_31-ğŸŒŸspring-mvc-çš„å·¥ä½œæµç¨‹äº†è§£å—">31.ğŸŒŸSpring MVC çš„å·¥ä½œæµç¨‹äº†è§£å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_32-springmvc-restful-é£æ ¼çš„æ¥å£æµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„å‘¢">32.SpringMVC Restful é£æ ¼çš„æ¥å£æµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#spring-boot">Spring Boot</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_33-ğŸŒŸä»‹ç»ä¸€ä¸‹-springboot">33.ğŸŒŸä»‹ç»ä¸€ä¸‹ SpringBootï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_34-ğŸŒŸspring-bootçš„è‡ªåŠ¨è£…é…åŸç†äº†è§£å—">34.ğŸŒŸSpring Bootçš„è‡ªåŠ¨è£…é…åŸç†äº†è§£å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_35-ğŸŒŸå¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ª-springboot-starter">35.ğŸŒŸå¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ª SpringBoot Starter?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_36-ğŸŒŸspring-boot-å¯åŠ¨åŸç†äº†è§£å—">36.ğŸŒŸSpring Boot å¯åŠ¨åŸç†äº†è§£å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_37-è¯´ä¸€ä¸‹-springboot-å’Œ-springmvc-çš„åŒºåˆ«-è¡¥å……">37.è¯´ä¸€ä¸‹ SpringBoot å’Œ SpringMVC çš„åŒºåˆ«ï¼Ÿï¼ˆè¡¥å……ï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_38-spring-boot-å’Œ-spring-æœ‰ä»€ä¹ˆåŒºåˆ«-è¡¥å……">38.Spring Boot å’Œ Spring æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿï¼ˆè¡¥å……ï¼‰</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#spring-cloud">Spring Cloud</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_39-å¯¹-springcloud-äº†è§£å¤šå°‘">39.å¯¹ SpringCloud äº†è§£å¤šå°‘ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#è¡¥å……">è¡¥å……</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_40-springtask-äº†è§£å—">40.SpringTask äº†è§£å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_41-spring-cache-äº†è§£å—">41.Spring Cache äº†è§£å—ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content" vp-content><figure><img src="/blog/assets/img/spring-mianzhanixi-spring1.81f15c96.jpg" alt="é¢æ¸£é€†è¢­ Spring ç¯‡å°é¢å›¾" tabindex="0" loading="lazy"><figcaption>é¢æ¸£é€†è¢­ Spring ç¯‡å°é¢å›¾</figcaption></figure><h2 id="å‰è¨€" tabindex="-1"><a class="header-anchor" href="#å‰è¨€"><span>å‰è¨€</span></a></h2><p>1.3 ä¸‡å­— 63 å¼ æ‰‹ç»˜å›¾ï¼Œè¯¦è§£ 41 é“ Spring é¢è¯•é«˜é¢‘é¢˜ï¼ˆè®©å¤©ä¸‹æ²¡æœ‰éš¾èƒŒçš„å…«è‚¡ï¼‰ï¼Œé¢æ¸£èƒŒä¼šè¿™äº› Spring å…«è‚¡æ–‡ï¼Œè¿™æ¬¡åŠæ‰“é¢è¯•å®˜ï¼Œæˆ‘è§‰å¾—ç¨³äº†ï¼ˆæ‰‹åŠ¨ dogï¼‰ã€‚æ•´ç†ï¼šæ²‰é»˜ç‹äºŒï¼Œæˆ³<a href="https://mp.weixin.qq.com/s/EQge6DmgIqYITM3mAxkatg" target="_blank" rel="noopener noreferrer">è½¬è½½é“¾æ¥</a>ï¼Œä½œè€…ï¼šä¸‰åˆ†æ¶ï¼Œæˆ³<a href="https://mp.weixin.qq.com/s/Y17S85ntHm_MLTZMJdtjQQ" target="_blank" rel="noopener noreferrer">åŸæ–‡é“¾æ¥</a>ã€‚</p><p>äº®ç™½ç‰ˆæœ¬æ›´é€‚åˆæ‹¿å‡ºæ¥æ‰“å°ï¼Œè¿™ä¹Ÿæ˜¯å¾ˆå¤šå­¦ç”Ÿå…šå–œæ¬¢çš„æ–¹å¼ï¼Œæ‰“å°å‡ºæ¥èƒŒè¯µçš„æ•ˆç‡ä¼šæ›´é«˜ã€‚</p><figure><img src="/blog/assets/img/redis-20250614154255.066a1c82.png" alt="é¢æ¸£é€†è¢­Redisç¯‡.pdfç¬¬äºŒç‰ˆ" tabindex="0" loading="lazy"><figcaption>é¢æ¸£é€†è¢­Redisç¯‡.pdfç¬¬äºŒç‰ˆ</figcaption></figure><p>2025 å¹´ 06 æœˆ 15 æ—¥å¼€å§‹ç€æ‰‹ç¬¬äºŒç‰ˆæ›´æ–°ã€‚</p><ul><li>å¯¹äºé«˜é¢‘é¢˜ï¼Œä¼šæ ‡æ³¨åœ¨ã€Š<a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>ã€‹ä¸­å‡ºç°çš„ä½ç½®ï¼Œå“ªå®¶å…¬å¸ï¼ŒåŸé¢˜æ˜¯ä»€ä¹ˆï¼Œå¹¶ä¸”ä¼šåŠ ğŸŒŸï¼Œç›®å½•ä¸€ç›®äº†ç„¶ï¼›å¦‚æœä½ æƒ³èŠ‚çœæ—¶é—´çš„è¯ï¼Œå¯ä»¥ä¼˜å…ˆèƒŒè¯µè¿™äº›é¢˜ç›®ï¼Œå°½å¿«åšåˆ°çŸ¥å½¼çŸ¥å·±ï¼Œç™¾æˆ˜ä¸æ®†ã€‚</li><li>åŒºåˆ†å…«è‚¡ç²¾åå›ç­”ç‰ˆæœ¬å’ŒåŸç†åº•å±‚è§£é‡Šï¼Œè®©å¤§å®¶çŸ¥å…¶ç„¶çŸ¥å…¶æ‰€ä»¥ç„¶ï¼ŒåŒæ—¶åˆèƒ½åšåˆ°é¢è¯•æ—¶çš„é«˜æ•ˆå›ç­”ã€‚</li><li>ç»“åˆé¡¹ç›®ï¼ˆ<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a>ã€<a href="https://javabetter.cn/zhishixingqiu/pmhub.html" target="_blank" rel="noopener noreferrer">pmhub</a>ï¼‰æ¥ç»„ç»‡è¯­è¨€ï¼Œè®©é¢è¯•å®˜æœ€å¤§ç¨‹åº¦æ„Ÿå—åˆ°ä½ çš„è¯šæ„ï¼Œè€Œä¸æ˜¯æœºæ¢°åŒ–çš„èƒŒè¯µã€‚</li><li>ä¿®å¤ç¬¬ä¸€ç‰ˆä¸­å‡ºç°çš„é—®é¢˜ï¼ŒåŒ…æ‹¬çƒå‹ä»¬çš„ç§ä¿¡åé¦ˆï¼Œç½‘ç«™ç•™è¨€åŒºçš„è¯„è®ºï¼Œä»¥åŠ <a href="https://github.com/itwanger/toBeBetterJavaer/issues" target="_blank" rel="noopener noreferrer">GitHub ä»“åº“</a>ä¸­çš„ issueï¼Œè®©è¿™ä»½é¢è¯•æŒ‡å—æ›´åŠ å®Œå–„ã€‚</li><li>å¢åŠ <a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">äºŒå“¥ç¼–ç¨‹æ˜Ÿçƒ</a>çš„çƒå‹ä»¬æ‹¿åˆ°çš„ä¸€äº› offerï¼Œå¯¹é¢æ¸£é€†è¢­çš„æ„Ÿè°¢ï¼Œä»¥åŠå¯¹ç®€å†ä¿®æ”¹çš„ä¸€äº›è®¤å¯ï¼Œä»¥æ­¤æ¥æ¿€åŠ±å¤§å®¶ï¼Œç»™å¤§å®¶æ›´å¤šä¿¡å¿ƒã€‚</li><li>ä¼˜åŒ–æ’ç‰ˆï¼Œå¢åŠ æ‰‹ç»˜å›¾ï¼Œé‡æ–°ç»„ç»‡ç­”æ¡ˆï¼Œä½¿å…¶æ›´åŠ å£è¯­åŒ–ï¼Œä»è€Œæ›´è´´è¿‘é¢è¯•å®˜çš„é¢„æœŸã€‚</li></ul><figure><img src="/blog/assets/img/redis-20250614154416.b93d5579.png" alt="é¢æ¸£é€†è¢­å·²ç»æäº¤ 1478 æ¬¡ GitHub è®°å½•" tabindex="0" loading="lazy"><figcaption>é¢æ¸£é€†è¢­å·²ç»æäº¤ 1478 æ¬¡ GitHub è®°å½•</figcaption></figure><p>ç”±äº PDF æ²¡åŠæ³•è‡ªæˆ‘æ›´æ–°ï¼Œæ‰€ä»¥éœ€è¦æœ€æ–°ç‰ˆçš„å°ä¼™ä¼´ï¼Œå¯ä»¥å¾®ä¿¡æœã€<strong>æ²‰é»˜ç‹äºŒ</strong>ã€‘ï¼Œæˆ–è€…æ‰«æ/é•¿æŒ‰è¯†åˆ«ä¸‹é¢çš„äºŒç»´ç ï¼Œå…³æ³¨äºŒå“¥çš„å…¬ä¼—å·ï¼Œå›å¤ã€<strong>222</strong>ã€‘å³å¯æ‹‰å–æœ€æ–°ç‰ˆæœ¬ã€‚</p><div style="text-align:center;margin:20px 0;"><img src="https://cdn.tobebetterjavaer.com/tobebetterjavaer/images/gongzhonghao.png" alt="å¾®ä¿¡æ‰«ç æˆ–è€…é•¿æŒ‰è¯†åˆ«ï¼Œæˆ–è€…å¾®ä¿¡æœç´¢â€œæ²‰é»˜ç‹äºŒâ€" style="max-width:100%;height:auto;border-radius:10px;"></div><p>å½“ç„¶äº†ï¼Œè¯·å…è®¸æˆ‘çš„ä¸€ç‚¹ç‚¹ç§å¿ƒï¼Œé‚£å°±æ˜¯æ˜Ÿçƒçš„ PDF ç‰ˆæœ¬ä¼šæ¯”å…¬ä¼—å·æ—©ä¸€ä¸ªæœˆæ—¶é—´ï¼Œæ¯•ç«Ÿæ˜Ÿçƒç”¨æˆ·éƒ½ä»˜è´¹è¿‡äº†ï¼Œæˆ‘æœ‰å¿…è¦è®©ä»–ä»¬å…ˆäº«å—åˆ°ä¸€ç‚¹ç‚¹ç¦åˆ©ã€‚ç›¸ä¿¡å¤§å®¶ä¹Ÿéƒ½èƒ½ç†è§£ï¼Œæ¯•ç«Ÿåœ¨çº¿ç‰ˆæ˜¯å…è´¹çš„ï¼ŒCDNã€æœåŠ¡å™¨ã€åŸŸåã€OSS ç­‰ç­‰éƒ½æ˜¯éœ€è¦æˆæœ¬çš„ã€‚</p><p>æ›´åˆ«è¯´æˆ‘ä»˜å‡ºçš„æ—¶é—´å’Œç²¾åŠ›äº†ï¼Œå¤§å®¶è§‰å¾—æœ‰å¸®åŠ©è¿˜è¯·ç»™ä¸ªå£ç¢‘ï¼Œè®©ä½ èº«è¾¹çš„åŒäº‹ã€åŒå­¦éƒ½èƒ½å—ç›Šåˆ°ã€‚</p><figure><img src="/blog/assets/img/collection-20250512160410.cb13a90f.png" alt="å›å¤ 222" tabindex="0" loading="lazy"><figcaption>å›å¤ 222</figcaption></figure><p>æˆ‘æŠŠäºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ã€JVM è¿›é˜¶ä¹‹è·¯ã€å¹¶å‘ç¼–ç¨‹è¿›é˜¶ä¹‹è·¯ï¼Œä»¥åŠæ‰€æœ‰é¢æ¸£é€†è¢­çš„ç‰ˆæœ¬éƒ½æ”¾è¿›æ¥äº†ï¼Œæ¶µç›– JavaåŸºç¡€ã€Javaé›†åˆã€Javaå¹¶å‘ã€JVMã€Springã€MyBatisã€è®¡ç®—æœºç½‘ç»œã€æ“ä½œç³»ç»Ÿã€MySQLã€Redisã€RocketMQã€åˆ†å¸ƒå¼ã€å¾®æœåŠ¡ã€è®¾è®¡æ¨¡å¼ã€Linux ç­‰ 16 ä¸ªå¤§çš„ä¸»é¢˜ï¼Œå…±æœ‰ 40 å¤šä¸‡å­—ï¼Œ2000+å¼ æ‰‹ç»˜å›¾ï¼Œå¯ä»¥è¯´æ˜¯è¯šæ„æ»¡æ»¡ã€‚</p><p>å±•ç¤ºä¸€ä¸‹æš—é»‘ç‰ˆæœ¬çš„ PDF å§ï¼Œæ’ç‰ˆæ¸…æ™°ï¼Œå­—ä½“ä¼˜é›…ï¼Œæ›´åŠ é€‚åˆå¤œæœï¼Œæ™šä¸Šçœ‹ä¼šæ›´èˆ’æœä¸€ç‚¹ã€‚</p><figure><img src="/blog/assets/img/redis-20250614154601.516b5c8e.png" alt="é¢æ¸£é€†è¢­RSpringç¯‡.pdfæš—é»‘ç‰ˆ" tabindex="0" loading="lazy"><figcaption>é¢æ¸£é€†è¢­RSpringç¯‡.pdfæš—é»‘ç‰ˆ</figcaption></figure><h2 id="åŸºç¡€" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€"><span>åŸºç¡€</span></a></h2><h3 id="_1-springæ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#_1-springæ˜¯ä»€ä¹ˆ"><span>1.Springæ˜¯ä»€ä¹ˆï¼Ÿ</span></a></h3><p>Spring æ˜¯ä¸€ä¸ª Java åç«¯å¼€å‘æ¡†æ¶ï¼Œå…¶æœ€æ ¸å¿ƒçš„ä½œç”¨æ˜¯å¸®æˆ‘ä»¬ç®¡ç† Java å¯¹è±¡ã€‚</p><figure><img src="/blog/assets/img/spring-165c27b4-2ea0-409a-8fa5-389c105db0fa.b6c32da9.png" alt="Spring Logo" tabindex="0" loading="lazy"><figcaption>Spring Logo</figcaption></figure><p>å…¶æœ€é‡è¦çš„ç‰¹æ€§å°±æ˜¯ IoCï¼Œä¹Ÿå°±æ˜¯æ§åˆ¶åè½¬ã€‚ä»¥å‰æˆ‘ä»¬è¦ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œéƒ½è¦è‡ªå·±å…ˆ new å‡ºæ¥ã€‚ä½†æœ‰äº† Spring ä¹‹åï¼Œæˆ‘ä»¬åªéœ€è¦å‘Šè¯‰ Spring æˆ‘ä»¬éœ€è¦ä»€ä¹ˆå¯¹è±¡ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ›å»ºå¥½å¹¶æ³¨å…¥åˆ° Spring å®¹å™¨å½“ä¸­ã€‚</p><p>æ¯”å¦‚æˆ‘åœ¨ä¸€ä¸ª Service ç±»é‡Œéœ€è¦ç”¨åˆ° Dao å¯¹è±¡ï¼Œåªéœ€è¦åŠ ä¸ª <code>@Autowired</code> æ³¨è§£ï¼ŒSpring å°±ä¼šè‡ªåŠ¨æŠŠ Dao å¯¹è±¡æ³¨å…¥åˆ° Spring å®¹å™¨å½“ä¸­ï¼Œè¿™æ ·å°±ä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»ç®¡ç†è¿™äº›å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»äº†ã€‚</p><figure><img src="/blog/assets/img/spring-20250615105532.698793c1.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šæŠ€æœ¯æ´¾@Autowiredæºç " tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šæŠ€æœ¯æ´¾@Autowiredæºç </figcaption></figure><p>å¦å¤–ï¼ŒSpring è¿˜æä¾›äº† AOPï¼Œä¹Ÿå°±æ˜¯é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œåœ¨æˆ‘ä»¬éœ€è¦åšä¸€äº›é€šç”¨åŠŸèƒ½çš„æ—¶å€™ç‰¹åˆ«æœ‰ç”¨ï¼Œæ¯”å¦‚è¯´æ—¥å¿—è®°å½•ã€æƒé™æ ¡éªŒã€äº‹åŠ¡ç®¡ç†è¿™äº›ï¼Œæˆ‘ä»¬ä¸ç”¨åœ¨æ¯ä¸ªæ–¹æ³•é‡Œéƒ½å†™é‡å¤çš„ä»£ç ï¼Œç›´æ¥ç”¨ AOP å°±èƒ½ç»Ÿä¸€å¤„ç†ã€‚</p><figure><img src="/blog/assets/img/spring-20250615105726.f90b4a6c.png" alt="æŠ€æœ¯æ´¾ï¼šAOP äº‹åŠ¡æºç " tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾ï¼šAOP äº‹åŠ¡æºç </figcaption></figure><p>Spring çš„ç”Ÿæ€ä¹Ÿç‰¹åˆ«ä¸°å¯Œï¼Œåƒ Spring Boot èƒ½è®©æˆ‘ä»¬å¿«é€Ÿæ­å»ºé¡¹ç›®ï¼ŒSpring MVC èƒ½å¸®æˆ‘ä»¬å¤„ç† web è¯·æ±‚ï¼ŒSpring Data èƒ½å¸®æˆ‘ä»¬ç®€åŒ–æ•°æ®åº“æ“ä½œï¼ŒSpring Cloud èƒ½å¸®æˆ‘ä»¬åšå¾®æœåŠ¡æ¶æ„ç­‰ç­‰ã€‚</p><h4 id="springæœ‰å“ªäº›ç‰¹æ€§" tabindex="-1"><a class="header-anchor" href="#springæœ‰å“ªäº›ç‰¹æ€§"><span>Springæœ‰å“ªäº›ç‰¹æ€§ï¼Ÿ</span></a></h4><p>Spring çš„ç‰¹æ€§è¿˜æ˜¯æŒºå¤šçš„ï¼Œæˆ‘æŒ‰ç…§åœ¨å®é™…å·¥ä½œ/å­¦ä¹ ä¸­ç”¨å¾—æœ€å¤šçš„å‡ ä¸ªæ¥è¯´å§ã€‚</p><figure><img src="/blog/assets/img/spring-a0f0ef9d-3289-41ea-94c2-34b7e37ef854.021fd0f9.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpringç‰¹æ€§" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpringç‰¹æ€§</figcaption></figure><p>é¦–å…ˆæœ€æ ¸å¿ƒçš„å°±æ˜¯ IoC æ§åˆ¶åè½¬å’Œ DI ä¾èµ–æ³¨å…¥ã€‚è¿™ä¸ªæˆ‘å‰é¢ä¹Ÿæåˆ°äº†ï¼Œå°±æ˜¯ Spring èƒ½å¸®æˆ‘ä»¬ç®¡ç†å¯¹è±¡çš„åˆ›å»ºå’Œä¾èµ–å…³ç³»ã€‚</p><p>æ¯”å¦‚æˆ‘å†™ä¸€ä¸ª UserServiceï¼Œéœ€è¦ç”¨åˆ° UserDaoï¼Œä»¥å‰å¾—è‡ªå·± new ä¸€ä¸ª UserDao å‡ºæ¥ï¼Œç°åœ¨åªè¦åœ¨ UserService ä¸ŠåŠ ä¸ª <code>@Service</code> æ³¨è§£ï¼Œåœ¨ UserDao å­—æ®µä¸ŠåŠ ä¸ª <code>@Autowired</code>ï¼ŒSpring å°±ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å¤„ç†å¥½è¿™äº›ä¾èµ–å…³ç³»ã€‚</p><p>è¿™æ ·ä»£ç çš„è€¦åˆåº¦å°±å¤§å¤§é™ä½äº†ï¼Œæµ‹è¯•çš„æ—¶å€™ä¹Ÿæ›´å®¹æ˜“ mockã€‚</p><p>ç¬¬äºŒä¸ªå°±æ˜¯ AOP é¢å‘åˆ‡é¢ç¼–ç¨‹ã€‚è¿™ä¸ªåœ¨æˆ‘ä»¬å¤„ç†ä¸€äº›æ¨ªåˆ‡å…³æ³¨ç‚¹çš„æ—¶å€™ç‰¹åˆ«æœ‰ç”¨ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬è¦ç»™æŸäº› Controller æ–¹æ³•éƒ½åŠ ä¸Šæƒé™æ§åˆ¶ï¼Œå¦‚æœæ²¡æœ‰ AOP çš„è¯ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½è¦å†™ä¸€éåŠ æƒä»£ç ï¼Œç»´æŠ¤èµ·æ¥å¾ˆéº»çƒ¦ã€‚</p><figure><img src="/blog/assets/img/spring-20250615110533.4f2572e8.png" alt="æŠ€æœ¯æ´¾æºç ï¼š@Permissionæ³¨è§£åŠ æƒé™éªŒè¯" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼š@Permissionæ³¨è§£åŠ æƒé™éªŒè¯</figcaption></figure><p>ç”¨äº† AOP ä¹‹åï¼Œæˆ‘ä»¬åªéœ€è¦å†™ä¸€ä¸ªåˆ‡é¢ç±»ï¼Œå®šä¹‰å¥½åˆ‡ç‚¹å’Œé€šçŸ¥ï¼Œå°±èƒ½ç»Ÿä¸€å¤„ç†äº†ã€‚äº‹åŠ¡ç®¡ç†ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ï¼ŒåŠ ä¸ª <code>@Transactional</code> æ³¨è§£å°±æå®šäº†ã€‚</p><p>è¿˜æœ‰å°±æ˜¯ Spring å¯¹å„ç§ä¼ä¸šçº§åŠŸèƒ½çš„é›†æˆæ”¯æŒä¹Ÿç‰¹åˆ«å¥½ã€‚æ¯”å¦‚æ•°æ®åº“è®¿é—®ï¼Œä¸ç®¡æˆ‘ä»¬ç”¨ JDBCã€MyBatis-Plus è¿˜æ˜¯ Hibernateï¼ŒSpring éƒ½èƒ½å¾ˆå¥½åœ°é›†æˆã€‚æ¶ˆæ¯é˜Ÿåˆ—ã€ç¼“å­˜ã€å®‰å…¨è®¤è¯è¿™äº›ï¼Œ Spring éƒ½æœ‰å¯¹åº”çš„æ¨¡å—æ¥æ”¯æŒã€‚</p><figure><img src="/blog/assets/img/spring-20250615111039.f02a258c.png" alt="æŠ€æœ¯æ´¾æºç ï¼šSpring Boot çš„çº¦å®šå¤§äºé…ç½®" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šSpring Boot çš„çº¦å®šå¤§äºé…ç½®</figcaption></figure><p>å¦å¤– Spring çš„é…ç½®ä¹Ÿå¾ˆçµæ´»ï¼Œæ—¢æ”¯æŒ XML é…ç½®ï¼Œä¹Ÿæ”¯æŒæ³¨è§£é…ç½®ï¼Œç°åœ¨æˆ‘ä»¬åŸºæœ¬éƒ½ç”¨æ³¨è§£äº†ï¼Œå†™èµ·æ¥æ›´ç®€æ´ã€‚Spring Boot å‡ºæ¥ä¹‹åå°±æ›´æ–¹ä¾¿äº†ï¼Œçº¦å®šå¤§äºé…ç½®ï¼Œå¾ˆå¤šä¸œè¥¿éƒ½æ˜¯å¼€ç®±å³ç”¨çš„ã€‚</p><h4 id="ç®€å•è¯´ä¸€ä¸‹ä»€ä¹ˆæ˜¯aopå’Œioc" tabindex="-1"><a class="header-anchor" href="#ç®€å•è¯´ä¸€ä¸‹ä»€ä¹ˆæ˜¯aopå’Œioc"><span>ç®€å•è¯´ä¸€ä¸‹ä»€ä¹ˆæ˜¯AOPå’ŒIoCï¼Ÿ</span></a></h4><p>AOP é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œç®€å•ç‚¹è¯´å°±æ˜¯æŠŠä¸€äº›é€šç”¨çš„åŠŸèƒ½ä»ä¸šåŠ¡ä»£ç é‡ŒæŠ½å–å‡ºæ¥ï¼Œç»Ÿä¸€å¤„ç†ã€‚æ¯”å¦‚è¯´<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a>ä¸­çš„ <code>@MdcDot</code> æ³¨è§£çš„ä½œç”¨æ˜¯é…åˆ AOP åœ¨æ—¥å¿—ä¸­åŠ å…¥ MDC ä¿¡æ¯ï¼Œæ–¹ä¾¿è¿›è¡Œæ—¥å¿—è¿½è¸ªã€‚</p><figure><img src="/blog/assets/img/spring-20250615111917.698e4ce8.png" alt="æŠ€æœ¯æ´¾æºç ï¼š@MdcDotæ³¨è§£é…åˆ AOP å®Œæˆæ—¥å¿—è¿½è¸ª" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼š@MdcDotæ³¨è§£é…åˆ AOP å®Œæˆæ—¥å¿—è¿½è¸ª</figcaption></figure><p>IoC æ§åˆ¶åè½¬æ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯å°†å¯¹è±¡çš„åˆ›å»ºå’Œå¯¹è±¡ä¹‹é—´çš„è°ƒç”¨è¿‡ç¨‹äº¤ç»™ Spring å®¹å™¨æ¥ç®¡ç†ã€‚æ¯”å¦‚è¯´åœ¨<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a>é¡¹ç›®å½“ä¸­ï¼Œ<code>@PostConstruct</code> æ³¨è§£è¡¨æ˜è¿™ä¸ªæ–¹æ³•ç”± Spring å®¹å™¨åœ¨ Bean åˆå§‹åŒ–å®Œæˆåè‡ªåŠ¨è°ƒç”¨ï¼Œæˆ‘ä»¬ä¸éœ€è¦æ‰‹åŠ¨è°ƒç”¨ init æ–¹æ³•ã€‚</p><figure><img src="/blog/assets/img/spring-20250615113219.207ed906.png" alt="æŠ€æœ¯æ´¾æºç ï¼š@PostConstructåº”ç”¨" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼š@PostConstructåº”ç”¨</figcaption></figure><h4 id="springæºç çœ‹è¿‡å—" tabindex="-1"><a class="header-anchor" href="#springæºç çœ‹è¿‡å—"><span>Springæºç çœ‹è¿‡å—ï¼Ÿ</span></a></h4><p>çœ‹è¿‡ä¸€äº›ï¼Œä¸»è¦æ˜¯å¸¦ç€é—®é¢˜å»çœ‹çš„ï¼Œæ¯”å¦‚é‡åˆ°ä¸€äº›æŠ€æœ¯éš¾ç‚¹æˆ–è€…æƒ³æ·±å…¥ç†è§£æŸä¸ªåŠŸèƒ½çš„æ—¶å€™ã€‚</p><p>æˆ‘é‡ç‚¹çœ‹è¿‡çš„æ˜¯ IoC å®¹å™¨çš„åˆå§‹åŒ–è¿‡ç¨‹ï¼Œç‰¹åˆ«æ˜¯ ApplicationContext çš„å¯åŠ¨æµç¨‹ã€‚ä» <code>refresh()</code> æ–¹æ³•å¼€å§‹ï¼ŒåŒ…æ‹¬ Bean çš„å®šä¹‰å’ŒåŠ è½½ã€Bean å·¥å‚çš„å‡†å¤‡ã€Bean çš„å®ä¾‹åŒ–å’Œåˆå§‹åŒ–è¿™äº›å…³é”®æ­¥éª¤ã€‚</p><figure><img src="/blog/assets/img/spring-20241207102105.f6f0728f.png" alt="æ˜Ÿçƒå˜‰å®¾æ¥¼ä»”ï¼šSpring æºç è§£æ" tabindex="0" loading="lazy"><figcaption>æ˜Ÿçƒå˜‰å®¾æ¥¼ä»”ï¼šSpring æºç è§£æ</figcaption></figure><p>çœ‹æºç çš„æ—¶å€™å‘ç° Spring ç”¨äº†å¾ˆå¤šè®¾è®¡æ¨¡å¼ï¼Œæ¯”å¦‚å·¥å‚æ¨¡å¼ã€å•ä¾‹æ¨¡å¼ã€æ¨¡æ¿æ–¹æ³•æ¨¡å¼ç­‰ç­‰ï¼Œè¿™å¯¹æˆ‘å¹³æ—¶å†™ä»£ç ä¹Ÿå¾ˆæœ‰å¯å‘ã€‚</p><p>è¿˜æœ‰å°±æ˜¯ Spring çš„ Bean ç”Ÿå‘½å‘¨æœŸï¼Œä» BeanDefinition çš„åˆ›å»ºåˆ° Bean çš„å®ä¾‹åŒ–ã€å±æ€§æ³¨å…¥ã€åˆå§‹åŒ–å›è°ƒï¼Œå†åˆ°æœ€åçš„é”€æ¯ï¼Œæ•´ä¸ªè¿‡ç¨‹è¿˜æ˜¯æŒºå¤æ‚çš„ã€‚çœ‹äº†æºç ä¹‹åå¯¹ <code>@PostConstruct</code>ã€<code>@PreDestroy</code> è¿™äº›æ³¨è§£çš„æ‰§è¡Œæ—¶æœºå°±æ›´æ¸…æ¥šäº†ã€‚</p><p>ä¸è¿‡è¯´å®è¯ï¼ŒSpring çš„æºç ç¡®å®æ¯”è¾ƒéš¾å•ƒï¼Œæ¶‰åŠçš„æ¦‚å¿µå’ŒæŠ€æœ¯ç‚¹å¤ªå¤šäº†ã€‚æˆ‘ä¸€èˆ¬æ˜¯ç»“åˆä¸€äº›æŠ€æœ¯åšå®¢å’Œ Claude ä¸€èµ·çœ‹ï¼Œè¿™æ ·ç†è§£èµ·æ¥ä¼šç›¸å¯¹å®¹æ˜“ä¸€äº›ã€‚</p><p>PSï¼šå…³äºè¿™ä»½å°å†Œçš„ PDF ç‰ˆæœ¬ï¼Œç›®å‰åªæœ‰<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æ˜Ÿçƒ</a>çš„ç”¨æˆ·å¯ä»¥è·å–ï¼Œåç»­ä¼šè€ƒè™‘å¼€æ”¾ç»™å¤§å®¶ã€‚</p><figure><img src="/blog/assets/img/spring-20241207101910.b90fd6e2.png" alt="æ¥¼ä»”çš„ Spring æºç è§£ææ‰‹å†Œ" tabindex="0" loading="lazy"><figcaption>æ¥¼ä»”çš„ Spring æºç è§£ææ‰‹å†Œ</figcaption></figure><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œé¢ç»åŒå­¦ 5 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šIOCä¸AOP</li></ol></blockquote><p>memoï¼š2025 å¹´ 6 æœˆ 15 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨å¸®<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">çƒå‹ä»¬ä¿®æ”¹ç®€å†</a>çš„æ—¶å€™ï¼Œç¢°åˆ°ä¸€ä¸ªä¸­å±±å¤§å­¦æœ¬ç¡•çš„çƒå‹ï¼Œæ ¡å›­è£èª‰åŸºæœ¬ä¸Šæ‹‰æ»¡äº†ï¼Œéå¸¸ä¼˜ç§€ï¼Œé‚£æˆ‘ä¹Ÿå¸Œæœ›èƒ½å¤Ÿå¸®åŠ©åˆ°æ›´å¤šçš„çƒå‹ä»¬ï¼Œå¸®ä»–ä»¬æ‹¿åˆ°æ›´å¥½çš„ offerã€‚</p><figure><img src="/blog/assets/img/spring-20250615120504.8b4955a7.png" alt="ä¸­å±±å¤§å­¦çš„çƒå‹" tabindex="0" loading="lazy"><figcaption>ä¸­å±±å¤§å­¦çš„çƒå‹</figcaption></figure><h3 id="_2-springæœ‰å“ªäº›æ¨¡å—å‘¢" tabindex="-1"><a class="header-anchor" href="#_2-springæœ‰å“ªäº›æ¨¡å—å‘¢"><span>2.Springæœ‰å“ªäº›æ¨¡å—å‘¢ï¼Ÿ</span></a></h3><p>æˆ‘æŒ‰ç…§å¹³æ—¶å·¥ä½œ/å­¦ä¹ ä¸­æ¥è§¦çš„é¢‘ç‡æ¥è¯´ä¸€ä¸‹ã€‚</p><p>é¦–å…ˆæ˜¯ Spring Core æ¨¡å—ï¼Œè¿™æ˜¯æ•´ä¸ª Spring æ¡†æ¶çš„åŸºç¡€ï¼ŒåŒ…å«äº† IoC å®¹å™¨å’Œä¾èµ–æ³¨å…¥ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚è¿˜æœ‰ Spring Beans æ¨¡å—ï¼Œè´Ÿè´£ Bean çš„é…ç½®å’Œç®¡ç†ã€‚è¿™ä¸¤ä¸ªæ¨¡å—åŸºæœ¬ä¸Šæ˜¯å…¶ä»–æ‰€æœ‰æ¨¡å—çš„åŸºç¡€ï¼Œä¸ç®¡ç”¨ Spring çš„å“ªä¸ªåŠŸèƒ½éƒ½ä¼šç”¨åˆ°ã€‚</p><figure><img src="/blog/assets/img/spring-bb7c13ea-3174-4b32-84b8-821849ddc377.f8445d06.png" alt="Springå®˜ç½‘ï¼šæ¨¡å—åˆ’åˆ†" tabindex="0" loading="lazy"><figcaption>Springå®˜ç½‘ï¼šæ¨¡å—åˆ’åˆ†</figcaption></figure><p>ç„¶åæ˜¯ Spring Context ä¸Šä¸‹æ–‡æ¨¡å—ï¼Œå®ƒåœ¨ Core çš„åŸºç¡€ä¸Šæä¾›äº†æ›´å¤šä¼ä¸šçº§çš„åŠŸèƒ½ï¼Œæ¯”å¦‚å›½é™…åŒ–ã€äº‹ä»¶ä¼ æ’­ã€èµ„æºåŠ è½½è¿™äº›ã€‚ApplicationContext å°±æ˜¯åœ¨è¿™ä¸ªæ¨¡å—é‡Œé¢çš„ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">SpringBootApplication</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Application</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // Spring Bootä¼šè‡ªåŠ¨åˆ›å»ºApplicationContext</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        ApplicationContext</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> context</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> SpringApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Application</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, args);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Spring AOP æ¨¡å—æä¾›äº†é¢å‘åˆ‡é¢ç¼–ç¨‹çš„æ”¯æŒï¼Œæˆ‘ä»¬ç”¨çš„ <code>@Transactional</code>ã€è‡ªå®šä¹‰åˆ‡é¢è¿™äº›éƒ½æ˜¯åŸºäºè¿™ä¸ªæ¨¡å—ã€‚</p><p>Web å¼€å‘æ–¹é¢ï¼ŒSpring Web æ¨¡å—æä¾›äº†åŸºç¡€çš„ Web åŠŸèƒ½ï¼ŒSpring WebMVC å°±æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„ MVC æ¡†æ¶ï¼Œç”¨æ¥å¤„ç† HTTP è¯·æ±‚å’Œå“åº”ã€‚ç°åœ¨è¿˜æœ‰ Spring WebFluxï¼Œæ”¯æŒå“åº”å¼ç¼–ç¨‹ã€‚</p><p>æ¯”å¦‚è¯´<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a>é¡¹ç›®ä¸­ï¼Œ<code>GlobalExceptionHandler</code> ç±»å°±ä½¿ç”¨äº† <code>@RestControllerAdvice</code> æ¥å®ç°ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">RestControllerAdvice</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> GlobalExceptionHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">ExceptionHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">value</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> ForumAdviceException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ResVo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> handleForumAdviceException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ForumAdviceException</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> ResVo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">fail</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getStatus</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ•°æ®è®¿é—®æ–¹é¢ï¼ŒSpring JDBC ç®€åŒ–äº† JDBC çš„ä½¿ç”¨ï¼Œåœ¨<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a>é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°± <code>JdbcTemplate</code> æ¥æ£€æŸ¥è¡¨æ˜¯å¦å­˜åœ¨ã€æ‰§è¡Œæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ã€‚</p><figure><img src="/blog/assets/img/spring-20250616105042.b4fbcd41.png" alt="æŠ€æœ¯æ´¾æºç ï¼šJdbcTemplate" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šJdbcTemplate</figcaption></figure><p>Spring ORM æä¾›äº†å¯¹ MyBatis-Plus ç­‰ ORM æ¡†æ¶çš„é›†æˆæ”¯æŒã€‚åœ¨<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a>é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°±ç”¨äº† <code>@TableName</code>ã€<code>@TableField</code> ç­‰æ³¨è§£è¿›è¡Œå¯¹è±¡å…³ç³»æ˜ å°„ï¼Œé€šè¿‡ç»§æ‰¿ BaseMapper æ¥è·å–é€šç”¨çš„ CRUD èƒ½åŠ›ã€‚</p><figure><img src="/blog/assets/img/spring-20250616105224.7baf7d15.png" alt="æŠ€æœ¯æ´¾æºç ï¼šBaseMapper" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šBaseMapper</figcaption></figure><p>Spring Test æ¨¡å—æä¾›äº†æµ‹è¯•æ”¯æŒï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°è¿›è¡Œå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ã€‚æˆ‘ä»¬å†™æµ‹è¯•ç”¨ä¾‹çš„æ—¶å€™ç»å¸¸ç”¨ <code>@SpringBootTest</code> è¿™äº›æ³¨è§£ã€‚æ¯”å¦‚è¯´åœ¨<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a>é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°±ç”¨ <code>@SpringBootTest</code> æ³¨è§£æ¥åŠ è½½ Spring ä¸Šä¸‹æ–‡ï¼Œè¿›è¡Œé›†æˆæµ‹è¯•ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Slf4j</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">SpringBootTest</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">classes</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> QuickForumApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">RunWith</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">SpringJUnit4ClassRunner</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> BasicTest</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿˜æœ‰ä¸€äº›å…¶ä»–çš„æ¨¡å—ï¼Œæ¯”å¦‚ Spring Security è´Ÿè´£å®‰å…¨è®¤è¯ï¼ŒSpring Batch å¤„ç†æ‰¹å¤„ç†ä»»åŠ¡ç­‰ç­‰ã€‚</p><p>ç°åœ¨æˆ‘ä»¬åŸºæœ¬éƒ½æ˜¯ç”¨ Spring Boot æ¥å¼€å‘ï¼Œå®ƒæŠŠè¿™äº›æ¨¡å—éƒ½æ•´åˆå¥½äº†ï¼Œç”¨èµ·æ¥æ›´æ–¹ä¾¿ã€‚</p><figure><img src="/blog/assets/img/spring-20250616105807.f0004ea1.png" alt="æŠ€æœ¯æ´¾ï¼šæŠ€æœ¯é€‰å‹" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾ï¼šæŠ€æœ¯é€‰å‹</figcaption></figure><p>memoï¼š2025 å¹´ 6 æœˆ 16 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨å¸®<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">çƒå‹ä»¬ä¿®æ”¹ç®€å†</a>çš„æ—¶å€™ï¼Œç¢°åˆ°ä¸€ä¸ªå¤§è¿æµ·äº‹å¤§å­¦ç¡•æ²³å—ç†å·¥å¤§å­¦æœ¬çš„çƒå‹ï¼Œä»–è£èª‰å¥–é¡¹é‡Œæåˆ°çš„ä¼˜ç§€ç ”ç©¶ç”Ÿã€å¥–å­¦é‡‘ã€è‹±è¯­å››å…­çº§ï¼Œæˆ‘å¸Œæœ›çœ‹åˆ°çš„åŒå­¦ä¹Ÿéƒ½èƒ½äº‰å–ä¸€ä¸‹ï¼Œä¸è¦æŠŠè¿™äº›è£èª‰æ‹±æ‰‹è®©äººï¼Œæˆ–è€…å‹æ ¹å°±ä¸çŸ¥é“ï¼Œæˆ–è€…ä¸å±‘äºå»å‚åŠ ï¼Œåˆ°æ—¶å€™ä½ ç®€å†ä¸Šè¿™ä¸€æ å°±ä¼šæ¯”è¾ƒè‹ç™½ã€‚</p><figure><img src="/blog/assets/img/spring-20250616110317.ea78b8b8.png" alt="å¤§è¿æµ·äº‹å¤§å­¦ç¡•æ²³å—ç†å·¥å¤§å­¦æœ¬çš„çƒå‹" tabindex="0" loading="lazy"><figcaption>å¤§è¿æµ·äº‹å¤§å­¦ç¡•æ²³å—ç†å·¥å¤§å­¦æœ¬çš„çƒå‹</figcaption></figure><h3 id="_3-springæœ‰å“ªäº›å¸¸ç”¨æ³¨è§£å‘¢" tabindex="-1"><a class="header-anchor" href="#_3-springæœ‰å“ªäº›å¸¸ç”¨æ³¨è§£å‘¢"><span>3.Springæœ‰å“ªäº›å¸¸ç”¨æ³¨è§£å‘¢ï¼Ÿ</span></a></h3><p>Spring çš„æ³¨è§£æŒºå¤šçš„ï¼Œæˆ‘æŒ‰ç…§ä¸åŒçš„åŠŸèƒ½åˆ†ç±»æ¥è¯´ä¸€ä¸‹å¹³æ—¶ç”¨å¾—æœ€å¤šçš„é‚£äº›ã€‚</p><p>é¦–å…ˆæ˜¯ Bean ç®¡ç†ç›¸å…³çš„æ³¨è§£ã€‚<code>@Component</code> æ˜¯æœ€åŸºç¡€çš„ï¼Œç”¨æ¥æ ‡è¯†ä¸€ä¸ªç±»æ˜¯ Spring ç»„ä»¶ã€‚åƒ <code>@Service</code>ã€<code>@Repository</code>ã€<code>@Controller</code> è¿™äº›éƒ½æ˜¯ <code>@Component</code> çš„ç‰¹åŒ–ç‰ˆæœ¬ï¼Œåˆ†åˆ«ç”¨åœ¨æœåŠ¡å±‚ã€æ•°æ®è®¿é—®å±‚å’Œæ§åˆ¶å™¨å±‚ã€‚</p><figure><img src="/blog/assets/img/spring-8d0a1518-a425-4887-9735-45321095d927.443abfa4.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpringå¸¸ç”¨æ³¨è§£" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpringå¸¸ç”¨æ³¨è§£</figcaption></figure><p>ä¾èµ–æ³¨å…¥æ–¹é¢ï¼Œ<code>@Autowired</code> æ˜¯ç”¨å¾—æœ€å¤šçš„ï¼Œå¯ä»¥æ ‡æ³¨åœ¨å­—æ®µã€setter æ–¹æ³•æˆ–è€…æ„é€ æ–¹æ³•ä¸Šã€‚<code>@Qualifier</code> åœ¨æœ‰å¤šä¸ªåŒç±»å‹ Bean çš„æ—¶å€™ç”¨æ¥æŒ‡å®šå…·ä½“æ³¨å…¥å“ªä¸€ä¸ªã€‚<code>@Resource</code> å’Œ <code>@Autowired</code> åŠŸèƒ½å·®ä¸å¤šï¼Œä¸è¿‡å®ƒæ˜¯æŒ‰åç§°æ³¨å…¥çš„ã€‚</p><figure><img src="/blog/assets/img/spring-20250617110609.65bdeae2.png" alt="æŠ€æœ¯æ´¾æºç ï¼š@Resourceå’Œ@Autowired" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼š@Resourceå’Œ@Autowired</figcaption></figure><p>é…ç½®ç›¸å…³çš„æ³¨è§£ä¹Ÿå¾ˆå¸¸ç”¨ã€‚<code>@Configuration</code> æ ‡è¯†é…ç½®ç±»ï¼Œ<code>@Bean</code> ç”¨æ¥å®šä¹‰ Beanï¼Œ<code>@Value</code> ç”¨æ¥æ³¨å…¥é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§å€¼ã€‚æˆ‘ä»¬é¡¹ç›®é‡Œçš„æ•°æ®åº“è¿æ¥ä¿¡æ¯ã€Redis é…ç½®è¿™äº›éƒ½æ˜¯ç”¨ <code>@Value</code> æ¥æ³¨å…¥çš„ã€‚<code>@PropertySource</code> ç”¨æ¥æŒ‡å®šé…ç½®æ–‡ä»¶çš„ä½ç½®ã€‚</p><figure><img src="/blog/assets/img/spring-20250617110755.81dcc2ba.png" alt="æŠ€æœ¯æ´¾æºç ï¼š@Value" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼š@Value</figcaption></figure><p>Web å¼€å‘çš„æ³¨è§£å°±æ›´å¤šäº†ã€‚<code>@RestController</code> ç›¸å½“äº <code>@Controller</code> åŠ  <code>@ResponseBody</code>ï¼Œç”¨æ¥åš RESTful æ¥å£ã€‚</p><figure><img src="/blog/assets/img/spring-20250617110859.a9aff107.png" alt="æŠ€æœ¯æ´¾æºç ï¼šweb å¼€å‘çš„æ³¨è§£" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šweb å¼€å‘çš„æ³¨è§£</figcaption></figure><p><code>@RequestMapping</code> åŠå…¶å˜ä½“<code>@GetMapping</code>ã€<code>@PostMapping</code>ã€<code>@PutMapping</code>ã€<code>@DeleteMapping</code> ç”¨æ¥æ˜ å°„ HTTP è¯·æ±‚ã€‚<code>@PathVariable</code> è·å–è·¯å¾„å‚æ•°ï¼Œ<code>@RequestParam</code> è·å–è¯·æ±‚å‚æ•°ï¼Œ<code>@RequestBody</code> æ¥æ”¶ JSON æ•°æ®ã€‚</p><p>AOP ç›¸å…³çš„æ³¨è§£ï¼Œ<code>@Aspect</code> å®šä¹‰åˆ‡é¢ï¼Œ<code>@Pointcut</code> å®šä¹‰åˆ‡ç‚¹ï¼Œ<code>@Before</code>ã€<code>@After</code>ã€<code>@Around</code> è¿™äº›å®šä¹‰é€šçŸ¥ç±»å‹ã€‚</p><figure><img src="/blog/assets/img/spring-20250617111100.f485e39f.png" alt="æŠ€æœ¯æ´¾æºç ï¼šAOP ç›¸å…³æ³¨è§£" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šAOP ç›¸å…³æ³¨è§£</figcaption></figure><p>ä¸è¿‡æˆ‘ä»¬ç”¨å¾—æœ€å¤šçš„è¿˜æ˜¯<code>@Transactional</code>ï¼ŒåŸºæœ¬ä¸Š Service å±‚éœ€è¦ä¿è¯äº‹åŠ¡åŸå­æ€§çš„æ–¹æ³•éƒ½ä¼šåŠ ä¸Šè¿™ä¸ªæ³¨è§£ã€‚</p><p>ç”Ÿå‘½å‘¨æœŸç›¸å…³çš„ï¼Œ<code>@PostConstruct</code> åœ¨ Bean åˆå§‹åŒ–åæ‰§è¡Œï¼Œ<code>@PreDestroy</code> åœ¨ Bean é”€æ¯å‰æ‰§è¡Œã€‚æµ‹è¯•çš„æ—¶å€™ <code>@SpringBootTest</code> ä¹Ÿç»å¸¸ç”¨åˆ°ã€‚</p><figure><img src="/blog/assets/img/spring-20250617111256.cdff31ee.png" alt="æŠ€æœ¯æ´¾æºç ï¼š@PostConstruct" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼š@PostConstruct</figcaption></figure><p>è¿˜æœ‰ä¸€äº› Spring Boot ç‰¹æœ‰çš„æ³¨è§£ï¼Œæ¯”å¦‚ <code>@SpringBootApplication</code> è¿™ä¸ªå¯åŠ¨ç±»æ³¨è§£ï¼Œ<code>@ConditionalOnProperty</code> åšæ¡ä»¶è£…é…ï¼Œ<code>@EnableAutoConfiguration</code> å¼€å¯è‡ªåŠ¨é…ç½®ç­‰ç­‰ã€‚</p><figure><img src="/blog/assets/img/spring-20250617111359.b31230c8.png" alt="æŠ€æœ¯æ´¾æºç ï¼š@ConditionalOnProperty" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼š@ConditionalOnProperty</figcaption></figure><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¾®ä¼—é“¶è¡ŒåŒå­¦ 1 Java åç«¯ä¸€é¢çš„åŸé¢˜ï¼šè¯´è¯´ Spring å¸¸è§çš„æ³¨è§£ï¼Ÿ</li></ol></blockquote><p>memoï¼š2025 å¹´ 6 æœˆ 17 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨å¸®<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">çƒå‹ä»¬ä¿®æ”¹ç®€å†</a>çš„æ—¶å€™ï¼Œç¢°åˆ°ä¸€ä¸ªå­¦é™¢æœ¬çš„çƒå‹ï¼Œä»–çš„è£èª‰å¥–é¡¹è¿˜æ˜¯ OKçš„ï¼Œæ€åº¦ä¹Ÿéå¸¸å¥½ï¼Œä¹‹å‰æœ‰å­¦é™¢æœ¬çƒå‹æ‹¿åˆ°æ»´æ»´ SP offer çš„ï¼Œå¸Œæœ›è¿™ä½çƒå‹ä¹Ÿèƒ½å¤Ÿæˆä¸ºæ˜Ÿçƒé‡Œæ–°çš„æ¦œæ ·ã€‚</p><figure><img src="/blog/assets/img/spring-20250617111727.5677befd.png" alt="é—½æ±Ÿå­¦é™¢çš„çƒå‹" tabindex="0" loading="lazy"><figcaption>é—½æ±Ÿå­¦é™¢çš„çƒå‹</figcaption></figure><h3 id="_4-ğŸŒŸspringç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_4-ğŸŒŸspringç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼"><span>4.ğŸŒŸSpringç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ</span></a></h3><p>Spring æ¡†æ¶é‡Œé¢ç¡®å®ç”¨äº†å¾ˆå¤šè®¾è®¡æ¨¡å¼ï¼Œæˆ‘ä»å¹³æ—¶å·¥ä½œä¸­èƒ½è§‚å¯Ÿåˆ°çš„å‡ ä¸ªæ¥è¯´è¯´ã€‚</p><p>é¦–å…ˆæ˜¯å·¥å‚æ¨¡å¼ï¼Œè¿™ä¸ªåœ¨ Spring é‡Œç”¨å¾—éå¸¸å¤šã€‚BeanFactory å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„å·¥å‚ï¼Œå®ƒè´Ÿè´£åˆ›å»ºå’Œç®¡ç†æ‰€æœ‰çš„ Bean å¯¹è±¡ã€‚æˆ‘ä»¬å¹³æ—¶ç”¨çš„ ApplicationContext å…¶å®ä¹Ÿæ˜¯ BeanFactory çš„ä¸€ä¸ªå®ç°ã€‚å½“æˆ‘ä»¬é€šè¿‡ <code>@Autowired</code> è·å–ä¸€ä¸ª Bean çš„æ—¶å€™ï¼Œåº•å±‚å°±æ˜¯é€šè¿‡å·¥å‚æ¨¡å¼æ¥åˆ›å»ºå’Œè·å–å¯¹è±¡çš„ã€‚</p><figure><img src="/blog/assets/img/spring-ee1c5cee-8462-4bae-93ea-ec936cc77640.ccdd764c.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpringä¸­ç”¨åˆ°çš„è®¾è®¡æ¨¡å¼" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpringä¸­ç”¨åˆ°çš„è®¾è®¡æ¨¡å¼</figcaption></figure><p>å•ä¾‹æ¨¡å¼ä¹Ÿæ˜¯ Spring çš„é»˜è®¤è¡Œä¸ºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpring å®¹å™¨ä¸­çš„ Bean éƒ½æ˜¯å•ä¾‹çš„ï¼Œæ•´ä¸ªåº”ç”¨ä¸­åªä¼šæœ‰ä¸€ä¸ªå®ä¾‹ã€‚è¿™æ ·å¯ä»¥èŠ‚çœå†…å­˜ï¼Œæé«˜æ€§èƒ½ã€‚å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ <code>@Scope</code> æ³¨è§£æ¥æ”¹å˜ Bean çš„ä½œç”¨åŸŸï¼Œæ¯”å¦‚è®¾ç½®ä¸º prototype å°±æ˜¯æ¯æ¬¡è·å–éƒ½åˆ›å»ºæ–°å®ä¾‹ã€‚</p><figure><img src="/blog/assets/img/spring-20250618113356.b3f785fc.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼š@Scopeæ³¨è§£" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼š@Scopeæ³¨è§£</figcaption></figure><p>ä»£ç†æ¨¡å¼åœ¨ AOP ä¸­ç”¨å¾—ç‰¹åˆ«å¤šã€‚Spring AOP çš„åº•å±‚å®ç°å°±æ˜¯åŸºäºåŠ¨æ€ä»£ç†çš„ï¼Œå¯¹äºå®ç°äº†æ¥å£çš„ç±»ç”¨ JDK åŠ¨æ€ä»£ç†ï¼Œæ²¡æœ‰å®ç°æ¥å£çš„ç±»ç”¨ CGLIB ä»£ç†ã€‚æ¯”å¦‚æˆ‘ä»¬ç”¨ <code>@Transactional</code> æ³¨è§£çš„æ—¶å€™ï¼ŒSpring ä¼šä¸ºæˆ‘ä»¬çš„ç±»åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œåœ¨æ–¹æ³•æ‰§è¡Œå‰åæ·»åŠ äº‹åŠ¡å¤„ç†é€»è¾‘ã€‚</p><p>æ¨¡æ¿æ–¹æ³•æ¨¡å¼åœ¨ Spring é‡Œä¹Ÿå¾ˆå¸¸è§ï¼Œæ¯”å¦‚ JdbcTemplateã€‚å®ƒå®šä¹‰äº†æ•°æ®åº“æ“ä½œçš„åŸºæœ¬æµç¨‹ï¼šè·å–è¿æ¥ã€æ‰§è¡Œ SQLã€å¤„ç†ç»“æœã€å…³é—­è¿æ¥ï¼Œä½†æ˜¯å…·ä½“çš„ SQL è¯­å¥å’Œç»“æœå¤„ç†é€»è¾‘ç”±æˆ‘ä»¬æ¥å®ç°ã€‚</p><figure><img src="/blog/assets/img/spring-20250618114035.92fbef72.png" alt="æŠ€æœ¯æ´¾æºç ï¼šJdbcTemplate" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šJdbcTemplate</figcaption></figure><p>è§‚å¯Ÿè€…æ¨¡å¼åœ¨ Spring çš„äº‹ä»¶æœºåˆ¶ä¸­æœ‰æ‰€ä½“ç°ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ ApplicationEvent å’Œ ApplicationListener æ¥å®ç°äº‹ä»¶çš„å‘å¸ƒå’Œç›‘å¬ã€‚æ¯”å¦‚ç”¨æˆ·æ³¨å†ŒæˆåŠŸåï¼Œæˆ‘ä»¬å¯ä»¥å‘å¸ƒä¸€ä¸ªç”¨æˆ·æ³¨å†Œäº‹ä»¶ï¼Œç„¶åæœ‰å¤šä¸ªç›‘å¬å™¨æ¥å¤„ç†åç»­çš„ä¸šåŠ¡é€»è¾‘ï¼Œæ¯”å¦‚å‘é€é‚®ä»¶ã€è®°å½•æ—¥å¿—ç­‰ã€‚</p><figure><img src="/blog/assets/img/spring-20250618114211.af4015f7.png" alt="æŠ€æœ¯æ´¾æºç ï¼šApplicationListener" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šApplicationListener</figcaption></figure><p>è¿™äº›è®¾è®¡æ¨¡å¼çš„åº”ç”¨è®© Spring æ¡†æ¶æ—¢çµæ´»åˆå¼ºå¤§ï¼Œä¹Ÿè®©æˆ‘åœ¨å®é™…çš„å¼€å‘ä¸­å­¦åˆ°å¾ˆå¤šç»å…¸çš„è®¾è®¡æ€æƒ³ã€‚</p><h4 id="springå¦‚ä½•å®ç°å•ä¾‹æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#springå¦‚ä½•å®ç°å•ä¾‹æ¨¡å¼"><span>Springå¦‚ä½•å®ç°å•ä¾‹æ¨¡å¼ï¼Ÿ</span></a></h4><p>ä¼ ç»Ÿçš„å•ä¾‹æ¨¡å¼æ˜¯åœ¨ç±»çš„å†…éƒ¨æ§åˆ¶åªèƒ½åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œæ¯”å¦‚ç”¨ private æ„é€ æ–¹æ³•åŠ  <code>static getInstance()</code> è¿™ç§æ–¹å¼ã€‚ä½†æ˜¯ Spring çš„å•ä¾‹æ˜¯å®¹å™¨çº§åˆ«çš„ï¼ŒåŒä¸€ä¸ª Bean åœ¨æ•´ä¸ª Spring å®¹å™¨ä¸­åªä¼šæœ‰ä¸€ä¸ªå®ä¾‹ã€‚</p><p>å…·ä½“çš„å®ç°æœºåˆ¶æ˜¯è¿™æ ·çš„ï¼šSpring åœ¨å¯åŠ¨çš„æ—¶å€™ä¼šæŠŠæ‰€æœ‰çš„ Bean å®šä¹‰ä¿¡æ¯åŠ è½½è¿›æ¥ï¼Œç„¶ååœ¨ DefaultSingletonBeanRegistry è¿™ä¸ªç±»é‡Œé¢ç»´æŠ¤äº†ä¸€ä¸ªå« singletonObjects çš„ ConcurrentHashMapï¼Œè¿™ä¸ª Map å°±æ˜¯ç”¨æ¥å­˜å‚¨å•ä¾‹ Bean çš„ã€‚key æ˜¯ Bean çš„åç§°ï¼Œvalue å°±æ˜¯ Bean çš„å®ä¾‹å¯¹è±¡ã€‚</p><figure><img src="/blog/assets/img/spring-20250618115033.28ac2c2d.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šDefaultSingletonBeanRegistry" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šDefaultSingletonBeanRegistry</figcaption></figure><p>å½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡è·å–æŸä¸ª Bean çš„æ—¶å€™ï¼ŒSpring ä¼šå…ˆæ£€æŸ¥ singletonObjects è¿™ä¸ª Map é‡Œé¢æœ‰æ²¡æœ‰è¿™ä¸ª Beanï¼Œå¦‚æœæ²¡æœ‰å°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œç„¶åæ”¾åˆ° Map é‡Œé¢ã€‚åé¢å†è·å–åŒä¸€ä¸ª Bean çš„æ—¶å€™ï¼Œç›´æ¥ä» Map é‡Œé¢å–å°±è¡Œäº†ï¼Œè¿™æ ·å°±ä¿è¯äº†å•ä¾‹ã€‚</p><figure><img src="/blog/assets/img/spring-20250618115153.aad641c8.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šregisterSingleton" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šregisterSingleton</figcaption></figure><p>è¿˜æœ‰ä¸€ä¸ªç»†èŠ‚å°±æ˜¯ Spring ä¸ºäº†è§£å†³å¾ªç¯ä¾èµ–çš„é—®é¢˜ï¼Œè¿˜ç”¨äº†ä¸‰çº§ç¼“å­˜ã€‚é™¤äº† singletonObjects è¿™ä¸ªä¸€çº§ç¼“å­˜ï¼Œè¿˜æœ‰ earlySingletonObjects äºŒçº§ç¼“å­˜å’Œ singletonFactories ä¸‰çº§ç¼“å­˜ã€‚è¿™æ ·å³ä½¿æœ‰å¾ªç¯ä¾èµ–ï¼ŒSpring ä¹Ÿèƒ½æ­£ç¡®å¤„ç†ã€‚</p><p>è€Œä¸” Spring çš„å•ä¾‹æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› ä¸ºç”¨çš„æ˜¯ ConcurrentHashMapï¼Œå¤šçº¿ç¨‹è®¿é—®ä¸ä¼šæœ‰é—®é¢˜ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æºç¨‹é¢ç»åŒå­¦ 10 Java æš‘æœŸå®ä¹ ä¸€é¢é¢è¯•åŸé¢˜ï¼šSpring IoC çš„è®¾è®¡æ¨¡å¼ï¼ŒAOP çš„è®¾è®¡æ¨¡å¼</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°å…¬å¸é¢ç»åˆé›†åŒå­¦ 1 Java åç«¯é¢è¯•åŸé¢˜ï¼šSpring æ¡†æ¶ä½¿ç”¨åˆ°çš„è®¾è®¡æ¨¡å¼ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„åŒå­¦ 1 è´å£³æ‰¾æˆ¿åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šSpringç”¨äº†ä»€ä¹ˆè®¾è®¡æ¨¡å¼ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¿«æ‰‹åŒå­¦ 4 ä¸€é¢åŸé¢˜ï¼šSpringä¸­ä½¿ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Œä»¥å…¶ä¸­ä¸€ç§æ¨¡å¼ä¸¾ä¾‹è¯´æ˜ï¼ŸSpringå¦‚ä½•å®ç°å•ä¾‹æ¨¡å¼ï¼Ÿ</li></ol></blockquote><p>memoï¼š2025 å¹´ 6 æœˆ 20 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">å¸®çƒå‹ä¿®æ”¹ç®€å†</a>çš„æ—¶å€™ï¼Œæœ‰ç¢°åˆ°é‡åº†é‚®ç”µå¤§å­¦æœ¬ï¼Œç”µå­ç§‘æŠ€å¤§å­¦ç¡•çš„çƒå‹ï¼ŒæœŸé—´è¿˜æœ‰è¿‡æ¸…åå¤§å­¦ç§‘ç ”é¡¹ç›®çš„ç»å†ï¼ŒåŸºæœ¬ä¸Šä¹Ÿæ˜¯æŠŠå­¦å†è¿™å—æ‹‰çš„æ»¡ä¸­æ»¡äº†ï¼Œé‚£å¸Œæœ›æ˜Ÿçƒèƒ½å¸®åŠ©åˆ°æ›´å¤šé™¢æ ¡çš„åŒå­¦ï¼Œä¸ç®¡æ˜¯å·¥ä½œå…šè¿˜æ˜¯å­¦ç”Ÿå…šï¼Œéƒ½å¸Œæœ›å¤§å®¶éƒ½æ‹¿åˆ°æ›´å¥½çš„ offerã€‚</p><figure><img src="/blog/assets/img/spring-20250621062819.66fda4f1.png" alt="é‡é‚®æœ¬ï¼Œç”µå­ç§‘æŠ€å¤§å­¦ç¡•çš„çƒå‹" tabindex="0" loading="lazy"><figcaption>é‡é‚®æœ¬ï¼Œç”µå­ç§‘æŠ€å¤§å­¦ç¡•çš„çƒå‹</figcaption></figure><h3 id="_5-springå®¹å™¨å’Œwebå®¹å™¨ä¹‹é—´çš„åŒºåˆ«çŸ¥é“å—-è¡¥å……" tabindex="-1"><a class="header-anchor" href="#_5-springå®¹å™¨å’Œwebå®¹å™¨ä¹‹é—´çš„åŒºåˆ«çŸ¥é“å—-è¡¥å……"><span>5.Springå®¹å™¨å’ŒWebå®¹å™¨ä¹‹é—´çš„åŒºåˆ«çŸ¥é“å—ï¼Ÿï¼ˆè¡¥å……ï¼‰</span></a></h3><blockquote><p>2024 å¹´ 7 æœˆ 11 æ—¥å¢è¡¥</p></blockquote><p>é¦–å…ˆä»æ¦‚å¿µä¸Šæ¥è¯´ï¼ŒSpring å®¹å™¨æ˜¯ä¸€ä¸ª IoC å®¹å™¨ï¼Œä¸»è¦è´Ÿè´£ç®¡ç† Java å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå’Œä¾èµ–å…³ç³»ã€‚è€Œ Web å®¹å™¨ï¼Œæ¯”å¦‚ Tomcatã€Jetty è¿™äº›ï¼Œæ˜¯ç”¨æ¥è¿è¡Œ Web åº”ç”¨çš„å®¹å™¨ï¼Œè´Ÿè´£å¤„ç† HTTP è¯·æ±‚å’Œå“åº”ï¼Œç®¡ç† Servlet çš„ç”Ÿå‘½å‘¨æœŸã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/**</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> * SpringUtil.java</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> * ç”¨äºè·å– Spring å®¹å™¨ä¸­çš„ Beanï¼ŒæŠ€æœ¯æ´¾æºç ï¼šhttps://github.com/itwanger/paicoding</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> */</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SpringUtil</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ApplicationContextAware</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> volatile</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ApplicationContext</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> setApplicationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ApplicationContext</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> applicationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        SpringUtil</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">context</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> applicationContext;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> T</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">bean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(bean);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»åŠŸèƒ½ä¸Šçœ‹ï¼ŒSpring å®¹å™¨ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘å±‚é¢çš„å¯¹è±¡ç®¡ç†ï¼Œæ¯”å¦‚æˆ‘ä»¬çš„ Serviceã€Daoã€Controller è¿™äº› Bean éƒ½æ˜¯ç”± Spring å®¹å™¨æ¥åˆ›å»ºå’Œç®¡ç†çš„ã€‚è€Œ Web å®¹å™¨ä¸»è¦å¤„ç†ç½‘ç»œé€šä¿¡ï¼Œæ¯”å¦‚æ¥æ”¶ HTTP è¯·æ±‚ã€è§£æè¯·æ±‚å‚æ•°ã€è°ƒç”¨ç›¸åº”çš„ Servletï¼Œç„¶åæŠŠå“åº”è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p><figure><img src="/blog/assets/img/spring-20250621063345.d5e1e072.png" alt="åšå®¢å›­ hiy1995ï¼šweb å®¹å™¨" tabindex="0" loading="lazy"><figcaption>åšå®¢å›­ hiy1995ï¼šweb å®¹å™¨</figcaption></figure><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œè¿™ä¸¤ä¸ªå®¹å™¨æ˜¯ç›¸è¾…ç›¸æˆçš„ã€‚æˆ‘ä»¬çš„ Web é¡¹ç›®éƒ¨ç½²åœ¨ Tomcat ä¸Šçš„æ—¶å€™ï¼ŒTomcat ä¼šè´Ÿè´£æ¥æ”¶ HTTP è¯·æ±‚ï¼Œç„¶åæŠŠè¯·æ±‚äº¤ç»™ DispatcherServlet å¤„ç†ï¼Œè€Œ DispatcherServlet åˆä¼šå» Spring å®¹å™¨ä¸­æŸ¥æ‰¾ç›¸åº”çš„ Controller æ¥å¤„ç†ä¸šåŠ¡é€»è¾‘ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/**</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> * GlobalViewInterceptor.java</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> * ç”¨äºå…¨å±€æ‹¦æˆªå™¨ï¼ŒæŠ€æœ¯æ´¾æºç ï¼šhttps://github.com/itwanger/paicoding</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> */</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> GlobalViewInterceptor</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HandlerInterceptor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> GlobalInitService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> globalInitService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> boolean</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> preHandle</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">HttpServletRequest</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> request</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">                           HttpServletResponse</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> response</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">                           Object</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> handler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // Web å®¹å™¨çš„ HTTP è¯·æ±‚ + Spring å®¹å™¨çš„ä¸šåŠ¡æœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„åŒºåˆ«æ˜¯ç”Ÿå‘½å‘¨æœŸã€‚Web å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸè·Ÿ Web åº”ç”¨ç¨‹åºçš„éƒ¨ç½²å’Œå¸è½½ç›¸å…³ï¼Œè€Œ Spring å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸæ˜¯åœ¨ Web åº”ç”¨å¯åŠ¨çš„æ—¶å€™åˆå§‹åŒ–ï¼Œåº”ç”¨å…³é—­çš„æ—¶å€™é”€æ¯ã€‚</p><p>ç°åœ¨æˆ‘ä»¬éƒ½ç”¨ Spring Boot äº†ï¼ŒSpring Boot å†…ç½®äº† Tomcatï¼ŒæŠŠ Web å®¹å™¨å’Œ Spring å®¹å™¨éƒ½æ•´åˆåœ¨ä¸€èµ·äº†ï¼Œæˆ‘ä»¬åªéœ€è¦è¿è¡Œä¸€ä¸ª jar åŒ…å°±å¯ä»¥äº†ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">SpringBootApplication</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> QuickForumApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        SpringApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">QuickForumApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, args);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å»å“ªå„¿åŒå­¦ 1 æŠ€æœ¯äºŒé¢åŸé¢˜ï¼šspringçš„å®¹å™¨ã€webå®¹å™¨ã€springmvcçš„å®¹å™¨ä¹‹é—´çš„åŒºåˆ«</li></ol></blockquote><!----><p>memoï¼š2024 å¹´ 7 æœˆ 11 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨å¸®<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">çƒå‹ä»¬ä¿®æ”¹ç®€å†</a>çš„æ—¶å€™ï¼Œç¢°åˆ°åŒ—äº¬äº¤é€šå¤§å­¦æœ¬ï¼ŒåŒ—äº¬èˆªç©ºèˆªå¤©å¤§å­¦ç¡•çš„çƒå‹ï¼Œå¥¹çš„ç®€å†ä¸Šæœ‰å¾ˆå¤šæ ¡å›­è£èª‰å¥–é¡¹ï¼Œåƒä¼˜ç§€å­¦ç”Ÿã€å¥–å­¦é‡‘ã€è‹±è¯­å››å…­çº§ç­‰ï¼Œè¿™äº›éƒ½æ˜¯éå¸¸å¥½çš„åŠ åˆ†é¡¹ã€‚</p><figure><img src="/blog/assets/img/spring-20250621064205.85f1fc74.png" alt="åŒ—äº¬äº¤é€šå¤§å­¦æœ¬ï¼ŒåŒ—äº¬èˆªç©ºèˆªå¤©å¤§å­¦ç¡•çš„çƒå‹" tabindex="0" loading="lazy"><figcaption>åŒ—äº¬äº¤é€šå¤§å­¦æœ¬ï¼ŒåŒ—äº¬èˆªç©ºèˆªå¤©å¤§å­¦ç¡•çš„çƒå‹</figcaption></figure><h2 id="ioc" tabindex="-1"><a class="header-anchor" href="#ioc"><span>IoC</span></a></h2><h3 id="_6-ğŸŒŸè¯´ä¸€è¯´ä»€ä¹ˆæ˜¯ioc" tabindex="-1"><a class="header-anchor" href="#_6-ğŸŒŸè¯´ä¸€è¯´ä»€ä¹ˆæ˜¯ioc"><span>6.ğŸŒŸè¯´ä¸€è¯´ä»€ä¹ˆæ˜¯IoCï¼Ÿ</span></a></h3><p>æ¨èé˜…è¯»ï¼š<a href="https://javabetter.cn/springboot/ioc.html" target="_blank" rel="noopener noreferrer">IoC æ‰«ç›²</a></p><p>IoC çš„å…¨ç§°æ˜¯ Inversion of Controlï¼Œä¹Ÿå°±æ˜¯æ§åˆ¶åè½¬ã€‚è¿™é‡Œçš„â€œæ§åˆ¶â€æŒ‡çš„æ˜¯å¯¹è±¡åˆ›å»ºå’Œä¾èµ–å…³ç³»ç®¡ç†çš„æ§åˆ¶æƒã€‚</p><figure><img src="/blog/assets/img/spring-20240310191630.5a2cd7b9.png" alt="å›¾ç‰‡æ¥æºäºç½‘ç»œï¼šIoC" tabindex="0" loading="lazy"><figcaption>å›¾ç‰‡æ¥æºäºç½‘ç»œï¼šIoC</figcaption></figure><p>ä»¥å‰æˆ‘ä»¬å†™ä»£ç çš„æ—¶å€™ï¼Œå¦‚æœ A ç±»éœ€è¦ç”¨åˆ° B ç±»ï¼Œæˆ‘ä»¬å°±åœ¨ A ç±»é‡Œé¢ç›´æ¥ new ä¸€ä¸ª B å¯¹è±¡å‡ºæ¥ï¼Œè¿™æ · A ç±»å°±æ§åˆ¶äº† B ç±»å¯¹è±¡çš„åˆ›å»ºã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ä¼ ç»Ÿæ–¹å¼ï¼šå¯¹è±¡ä¸»åŠ¨åˆ›å»ºä¾èµ–</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDao</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // ä¸»åŠ¨åˆ›å»ºä¾èµ–å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> UserDaoImpl</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ‰äº† IoC ä¹‹åï¼Œè¿™ä¸ªæ§åˆ¶æƒå°±â€œåè½¬â€äº†ï¼Œä¸å†ç”± A ç±»æ¥æ§åˆ¶ B å¯¹è±¡çš„åˆ›å»ºï¼Œè€Œæ˜¯äº¤ç»™å¤–éƒ¨çš„å®¹å™¨æ¥ç®¡ç†ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/** </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> * ä½¿ç”¨ Spring IoC å®¹å™¨æ¥ç®¡ç† UserDao çš„åˆ›å»ºå’Œæ³¨å…¥</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> * æŠ€æœ¯æ´¾æºç ï¼šhttps://github.com/itwanger/paicoding</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> */</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserServiceImpl</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDao</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ä¸éœ€è¦ä¸»åŠ¨åˆ›å»º UserDaoï¼Œç”± Spring å®¹å™¨æ³¨å…¥</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> BaseUserInfoDTO</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getAndUpdateUserIpInfoBySessionId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> session</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> clientIp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // ç›´æ¥ä½¿ç”¨æ³¨å…¥çš„ userDao</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getBySessionId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(session);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>----è¿™éƒ¨åˆ†é¢è¯•ä¸­å¯ä»¥ä¸èƒŒ start----</p><p>æ²¡æœ‰ IoC ä¹‹å‰ï¼š</p><blockquote><p>æˆ‘éœ€è¦ä¸€ä¸ªå¥³æœ‹å‹ï¼Œåˆšå¥½å¤§è¡—ä¸Šçªç„¶çœ‹åˆ°äº†ä¸€ä¸ªå°å§å§ï¼Œäººå¾ˆå¥½çœ‹ï¼Œäºæ˜¯æˆ‘å°±è‡ªå·±ä¸»åŠ¨ä¸Šå»æ­è®ªï¼Œè¦å¥¹çš„å¾®ä¿¡å·ï¼Œæ‰¾æœºä¼šèŠå¤©å…³å¿ƒå¥¹ï¼Œç„¶åçº¦å¥¹å‡ºæ¥åƒé¥­ï¼Œæ‰“å¬å¥¹çš„çˆ±å¥½ï¼Œä¸‰è§‚ã€‚ã€‚ã€‚</p></blockquote><p>æœ‰äº† IoC ä¹‹åï¼š</p><blockquote><p>æˆ‘éœ€è¦ä¸€ä¸ªå¥³æœ‹å‹ï¼Œäºæ˜¯æˆ‘å°±å»æ‰¾å©šä»‹æ‰€ï¼Œå‘Šè¯‰å©šä»‹æ‰€ï¼Œæˆ‘éœ€è¦ä¸€ä¸ªé•¿çš„åƒèµµéœ²æ€çš„ï¼Œä¼šæ‰“ Dota2 çš„ï¼Œäºæ˜¯å©šä»‹æ‰€åœ¨å®ƒçš„äººæ‰åº“é‡Œå¼€å§‹æ‰¾ï¼Œæ‰¾ä¸åˆ°å®ƒå°±ç›´æ¥è¯´æ²¡æœ‰ï¼Œæ‰¾åˆ°å®ƒå°±ç›´æ¥ä»‹ç»ç»™æˆ‘ã€‚</p></blockquote><p>å©šä»‹æ‰€å°±ç›¸å½“äºä¸€ä¸ª IoC å®¹å™¨ï¼Œæˆ‘å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘éœ€è¦çš„å¥³æœ‹å‹å°±æ˜¯å¦ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä¸ç”¨å…³å¿ƒå¥³æœ‹å‹æ˜¯æ€ä¹ˆæ¥çš„ï¼Œæˆ‘åªéœ€è¦å‘Šè¯‰å©šä»‹æ‰€æˆ‘éœ€è¦ä»€ä¹ˆæ ·çš„å¥³æœ‹å‹ï¼Œå©šä»‹æ‰€å°±å¸®æˆ‘å»æ‰¾ã€‚</p><figure><img src="/blog/assets/img/spring-619da277-c15e-4dd7-9f2b-dbd809a9aaa0.28e88a6d.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šå¼•å…¥IoCä¹‹å‰å’Œå¼•å…¥IoCä¹‹å" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šå¼•å…¥IoCä¹‹å‰å’Œå¼•å…¥IoCä¹‹å</figcaption></figure><p>----è¿™éƒ¨åˆ†é¢è¯•ä¸­å¯ä»¥ä¸èƒŒ end----</p><h4 id="diå’Œiocçš„åŒºåˆ«äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#diå’Œiocçš„åŒºåˆ«äº†è§£å—"><span>DIå’ŒIoCçš„åŒºåˆ«äº†è§£å—ï¼Ÿ</span></a></h4><p>IoC çš„æ€æƒ³æ˜¯æŠŠå¯¹è±¡åˆ›å»ºå’Œä¾èµ–å…³ç³»çš„æ§åˆ¶æƒç”±ä¸šåŠ¡ä»£ç è½¬ç§»ç»™ Spring å®¹å™¨ã€‚è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒæŠ½è±¡çš„æ¦‚å¿µï¼Œå‘Šè¯‰æˆ‘ä»¬åº”è¯¥æ€ä¹ˆå»è®¾è®¡ç³»ç»Ÿæ¶æ„ã€‚</p><figure><img src="/blog/assets/img/spring-20241117132929.b57fc8ab.png" alt="Martin Fowlerâ€™s Definition" tabindex="0" loading="lazy"><figcaption>Martin Fowlerâ€™s Definition</figcaption></figure><p>è€Œ DIï¼Œä¹Ÿå°±æ˜¯ä¾èµ–æ³¨å…¥ï¼Œå®ƒæ˜¯å®ç° IoC è¿™ç§æ€æƒ³çš„å…·ä½“æŠ€æœ¯æ‰‹æ®µã€‚åœ¨ Spring é‡Œï¼Œæˆ‘ä»¬ç”¨ <code>@Autowired</code> æ³¨è§£å°±æ˜¯åœ¨ä½¿ç”¨ DI çš„å­—æ®µæ³¨å…¥æ–¹å¼ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ArticleReadServiceImpl</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ArticleReadService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ArticleDao</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> articleDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // å­—æ®µæ³¨å…¥</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDao</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»å®ç°è§’åº¦æ¥çœ‹ï¼ŒDI é™¤äº†å­—æ®µæ³¨å…¥ï¼Œè¿˜æœ‰æ„é€ æ–¹æ³•æ³¨å…¥å’Œ Setter æ–¹æ³•æ³¨å…¥ç­‰æ–¹å¼ã€‚åœ¨åš<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a>é¡¹ç›®çš„æ—¶å€™ï¼Œæˆ‘å°±å°è¯•è¿‡æ„é€ æ–¹æ³•æ³¨å…¥çš„æ–¹å¼ã€‚</p><figure><img src="/blog/assets/img/spring-20250622091928.38a1089f.png" alt="æŠ€æœ¯æ´¾æºç ï¼šæ„é€ æ–¹æ³•çš„æ³¨å…¥æ–¹å¼" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šæ„é€ æ–¹æ³•çš„æ³¨å…¥æ–¹å¼</figcaption></figure><p>å½“ç„¶äº†ï¼ŒDI å¹¶ä¸æ˜¯å®ç° IoC çš„å”¯ä¸€æ–¹å¼ï¼Œè¿˜æœ‰ Service Locator æ¨¡å¼ï¼Œå¯ä»¥é€šè¿‡å®ç° ApplicationContextAware æ¥å£æ¥è·å– Spring å®¹å™¨ä¸­çš„ Beanã€‚</p><figure><img src="/blog/assets/img/spring-20250622093007.fd308edc.png" alt="æŠ€æœ¯æ´¾æºç ï¼šIoC çš„Service Locator æ¨¡å¼" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šIoC çš„Service Locator æ¨¡å¼</figcaption></figure><p>ä¹‹æ‰€ä»¥ ID åæˆä¸º IoC çš„é¦–é€‰å®ç°æ–¹å¼ï¼Œæ˜¯å› ä¸ºä»£ç æ›´æ¸…æ™°ã€å¯è¯»æ€§æ›´é«˜ã€‚</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>IoCï¼ˆæ§åˆ¶åè½¬ï¼‰</span></span>
<span class="line"><span>â”œâ”€â”€ DIï¼ˆä¾èµ–æ³¨å…¥ï¼‰          â† ä¸»è¦å®ç°æ–¹å¼</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ æ„é€ å™¨æ³¨å…¥</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ å­—æ®µæ³¨å…¥</span></span>
<span class="line"><span>â”‚   â””â”€â”€ Setteræ³¨å…¥</span></span>
<span class="line"><span>â”œâ”€â”€ æœåŠ¡å®šä½å™¨æ¨¡å¼</span></span>
<span class="line"><span>â”œâ”€â”€ å·¥å‚æ¨¡å¼</span></span>
<span class="line"><span>â””â”€â”€ å…¶ä»–å®ç°æ–¹å¼</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-ioc-å‘¢" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-ioc-å‘¢"><span>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ IoC å‘¢ï¼Ÿ</span></a></h4><p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦å®ç°æŸä¸€ä¸ªåŠŸèƒ½ï¼Œå¯èƒ½è‡³å°‘éœ€è¦ä¸¤ä¸ªä»¥ä¸Šçš„å¯¹è±¡æ¥ååŠ©å®Œæˆï¼Œåœ¨æ²¡æœ‰ Spring ä¹‹å‰ï¼Œæ¯ä¸ªå¯¹è±¡åœ¨éœ€è¦å®ƒçš„åˆä½œå¯¹è±¡æ—¶ï¼Œéœ€è¦è‡ªå·± new ä¸€ä¸ªï¼Œæ¯”å¦‚è¯´ A è¦ä½¿ç”¨ Bï¼ŒA å°±å¯¹ B äº§ç”Ÿäº†ä¾èµ–ï¼Œä¹Ÿå°±æ˜¯ A å’Œ B ä¹‹é—´å­˜åœ¨äº†ä¸€ç§è€¦åˆå…³ç³»ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ä¼ ç»Ÿæ–¹å¼ï¼šå¯¹è±¡è‡ªå·±åˆ›å»ºä¾èµ–</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDao</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userDao </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> UserDaoImpl</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // ç¡¬ç¼–ç ä¾èµ–</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> User</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">findById</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(id);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ‰äº† Spring ä¹‹åï¼Œåˆ›å»º B çš„å·¥ä½œäº¤ç»™äº† Spring æ¥å®Œæˆï¼ŒSpring åˆ›å»ºå¥½äº† B å¯¹è±¡åå°±æ”¾åˆ°å®¹å™¨ä¸­ï¼ŒA å‘Šè¯‰ Spring æˆ‘éœ€è¦ Bï¼ŒSpring å°±ä»å®¹å™¨ä¸­å–å‡º B äº¤ç»™ A æ¥ä½¿ç”¨ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// IoC æ–¹å¼ï¼šä¾èµ–ç”±å¤–éƒ¨æ³¨å…¥</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserServiceImpl</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDao</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // ä¾èµ–æ³¨å…¥ï¼Œä¸å…³å¿ƒå…·ä½“å®ç°</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> User</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">findById</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(id);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è‡³äº B æ˜¯æ€ä¹ˆæ¥çš„ï¼ŒA å°±ä¸å†å…³å¿ƒäº†ï¼ŒSpring å®¹å™¨æƒ³é€šè¿‡ newnew åˆ›å»º B è¿˜æ˜¯ new åˆ›å»º Bï¼Œæ— æ‰€è°“ã€‚</p><p>è¿™å°±æ˜¯ IoC çš„å¥½å¤„ï¼Œå®ƒé™ä½äº†å¯¹è±¡ä¹‹é—´çš„è€¦åˆåº¦ï¼Œè®©æ¯ä¸ªå¯¹è±¡åªå…³æ³¨è‡ªå·±çš„ä¸šåŠ¡å®ç°ï¼Œä¸å…³å¿ƒå…¶ä»–å¯¹è±¡æ˜¯æ€ä¹ˆåˆ›å»ºçš„ã€‚</p><p>æ¨èé˜…è¯»ï¼š<a href="https://www.cnblogs.com/xdp-gacl/p/4249939.html" target="_blank" rel="noopener noreferrer">å­¤å‚²è‹ç‹¼ï¼šè°ˆè°ˆå¯¹ Spring IOC çš„ç†è§£</a></p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°ç±³ 25 å±Šæ—¥å¸¸å®ä¹ ä¸€é¢åŸé¢˜ï¼šè¯´è¯´ä½ å¯¹ AOP å’Œ IoC çš„ç†è§£ã€‚</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°å…¬å¸é¢ç»åˆé›†åŒå­¦ 1 Java åç«¯é¢è¯•åŸé¢˜ï¼šä»‹ç» Spring IoC å’Œ AOP?</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ‹›å•†é“¶è¡Œé¢ç»åŒå­¦ 6 æ‹›é“¶ç½‘ç»œç§‘æŠ€é¢è¯•åŸé¢˜ï¼šSpringBootæ¡†æ¶çš„AOPã€IOC/DIï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œé¢ç»åŒå­¦ 8 é¢è¯•åŸé¢˜ï¼šIOCï¼ŒAOP</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¿«æ‰‹åŒå­¦ 4 ä¸€é¢åŸé¢˜ï¼šè§£é‡Šä¸‹ä»€ä¹ˆæ˜¯IOCå’ŒAOPï¼Ÿåˆ†åˆ«è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼ŸIOCå’ŒDIçš„åŒºåˆ«ï¼Ÿ</li></ol></blockquote><p>memoï¼š2025 å¹´ 6 æœˆ 22 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æœ‰çƒå‹å‘å–œæŠ¥è¯´æ‹¿åˆ°äº†ä¸¤ä¸ª offer</a>ï¼Œä¸€ä¸ªæ˜¯åš B ç«¯ç”µå•†çš„ï¼Œå¦ä¸€ä¸ªæ˜¯å¤–ä¼ï¼Œä¸»è¦åš Power BI çš„ä½ä»£ç å¼€å‘ï¼Œæˆ‘çš„å»ºè®®æ˜¯å»å¤–ä¼ï¼Œå› ä¸ºå®ä¹ æœ€é‡è¦çš„æ˜¯æ··ä¸ª titleï¼Œæœ‰æ›´å¤šçš„æ—¶é—´ï¼Œå¯ä»¥å»å­¦ä¹ æ˜Ÿçƒé‡Œçš„é¡¹ç›®ï¼Œå…¶å®ä¼šæ›´å®åœ¨ã€‚</p><figure><img src="/blog/assets/img/spring-äºŒå“¥ï¼Œç›®å‰æ‹¿åˆ°äº†ä¸¤ä¸ªofferã€‚ç¬¬ä¸€ä¸ªæ˜¯åšbç«¯ç”µ.55f527cf.png" alt="çƒå‹æ‹¿åˆ°äº†å¤–ä¼å’Œç”µå•†çš„ offer" tabindex="0" loading="lazy"><figcaption>çƒå‹æ‹¿åˆ°äº†å¤–ä¼å’Œç”µå•†çš„ offer</figcaption></figure><h3 id="_7-èƒ½è¯´ä¸€ä¸‹iocçš„å®ç°æœºåˆ¶å—" tabindex="-1"><a class="header-anchor" href="#_7-èƒ½è¯´ä¸€ä¸‹iocçš„å®ç°æœºåˆ¶å—"><span>7.èƒ½è¯´ä¸€ä¸‹IoCçš„å®ç°æœºåˆ¶å—ï¼Ÿ</span></a></h3><p>å¥½çš„ï¼ŒSpring IoC çš„å®ç°æœºåˆ¶è¿˜æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œæˆ‘å°½é‡ç”¨æ¯”è¾ƒé€šä¿—çš„æ–¹å¼æ¥è§£é‡Šä¸€ä¸‹æ•´ä¸ªæµç¨‹ã€‚</p><figure><img src="/blog/assets/img/spring-1d55c63d-2d12-43b1-9f43-428f5f4a1413.ec07ad44.png" alt="é¢æ¸£é€†è¢­ï¼šminiç‰ˆæœ¬Spring IoC" tabindex="0" loading="lazy"><figcaption>é¢æ¸£é€†è¢­ï¼šminiç‰ˆæœ¬Spring IoC</figcaption></figure><p>ç¬¬ä¸€æ­¥æ˜¯åŠ è½½ Bean çš„å®šä¹‰ä¿¡æ¯ã€‚Spring ä¼šæ‰«ææˆ‘ä»¬é…ç½®çš„åŒ…è·¯å¾„ï¼Œæ‰¾åˆ°æ‰€æœ‰æ ‡æ³¨äº† <code>@Component</code>ã€<code>@Service</code>ã€<code>@Repository</code> è¿™äº›æ³¨è§£çš„ç±»ï¼Œç„¶åæŠŠè¿™äº›ç±»çš„å…ƒä¿¡æ¯å°è£…æˆ BeanDefinition å¯¹è±¡ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Beanå®šä¹‰ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> BeanDefinition</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> beanClassName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     // ç±»å</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> scope</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            // ä½œç”¨åŸŸ</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> boolean</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> lazyInit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // æ˜¯å¦æ‡’åŠ è½½</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">[] dependsOn</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      // ä¾èµ–çš„Bean</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ConstructorArgumentValues</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> constructorArgumentValues</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // æ„é€ å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MutablePropertyValues</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> propertyValues</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // å±æ€§å€¼</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒæ­¥æ˜¯ Bean å·¥å‚çš„å‡†å¤‡ã€‚Spring ä¼šåˆ›å»ºä¸€ä¸ª DefaultListableBeanFactory ä½œä¸º Bean å·¥å‚æ¥è´Ÿè´£ Bean çš„åˆ›å»ºå’Œç®¡ç†ã€‚</p><figure><img src="/blog/assets/img/spring-20250623094742.c94f6d31.png" alt="æŠ€æœ¯æ´¾æºç ï¼šDefaultListableBeanFactory" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šDefaultListableBeanFactory</figcaption></figure><p>ç¬¬ä¸‰æ­¥æ˜¯ Bean çš„å®ä¾‹åŒ–å’Œåˆå§‹åŒ–ã€‚è¿™ä¸ªè¿‡ç¨‹æ¯”è¾ƒå¤æ‚ï¼ŒSpring ä¼šæ ¹æ® BeanDefinition æ¥åˆ›å»º Bean å®ä¾‹ã€‚</p><figure><img src="/blog/assets/img/spring-20250623101221.544c0ac8.png" alt="IoCçš„å®ç°æœºåˆ¶" tabindex="0" loading="lazy"><figcaption>IoCçš„å®ç°æœºåˆ¶</figcaption></figure><p>å¯¹äºå•ä¾‹ Beanï¼ŒSpring ä¼šå…ˆæ£€æŸ¥ç¼“å­˜ä¸­æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨å°±åˆ›å»ºæ–°å®ä¾‹ã€‚åˆ›å»ºå®ä¾‹çš„æ—¶å€™ä¼šé€šè¿‡åå°„è°ƒç”¨æ„é€ æ–¹æ³•ï¼Œç„¶åè¿›è¡Œå±æ€§æ³¨å…¥ï¼Œæœ€åæ‰§è¡Œåˆå§‹åŒ–å›è°ƒæ–¹æ³•ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ç®€åŒ–çš„Beanåˆ›å»ºæµç¨‹</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AbstractBeanFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    protected</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> beanName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">BeanDefinition</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> bd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // 1. å®ä¾‹åŒ–å‰å¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> bean</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> resolveBeforeInstantiation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName, bd);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (bean </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> bean;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // 2. å®é™…åˆ›å»ºBean</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> doCreateBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName, bd);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    protected</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> doCreateBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> beanName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">BeanDefinition</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> bd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // 2.1 å®ä¾‹åŒ–</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> bean</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createBeanInstance</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName, bd);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // 2.2 å±æ€§å¡«å……ï¼ˆä¾èµ–æ³¨å…¥ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        populateBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName, bd, bean);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // 2.3 åˆå§‹åŒ–</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> exposedObject</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> initializeBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName, bean, bd);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> exposedObject;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¾èµ–æ³¨å…¥çš„å®ç°ä¸»è¦æ˜¯é€šè¿‡åå°„æ¥å®Œæˆçš„ã€‚æ¯”å¦‚æˆ‘ä»¬ç”¨ <code>@Autowired</code> æ ‡æ³¨äº†ä¸€ä¸ªå­—æ®µï¼ŒSpring åœ¨åˆ›å»º Bean çš„æ—¶å€™ä¼šæ‰«æè¿™ä¸ªå­—æ®µï¼Œç„¶åä»å®¹å™¨ä¸­æ‰¾åˆ°å¯¹åº”ç±»å‹çš„ Beanï¼Œé€šè¿‡åå°„çš„æ–¹å¼è®¾ç½®åˆ°è¿™ä¸ªå­—æ®µä¸Šã€‚</p><figure><img src="/blog/assets/img/spring-20250628110426.621b5330.png" alt="è´°å¸ˆå…„çš„å± å®°åœºï¼šå„ä¸ªæ³¨è§£çš„æ³¨å…¥æµç¨‹" tabindex="0" loading="lazy"><figcaption>è´°å¸ˆå…„çš„å± å®°åœºï¼šå„ä¸ªæ³¨è§£çš„æ³¨å…¥æµç¨‹</figcaption></figure><h4 id="ä½ æ˜¯æ€ä¹ˆç†è§£-spring-ioc-çš„" tabindex="-1"><a class="header-anchor" href="#ä½ æ˜¯æ€ä¹ˆç†è§£-spring-ioc-çš„"><span>ä½ æ˜¯æ€ä¹ˆç†è§£ Spring IoC çš„ï¼Ÿ</span></a></h4><p>IoC æœ¬è´¨ä¸Šä¸€ä¸ªè¶…çº§å·¥å‚ï¼Œè¿™ä¸ªå·¥å‚çš„äº§å“å°±æ˜¯å„ç§ Bean å¯¹è±¡ã€‚</p><figure><img src="/blog/assets/img/spring-7678c40f-a48d-4bd5-80f8-e902ad688e11.44442627.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šå·¥å‚è¿è¡Œ" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šå·¥å‚è¿è¡Œ</figcaption></figure><p>æˆ‘ä»¬é€šè¿‡ <code>@Component</code>ã€<code>@Service</code> è¿™äº›æ³¨è§£å‘Šè¯‰å·¥å‚ï¼šâ€œæˆ‘è¦ç”Ÿäº§ä»€ä¹ˆæ ·çš„äº§å“ï¼Œè¿™ä¸ªäº§å“æœ‰ä»€ä¹ˆç‰¹æ€§ï¼Œéœ€è¦ä»€ä¹ˆåŸææ–™â€ã€‚</p><p>ç„¶åå·¥å‚é‡Œå„ç§ç”Ÿäº§çº¿ï¼Œåœ¨ Spring ä¸­å°±æ˜¯å„ç§ BeanPostProcessorã€‚æ¯”å¦‚ <code>AutowiredAnnotationBeanPostProcessor</code> ä¸“é—¨è´Ÿè´£å¤„ç† <code>@Autowired</code> æ³¨è§£ã€‚</p><p>å·¥å‚é‡Œè¿˜æœ‰å„ç§ç¼“å­˜æœºåˆ¶ç”¨æ¥å­˜æ”¾äº§å“ï¼Œæ¯”å¦‚è¯´ singletonObjects æ˜¯æˆå“ä»“åº“ï¼Œå­˜æ”¾å®Œå·¥çš„å•ä¾‹ Beanï¼›earlySingletonObjects æ˜¯åŠæˆå“ä»“åº“ï¼Œç”¨æ¥è§£å†³å¾ªç¯ä¾èµ–é—®é¢˜ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Springå•ä¾‹Beanæ³¨å†Œè¡¨</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DefaultSingletonBeanRegistry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ä¸€çº§ç¼“å­˜ï¼šå®Œæˆåˆå§‹åŒ–çš„å•ä¾‹Bean</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Map</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> singletonObjects </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ConcurrentHashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">256</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // äºŒçº§ç¼“å­˜ï¼šæ—©æœŸæš´éœ²çš„å•ä¾‹Beanï¼ˆè§£å†³å¾ªç¯ä¾èµ–ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Map</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> earlySingletonObjects </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">16</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ä¸‰çº§ç¼“å­˜ï¼šå•ä¾‹Beanå·¥å‚</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Map</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ObjectFactory</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> singletonFactories </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">16</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getSingleton</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> beanName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> singletonObject</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">singletonObjects</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (singletonObject </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            singletonObject </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">earlySingletonObjects</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (singletonObject </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">                ObjectFactory</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">singletonFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">singletonFactories</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (singletonFactory </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                    singletonObject </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> singletonFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getObject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                    this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">earlySingletonObjects</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">put</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName, singletonObject);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                    this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">singletonFactories</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">remove</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> singletonObject;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€æœ‰æ„æ€çš„æ˜¯ï¼Œè¿™ä¸ªå·¥å‚è¿˜å¾ˆæ™ºèƒ½ï¼Œå®ƒçŸ¥é“äº§å“ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚å®ƒä¼šæ ¹æ®ä¾èµ–å…³ç³»æ¥å†³å®š Bean çš„åˆ›å»ºé¡ºåºã€‚å¦‚æœå‘ç°å¾ªç¯ä¾èµ–ï¼Œå®ƒè¿˜ä¼šç”¨ä¸‰çº§ç¼“å­˜æœºåˆ¶æ¥å·§å¦™åœ°è§£å†³ã€‚</p><h4 id="èƒ½æ‰‹å†™ä¸€ä¸ªç®€å•çš„-ioc-å®¹å™¨å—" tabindex="-1"><a class="header-anchor" href="#èƒ½æ‰‹å†™ä¸€ä¸ªç®€å•çš„-ioc-å®¹å™¨å—"><span>èƒ½æ‰‹å†™ä¸€ä¸ªç®€å•çš„ IoC å®¹å™¨å—ï¼Ÿ</span></a></h4><p>1ã€é¦–å…ˆå®šä¹‰åŸºç¡€çš„æ³¨è§£ï¼Œæ¯”å¦‚è¯´ <code>@Component</code>ã€<code>@Autowired</code> ç­‰ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ç»„ä»¶æ³¨è§£</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Target</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">ElementType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">TYPE</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Retention</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">RetentionPolicy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">RUNTIME</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> @</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">interface</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;"> Component</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// è‡ªåŠ¨æ³¨å…¥æ³¨è§£</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Target</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">ElementType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">FIELD</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Retention</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">RetentionPolicy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">RUNTIME</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> @</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">interface</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;"> Autowired</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2ã€æ ¸å¿ƒçš„ IoC å®¹å™¨ç±»ï¼Œè´Ÿè´£æ‰«æåŒ…è·¯å¾„ï¼Œåˆ›å»º Bean å®ä¾‹ï¼Œå¹¶å¤„ç†ä¾èµ–æ³¨å…¥ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SimpleIoC</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // Beanå®¹å™¨</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Map</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> beans </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     * æ³¨å†ŒBean</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> registerBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">clazz</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            // åˆ›å»ºå®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">            Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> instance</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> clazz</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getDeclaredConstructor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">newInstance</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            beans</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">put</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(clazz, instance);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            throw</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> RuntimeException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;åˆ›å»ºBeanå¤±è´¥: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> clazz</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(), e);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     * è·å–Bean</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">SuppressWarnings</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;unchecked&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> T</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">clazz</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (T) </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">beans</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(clazz);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     * ä¾èµ–æ³¨å…¥</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> inject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> bean</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> :</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> beans</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">values</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()) {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            injectFields</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(bean);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     * å­—æ®µæ³¨å…¥</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> injectFields</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> bean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Field</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">fields</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> bean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getDeclaredFields</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Field</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> field</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> :</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> fields) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">field</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isAnnotationPresent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Autowired</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                    field</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setAccessible</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">                    Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">field</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                    field</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(bean, dependency);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                    throw</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> RuntimeException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ³¨å…¥å¤±è´¥: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> field</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(), e);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3ã€ä½¿ç”¨ç¤ºä¾‹ï¼Œå®šä¹‰ä¸€äº› Bean ç±»ï¼Œå¹¶æ³¨å†Œåˆ° IoC å®¹å™¨ä¸­ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// DAOå±‚</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> save</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> user</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ä¿å­˜ç”¨æˆ·: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Serviceå±‚</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDao</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">save</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(name);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ç”¨æˆ·åˆ›å»ºå®Œæˆ&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æµ‹è¯•</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Test</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        SimpleIoC</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> ioc</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> SimpleIoC</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // æ³¨å†ŒBean</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        ioc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">registerBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">UserDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        ioc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">registerBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // ä¾èµ–æ³¨å…¥</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        ioc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">inject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        UserService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userService</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> ioc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        userService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">createUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ç‹äºŒ&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4ã€å¯ä»¥åŠ ä¸Šç»„ä»¶æ‰«æã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.lang.reflect.Field</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> java.util.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SimpleIoC</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Map</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> beans </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     * æ‰«æå¹¶æ³¨å†Œç»„ä»¶</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> scan</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> packageName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // ç®€åŒ–ç‰ˆï¼šæ‰‹åŠ¨æ·»åŠ éœ€è¦æ‰«æçš„ç±»</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        List</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">classes</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getClassesInPackage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(packageName);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">clazz</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> :</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> classes) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">clazz</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isAnnotationPresent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Component</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)) {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">                registerBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(clazz);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // ä¾èµ–æ³¨å…¥</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        inject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     * è·å–åŒ…ä¸‹çš„ç±»ï¼ˆç®€åŒ–å®ç°ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> List</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getClassesInPackage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> packageName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // é¢è¯•æ—¶å¯ä»¥è¯´ï¼š&quot;å®é™…å®ç°éœ€è¦æ‰«æclasspathï¼Œè¿™é‡Œç®€åŒ–å¤„ç†&quot;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Arrays</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">asList</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">UserDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> registerBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">clazz</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">            Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> instance</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> clazz</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getDeclaredConstructor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">newInstance</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            beans</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">put</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(clazz, instance);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            throw</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> RuntimeException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;åˆ›å»ºBeanå¤±è´¥&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, e);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">SuppressWarnings</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;unchecked&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> T</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">T</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">clazz</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (T) </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">beans</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(clazz);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> inject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> bean</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> :</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> beans</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">values</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()) {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">            Field</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">fields</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> bean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getDeclaredFields</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Field</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> field</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> :</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> fields) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">field</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isAnnotationPresent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Autowired</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                    try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                        field</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setAccessible</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">                        Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">field</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                        field</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(bean, dependency);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                    } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                        throw</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> RuntimeException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ³¨å…¥å¤±è´¥&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, e);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>IoC å®¹å™¨çš„æ ¸å¿ƒæ˜¯ç®¡ç†å¯¹è±¡å’Œä¾èµ–æ³¨å…¥ï¼Œé¦–å…ˆå®šä¹‰æ³¨è§£ï¼Œç„¶åå®ç°å®¹å™¨çš„ä¸‰ä¸ªæ ¸å¿ƒæ–¹æ³•ï¼šæ³¨å†ŒBeanã€è·å–Beanã€ä¾èµ–æ³¨å…¥ï¼›å…³é”®æ˜¯ç”¨åå°„åˆ›å»ºå¯¹è±¡å’Œæ³¨å…¥ä¾èµ–ã€‚</p><p>memoï¼š2025 å¹´ 6 æœˆ 23 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æœ‰çƒå‹å‘å–œæŠ¥è¯´æ‹¿åˆ°äº†äº¬ä¸œçš„ç¤¾æ‹› offer</a>ï¼Œè¿™çœŸçš„è¦æ­å–œä»–ï¼Œä¹Ÿå¸Œæœ›æ‰€æœ‰çœ‹åˆ°è¿™é‡Œçš„å°ä¼™ä¼´éƒ½èƒ½æœ‰ä¸€ä¸ªå¥½çš„ç»“æœã€‚</p><figure><img src="/blog/assets/img/spring-20250623105438.6c9e1af1.png" alt="çƒå‹æ‹¿åˆ°äº¬ä¸œç¤¾æ‹› offer" tabindex="0" loading="lazy"><figcaption>çƒå‹æ‹¿åˆ°äº¬ä¸œç¤¾æ‹› offer</figcaption></figure><h3 id="_8-è¯´è¯´beanfactoryå’Œapplicantcontextçš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_8-è¯´è¯´beanfactoryå’Œapplicantcontextçš„åŒºåˆ«"><span>8.è¯´è¯´BeanFactoryå’ŒApplicantContextçš„åŒºåˆ«?</span></a></h3><p>BeanFactory ç®—æ˜¯ Spring çš„â€œå¿ƒè„â€ï¼Œè€Œ ApplicantContext å¯ä»¥è¯´æ˜¯ Spring çš„å®Œæ•´â€œèº«èº¯â€ã€‚</p><figure><img src="/blog/assets/img/spring-66328446-f89f-4b7a-8d9f-0e1145dd9b2f.2d11b161.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šBeanFactoryå’ŒApplicantContext" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šBeanFactoryå’ŒApplicantContext</figcaption></figure><p>BeanFactory æä¾›äº†æœ€åŸºæœ¬çš„ IoC èƒ½åŠ›ã€‚å®ƒå°±åƒæ˜¯ä¸€ä¸ª Bean å·¥å‚ï¼Œè´Ÿè´£ Bean çš„åˆ›å»ºå’Œç®¡ç†ã€‚ä»–é‡‡ç”¨çš„æ˜¯æ‡’åŠ è½½çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰å½“æˆ‘ä»¬çœŸæ­£å»è·å–æŸä¸ª Bean çš„æ—¶å€™ï¼Œå®ƒæ‰ä¼šå»åˆ›å»ºè¿™ä¸ª Beanã€‚</p><figure><img src="/blog/assets/img/spring-6e6d4b69-f36c-41e6-b8ba-9277be147c9b.c340cfbc.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring5 BeanFactoryç»§æ‰¿ä½“ç³»" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring5 BeanFactoryç»§æ‰¿ä½“ç³»</figcaption></figure><p>å®ƒæœ€ä¸»è¦çš„æ–¹æ³•å°±æ˜¯ <code>getBean()</code>ï¼Œè´Ÿè´£ä»å®¹å™¨ä¸­è¿”å›ç‰¹å®šåç§°æˆ–è€…ç±»å‹çš„ Bean å®ä¾‹ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> BeanFactoryExample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // åˆ›å»º BeanFactory</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        DefaultListableBeanFactory</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> beanFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> DefaultListableBeanFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // æ‰‹åŠ¨æ³¨å†Œ Bean å®šä¹‰</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        BeanDefinition</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> beanDefinition</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> RootBeanDefinition</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        beanFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">registerBeanDefinition</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;userService&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, beanDefinition);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // æ‡’åŠ è½½ï¼šæ­¤æ—¶æ‰åˆ›å»º Bean å®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        UserService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userService</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> beanFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;userService&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ApplicationContext æ˜¯ BeanFactory çš„å­æ¥å£ï¼Œåœ¨ BeanFactory çš„åŸºç¡€ä¸Šæ‰©å±•äº†å¾ˆå¤šä¼ä¸šçº§çš„åŠŸèƒ½ã€‚å®ƒä¸ä»…åŒ…å«äº† BeanFactory çš„æ‰€æœ‰åŠŸèƒ½ï¼Œè¿˜æä¾›äº†å›½é™…åŒ–æ”¯æŒã€äº‹ä»¶å‘å¸ƒæœºåˆ¶ã€AOPã€JDBCã€ORM æ¡†æ¶é›†æˆç­‰ç­‰ã€‚</p><figure><img src="/blog/assets/img/spring-e201c9a3-f23c-4768-b844-ac7e0ba4bcec.2fb97d50.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring5 ApplicationContextéƒ¨åˆ†ä½“ç³»ç±»å›¾" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring5 ApplicationContextéƒ¨åˆ†ä½“ç³»ç±»å›¾</figcaption></figure><p>ApplicationContext é‡‡ç”¨çš„æ˜¯é¥¿åŠ è½½çš„æ–¹å¼ï¼Œå®¹å™¨å¯åŠ¨çš„æ—¶å€™å°±ä¼šæŠŠæ‰€æœ‰çš„å•ä¾‹ Bean éƒ½åˆ›å»ºå¥½ï¼Œè™½ç„¶è¿™æ ·ä¼šå¯¼è‡´å¯åŠ¨æ—¶é—´é•¿ä¸€ç‚¹ï¼Œä½†è¿è¡Œæ—¶æ€§èƒ½æ›´å¥½ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AppConfig</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> userService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ApplicationContextExample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // åˆ›å»º ApplicationContextï¼Œå¯åŠ¨æ—¶å°±åˆ›å»ºæ‰€æœ‰ Bean</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        ApplicationContext</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> context</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> AnnotationConfigApplicationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">AppConfig</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // è·å– Bean</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        UserService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userService</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // å‘å¸ƒäº‹ä»¶</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">publishEvent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> CustomEvent</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Hello World&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»ä½¿ç”¨åœºæ™¯æ¥è¯´ï¼Œå®é™…å¼€å‘ä¸­ç”¨å¾—æœ€å¤šçš„æ˜¯ ApplicationContextã€‚åƒ AnnotationConfigApplicationContextã€WebApplicationContext è¿™äº›éƒ½æ˜¯ ApplicationContext çš„å®ç°ç±»ã€‚</p><p>å¦å¤–ä¸€ä¸ªé‡è¦çš„åŒºåˆ«æ˜¯ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚ApplicationContext ä¼šè‡ªåŠ¨è°ƒç”¨ Bean çš„åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•ï¼Œè€Œ BeanFactory éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨ç®¡ç†ã€‚</p><p>åœ¨ Spring Boot é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>@Autowired</code> æ³¨å…¥ ApplicationContextï¼Œæˆ–è€…é€šè¿‡å®ç° ApplicationContextAware æ¥å£æ¥è·å– ApplicationContextã€‚</p><figure><img src="/blog/assets/img/spring-20250625111259.bcd038bf.png" alt="æŠ€æœ¯æ´¾æºç ï¼šè·å–ApplicationContext" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šè·å–ApplicationContext</figcaption></figure><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢åŒå­¦ 2 ä¼˜é€‰ç‰©æµè°ƒåº¦æŠ€æœ¯ 2 é¢é¢è¯•åŸé¢˜ï¼šBeanFactoryå’ŒApplicationContext</li></ol></blockquote><p>memoï¼š2025 å¹´ 6 æœˆ 25 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©ç»™ä¸€ä¸ªåç§‘æœ¬ç¡•ç ” 0 çš„<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">çƒå‹ä¿®æ”¹ç®€å†</a>åï¼Œå‘æ¥è¿™æ ·çš„æ„Ÿæ…¨ï¼Œè¦æ˜¯æ—©ç‚¹çŸ¥é“ä½ çš„<a href="https://javabetter.cn/home.html" target="_blank" rel="noopener noreferrer">ç½‘ç«™</a>å’Œ<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æ˜Ÿçƒ</a>å°±å¥½äº†ï¼Œ<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a>ä¸æ¯”å¤–å–å¼ºå¤šäº†ï¼Ÿå†æ¬¡æ„Ÿè°¢äºŒå“¥ã€‚</p><figure><img src="/blog/assets/img/spring-20250625111617.a5d1b15a.png" alt="çƒå‹å¯¹æ˜Ÿçƒç›¸è§æ¨æ™š" tabindex="0" loading="lazy"><figcaption>çƒå‹å¯¹æ˜Ÿçƒç›¸è§æ¨æ™š</figcaption></figure><h3 id="_9-ğŸŒŸé¡¹ç›®å¯åŠ¨æ—¶springçš„iocä¼šåšä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#_9-ğŸŒŸé¡¹ç›®å¯åŠ¨æ—¶springçš„iocä¼šåšä»€ä¹ˆ"><span>9.ğŸŒŸé¡¹ç›®å¯åŠ¨æ—¶Springçš„IoCä¼šåšä»€ä¹ˆï¼Ÿ</span></a></h3><p>ç¬¬ä¸€ä»¶äº‹æ˜¯æ‰«æå’Œæ³¨å†Œ Beanã€‚IoC å®¹å™¨ä¼šæ ¹æ®æˆ‘ä»¬çš„é…ç½®ï¼Œæ¯”å¦‚ <code>@ComponentScan</code> æŒ‡å®šçš„åŒ…è·¯å¾„ï¼Œå»æ‰«ææ‰€æœ‰æ ‡æ³¨äº† <code>@Component</code>ã€<code>@Service</code>ã€<code>@Controller</code> è¿™äº›æ³¨è§£çš„ç±»ã€‚ç„¶åæŠŠè¿™äº›ç±»çš„å…ƒä¿¡æ¯åŒ…è£…æˆ BeanDefinition å¯¹è±¡ï¼Œæ³¨å†Œåˆ°å®¹å™¨çš„ BeanDefinitionRegistry ä¸­ã€‚è¿™ä¸ªé˜¶æ®µåªæ˜¯æ”¶é›†ä¿¡æ¯ï¼Œè¿˜æ²¡æœ‰çœŸæ­£åˆ›å»ºå¯¹è±¡ã€‚</p><figure><img src="/blog/assets/img/spring-20250627101759.970205c9.png" alt="pdai.techï¼šIoC" tabindex="0" loading="lazy"><figcaption>pdai.techï¼šIoC</figcaption></figure><p>ç¬¬äºŒä»¶äº‹æ˜¯ Bean çš„å®ä¾‹åŒ–å’Œæ³¨å…¥ã€‚è¿™æ˜¯æœ€æ ¸å¿ƒçš„è¿‡ç¨‹ï¼ŒIoC å®¹å™¨ä¼šæŒ‰ç…§ä¾èµ–å…³ç³»çš„é¡ºåºå¼€å§‹åˆ›å»º Bean å®ä¾‹ã€‚å¯¹äºå•ä¾‹ Beanï¼Œå®¹å™¨ä¼šé€šè¿‡åå°„è°ƒç”¨æ„é€ æ–¹æ³•åˆ›å»ºå®ä¾‹ï¼Œç„¶åè¿›è¡Œå±æ€§æ³¨å…¥ï¼Œæœ€åæ‰§è¡Œåˆå§‹åŒ–å›è°ƒæ–¹æ³•ã€‚</p><figure><img src="/blog/assets/img/spring-20250627102651.6dfb37bd.png" alt="Tomå¼¹æ¶æ„ï¼šBean çš„å®ä¾‹åŒ–å’Œæ³¨å…¥" tabindex="0" loading="lazy"><figcaption>Tomå¼¹æ¶æ„ï¼šBean çš„å®ä¾‹åŒ–å’Œæ³¨å…¥</figcaption></figure><p>åœ¨ä¾èµ–æ³¨å…¥æ—¶ï¼Œå®¹å™¨ä¼šæ ¹æ® <code>@Autowired</code>ã€<code>@Resource</code> è¿™äº›æ³¨è§£ï¼ŒæŠŠç›¸åº”çš„ä¾èµ–å¯¹è±¡æ³¨å…¥åˆ°ç›®æ ‡ Bean ä¸­ã€‚æ¯”å¦‚ UserService éœ€è¦ UserDaoï¼Œå®¹å™¨å°±ä¼šæŠŠ UserDao çš„å®ä¾‹æ³¨å…¥åˆ° UserService ä¸­ã€‚</p><h4 id="è¯´è¯´springçš„beanå®ä¾‹åŒ–æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#è¯´è¯´springçš„beanå®ä¾‹åŒ–æ–¹å¼"><span>è¯´è¯´Springçš„Beanå®ä¾‹åŒ–æ–¹å¼ï¼Ÿ</span></a></h4><p>Spring æä¾›äº† 4 ç§æ–¹å¼æ¥å®ä¾‹åŒ– Beanï¼Œä»¥æ»¡è¶³ä¸åŒåœºæ™¯ä¸‹çš„éœ€æ±‚ã€‚</p><p>ç¬¬ä¸€ç§æ˜¯é€šè¿‡æ„é€ æ–¹æ³•å®ä¾‹åŒ–ï¼Œè¿™æ˜¯æœ€å¸¸ç”¨çš„æ–¹å¼ã€‚å½“æˆ‘ä»¬ç”¨ <code>@Component</code>ã€<code>@Service</code> è¿™äº›æ³¨è§£æ ‡æ³¨ç±»çš„æ—¶å€™ï¼ŒSpring é»˜è®¤é€šè¿‡æ— å‚æ„é€ å™¨æ¥åˆ›å»ºå®ä¾‹çš„ã€‚å¦‚æœç±»åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ æ–¹æ³•ï¼ŒSpring ä¼šè‡ªåŠ¨è¿›è¡Œæ„é€ æ–¹æ³•æ³¨å…¥ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDao</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">UserDao</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æ„é€ æ–¹æ³•æ³¨å…¥</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> userDao;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒç§æ˜¯é€šè¿‡é™æ€å·¥å‚æ–¹æ³•å®ä¾‹åŒ–ã€‚æœ‰æ—¶å€™å¯¹è±¡çš„åˆ›å»ºæ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬ä¼šå†™ä¸€ä¸ªé™æ€å·¥å‚æ–¹æ³•æ¥åˆ›å»ºï¼Œç„¶åç”¨ <code>@Bean</code> æ³¨è§£æ¥æ ‡æ³¨è¿™ä¸ªæ–¹æ³•ã€‚Spring ä¼šè°ƒç”¨è¿™ä¸ªé™æ€æ–¹æ³•æ¥è·å– Bean å®ä¾‹ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AppConfig</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DataSource</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // å¤æ‚çš„DataSourceåˆ›å»ºé€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> HikariDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬ä¸‰ç§æ˜¯é€šè¿‡å®ä¾‹å·¥å‚æ–¹æ³•å®ä¾‹åŒ–ã€‚è¿™ç§æ–¹å¼æ˜¯å…ˆåˆ›å»ºå·¥å‚å¯¹è±¡ï¼Œç„¶åé€šè¿‡å·¥å‚å¯¹è±¡çš„æ–¹æ³•æ¥åˆ›å»ºBeanï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AppConfig</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ConnectionFactory</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> connectionFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ConnectionFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Connection</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createConnection</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ConnectionFactory</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> factory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> factory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">createConnection</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬å››ç§æ˜¯é€šè¿‡ FactoryBean æ¥å£å®ä¾‹åŒ–ã€‚è¿™æ˜¯ Spring æä¾›çš„ä¸€ä¸ªç‰¹æ®Šæ¥å£ï¼Œå½“æˆ‘ä»¬éœ€è¦åˆ›å»ºå¤æ‚å¯¹è±¡çš„æ—¶å€™ç‰¹åˆ«æœ‰ç”¨ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MyFactoryBean</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> FactoryBean</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MyObject</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MyObject</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getObject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // å¤æ‚çš„å¯¹è±¡åˆ›å»ºé€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> MyObject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getObjectType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> MyObject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å®é™…å·¥ä½œä¸­ï¼Œç”¨å¾—æœ€å¤šçš„è¿˜æ˜¯æ„é€ æ–¹æ³•å®ä¾‹åŒ–ï¼Œå› ä¸ºç®€å•ç›´æ¥ã€‚å·¥å‚æ–¹æ³•ä¸€èˆ¬ç”¨åœ¨éœ€è¦å¤æ‚åˆå§‹åŒ–é€»è¾‘çš„åœºæ™¯ï¼Œæ¯”å¦‚æ•°æ®åº“è¿æ¥æ± ã€æ¶ˆæ¯é˜Ÿåˆ—è¿æ¥è¿™äº›ã€‚FactoryBean ä¸»è¦æ˜¯åœ¨æ¡†æ¶å¼€å‘æˆ–è€…éœ€è¦åŠ¨æ€åˆ›å»ºå¯¹è±¡çš„æ—¶å€™ä½¿ç”¨ã€‚</p><p>Spring åœ¨å®ä¾‹åŒ–çš„æ—¶å€™ä¼šæ ¹æ® Bean çš„å®šä¹‰è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„æ–¹å¼ï¼Œæˆ‘ä»¬ä½œä¸ºå¼€å‘è€…ä¸»è¦æ˜¯é€šè¿‡æ³¨è§£å’Œé…ç½®æ¥å‘Šè¯‰ Spring åº”è¯¥æ€ä¹ˆåˆ›å»ºå¯¹è±¡ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„åä¸ºé¢ç»åŒå­¦ 8 æŠ€æœ¯äºŒé¢é¢è¯•åŸé¢˜ï¼šè¯´è¯´ Spring çš„ Bean å®ä¾‹åŒ–æ–¹å¼</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢åŒå­¦ 2 ä¼˜é€‰ç‰©æµè°ƒåº¦æŠ€æœ¯ 2 é¢é¢è¯•åŸé¢˜ï¼šbeanåŠ å·¥æœ‰å“ªäº›æ–¹æ³•ï¼Ÿ</li></ol></blockquote><p>memoï¼š2025 å¹´ 6 æœˆ 27 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©çœ‹åˆ°<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æœ‰çƒå‹å‘çš„ offer é€‰æ‹©æé—®è´´</a>ï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯æ­å·å…­å°é¾™ç¾¤æ ¸ç§‘æŠ€ï¼Œæˆ‘ä¸ªäººè®¤ä¸ºè¿˜æ˜¯éå¸¸å€¼å¾—å»çš„ï¼Œæ¯•ç«Ÿæ˜¯æ­å·çš„ç‹¬è§’å…½å…¬å¸ï¼Œè–ªèµ„å¾…é‡éƒ½ä¸é”™ã€‚</p><figure><img src="/blog/assets/img/spring-20250627103801.40d0dc8b.png" alt="çƒå‹æ‹¿åˆ°äº†æ­å·ç¾¤æ ¸ç§‘æŠ€çš„ offer" tabindex="0" loading="lazy"><figcaption>çƒå‹æ‹¿åˆ°äº†æ­å·ç¾¤æ ¸ç§‘æŠ€çš„ offer</figcaption></figure><h3 id="_10-ä½ æ˜¯æ€ä¹ˆç†è§£beançš„" tabindex="-1"><a class="header-anchor" href="#_10-ä½ æ˜¯æ€ä¹ˆç†è§£beançš„"><span>10.ä½ æ˜¯æ€ä¹ˆç†è§£Beançš„ï¼Ÿ</span></a></h3><p>åœ¨æˆ‘çœ‹æ¥ï¼ŒBean æœ¬è´¨ä¸Šå°±æ˜¯ç”± Spring å®¹å™¨ç®¡ç†çš„ Java å¯¹è±¡ï¼Œä½†å®ƒå’Œæ™®é€šçš„ Java å¯¹è±¡æœ‰å¾ˆå¤§åŒºåˆ«ã€‚æ™®é€šçš„ Java å¯¹è±¡æˆ‘ä»¬æ˜¯é€šè¿‡ new å…³é”®å­—åˆ›å»ºçš„ã€‚è€Œ Bean æ˜¯äº¤ç»™ Spring å®¹å™¨æ¥ç®¡ç†çš„ï¼Œä»åˆ›å»ºåˆ°é”€æ¯éƒ½ç”±å®¹å™¨è´Ÿè´£ã€‚</p><figure><img src="/blog/assets/img/spring-20250628110931.8359c131.png" alt="stack overflowï¼šbean çš„åˆå§‹åŒ–è¿‡ç¨‹" tabindex="0" loading="lazy"><figcaption>stack overflowï¼šbean çš„åˆå§‹åŒ–è¿‡ç¨‹</figcaption></figure><p>ä»å®é™…ä½¿ç”¨çš„è§’åº¦æ¥è¯´ï¼Œæˆ‘ä»¬é¡¹ç›®é‡Œçš„ Serviceã€Daoã€Controller è¿™äº›éƒ½æ˜¯ Beanã€‚æ¯”å¦‚ UserService è¢«æ ‡æ³¨äº† <code>@Service</code> æ³¨è§£ï¼Œå®ƒå°±æˆäº†ä¸€ä¸ª Beanï¼ŒSpring ä¼šè‡ªåŠ¨åˆ›å»ºå®ƒçš„å®ä¾‹ï¼Œç®¡ç†å®ƒçš„ä¾èµ–å…³ç³»ï¼Œå½“å…¶ä»–åœ°æ–¹éœ€è¦ç”¨åˆ° UserService çš„æ—¶å€™ï¼ŒSpring å°±ä¼šæŠŠè¿™ä¸ªå®ä¾‹æ³¨å…¥è¿›å»ã€‚</p><figure><img src="/blog/assets/img/spring-20250628111222.80a0275e.png" alt="æŠ€æœ¯æ´¾æºç ï¼šUserService" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šUserService</figcaption></figure><p>è¿™ç§ä¾èµ–æ³¨å…¥çš„æ–¹å¼è®©å¯¹è±¡ä¹‹é—´çš„å…³ç³»å˜å¾—æ¾è€¦åˆã€‚</p><p>Spring æä¾›äº†å¤šç§ Bean çš„é…ç½®æ–¹å¼ï¼ŒåŸºäºæ³¨è§£çš„æ–¹å¼æ˜¯æœ€å¸¸ç”¨çš„ã€‚</p><figure><img src="/blog/assets/img/spring-20241224163146.e74ab8b2.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šBean çš„å£°æ˜æ–¹å¼" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šBean çš„å£°æ˜æ–¹å¼</figcaption></figure><p>åŸºäº XML é…ç½®çš„æ–¹å¼åœ¨ Spring Boot é¡¹ç›®ä¸­å·²ç»ä¸æ€ä¹ˆç”¨äº†ã€‚Java é…ç½®ç±»çš„æ–¹å¼åˆ™å¯ä»¥ç”¨æ¥è§£å†³ä¸€äº›æ¯”è¾ƒå¤æ‚çš„åœºæ™¯ï¼Œæ¯”å¦‚è¯´ä¸»ä»æ•°æ®æºï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ <code>@Primary</code> æ³¨è§£æ ‡æ³¨ä¸»æ•°æ®æºï¼Œç”¨ <code>@Qualifier</code> æ¥æŒ‡å®šå¤‡ç”¨æ•°æ®æºã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AppConfig</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Primary</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // ä¸»è¦å€™é€‰è€…</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DataSource</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> primaryDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> HikariDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Qualifier</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;secondary&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DataSource</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> secondaryDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> BasicDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‚£åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œå½“æˆ‘ä»¬ç›´æ¥ç”¨ <code>@Autowired</code> æ³¨è§£æ³¨å…¥ DataSource æ—¶ï¼ŒSpring é»˜è®¤ä¼šä½¿ç”¨ HikariDataSourceï¼›å½“åŠ ä¸Š <code>@Qualifier(&quot;secondary&quot;)</code> æ³¨è§£æ—¶ï¼ŒSpring åˆ™ä¼šæ³¨å…¥ BasicDataSourceã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DataSource</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> dataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // ä¼šæ³¨å…¥ primaryDataSourceï¼ˆå› ä¸ºæœ‰ @Primaryï¼‰</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Qualifier</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;secondary&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DataSource</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> secondaryDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="component-å’Œ-bean-æœ‰ä»€ä¹ˆåŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#component-å’Œ-bean-æœ‰ä»€ä¹ˆåŒºåˆ«"><span>@Component å’Œ @Bean æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</span></a></h4><p>é¦–å…ˆä»ä½¿ç”¨ä¸Šæ¥è¯´ï¼Œ<code>@Component</code> æ˜¯æ ‡æ³¨åœ¨ç±»ä¸Šçš„ï¼Œè€Œ <code>@Bean</code> æ˜¯æ ‡æ³¨åœ¨æ–¹æ³•ä¸Šçš„ã€‚<code>@Component</code> å‘Šè¯‰ Spring è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œè¯·æŠŠå®ƒæ³¨å†Œä¸º Beanï¼Œè€Œ <code>@Bean</code> åˆ™å‘Šè¯‰ Spring è¯·å°†è¿™ä¸ªæ–¹æ³•è¿”å›çš„å¯¹è±¡æ³¨å†Œä¸º Beanã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // Springè‡ªåŠ¨åˆ›å»ºUserServiceå®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDao</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AppConfig</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // æˆ‘ä»¬æ‰‹åŠ¨åˆ›å»ºDataSourceå®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DataSource</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> dataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        HikariDataSource</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> ds</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> HikariDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        ds</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setJdbcUrl</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;jdbc:mysql://localhost:3306/test&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        ds</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setUsername</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;root&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        ds</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setPassword</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;123456&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ds;  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// è¿”å›ç»™Springç®¡ç†</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»æ§åˆ¶æƒçš„è§’åº¦æ¥è¯´ï¼Œ<code>@Component</code> æ˜¯ç”± Spring è‡ªåŠ¨åˆ›å»ºå’Œç®¡ç†çš„ã€‚</p><figure><img src="/blog/assets/img/spring-20250628114006.f9bdd13c.png" alt="æŠ€æœ¯æ´¾æºç ï¼š@Component" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼š@Component</figcaption></figure><p>è€Œ <code>@Bean</code> åˆ™æ˜¯ç”±æˆ‘ä»¬æ‰‹åŠ¨åˆ›å»ºçš„ï¼Œç„¶åå†äº¤ç»™ Spring ç®¡ç†ï¼Œæˆ‘ä»¬å¯¹å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹æœ‰å®Œå…¨çš„æ§åˆ¶æƒã€‚</p><figure><img src="/blog/assets/img/spring-20250628114149.bddc8a96.png" alt="æŠ€æœ¯æ´¾æºç ï¼š@Bean" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼š@Bean</figcaption></figure><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œé¢ç»åŒå­¦ 9 é¢è¯•åŸé¢˜ï¼šæ€ä¹ˆç†è§£springçš„beanï¼Œ@Component å’Œ @Bean çš„åŒºåˆ«</li></ol></blockquote><p>memoï¼š2025 å¹´ 6 æœˆ 28 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨å¸®çƒå‹<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">ä¿®æ”¹ç®€å†</a>çš„æ—¶å€™ï¼Œåˆç¢°åˆ°ä¸€ä¸ªæ­ç”µæœ¬ç¡•çš„çƒå‹ã€‚æˆ‘è¿™é‡Œæƒ³è¯´çš„ä¸€ç‚¹æ˜¯ï¼Œæ­ç”µçš„è®¡ç®—æœºä¸“ä¸šéå¸¸å¼ºï¼Œè™½ç„¶ä»–åªæ˜¯ä¸€æ‰€åŒéï¼Œå¦‚æœèƒ½æŠŠé¡¹ç›®ç»å†ã€ä¸“ä¸šæŠ€èƒ½å¥½å¥½å†™çš„è¯ï¼Œæ‹¿ä¸ªå¤§å‚çš„é¡¶çº§ offer æ˜¯å®Œå…¨æ²¡é—®é¢˜çš„ã€‚</p><figure><img src="/blog/assets/img/spring-è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯.862de346.png" alt="æ­å·ç”µå­ç§‘æŠ€å¤§å­¦æœ¬ç¡•çš„çƒå‹" tabindex="0" loading="lazy"><figcaption>æ­å·ç”µå­ç§‘æŠ€å¤§å­¦æœ¬ç¡•çš„çƒå‹</figcaption></figure><h3 id="_11-ğŸŒŸèƒ½è¯´ä¸€ä¸‹beançš„ç”Ÿå‘½å‘¨æœŸå—" tabindex="-1"><a class="header-anchor" href="#_11-ğŸŒŸèƒ½è¯´ä¸€ä¸‹beançš„ç”Ÿå‘½å‘¨æœŸå—"><span>11.ğŸŒŸèƒ½è¯´ä¸€ä¸‹Beançš„ç”Ÿå‘½å‘¨æœŸå—ï¼Ÿ</span></a></h3><p>æ¨èé˜…è¯»ï¼š<a href="https://mp.weixin.qq.com/s/zb6eA3Se0gQoqL8PylCPLw" target="_blank" rel="noopener noreferrer">ä¸‰åˆ†æ¶ï¼šSpring Bean ç”Ÿå‘½å‘¨æœŸï¼Œå¥½åƒäººçš„ä¸€ç”Ÿ</a></p><p>å¥½çš„ã€‚</p><p>Bean çš„ç”Ÿå‘½å‘¨æœŸå¯ä»¥åˆ†ä¸º 5 ä¸ªä¸»è¦é˜¶æ®µï¼Œæˆ‘æŒ‰ç…§å®é™…çš„æ‰§è¡Œé¡ºåºæ¥è¯´ä¸€ä¸‹ã€‚</p><figure><img src="/blog/assets/img/spring-595fce5b-36cb-4dcb-b08c-8205a1e98d8a.0aef8328.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šBeanç”Ÿå‘½å‘¨æœŸäº”ä¸ªé˜¶æ®µ" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šBeanç”Ÿå‘½å‘¨æœŸäº”ä¸ªé˜¶æ®µ</figcaption></figure><p>ç¬¬ä¸€ä¸ªé˜¶æ®µæ˜¯å®ä¾‹åŒ–ã€‚Spring å®¹å™¨ä¼šæ ¹æ® BeanDefinitionï¼Œé€šè¿‡åå°„è°ƒç”¨ Bean çš„æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡å®ä¾‹ã€‚å¦‚æœæœ‰å¤šä¸ªæ„é€ æ–¹æ³•ï¼ŒSpring ä¼šæ ¹æ®ä¾èµ–æ³¨å…¥çš„è§„åˆ™é€‰æ‹©åˆé€‚çš„æ„é€ æ–¹æ³•ã€‚</p><figure><img src="/blog/assets/img/spring-942a927a-86e4-4a01-8f52-9addd89642ff.3123a40f.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring Beanç”Ÿå‘½å‘¨æœŸ" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring Beanç”Ÿå‘½å‘¨æœŸ</figcaption></figure><p>ç¬¬äºŒé˜¶æ®µæ˜¯å±æ€§èµ‹å€¼ã€‚è¿™ä¸ªé˜¶æ®µ Spring ä¼šç»™ Bean çš„å±æ€§èµ‹å€¼ï¼ŒåŒ…æ‹¬é€šè¿‡ <code>@Autowired</code>ã€<code>@Resource</code> è¿™äº›æ³¨è§£æ³¨å…¥çš„ä¾èµ–å¯¹è±¡ï¼Œä»¥åŠé€šè¿‡ <code>@Value</code> æ³¨å…¥çš„é…ç½®å€¼ã€‚</p><figure><img src="/blog/assets/img/spring-20240311101430.6e3fd35e.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šdoCreateBean æ–¹æ³•æºç " tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šdoCreateBean æ–¹æ³•æºç </figcaption></figure><p>ç¬¬ä¸‰é˜¶æ®µæ˜¯åˆå§‹åŒ–ã€‚è¿™ä¸ªé˜¶æ®µä¼šä¾æ¬¡æ‰§è¡Œï¼š</p><ul><li><code>@PostConstruct</code> æ ‡æ³¨çš„æ–¹æ³•</li><li>InitializingBean æ¥å£çš„ afterPropertiesSet æ–¹æ³•</li><li>é€šè¿‡ <code>@Bean</code> çš„ initMethod æŒ‡å®šçš„åˆå§‹åŒ–æ–¹æ³•</li></ul><figure><img src="/blog/assets/img/spring-d2da20a3-08d0-4648-b9a3-2fff8512b159.6ebc6958.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šBeanç”Ÿå‘½å‘¨æœŸæºç è¿½è¸ª" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šBeanç”Ÿå‘½å‘¨æœŸæºç è¿½è¸ª</figcaption></figure><p>æˆ‘åœ¨é¡¹ç›®ä¸­ç»å¸¸ç”¨ <code>@PostConstruct</code> æ¥åšä¸€äº›åˆå§‹åŒ–å·¥ä½œï¼Œæ¯”å¦‚ç¼“å­˜é¢„åŠ è½½ã€DB é…ç½®ç­‰ç­‰ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// CategoryServiceImplä¸­çš„ç¼“å­˜åˆå§‹åŒ–</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">PostConstruct</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> init</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    categoryCaches </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> CacheBuilder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">newBuilder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">maximumSize</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">300</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">build</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> CacheLoader</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">CategoryDTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;() {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> CategoryDTO</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> load</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">NotNull</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Long</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> categoryId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">            CategoryDO</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> category</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> categoryDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getById</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(categoryId);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            // ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    });</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// DynamicConfigContainerä¸­çš„é…ç½®åˆå§‹åŒ–</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">PostConstruct</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> init</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    cache </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Maps</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">newHashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    bindBeansFromLocalCache</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;dbConfig&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> cache)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆå§‹åŒ–åï¼ŒSpring è¿˜ä¼šè°ƒç”¨æ‰€æœ‰æ³¨å†Œçš„ BeanPostProcessor åç½®å¤„ç†æ–¹æ³•ã€‚è¿™ä¸ªé˜¶æ®µç»å¸¸ç”¨æ¥åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œæ¯”å¦‚ AOP ä»£ç†ã€‚</p><p>ç¬¬äº”é˜¶æ®µæ˜¯ä½¿ç”¨ Beanã€‚æ¯”å¦‚æˆ‘ä»¬çš„ Controller è°ƒç”¨ Serviceï¼ŒService è°ƒç”¨ DAOã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// UserControllerä¸­çš„ä½¿ç”¨ç¤ºä¾‹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/users/{id}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDTO</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getUser</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">PathVariable</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Long</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> id) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> userService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getUserById</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(id);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// UserServiceä¸­çš„ä½¿ç”¨ç¤ºä¾‹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDao</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDTO</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getUserById</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> id) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getById</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(id);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// UserDaoä¸­çš„ä½¿ç”¨ç¤ºä¾‹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> JdbcTemplate</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> jdbcTemplate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDTO</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getById</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> id) {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> sql </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;SELECT * FROM users WHERE id = ?&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> jdbcTemplate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">queryForObject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(sql, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[]{id}, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> UserRowMapper</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€åæ˜¯é”€æ¯é˜¶æ®µã€‚å½“å®¹å™¨å…³é—­æˆ–è€… Bean è¢«ç§»é™¤çš„æ—¶å€™ï¼Œä¼šä¾æ¬¡æ‰§è¡Œï¼š</p><ul><li><code>@PreDestroy</code> æ ‡æ³¨çš„æ–¹æ³•</li><li>DisposableBean æ¥å£çš„ destroy æ–¹æ³•</li><li>é€šè¿‡ <code>@Bean</code> çš„ destroyMethod æŒ‡å®šçš„é”€æ¯æ–¹æ³•</li></ul><figure><img src="/blog/assets/img/spring-20240311101658.90c6eb02.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šclose æºç " tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šclose æºç </figcaption></figure><h4 id="aware-ç±»å‹çš„æ¥å£æœ‰ä»€ä¹ˆä½œç”¨" tabindex="-1"><a class="header-anchor" href="#aware-ç±»å‹çš„æ¥å£æœ‰ä»€ä¹ˆä½œç”¨"><span>Aware ç±»å‹çš„æ¥å£æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</span></a></h4><p>Aware æ¥å£åœ¨ Spring ä¸­æ˜¯ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„è®¾è®¡ï¼Œå®ƒä»¬çš„ä½œç”¨æ˜¯è®© Bean èƒ½å¤Ÿæ„ŸçŸ¥åˆ° Spring å®¹å™¨çš„ä¸€äº›å†…éƒ¨ç»„ä»¶ã€‚</p><p>ä»è®¾è®¡ç†å¿µæ¥è¯´ï¼ŒAware æ¥å£å®ç°äº†ä¸€ç§â€œå›è°ƒâ€æœºåˆ¶ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼ŒBean ä¸åº”è¯¥ç›´æ¥ä¾èµ– Spring å®¹å™¨ï¼Œè¿™æ ·å¯ä»¥ä¿æŒä»£ç çš„ç‹¬ç«‹æ€§ã€‚ä½†æœ‰äº›æ—¶å€™ï¼ŒBean ç¡®å®éœ€è¦è·å–å®¹å™¨çš„ä¸€äº›ä¿¡æ¯æˆ–è€…ç»„ä»¶ï¼ŒAware æ¥å£å°±æä¾›äº†è¿™æ ·ä¸€ä¸ªèƒ½åŠ›ã€‚</p><p>æˆ‘æœ€å¸¸ç”¨çš„ Aware æ¥å£æ˜¯ ApplicationContextAwareï¼Œå®ƒå¯ä»¥è®© Bean è·å–åˆ° ApplicationContext å®¹å™¨æœ¬èº«ã€‚</p><figure><img src="/blog/assets/img/spring-20250630100429.76ce449d.png" alt="æŠ€æœ¯æ´¾æºç ï¼šApplicationContextAware" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šApplicationContextAware</figcaption></figure><p>åœ¨<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾é¡¹ç›®</a>ä¸­ï¼Œæˆ‘å°±é€šè¿‡å®ç° ApplicationContextAware å’Œ EnvironmentAware æ¥å£å°è£…äº†ä¸€ä¸ª SpringUtil å·¥å…·ç±»ï¼Œé€šè¿‡ getBean å’Œ getProperty æ–¹æ³•æ¥è·å– Bean å’Œé…ç½®å±æ€§ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// é™æ€æ–¹æ³•è·å–Beanï¼Œæ–¹ä¾¿åœ¨éSpringç®¡ç†çš„ç±»ä¸­ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">T</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> T</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getBean</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Class</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">T</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> clazz) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(clazz);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// è·å–é…ç½®å±æ€§</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getProperty</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> key) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> environment</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getProperty</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(key);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å¦‚æœé…ç½®äº†-init-method-å’Œ-destroy-method-spring-ä¼šåœ¨ä»€ä¹ˆæ—¶å€™è°ƒç”¨å…¶é…ç½®çš„æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#å¦‚æœé…ç½®äº†-init-method-å’Œ-destroy-method-spring-ä¼šåœ¨ä»€ä¹ˆæ—¶å€™è°ƒç”¨å…¶é…ç½®çš„æ–¹æ³•"><span>å¦‚æœé…ç½®äº† init-method å’Œ destroy-methodï¼ŒSpring ä¼šåœ¨ä»€ä¹ˆæ—¶å€™è°ƒç”¨å…¶é…ç½®çš„æ–¹æ³•ï¼Ÿ</span></a></h4><p>init-method æŒ‡å®šçš„åˆå§‹åŒ–æ–¹æ³•ä¼šåœ¨ Bean çš„åˆå§‹åŒ–é˜¶æ®µè¢«è°ƒç”¨ï¼Œå…·ä½“çš„æ‰§è¡Œé¡ºåºæ˜¯ï¼š</p><ul><li>å…ˆæ‰§è¡Œ <code>@PostConstruct</code> æ ‡æ³¨çš„æ–¹æ³•</li><li>ç„¶åæ‰§è¡Œ InitializingBean æ¥å£çš„ <code>afterPropertiesSet()</code> æ–¹æ³•</li><li>æœ€åå†æ‰§è¡Œ init-method æŒ‡å®šçš„æ–¹æ³•</li></ul><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œinit-method æ˜¯åœ¨æ‰€æœ‰å…¶ä»–åˆå§‹åŒ–æ–¹æ³•ä¹‹åæ‰§è¡Œçš„ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MyService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDao</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">PostConstruct</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> postConstruct</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;1. @PostConstructæ‰§è¡Œ&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> customInit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// é€šè¿‡@Beançš„initMethodæŒ‡å®š</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;3. init-methodæ‰§è¡Œ&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AppConfig</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">initMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;customInit&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MyService</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> myService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> MyService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>destroy-method ä¼šåœ¨ Bean é”€æ¯é˜¶æ®µè¢«è°ƒç”¨ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MyService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">PreDestroy</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> preDestroy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;1. @PreDestroyæ‰§è¡Œ&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> customDestroy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// é€šè¿‡@Beançš„destroyMethodæŒ‡å®š</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;3. destroy-methodæ‰§è¡Œ&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸è¿‡åœ¨å®é™…å¼€å‘ä¸­ï¼Œé€šå¸¸ç”¨ <code>@PostConstruct</code> å’Œ <code>@PreDestroy</code> å°±å¤Ÿäº†ï¼Œå®ƒä»¬æ›´ç®€æ´ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°ç±³ 25 å±Šæ—¥å¸¸å®ä¹ ä¸€é¢åŸé¢˜ï¼šè¯´è¯´ Bean çš„ç”Ÿå‘½å‘¨æœŸ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç™¾åº¦é¢ç»åŒå­¦ 1 æ–‡å¿ƒä¸€è¨€ 25 å®ä¹  Java åç«¯é¢è¯•åŸé¢˜ï¼šSpringä¸­beanç”Ÿå‘½å‘¨æœŸ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„8 åç«¯å¼€å‘ç§‹æ‹›ä¸€é¢é¢è¯•åŸé¢˜ï¼šè®²ä¸€ä¸‹Spring Beançš„ç”Ÿå‘½å‘¨æœŸ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„åŒå­¦ 1 è´å£³æ‰¾æˆ¿åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šbeanç”Ÿå‘½å‘¨æœŸ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¿«æ‰‹åŒå­¦ 4 ä¸€é¢åŸé¢˜ï¼šä»‹ç»ä¸‹Beançš„ç”Ÿå‘½å‘¨æœŸï¼ŸAwareç±»å‹æ¥å£çš„ä½œç”¨ï¼Ÿå¦‚æœé…ç½®äº†init-methodå’Œdestroy-methodï¼ŒSpringä¼šåœ¨ä»€ä¹ˆæ—¶å€™è°ƒç”¨å…¶é…ç½®çš„æ–¹æ³•ï¼Ÿ</li></ol></blockquote><p>memoï¼š2025 å¹´ 6 æœˆ 30 æ—¥ä¿®æ”¹è‡³æ­¤ã€‚æ˜¨å¤©æœ‰<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">è¯»è€…å‘æ¶ˆæ¯è¯´æœ‰ä¸‰ä¸ª offer è¦é€‰æ‹©</a>ï¼Œä¸­ç§‘å¤§è¯»åšã€ä¸­æµ·æ²¹ã€å•†é£åŒ—ç ”ï¼Œé—®æˆ‘è¯¥æ€ä¹ˆé€‰æ‹©ï¼Ÿè¯´å®è¯ï¼Œè¿™ä¸‰ä¸ªéƒ½æ˜¯éå¸¸ä¼˜è´¨çš„é€‰æ‹©ï¼Œæˆ‘ä¸ªäººçš„å»ºè®®æ˜¯ä¼˜å…ˆè€ƒè™‘ä¸­ç§‘å¤§è¯»åšï¼Œæ¯•ç«Ÿæ˜¯å›½å†…é¡¶å°–å­¦åºœï¼Œåšå£«æ¯•ä¸šåå¯ä»¥é€‰æ‹©åœ¨é«˜æ ¡ä»»æ•™ï¼Œä¼šæ›´ç¬¦åˆä»–çš„å®¶åº­æ¡ä»¶ï¼Œå½“ç„¶äº†ï¼Œæˆ‘æ·±çŸ¥ï¼Œè¯»åšçš„äº§å‡ºå‹åŠ›éå¸¸å¤§ã€‚</p><figure><img src="/blog/assets/img/spring-20250630101647.fad7ded7.png" alt="è¯»è€…æ‹¿åˆ°ä¸­ç§‘å¤§è¯»åšã€ä¸­æµ·æ²¹ã€å•†é£åŒ—ç ”" tabindex="0" loading="lazy"><figcaption>è¯»è€…æ‹¿åˆ°ä¸­ç§‘å¤§è¯»åšã€ä¸­æµ·æ²¹ã€å•†é£åŒ—ç ”</figcaption></figure><h3 id="_12-ä¸ºä»€ä¹ˆideaä¸æ¨èä½¿ç”¨-autowiredæ³¨è§£æ³¨å…¥bean" tabindex="-1"><a class="header-anchor" href="#_12-ä¸ºä»€ä¹ˆideaä¸æ¨èä½¿ç”¨-autowiredæ³¨è§£æ³¨å…¥bean"><span>12.ä¸ºä»€ä¹ˆIDEAä¸æ¨èä½¿ç”¨@Autowiredæ³¨è§£æ³¨å…¥Beanï¼Ÿ</span></a></h3><p>å‰æƒ…æè¦ï¼šå½“ä½¿ç”¨ <code>@Autowired</code> æ³¨è§£æ³¨å…¥ Bean æ—¶ï¼ŒIDEA ä¼šæç¤ºâ€œField injection is not recommendedâ€ã€‚</p><figure><img src="/blog/assets/img/spring-20241224164722.bbef7d5c.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼š@Autowired" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼š@Autowired</figcaption></figure><p>é¢è¯•å›ç­”ï¼š</p><p>ä¸»è¦æœ‰å‡ ä¸ªåŸå› ã€‚</p><p>ç¬¬ä¸€ä¸ªæ˜¯å­—æ®µæ³¨å…¥ä¸åˆ©äºå•å…ƒæµ‹è¯•ã€‚å­—æ®µæ³¨å…¥éœ€è¦ä½¿ç”¨åå°„æˆ– Spring å®¹å™¨æ‰èƒ½æ³¨å…¥ä¾èµ–ï¼Œæµ‹è¯•æ›´å¤æ‚ï¼›è€Œæ„é€ æ–¹æ³•æ³¨å…¥å¯ä»¥ç›´æ¥é€šè¿‡æ„é€ æ–¹æ³•ä¼ å…¥ Mock å¯¹è±¡ï¼Œæµ‹è¯•èµ·æ¥æ›´ç®€å•ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// å­—æ®µæ³¨å…¥çš„æµ‹è¯•å›°éš¾</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> testUserService</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    UserService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userService </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // æ— æ³•ç›´æ¥è®¾ç½®userRepositoryï¼Œéœ€è¦åå°„æˆ–Springå®¹å™¨</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // userService.userRepository = Mockito.mock(UserRepository.class);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // éœ€è¦æ‰‹åŠ¨è®¾ç½®ä¾èµ–ï¼Œæµ‹è¯•ä¸æ–¹ä¾¿</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    ReflectionTestUtils</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setField</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(userService, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;userRepository&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Mockito</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">UserRepository</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    userService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">doSomething</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æ„é€ æ–¹æ³•æ³¨å…¥çš„æµ‹è¯•ç®€å•</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Test</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> testUserService</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    UserRepository</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> mockRepository </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Mockito</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">UserRepository</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    UserService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userService </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(mockRepository)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // ç›´æ¥æ³¨å…¥</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒä¸ªæ˜¯å­—æ®µæ³¨å…¥ä¼šéšè—å¾ªç¯ä¾èµ–é—®é¢˜ï¼Œè€Œæ„é€ æ–¹æ³•æ³¨å…¥ä¼šåœ¨é¡¹ç›®å¯åŠ¨æ—¶å°±å»æ£€æŸ¥ä¾èµ–å…³ç³»ï¼Œèƒ½æ›´æ—©å‘ç°é—®é¢˜ã€‚</p><p>ç¬¬ä¸‰ä¸ªæ˜¯æ„é€ æ–¹æ³•æ³¨å…¥å¯ä»¥ä½¿ç”¨ final å­—æ®µç¡®ä¿ä¾èµ–åœ¨å¯¹è±¡åˆ›å»ºæ—¶å°±è¢«åˆå§‹åŒ–ï¼Œé¿å…äº†åç»­ä¿®æ”¹çš„é£é™©ã€‚</p><p>åœ¨<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾é¡¹ç›®</a>ä¸­ï¼Œæˆ‘ä»¬å·²ç»åœ¨ä½¿ç”¨æ„é€ æ–¹æ³•æ³¨å…¥çš„æ–¹å¼æ¥ç®¡ç†ä¾èµ–å…³ç³»ã€‚</p><figure><img src="/blog/assets/img/spring-20241224165628.109a6acd.png" alt="æŠ€æœ¯æ´¾ï¼šæ„é€ æ–¹æ³•æ³¨å…¥" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾ï¼šæ„é€ æ–¹æ³•æ³¨å…¥</figcaption></figure><p>ä¸è¿‡è¯è¯´å›æ¥ï¼Œ<code>@Autowired</code> çš„å­—æ®µæ³¨å…¥æ–¹å¼åœ¨ä¸€äº›ç®€å•çš„åœºæ™¯ä¸‹è¿˜æ˜¯å¯ä»¥ç”¨çš„ï¼Œä¸»è¦çœ‹å›¢é˜Ÿçš„ç¼–ç è§„èŒƒå§ã€‚</p><h4 id="autowired-å’Œ-resource-æ³¨è§£çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#autowired-å’Œ-resource-æ³¨è§£çš„åŒºåˆ«"><span>@Autowired å’Œ @Resource æ³¨è§£çš„åŒºåˆ«ï¼Ÿ</span></a></h4><p>é¦–å…ˆä»æ¥æºä¸Šè¯´ï¼Œ<code>@Autowired</code> æ˜¯ Spring æ¡†æ¶æä¾›çš„æ³¨è§£ï¼Œè€Œ <code>@Resource</code> æ˜¯ Java EE æ ‡å‡†æä¾›çš„æ³¨è§£ã€‚æ¢å¥è¯è¯´ï¼Œ<code>@Resource</code> æ˜¯ JDK è‡ªå¸¦çš„ï¼Œè€Œ <code>@Autowired</code> æ˜¯ Spring ç‰¹æœ‰çš„ã€‚</p><p>è™½ç„¶ IDEA ä¸æ¨èä½¿ç”¨ <code>@Autowired</code>ï¼Œä½†å¯¹ <code>@Resource</code> æ³¨è§£å´æ²¡æœ‰ä»»ä½•æç¤ºã€‚</p><figure><img src="/blog/assets/img/spring-20241224170055.30956e55.png" alt="æŠ€æœ¯æ´¾ï¼š@Resource" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾ï¼š@Resource</figcaption></figure><p>ä»æ³¨å…¥æ–¹å¼ä¸Šè¯´ï¼Œ<code>@Autowired</code> é»˜è®¤æŒ‰ç…§ç±»å‹ï¼Œä¹Ÿå°±æ˜¯ byType è¿›è¡Œæ³¨å…¥ï¼Œè€Œ <code>@Resource</code> é»˜è®¤æŒ‰ç…§åç§°ï¼Œä¹Ÿå°±æ˜¯ byName è¿›è¡Œæ³¨å…¥ã€‚</p><p>å½“å®¹å™¨ä¸­å­˜åœ¨å¤šä¸ªç›¸åŒç±»å‹çš„ Beanï¼Œ æ¯”å¦‚è¯´æœ‰ä¸¤ä¸ª UserRepository çš„å®ç°ç±»ï¼Œç›´æ¥ç”¨ <code>@Autowired</code> æ³¨å…¥ UserRepository æ—¶å°±ä¼šæŠ¥é”™ï¼Œå› ä¸º Spring å®¹å™¨ä¸çŸ¥é“è¯¥æ³¨å…¥å“ªä¸ªå®ç°ç±»ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserRepository21</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserRepository2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserRepository22</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserRepository2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserRepository2</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userRepository</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // å†²çª</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ—¶å€™ï¼Œæœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼Œç¬¬ä¸€ç§æ˜¯ä½¿ç”¨ <code>@Autowired</code> + <code>@Qualifier</code> æŒ‡å®šå…·ä½“çš„ Bean åç§°æ¥è§£å†³å†²çªã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;userRepository21&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserRepository21</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserRepository2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;userRepository22&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserRepository22</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserRepository2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Qualifier</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;userRepository22&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserRepository2</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userRepository22</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒç§æ˜¯ä½¿ç”¨ <code>@Resource</code> æ³¨è§£æŒ‰åç§°è¿›è¡Œæ³¨å…¥ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Resource</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;userRepository21&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserRepository2</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userRepository21</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œé¢ç»åŒå­¦ 9 é¢è¯•åŸé¢˜ï¼šä¾èµ–æ³¨å…¥çš„æ—¶å€™ï¼Œç›´æ¥Autowiredæ¯”è¾ƒç›´æ¥ï¼Œä¸ºä»€ä¹ˆæ¨èæ„é€ æ–¹æ³•æ³¨å…¥å‘¢</li></ol></blockquote><p>memoï¼š2025 å¹´ 7 æœˆ 1 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">å¸®çƒå‹ä¿®æ”¹ç®€å†</a>çš„æ—¶å€™ï¼Œç¢°åˆ°ä¸€ä¸ªéƒ‘å·å¤§å­¦æœ¬ç¡•çš„çƒå‹ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬æ²³å—çœæœ€å¥½çš„å¤§å­¦äº†ï¼Œä½†ä¹Ÿä»…ä»…æ˜¯ä¸€æ‰€ 211ï¼Œæ‰€ä»¥å¸Œæœ›æ‰€æœ‰æ²³å—çš„åŒå­¦éƒ½èƒ½åŠ æŠŠåŠ²ï¼Œè¯æ˜è‡ªå·±çš„å®åŠ›ï¼Œå»æ‹¿åˆ°æ›´å¥½çš„ offerï¼Œä¸ºæ ¡äº‰å…‰ã€‚</p><figure><img src="/blog/assets/img/spring-20250701154344.f06f8ff5.png" alt="éƒ‘å·å¤§å­¦æœ¬ç¡•çš„çƒå‹" tabindex="0" loading="lazy"><figcaption>éƒ‘å·å¤§å­¦æœ¬ç¡•çš„çƒå‹</figcaption></figure><h3 id="_13-autowiredçš„å®ç°åŸç†äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#_13-autowiredçš„å®ç°åŸç†äº†è§£å—"><span>13.@Autowiredçš„å®ç°åŸç†äº†è§£å—ï¼Ÿ</span></a></h3><p><code>@Autowired</code> æ˜¯ Spring å®ç°ä¾èµ–æ³¨å…¥çš„æ ¸å¿ƒæ³¨è§£ï¼Œå…¶å®ç°åŸç†åŸºäºåå°„æœºåˆ¶å’Œ BeanPostProcessor æ¥å£ã€‚</p><p>æ•´ä¸ªè¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªä¸»è¦é˜¶æ®µã€‚ç¬¬ä¸€ä¸ªé˜¶æ®µæ˜¯ä¾èµ–æ”¶é›†é˜¶æ®µï¼Œå‘ç”Ÿåœ¨ Bean å®ä¾‹åŒ–ä¹‹åã€å±æ€§èµ‹å€¼ä¹‹å‰ã€‚<code>Autowired</code> çš„ Processor ä¼šæ‰«æ Bean çš„æ‰€æœ‰å­—æ®µã€æ–¹æ³•å’Œæ„é€ æ–¹æ³•ï¼Œæ‰¾å‡ºæ ‡æ³¨äº† <code>@Autowired</code> æ³¨è§£çš„åœ°æ–¹ï¼Œç„¶åæŠŠè¿™äº›ä¿¡æ¯å°è£…æˆ <code>Injection</code> å…ƒæ•°æ®å¯¹è±¡ç¼“å­˜èµ·æ¥ã€‚è¿™ä¸ªè¿‡ç¨‹ç”¨åˆ°äº†å¤§é‡çš„åå°„æ“ä½œï¼Œéœ€è¦åˆ†æç±»çš„ç»“æ„ã€æ³¨è§£ä¿¡æ¯ç­‰ç­‰ã€‚</p><figure><img src="/blog/assets/img/spring-20250711165339.ac21123f.png" alt="MarkusZhangï¼š@Autowired" tabindex="0" loading="lazy"><figcaption>MarkusZhangï¼š@Autowired</figcaption></figure><p>ç¬¬äºŒä¸ªé˜¶æ®µæ˜¯ä¾èµ–æ³¨å…¥é˜¶æ®µï¼ŒSpring ä¼šå–å‡ºä¹‹å‰ç¼“å­˜çš„ <code>Injection</code> å…ƒæ•°æ®å¯¹è±¡ï¼Œç„¶åé€ä¸ªå¤„ç†æ¯ä¸ªæ³¨å…¥ç‚¹ã€‚å¯¹äºæ¯ä¸ª <code>@Autowired</code> æ ‡æ³¨çš„å­—æ®µæˆ–æ–¹æ³•ï¼ŒSpring ä¼šæ ¹æ®ç±»å‹å»å®¹å™¨ä¸­æŸ¥æ‰¾åŒ¹é…çš„ Beanã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 1. æŒ‰ç±»å‹æŸ¥æ‰¾ï¼ˆbyTypeï¼‰</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Map</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> matchingBeans </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> BeanFactoryUtils</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">beansOfTypeIncludingAncestors</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">beanFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, type);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 2. å¦‚æœæ‰¾åˆ°å¤šä¸ªå€™é€‰è€…ï¼ŒæŒ‰åç§°ç­›é€‰ï¼ˆbyNameï¼‰</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> autowiredBeanName </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> determineAutowireCandidate</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(matchingBeans</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> descriptor)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 3. è€ƒè™‘@Primaryå’Œ@Priorityæ³¨è§£</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 4. æœ€åæŒ‰ç…§å­—æ®µåæˆ–å‚æ•°ååŒ¹é…</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å…·ä½“çš„æ³¨å…¥è¿‡ç¨‹ä¸­ï¼ŒSpring ä¼šä½¿ç”¨åå°„æ¥è®¾ç½®å­—æ®µçš„å€¼æˆ–è€…è°ƒç”¨ setter æ–¹æ³•ã€‚æ¯”å¦‚å¯¹äºå­—æ®µæ³¨å…¥ï¼Œä¼šè°ƒç”¨ <code>Field.set()</code> æ–¹æ³•ï¼›å¯¹äº setter æ³¨å…¥ï¼Œä¼šè°ƒç”¨ <code>Method.invoke()</code> æ–¹æ³•ã€‚</p><h3 id="_14-ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…" tabindex="-1"><a class="header-anchor" href="#_14-ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…"><span>14.ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…ï¼Ÿ</span></a></h3><p>è‡ªåŠ¨è£…é…çš„æœ¬è´¨å°±æ˜¯è®© Spring å®¹å™¨è‡ªåŠ¨å¸®æˆ‘ä»¬å®Œæˆ Bean ä¹‹é—´çš„ä¾èµ–å…³ç³»æ³¨å…¥ï¼Œè€Œä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»æŒ‡å®šæ¯ä¸ªä¾èµ–ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯â€œæˆ‘ä»¬ä¸ç”¨å‘Šè¯‰ Spring å…·ä½“æ€ä¹ˆæ³¨å…¥ï¼ŒSpring è‡ªå·±ä¼šæƒ³åŠæ³•æ‰¾åˆ°åˆé€‚çš„ Bean æ³¨å…¥è¿›æ¥â€ã€‚</p><p>è‡ªåŠ¨è£…é…çš„å·¥ä½œåŸç†ç®€å•æ¥è¯´å°±æ˜¯ï¼ŒSpring å®¹å™¨åœ¨å¯åŠ¨æ—¶è‡ªåŠ¨æ‰«æ <code>@ComponentScan</code> æŒ‡å®šåŒ…è·¯å¾„ä¸‹çš„æ‰€æœ‰ç±»ï¼Œç„¶åæ ¹æ®ç±»ä¸Šçš„æ³¨è§£ï¼Œæ¯”å¦‚ <code>@Autowired</code>ã€<code>@Resource</code> ç­‰ï¼Œæ¥åˆ¤æ–­å“ªäº› Bean éœ€è¦è¢«è‡ªåŠ¨è£…é…ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">ComponentScan</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;com.github.paicoding.forum.service&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">MapperScan</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">basePackages</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;com.github.paicoding.forum.service.article.repository.mapper&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;com.github.paicoding.forum.service.user.repository.mapper&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ... æ›´å¤šåŒ…è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">})</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ServiceAutoConfig</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // Springè‡ªåŠ¨æ‰«ææŒ‡å®šåŒ…ä¸‹çš„æ‰€æœ‰ç»„ä»¶å¹¶æ³¨å†Œä¸ºBean</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¹‹ååˆ†ææ¯ä¸ª Bean çš„ä¾èµ–å…³ç³»ï¼Œåœ¨åˆ›å»º Bean çš„æ—¶å€™ï¼Œæ ¹æ®è£…é…è§„åˆ™è‡ªåŠ¨æ‰¾åˆ°åˆé€‚çš„ä¾èµ– Beanï¼Œæœ€åæ ¹æ®åå°„å°†è¿™äº›ä¾èµ–æ³¨å…¥åˆ°ç›®æ ‡ Bean ä¸­ã€‚</p><h4 id="springæä¾›äº†å“ªå‡ ç§è‡ªåŠ¨è£…é…ç±»å‹" tabindex="-1"><a class="header-anchor" href="#springæä¾›äº†å“ªå‡ ç§è‡ªåŠ¨è£…é…ç±»å‹"><span>Springæä¾›äº†å“ªå‡ ç§è‡ªåŠ¨è£…é…ç±»å‹ï¼Ÿ</span></a></h4><p>Spring çš„è‡ªåŠ¨è£…é…æ–¹å¼æœ‰å¥½å‡ ç§ï¼Œåœ¨ XML é…ç½®æ—¶ä»£ï¼Œä¸»è¦æœ‰ byNameã€byTypeã€constructor å’Œ autodetect å››ç§æ–¹å¼ã€‚</p><figure><img src="/blog/assets/img/spring-034120d9-88c7-490b-af07-7d48f3b6b7bc.a9e741ac.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpringå››ç§è‡ªåŠ¨è£…é…ç±»å‹" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpringå››ç§è‡ªåŠ¨è£…é…ç±»å‹</figcaption></figure><p>åˆ°äº†æ³¨è§£é©±åŠ¨æ—¶ä»£ï¼Œç”¨å¾—æœ€å¤šçš„æ˜¯ <code>@Autowired</code> æ³¨è§£ï¼Œé»˜è®¤æŒ‰ç…§ç±»å‹è£…é…ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // æŒ‰ç±»å‹è‡ªåŠ¨è£…é…</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserRepository</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userRepository</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶æ¬¡è¿˜æœ‰ <code>@Resource</code> æ³¨è§£ï¼Œå®ƒé»˜è®¤æŒ‰ç…§åç§°è£…é…ï¼Œå¦‚æœæ‰¾ä¸åˆ°å¯¹åº”åç§°çš„ Beanï¼Œå°±ä¼šæŒ‰ç±»å‹è£…é…ã€‚</p><p>Spring Boot çš„è‡ªåŠ¨è£…é…è¿˜æœ‰ä¸€å¥—æ›´é«˜çº§çš„æœºåˆ¶ï¼Œé€šè¿‡ <code>@EnableAutoConfiguration</code> å’Œå„ç§ <code>@Conditional</code> æ³¨è§£æ¥å®ç°ï¼Œè¿™ä¸ªæ˜¯æ¡†æ¶çº§åˆ«çš„è‡ªåŠ¨è£…é…ï¼Œä¼šæ ¹æ® classpath ä¸­çš„ç±»å’Œé…ç½®æ¥è‡ªåŠ¨é…ç½® Beanã€‚</p><figure><img src="/blog/assets/img/spring-20250702101032.fa241736.png" alt="ShawnBlogï¼šSpring Boot çš„è‡ªåŠ¨è£…é…" tabindex="0" loading="lazy"><figcaption>ShawnBlogï¼šSpring Boot çš„è‡ªåŠ¨è£…é…</figcaption></figure><p>memoï¼š2025 å¹´ 7 æœˆ 2 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">å¸®çƒå‹ä¿®æ”¹ç®€å†</a>çš„æ—¶å€™ï¼Œç¢°åˆ°ä¸€ä¸ªåŒ—äº¬èˆªç©ºèˆªå¤©å¤§å­¦çš„çƒå‹ï¼Œä»–åœ¨é‚®ä»¶ä¸­è¯´åˆ°ï¼šåœ¨æ˜Ÿçƒé‡Œå­¦åˆ°äº†å¥½å¤šä¸œè¥¿ï¼Œç›®å‰æ­£åœ¨å‡†å¤‡<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a>å’Œ MYDBï¼Œæ‰“ç®—å¥½å¥½å†²ç§‹æ‹›ï¼Œèƒ½å¸®åŠ©åˆ°å¤§å®¶æˆ‘çœŸçš„å¾ˆæ¬£æ…°ã€‚</p><figure><img src="/blog/assets/img/spring-20250702101812.543858b5.png" alt="åŒ—èˆªçƒå‹å¯¹æ˜Ÿçƒçš„è®¤å¯" tabindex="0" loading="lazy"><figcaption>åŒ—èˆªçƒå‹å¯¹æ˜Ÿçƒçš„è®¤å¯</figcaption></figure><h3 id="_15-beançš„ä½œç”¨åŸŸæœ‰å“ªäº›" tabindex="-1"><a class="header-anchor" href="#_15-beançš„ä½œç”¨åŸŸæœ‰å“ªäº›"><span>15.Beançš„ä½œç”¨åŸŸæœ‰å“ªäº›?</span></a></h3><p>Bean çš„ä½œç”¨åŸŸå†³å®šäº† Bean å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸå’Œåˆ›å»ºç­–ç•¥ï¼Œsingleton æ˜¯é»˜è®¤çš„ä½œç”¨åŸŸã€‚æ•´ä¸ª Spring å®¹å™¨ä¸­åªä¼šæœ‰ä¸€ä¸ª Bean å®ä¾‹ã€‚ä¸ç®¡åœ¨å¤šå°‘ä¸ªåœ°æ–¹æ³¨å…¥è¿™ä¸ª Beanï¼Œæ‹¿åˆ°çš„éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // é»˜è®¤å°±æ˜¯singleton</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // æ•´ä¸ªåº”ç”¨ä¸­åªæœ‰ä¸€ä¸ªUserServiceå®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”Ÿå‘½å‘¨æœŸå’Œ Spring å®¹å™¨ç›¸åŒï¼Œå®¹å™¨å¯åŠ¨æ—¶åˆ›å»ºï¼Œå®¹å™¨é”€æ¯æ—¶é”€æ¯ã€‚</p><p>å®é™…å¼€å‘ä¸­ï¼Œåƒ Serviceã€Dao è¿™äº›ä¸šåŠ¡ç»„ä»¶åŸºæœ¬éƒ½æ˜¯å•ä¾‹çš„ï¼Œå› ä¸ºå•ä¾‹æ—¢èƒ½èŠ‚çœå†…å­˜ï¼Œåˆèƒ½æé«˜æ€§èƒ½ã€‚</p><p>å½“æŠŠ scope è®¾ç½®ä¸º prototype æ—¶ï¼Œæ¯æ¬¡ä»å®¹å™¨ä¸­è·å– Bean çš„æ—¶å€™éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Scope</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;prototype&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> OrderProcessor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // æ¯æ¬¡æ³¨å…¥æˆ–è·å–éƒ½æ˜¯æ–°çš„å®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“éœ€è¦å¤„ç†ä¸€äº›æœ‰çŠ¶æ€çš„ Bean æ—¶ä¼šç”¨åˆ° prototypeï¼Œæ¯”å¦‚æ¯ä¸ªè®¢å•å¤„ç†å™¨éœ€è¦ç»´æŠ¤ä¸åŒçš„çŠ¶æ€ä¿¡æ¯ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ singleton Bean ä¸­æ³¨å…¥ prototype Bean æ—¶è¦å°å¿ƒï¼Œå› ä¸º singleton Bean åªåˆ›å»ºä¸€æ¬¡ï¼Œæ‰€ä»¥ prototype Bean ä¹Ÿåªä¼šæ³¨å…¥ä¸€æ¬¡ã€‚è¿™æ—¶å€™å¯ä»¥ç”¨ <code>@Lookup</code> æ³¨è§£æˆ–è€… ApplicationContext æ¥åŠ¨æ€è·å–ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SingletonService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // é”™è¯¯çš„åšæ³•ï¼ŒprototypeBeanåªä¼šæ³¨å…¥ä¸€æ¬¡</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> PrototypeBean</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> prototypeBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // æ­£ç¡®çš„åšæ³•ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½è·å–æ–°å®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Lookup</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> PrototypeBean</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getPrototypeBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Springä¼šé‡å†™è¿™ä¸ªæ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é™¤äº† singleton å’Œ prototypeï¼ŒSpring è¿˜æ”¯æŒå…¶ä»–ä½œç”¨åŸŸï¼Œæ¯”å¦‚ requestã€sessionã€application å’Œ websocketã€‚</p><figure><img src="/blog/assets/img/spring-08a9cb31-5a4f-4224-94cd-0c0f643a57ea.398d69a6.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring Beanæ”¯æŒä½œç”¨åŸŸ" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring Beanæ”¯æŒä½œç”¨åŸŸ</figcaption></figure><p>å¦‚æœä½œç”¨äºæ˜¯ requestï¼Œè¡¨ç¤ºåœ¨ Web åº”ç”¨ä¸­ï¼Œæ¯ä¸ª HTTP è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ Bean å®ä¾‹ï¼Œè¯·æ±‚ç»“æŸå Bean å°±è¢«é”€æ¯ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Scope</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;request&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> RequestContext</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // æ¯ä¸ªHTTPè¯·æ±‚éƒ½æœ‰è‡ªå·±çš„å®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä½œç”¨äºæ˜¯ sessionï¼Œè¡¨ç¤ºåœ¨ Web åº”ç”¨ä¸­ï¼Œæ¯ä¸ª HTTP ä¼šè¯éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ Bean å®ä¾‹ï¼Œä¼šè¯ç»“æŸå Bean è¢«é”€æ¯ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Scope</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;session&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserSession</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // æ¯ä¸ªç”¨æˆ·ä¼šè¯éƒ½æœ‰è‡ªå·±çš„å®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¸å‹çš„ä½¿ç”¨åœºæ™¯æ˜¯è´­ç‰©è½¦ã€ç”¨æˆ·ç™»å½•çŠ¶æ€è¿™äº›éœ€è¦åœ¨æ•´ä¸ªä¼šè¯æœŸé—´ä¿æŒçš„ä¿¡æ¯ã€‚</p><p>application ä½œç”¨åŸŸè¡¨ç¤ºåœ¨æ•´ä¸ªåº”ç”¨ä¸­åªæœ‰ä¸€ä¸ª Bean å®ä¾‹ï¼Œç±»ä¼¼äº singletonï¼Œä½†å®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸ ServletContext ç»‘å®šã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Scope</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;application&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AppConfig</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // æ•´ä¸ªåº”ç”¨ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>websocket ä½œç”¨åŸŸè¡¨ç¤ºåœ¨ WebSocket ä¼šè¯ä¸­æ¯ä¸ªè¿æ¥éƒ½æœ‰è‡ªå·±çš„ Bean å®ä¾‹ã€‚WebSocket è¿æ¥å»ºç«‹æ—¶åˆ›å»ºï¼Œè¿æ¥å…³é—­æ—¶é”€æ¯ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Scope</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;websocket&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> WebSocketHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // æ¯ä¸ªWebSocketè¿æ¥éƒ½æœ‰è‡ªå·±çš„å®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„åŒå­¦ 1 è´å£³æ‰¾æˆ¿åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šbeanæ˜¯å•ä¾‹è¿˜æ˜¯å¤šä¾‹çš„ï¼Œå…·ä½“æ€ä¹ˆä¿®æ”¹</li></ol></blockquote><p>memoï¼š2025 å¹´ 7 æœˆ 3 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">å¸®çƒå‹ä¿®æ”¹ç®€å†</a>çš„æ—¶å€™ï¼Œç¢°åˆ°ä¸€ä¸ªéƒ‘å·å¤§å­¦ç¡•ï¼Œæ²³åŒ—å¸ˆèŒƒå¤§å­¦æœ¬çš„çƒå‹ï¼Œæ•´ä½“åœ¨æ ¡çš„ç»å†éå¸¸å‡ºè‰²ï¼Œå¥–å­¦é‡‘ã€è®ºæ–‡æœŸåˆŠåŸºæœ¬ä¸Šéƒ½æ‹‰æ»¡äº†ã€‚é‚£è¿™ä¹ˆå¤šä¼˜ç§€çš„çƒå‹é€‰æ‹©æ¥åˆ°è¿™é‡Œï¼Œä¹Ÿæ˜¯å¯¹æ˜Ÿçƒçš„åˆä¸€æ¬¡è®¤å¯å’Œè‚¯å®šï¼Œæˆ‘ä¹Ÿä¸€å®šä¼šç»§ç»­åŠªåŠ›ï¼Œæä¾›æ›´å¤šä¼˜è´¨çš„å†…å®¹å’ŒæœåŠ¡ã€‚</p><figure><img src="/blog/assets/img/spring-20250704144758.001be931.png" alt="éƒ‘å·å¤§å­¦ç¡•ï¼Œæ²³åŒ—å¸ˆèŒƒå¤§å­¦æœ¬çš„çƒå‹" tabindex="0" loading="lazy"><figcaption>éƒ‘å·å¤§å­¦ç¡•ï¼Œæ²³åŒ—å¸ˆèŒƒå¤§å­¦æœ¬çš„çƒå‹</figcaption></figure><h3 id="_16-springä¸­çš„å•ä¾‹beanä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜å—" tabindex="-1"><a class="header-anchor" href="#_16-springä¸­çš„å•ä¾‹beanä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜å—"><span>16.Springä¸­çš„å•ä¾‹Beanä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜å—ï¼Ÿ</span></a></h3><p>é¦–å…ˆè¦æ˜ç¡®ä¸€ç‚¹ã€‚Spring å®¹å™¨æœ¬èº«ä¿è¯äº† Bean åˆ›å»ºè¿‡ç¨‹çš„çº¿ç¨‹å®‰å…¨ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ä¼šå‡ºç°å¤šä¸ªçº¿ç¨‹åŒæ—¶åˆ›å»ºåŒä¸€ä¸ªå•ä¾‹ Bean çš„æƒ…å†µã€‚ä½†æ˜¯ Bean åˆ›å»ºå®Œæˆåçš„ä½¿ç”¨è¿‡ç¨‹ï¼ŒSpring å°±ä¸ç®¡äº†ã€‚</p><p>æ¢å¥è¯è¯´ï¼Œå•ä¾‹ Bean åœ¨è¢«åˆ›å»ºåï¼Œå¦‚æœå®ƒçš„å†…éƒ¨çŠ¶æ€æ˜¯å¯å˜çš„ï¼Œé‚£ä¹ˆåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å°±å¯èƒ½ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</p><figure><img src="/blog/assets/img/spring-35dacef4-1a9e-45e1-b3f2-5a91227eb244.74caca5d.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpringå•ä¾‹Beançº¿ç¨‹å®‰å…¨é—®é¢˜" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpringå•ä¾‹Beançº¿ç¨‹å®‰å…¨é—®é¢˜</figcaption></figure><p>æ¯”å¦‚è¯´åœ¨<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾é¡¹ç›®</a>ä¸­ï¼Œæœ‰ä¸€ä¸ªæ•æ„Ÿè¯è¿‡æ»¤çš„ Beanï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨ volatile å…³é”®å­—æ¥ä¿è¯å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„å¯è§æ€§ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SensitiveService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> volatile</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SensitiveWordBs</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> sensitiveWordBs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // ä½¿ç”¨volatileä¿è¯å¯è§æ€§</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">PostConstruct</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> refresh</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // é‡æ–°åˆå§‹åŒ–sensitiveWordBs</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœ Bean ä¸­æ²¡æœ‰æˆå‘˜å˜é‡ï¼Œæˆ–è€…æˆå‘˜å˜é‡éƒ½æ˜¯ä¸å¯å˜çš„ï¼Œfinal ä¿®é¥°çš„ï¼Œé‚£ä¹ˆå°±ä¸å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserServiceImpl</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Resource</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDao</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> CountService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> countService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // åªæœ‰ä¾èµ–æ³¨å…¥çš„æ— çŠ¶æ€å­—æ®µ</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ConfigService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> appName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // finalä¿®é¥°ï¼Œä¸å¯å˜</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ConfigService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;${app.name}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> appName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">appName</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> appName;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å•ä¾‹beançš„çº¿ç¨‹å®‰å…¨é—®é¢˜æ€ä¹ˆè§£å†³å‘¢" tabindex="-1"><a class="header-anchor" href="#å•ä¾‹beançš„çº¿ç¨‹å®‰å…¨é—®é¢˜æ€ä¹ˆè§£å†³å‘¢"><span>å•ä¾‹Beançš„çº¿ç¨‹å®‰å…¨é—®é¢˜æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ</span></a></h4><p>ç¬¬ä¸€ç§ï¼Œä½¿ç”¨å±€éƒ¨å˜é‡ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨æ— çŠ¶æ€çš„å•ä¾‹ Beanï¼ŒæŠŠæ‰€æœ‰çŠ¶æ€éƒ½é€šè¿‡æ–¹æ³•å‚æ•°ä¼ é€’ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserDao</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // æ— çŠ¶æ€æ–¹æ³•ï¼Œæ‰€æœ‰æ•°æ®é€šè¿‡å‚æ•°ä¼ é€’</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> User</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> processUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Long</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> userId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> operation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        User</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> user</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">findById</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(userId);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // å¤„ç†é€»è¾‘...</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒç§ï¼Œå½“ç¡®å®éœ€è¦ç»´æŠ¤çº¿ç¨‹ç›¸å…³çš„çŠ¶æ€æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <a href="https://javabetter.cn/thread/ThreadLocal.html" target="_blank" rel="noopener noreferrer">ThreadLocal</a> æ¥ä¿å­˜çŠ¶æ€ã€‚ThreadLocal å¯ä»¥ä¿è¯æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„å˜é‡å‰¯æœ¬ï¼Œäº’ä¸å¹²æ‰°ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserContextService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ThreadLocal</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">User</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> userThreadLocal </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ThreadLocal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> setCurrentUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">User</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> user</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        userThreadLocal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">set</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(user);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> User</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getCurrentUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> userThreadLocal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> clear</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        userThreadLocal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">remove</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(); </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// é˜²æ­¢å†…å­˜æ³„æ¼</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬ä¸‰ç§ï¼Œå¦‚æœéœ€è¦ç¼“å­˜æ•°æ®æˆ–è€…è®¡æ•°ï¼Œä½¿ç”¨ JUC åŒ…ä¸‹çš„çº¿ç¨‹å®‰å…¨ç±»ï¼Œæ¯”å¦‚è¯´ <a href="https://javabetter.cn/thread/atomic.html" target="_blank" rel="noopener noreferrer">AtomicInteger</a>ã€<a href="https://javabetter.cn/thread/ConcurrentHashMap.html" target="_blank" rel="noopener noreferrer">ConcurrentHashMap</a>ã€<a href="https://javabetter.cn/thread/CopyOnWriteArrayList.html" target="_blank" rel="noopener noreferrer">CopyOnWriteArrayList</a> ç­‰ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> CacheService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„é›†åˆ</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ConcurrentHashMap</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> cache </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ConcurrentHashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AtomicLong</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> counter </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> AtomicLong</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> put</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        cache</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">put</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(key, value);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        counter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">incrementAndGet</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬å››ç§ï¼Œå¯¹äºå¤æ‚çš„çŠ¶æ€æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨ synchronized æˆ– Lockï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> CacheService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Map</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> cache </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ReentrantLock</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> lock </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ReentrantLock</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> put</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> key</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        lock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">lock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            cache</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">put</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(key, value);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">finally</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            lock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">unlock</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äº”ç§ï¼Œå¦‚æœ Bean ç¡®å®éœ€è¦ç»´æŠ¤çŠ¶æ€ï¼Œå¯ä»¥è€ƒè™‘å°†å…¶æ”¹ä¸º prototype ä½œç”¨åŸŸï¼Œè¿™æ ·æ¯æ¬¡æ³¨å…¥éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œé¿å…äº†å¤šçº¿ç¨‹å…±äº«åŒä¸€ä¸ªå®ä¾‹çš„é—®é¢˜ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Scope</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;prototype&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æ¯æ¬¡æ³¨å…¥éƒ½åˆ›å»ºæ–°å®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> StatefulService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // ç°åœ¨æ¯ä¸ªå®ä¾‹éƒ½æœ‰ç‹¬ç«‹çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> setState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">state</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> state;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ–è€…ä½¿ç”¨ request ä½œç”¨åŸŸï¼Œè¿™æ ·æ¯ä¸ª HTTP è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Scope</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;request&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> RequestScopedService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> requestData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // æ¯ä¸ªè¯·æ±‚éƒ½æœ‰ç‹¬ç«‹çš„å®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„é˜¿é‡Œé¢ç»åŒå­¦ 1 é—²é±¼åç«¯ä¸€é¢çš„åŸé¢˜ï¼šspringçš„beançš„å¹¶å‘å®‰å…¨é—®é¢˜</li></ol></blockquote><p>memoï¼š2025 å¹´ 7 æœˆ 4 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">å¸®çƒå‹ä¿®æ”¹ç®€å†</a>çš„æ—¶å€™ï¼Œç¢°åˆ°ä¸€ä¸ªæ­¦æ±‰ç†å·¥å¤§å­¦æœ¬ç¡•çš„çƒå‹ã€‚è¯´çœŸçš„ï¼Œå’Œæ­¦æ±‰ç†å·¥å¤§å­¦æŒºæœ‰ç¼˜çš„ï¼Œ2023 å¹´å»æ­¦æ±‰ï¼Œå°±çº¿ä¸‹è§äº†ä¸€åæ­¦ç†çš„çƒå‹ï¼Œ<a href="https://t.zsxq.com/LfG3B" target="_blank" rel="noopener noreferrer">ä»–å½“æ—¶ç­¾çº¦çš„æ˜¯å°ç±³</a>ï¼Œéå¸¸ä¼˜ç§€ã€‚</p><figure><img src="/blog/assets/img/spring-2023.09-2026.06.1ea198f7.png" alt="æ­¦æ±‰ç†å·¥å¤§å­¦æœ¬ç¡•çš„çƒå‹" tabindex="0" loading="lazy"><figcaption>æ­¦æ±‰ç†å·¥å¤§å­¦æœ¬ç¡•çš„çƒå‹</figcaption></figure><h3 id="_17-ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_17-ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–"><span>17.ä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–?</span></a></h3><p>ç®€å•æ¥è¯´å°±æ˜¯ä¸¤ä¸ªæˆ–å¤šä¸ª Bean ç›¸äº’ä¾èµ–ï¼Œæ¯”å¦‚è¯´ A ä¾èµ– Bï¼ŒB ä¾èµ– Aï¼Œæˆ–è€… C ä¾èµ– Cï¼Œå°±æˆäº†å¾ªç¯ä¾èµ–ã€‚</p><figure><img src="/blog/assets/img/spring-f8fea53f-56fa-4cca-9199-ec7f648da625.27121847.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpringå¾ªç¯ä¾èµ–" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpringå¾ªç¯ä¾èµ–</figcaption></figure><h3 id="_18-ğŸŒŸspringæ€ä¹ˆè§£å†³å¾ªç¯ä¾èµ–å‘¢" tabindex="-1"><a class="header-anchor" href="#_18-ğŸŒŸspringæ€ä¹ˆè§£å†³å¾ªç¯ä¾èµ–å‘¢"><span>18.ğŸŒŸSpringæ€ä¹ˆè§£å†³å¾ªç¯ä¾èµ–å‘¢ï¼Ÿ</span></a></h3><p>Spring é€šè¿‡ä¸‰çº§ç¼“å­˜æœºåˆ¶æ¥è§£å†³å¾ªç¯ä¾èµ–ï¼š</p><ol><li>ä¸€çº§ç¼“å­˜ï¼šå­˜æ”¾å®Œå…¨åˆå§‹åŒ–å¥½çš„å•ä¾‹ Beanã€‚</li><li>äºŒçº§ç¼“å­˜ï¼šå­˜æ”¾æå‰æš´éœ²çš„ Beanï¼Œå®ä¾‹åŒ–å®Œæˆï¼Œä½†æœªåˆå§‹åŒ–å®Œæˆã€‚</li><li>ä¸‰çº§ç¼“å­˜ï¼šå­˜æ”¾ Bean å·¥å‚ï¼Œç”¨äºç”Ÿæˆæå‰æš´éœ²çš„ Beanã€‚</li></ol><figure><img src="/blog/assets/img/spring-01d92863-a2cb-4f61-8d8d-30ecf0279b28.94ea3d61.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šä¸‰çº§ç¼“å­˜" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šä¸‰çº§ç¼“å­˜</figcaption></figure><p>ä»¥ Aã€B ä¸¤ä¸ªç±»å‘ç”Ÿå¾ªç¯ä¾èµ–ä¸ºä¾‹ï¼š</p><figure><img src="/blog/assets/img/spring-cfc09f84-f8e1-4702-80b6-d115843e81fe.665ec3d9.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šå¾ªç¯ä¾èµ–" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šå¾ªç¯ä¾èµ–</figcaption></figure><p>ç¬¬ 1 æ­¥ï¼šå¼€å§‹åˆ›å»º Bean Aã€‚</p><ul><li>Spring è°ƒç”¨ A çš„æ„é€ æ–¹æ³•ï¼Œåˆ›å»º A çš„å®ä¾‹ã€‚æ­¤æ—¶ A å¯¹è±¡å·²å­˜åœ¨ï¼Œä½† bå±æ€§è¿˜æ˜¯ nullã€‚</li><li>å°† A çš„å¯¹è±¡å·¥å‚æ”¾å…¥ä¸‰çº§ç¼“å­˜ã€‚</li><li>å¼€å§‹è¿›è¡Œ A çš„å±æ€§æ³¨å…¥ã€‚</li></ul><figure><img src="/blog/assets/img/spring-1a8bdc29-ff43-4ff4-9b61-3eedd9da59b3.62380d9b.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šA å¯¹è±¡å·¥å‚" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šA å¯¹è±¡å·¥å‚</figcaption></figure><p>ç¬¬ 2 æ­¥ï¼šA éœ€è¦æ³¨å…¥ Bï¼Œå¼€å§‹åˆ›å»º Bean Bã€‚</p><ul><li>å‘ç°éœ€è¦ Bï¼Œä½† B è¿˜ä¸å­˜åœ¨ï¼Œæ‰€ä»¥å¼€å§‹åˆ›å»º Bã€‚</li><li>è°ƒç”¨ B çš„æ„é€ æ–¹æ³•ï¼Œåˆ›å»º B çš„å®ä¾‹ã€‚æ­¤æ—¶ B å¯¹è±¡å·²å­˜åœ¨ï¼Œä½† a å±æ€§è¿˜æ˜¯ nullã€‚</li><li>å°† B çš„å¯¹è±¡å·¥å‚æ”¾å…¥ä¸‰çº§ç¼“å­˜ã€‚</li><li>å¼€å§‹è¿›è¡Œ B çš„å±æ€§æ³¨å…¥ã€‚</li></ul><p>ç¬¬ 3 æ­¥ï¼šB éœ€è¦æ³¨å…¥ Aï¼Œä»ç¼“å­˜ä¸­è·å– Aã€‚</p><ul><li>B éœ€è¦æ³¨å…¥ Aï¼Œå…ˆä»ä¸€çº§ç¼“å­˜æ‰¾ Aï¼Œæ²¡æ‰¾åˆ°ã€‚</li><li>å†ä»äºŒçº§ç¼“å­˜æ‰¾ Aï¼Œä¹Ÿæ²¡æ‰¾åˆ°ã€‚</li><li>æœ€åä»ä¸‰çº§ç¼“å­˜æ‰¾ Aï¼Œæ‰¾åˆ°äº† A çš„å¯¹è±¡å·¥å‚ã€‚</li><li>è°ƒç”¨ A çš„å¯¹è±¡å·¥å‚å¾—åˆ° A çš„å®ä¾‹ã€‚è¿™æ—¶ A å·²ç»å®ä¾‹åŒ–äº†ï¼Œè™½ç„¶è¿˜æ²¡å®Œå…¨åˆå§‹åŒ–ã€‚</li><li>å°† A ä»ä¸‰çº§ç¼“å­˜ç§»åˆ°äºŒçº§ç¼“å­˜ã€‚</li><li>B æ‹¿åˆ° A çš„å¼•ç”¨ï¼Œå®Œæˆå±æ€§æ³¨å…¥ã€‚</li></ul><figure><img src="/blog/assets/img/spring-bf2507bf-96aa-4b88-a58b-7ec41d11bc70.db5d38ec.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šA æ”¾å…¥äºŒçº§ç¼“å­˜ï¼ŒB æ”¾å…¥ä¸€çº§ç¼“å­˜" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šA æ”¾å…¥äºŒçº§ç¼“å­˜ï¼ŒB æ”¾å…¥ä¸€çº§ç¼“å­˜</figcaption></figure><p>ç¬¬ 4 æ­¥ï¼šB å®Œæˆåˆå§‹åŒ–ã€‚</p><ul><li>B çš„å±æ€§æ³¨å…¥å®Œæˆï¼Œæ‰§è¡Œ <code>@PostConstruct</code> ç­‰åˆå§‹åŒ–é€»è¾‘ã€‚</li><li>B å®Œå…¨åˆ›å»ºå®Œæˆï¼Œä»ä¸‰çº§ç¼“å­˜ç§»é™¤ï¼Œæ”¾å…¥ä¸€çº§ç¼“å­˜ã€‚</li></ul><p>ç¬¬ 5 æ­¥ï¼šA å®Œæˆåˆå§‹åŒ–ã€‚</p><ul><li>å›åˆ° A çš„åˆ›å»ºè¿‡ç¨‹ï¼ŒA æ‹¿åˆ°å®Œæ•´çš„ B å®ä¾‹ï¼Œå®Œæˆå±æ€§æ³¨å…¥ã€‚</li><li>A æ‰§è¡Œåˆå§‹åŒ–é€»è¾‘ï¼Œåˆ›å»ºå®Œæˆã€‚</li><li>A ä»äºŒçº§ç¼“å­˜ç§»é™¤ï¼Œæ”¾å…¥ä¸€çº§ç¼“å­˜ã€‚</li></ul><figure><img src="/blog/assets/img/spring-022f7cb9-2c83-4fe9-b252-b02bd0fb2435.23493459.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šAB éƒ½å¥½äº†" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šAB éƒ½å¥½äº†</figcaption></figure><p>ç”¨ä»£ç æ¥æ¨¡æ‹Ÿè¿™ä¸ªè¿‡ç¨‹ï¼Œæ˜¯è¿™æ ·çš„ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æ¨¡æ‹ŸSpringçš„è§£å†³è¿‡ç¨‹</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> CircularDependencyDemo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ä¸‰çº§ç¼“å­˜</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    Map</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> singletonObjects </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    Map</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> earlySingletonObjects </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    Map</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ObjectFactory</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> singletonFactories </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> beanName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // å…ˆä»ä¸€çº§ç¼“å­˜è·å–</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> bean</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> singletonObjects</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (bean </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> bean;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // å†ä»äºŒçº§ç¼“å­˜è·å–</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        bean </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> earlySingletonObjects</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (bean </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> bean;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // æœ€åä»ä¸‰çº§ç¼“å­˜è·å–</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        ObjectFactory</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> factory</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> singletonFactories</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (factory </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            bean </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> factory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getObject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            earlySingletonObjects</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">put</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName, bean);  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ç§»åˆ°äºŒçº§ç¼“å­˜</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            singletonFactories</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">remove</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName);        </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ä»ä¸‰çº§ç¼“å­˜ç§»é™¤</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> bean;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å“ªäº›æƒ…å†µä¸‹springæ— æ³•è§£å†³å¾ªç¯ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#å“ªäº›æƒ…å†µä¸‹springæ— æ³•è§£å†³å¾ªç¯ä¾èµ–"><span>å“ªäº›æƒ…å†µä¸‹Springæ— æ³•è§£å†³å¾ªç¯ä¾èµ–ï¼Ÿ</span></a></h4><p>Spring è™½ç„¶èƒ½è§£å†³å¤§éƒ¨åˆ†å¾ªç¯ä¾èµ–é—®é¢˜ï¼Œä½†ç¡®å®æœ‰å‡ ç§æƒ…å†µæ˜¯æ— æ³•å¤„ç†çš„ï¼Œæˆ‘æ¥è¯¦ç»†è¯´è¯´ã€‚</p><figure><img src="/blog/assets/img/spring-37bb576d-b4af-42ed-91f4-d846ceb012b6.8145b31a.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šå¾ªç¯ä¾èµ–çš„å‡ ç§æƒ…å½¢" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šå¾ªç¯ä¾èµ–çš„å‡ ç§æƒ…å½¢</figcaption></figure><p>ç¬¬ä¸€ç§ï¼Œæ„é€ æ–¹æ³•çš„å¾ªç¯ä¾èµ–ï¼Œè¿™ç§æƒ…å†µ Spring ä¼šç›´æ¥æŠ›å‡º BeanCurrentlyInCreationException å¼‚å¸¸ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> A</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> B</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> b</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> A</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">B</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> b</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æ„é€ æ–¹æ³•æ³¨å…¥</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">b</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> b;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> B</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> A</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> B</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">A</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æ„é€ æ–¹æ³•æ³¨å…¥</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">a</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> a;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å› ä¸ºæ„é€ æ–¹æ³•æ³¨å…¥å‘ç”Ÿåœ¨å®ä¾‹åŒ–é˜¶æ®µï¼Œåˆ›å»º A çš„æ—¶å€™å¿…é¡»å…ˆæœ‰ Bï¼Œä½†åˆ›å»º Båˆå¿…é¡»å…ˆæœ‰ Aï¼Œè¿™æ—¶å€™ä¸¤ä¸ªå¯¹è±¡éƒ½è¿˜æ²¡åˆ›å»ºå‡ºæ¥ï¼Œæ— æ³•æå‰æš´éœ²åˆ°ç¼“å­˜ä¸­ã€‚</p><p>ç¬¬äºŒç§ï¼Œprototype ä½œç”¨åŸŸçš„å¾ªç¯ä¾èµ–ã€‚prototype ä½œç”¨åŸŸçš„ Bean æ¯æ¬¡è·å–éƒ½ä¼šåˆ›å»ºæ–°å®ä¾‹ï¼ŒSpring æ— æ³•ç¼“å­˜è¿™äº›å®ä¾‹ï¼Œæ‰€ä»¥ä¹Ÿæ— æ³•è§£å†³å¾ªç¯ä¾èµ–ã€‚</p><p>----é¢è¯•ä¸­å¯ä»¥ä¸èƒŒï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£ start----</p><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå®ä¾‹ï¼Œå…ˆæ˜¯ PrototypeBeanAï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Scope</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;prototype&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> PrototypeBeanA</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> PrototypeBeanB</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> prototypeBeanB</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> PrototypeBeanA</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">PrototypeBeanB</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> prototypeBeanB</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">prototypeBeanB</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> prototypeBeanB;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åæ˜¯ PrototypeBeanBï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Scope</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;prototype&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> PrototypeBeanB</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> PrototypeBeanA</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> prototypeBeanA</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> PrototypeBeanB</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">PrototypeBeanA</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> prototypeBeanA</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">prototypeBeanA</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> prototypeBeanA;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†ç„¶åæ˜¯æµ‹è¯•ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">SpringBootApplication</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DemoApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        SpringApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">DemoApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, args);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    CommandLineRunner</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> commandLineRunner</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ApplicationContext</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> ctx</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> args </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            // å°è¯•è·å–PrototypeBeanAçš„å®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">            PrototypeBeanA</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> beanA</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> ctx</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">PrototypeBeanA</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        };</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œç»“æœï¼š</p><figure><img src="/blog/assets/img/spring-20240310202703.ffa56d04.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå¾ªç¯ä¾èµ–" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šå¾ªç¯ä¾èµ–</figcaption></figure><p>----é¢è¯•ä¸­å¯ä»¥ä¸èƒŒï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£ end----</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°ç±³ 25 å±Šæ—¥å¸¸å®ä¹ ä¸€é¢åŸé¢˜ï¼šå¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç™¾åº¦é¢ç»åŒå­¦ 1 æ–‡å¿ƒä¸€è¨€ 25 å®ä¹  Java åç«¯é¢è¯•åŸé¢˜ï¼šSpringå¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¾—ç‰©é¢ç»åŒå­¦ 9 é¢è¯•é¢˜ç›®åŸé¢˜ï¼šSpringæºç çœ‹è¿‡å—ï¼ŸSpringçš„ä¸‰çº§ç¼“å­˜çŸ¥é“å—ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„é˜¿é‡Œäº‘é¢ç»åŒå­¦ 22 é¢ç»ï¼šspringä¸‰çº§ç¼“å­˜è§£å†³å¾ªç¯ä¾èµ–é—®é¢˜</li></ol></blockquote><p>memoï¼š2025 å¹´ 7 æœˆ 5 æ—¥ä¿®æ”¹è‡³æ­¤ã€‚ä»Šå¤© <a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">VIP ç¾¤</a>æ¥äº†éå¸¸å¤šçš„çƒå‹ï¼Œä¸çŸ¥ä¸è§‰æˆ‘ä»¬å·²ç» 12 ç¾¤äº†ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå¤§å®¶åº­äº†ï¼Œå¸Œæœ›å¤§å®¶éƒ½èƒ½åœ¨è¿™é‡Œæ‰¾åˆ°è‡ªå·±çš„å½’å±æ„Ÿï¼Œæˆ‘ä»¬ä¸€èµ·å­¦ä¹ ï¼Œä¸€èµ·è¿›æ­¥ã€‚</p><figure><img src="/blog/assets/img/spring-20250705072809.88d1bd2d.png" alt="äºŒå“¥çš„ç¼–ç¨‹æ˜Ÿçƒå·²ç» 12 ç¾¤äº†" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ç¼–ç¨‹æ˜Ÿçƒå·²ç» 12 ç¾¤äº†</figcaption></figure><h3 id="_19-ä¸ºä»€ä¹ˆéœ€è¦ä¸‰çº§ç¼“å­˜è€Œä¸æ˜¯ä¸¤çº§" tabindex="-1"><a class="header-anchor" href="#_19-ä¸ºä»€ä¹ˆéœ€è¦ä¸‰çº§ç¼“å­˜è€Œä¸æ˜¯ä¸¤çº§"><span>19.ä¸ºä»€ä¹ˆéœ€è¦ä¸‰çº§ç¼“å­˜è€Œä¸æ˜¯ä¸¤çº§ï¼Ÿ</span></a></h3><p>Spring è®¾è®¡ä¸‰çº§ç¼“å­˜ä¸»è¦æ˜¯ä¸ºäº†è§£å†³ AOP ä»£ç†çš„é—®é¢˜ã€‚</p><p>æˆ‘ä¸¾ä¸ªå…·ä½“çš„ä¾‹å­æ¥è¯´æ˜ä¸€ä¸‹ã€‚å‡è®¾æˆ‘ä»¬æœ‰ A å’Œ B ä¸¤ä¸ªç±»ç›¸äº’ä¾èµ–ï¼ŒA çš„æŸä¸ªæ–¹æ³•ä¸Šé¢è¿˜æ ‡æ³¨äº† <code>@Transactional</code> æ³¨è§£ï¼Œè¿™æ„å‘³ç€ A æœ€ç»ˆéœ€è¦è¢« Spring åˆ›å»ºæˆä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> A</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> B</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> b</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Transactional</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // Aéœ€è¦è¢«AOPä»£ç†</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> doSomething</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // ä¸šåŠ¡é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> B</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> A</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœåªæœ‰äºŒçº§ç¼“å­˜çš„è¯ï¼Œå½“åˆ›å»º A çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æŠŠ A çš„åŸå§‹å¯¹è±¡æå‰æ”¾åˆ°ç¼“å­˜é‡Œé¢ï¼Œç„¶å B åœ¨åˆ›å»ºçš„æ—¶å€™ä»ç¼“å­˜ä¸­æ‹¿åˆ° A çš„åŸå§‹å¯¹è±¡ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// å‡è®¾åªæœ‰ä¸¤çº§ç¼“å­˜</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Map</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> singletonObjects </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     // å®Œæ•´Bean</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Map</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> earlySingletonObjects </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // åŠæˆå“Bean</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½†æ˜¯é—®é¢˜æ¥äº†ï¼ŒA å®Œæˆåˆå§‹åŒ–åï¼Œç”±äºæœ‰ <code>@Transactional</code> æ³¨è§£ï¼ŒSpring ä¼šæŠŠ A åŒ…è£…æˆä¸€ä¸ªä»£ç†å¯¹è±¡æ”¾åˆ°å®¹å™¨ä¸­ã€‚è¿™æ ·å°±å‡ºç°äº†ä¸€ä¸ªå¾ˆä¸¥é‡çš„é—®é¢˜ï¼šB é‡Œé¢æŒæœ‰çš„æ˜¯ A çš„åŸå§‹å¯¹è±¡ï¼Œè€Œå®¹å™¨ä¸­å­˜çš„æ˜¯ A çš„ä»£ç†å¯¹è±¡ï¼ŒåŒä¸€ä¸ª Bean å±…ç„¶æœ‰ä¸¤ä¸ªä¸åŒçš„å®ä¾‹ï¼Œè¿™è‚¯å®šæ˜¯ä¸å¯¹çš„ã€‚</p><figure><img src="/blog/assets/img/spring-6ece8a46-25b1-459b-8cfa-19fc696dd7d6.2815bb7c.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šäºŒçº§ç¼“å­˜ä¸è¡Œçš„åŸå› " tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šäºŒçº§ç¼“å­˜ä¸è¡Œçš„åŸå› </figcaption></figure><p>ä¸‰çº§ç¼“å­˜å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œè®¾è®¡çš„ã€‚ä¸‰çº§ç¼“å­˜é‡Œé¢å­˜æ”¾çš„ä¸æ˜¯ Bean çš„å®ä¾‹ï¼Œè€Œæ˜¯ä¸€ä¸ªå¯¹è±¡å·¥å‚ï¼Œè¿™æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ã€‚</p><p>å½“ B éœ€è¦ A çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨è¿™ä¸ªå¯¹è±¡å·¥å‚çš„ getObject æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•é‡Œé¢ä¼šåˆ¤æ–­ A æ˜¯å¦éœ€è¦è¢«ä»£ç†ã€‚å¦‚æœéœ€è¦ä»£ç†ï¼Œå°±åˆ›å»º A çš„ä»£ç†å¯¹è±¡è¿”å›ç»™ Bï¼›å¦‚æœä¸éœ€è¦ä»£ç†ï¼Œå°±è¿”å› A çš„åŸå§‹å¯¹è±¡ã€‚è¿™æ ·å°±ä¿è¯äº† B æ‹¿åˆ°çš„ A å’Œæœ€ç»ˆæ”¾å…¥å®¹å™¨çš„ A æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Map</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ObjectFactory</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> singletonFactories </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Springæºç ä¸­çš„é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">addSingletonFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(beanName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> () </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getEarlyBeanReference</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(beanName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> mbd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> bean))</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">protected</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getEarlyBeanReference</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> beanName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> RootBeanDefinition</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> mbd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> bean) {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> exposedObject </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> bean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">mbd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isSynthetic</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &amp;&amp;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> hasInstantiationAwareBeanPostProcessors</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        for</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">BeanPostProcessor</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> bp </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getBeanPostProcessors</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (bp </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">instanceof</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> SmartInstantiationAwareBeanPostProcessor) {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">                SmartInstantiationAwareBeanPostProcessor</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> ibp </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (SmartInstantiationAwareBeanPostProcessor) bp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                // å…³é”®ï¼šå¦‚æœéœ€è¦ä»£ç†ï¼Œè¿™é‡Œä¼šåˆ›å»ºä»£ç†å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">                exposedObject </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> ibp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getEarlyBeanReference</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(exposedObject, beanName);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> exposedObject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç®€å•æ¥è¯´ï¼Œä¸‰çº§ç¼“å­˜çš„æ ¸å¿ƒä½œç”¨å°±æ˜¯å»¶è¿Ÿå†³ç­–ã€‚å®ƒè®© Spring åœ¨çœŸæ­£éœ€è¦ Bean çš„æ—¶å€™æ‰å†³å®šè¿”å›åŸå§‹å¯¹è±¡è¿˜æ˜¯ä»£ç†å¯¹è±¡ï¼Œè¿™æ ·å°±é¿å…äº†å¯¹è±¡ä¸ä¸€è‡´çš„é—®é¢˜ã€‚å¦‚æœæ²¡æœ‰ä¸‰çº§ç¼“å­˜ï¼ŒSpring è¦ä¹ˆæ— æ³•åœ¨å¾ªç¯ä¾èµ–çš„æƒ…å†µä¸‹æ”¯æŒ AOPï¼Œè¦ä¹ˆå°±ä¼šå‡ºç°åŒä¸€ä¸ª Bean æœ‰å¤šä¸ªå®ä¾‹çš„é—®é¢˜ï¼Œè¿™äº›éƒ½æ˜¯ä¸å¯æ¥å—çš„ã€‚</p><figure><img src="/blog/assets/img/spring-20250706065436.7c6b752c.png" alt="å¹¸äº‘æ•™è‚²ï¼šä¸‰çº§ç¼“å­˜å’Œå¾ªç¯ä¾èµ–" tabindex="0" loading="lazy"><figcaption>å¹¸äº‘æ•™è‚²ï¼šä¸‰çº§ç¼“å­˜å’Œå¾ªç¯ä¾èµ–</figcaption></figure><h4 id="å¦‚æœç¼ºå°‘äºŒçº§ç¼“å­˜ä¼šæœ‰ä»€ä¹ˆé—®é¢˜" tabindex="-1"><a class="header-anchor" href="#å¦‚æœç¼ºå°‘äºŒçº§ç¼“å­˜ä¼šæœ‰ä»€ä¹ˆé—®é¢˜"><span>å¦‚æœç¼ºå°‘äºŒçº§ç¼“å­˜ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ</span></a></h4><p>äºŒçº§ç¼“å­˜ earlySingletonObjects ä¸»è¦æ˜¯ç”¨æ¥å­˜æ”¾é‚£äº›å·²ç»é€šè¿‡ä¸‰çº§ç¼“å­˜çš„å¯¹è±¡å·¥å‚åˆ›å»ºå‡ºæ¥çš„æ—©æœŸ Bean å¼•ç”¨ã€‚</p><figure><img src="/blog/assets/img/spring-20250706065722.0c7475ec.png" alt="Minorç‹æ™ºï¼šä¸‰çº§ç¼“å­˜" tabindex="0" loading="lazy"><figcaption>Minorç‹æ™ºï¼šä¸‰çº§ç¼“å­˜</figcaption></figure><p>å‡è®¾æˆ‘ä»¬æœ‰ Aã€Bã€C ä¸‰ä¸ª Beanï¼ŒA ä¾èµ– B å’Œ Cï¼ŒB å’Œ C éƒ½ä¾èµ– Aï¼Œå½¢æˆäº†ä¸€ä¸ªå¤æ‚çš„å¾ªç¯ä¾èµ–ã€‚åœ¨æ²¡æœ‰äºŒçº§ç¼“å­˜çš„æƒ…å†µä¸‹ï¼Œæ¯æ¬¡ B æˆ–è€… C éœ€è¦è·å– A çš„æ—¶å€™ï¼Œéƒ½éœ€è¦è°ƒç”¨ä¸‰çº§ç¼“å­˜ä¸­ A çš„ <code>ObjectFactory.getObject()</code> æ–¹æ³•ã€‚è¿™æ„å‘³ç€å¦‚æœ A éœ€è¦è¢«ä»£ç†çš„è¯ï¼Œä»£ç†å¯¹è±¡å¯èƒ½ä¼šè¢«é‡å¤åˆ›å»ºå¤šæ¬¡ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸åˆç†çš„ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æ²¡æœ‰äºŒçº§ç¼“å­˜çš„ä¼ªä»£ç </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getSingleton</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> beanName) {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> singletonObject </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> singletonObjects</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (singletonObject </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &amp;&amp;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> isSingletonCurrentlyInCreation</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(beanName)) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // ç›´æ¥ä»ä¸‰çº§ç¼“å­˜è·å–</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        ObjectFactory</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> singletonFactory </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> singletonFactories</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(beanName);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (singletonFactory </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> singletonFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getObject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // æ¯æ¬¡éƒ½ä¼šåˆ›å»ºæ–°çš„ä»£ç†å¯¹è±¡ï¼</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> singletonObject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä¸¾ä¸ªå…·ä½“çš„ä¾‹å­ã€‚æ¯”å¦‚ A æœ‰ <code>@Transactional</code> æ³¨è§£éœ€è¦è¢« AOP ä»£ç†ï¼ŒB åœ¨åˆå§‹åŒ–çš„æ—¶å€™éœ€è¦ Aï¼Œä¼šè°ƒç”¨ä¸€æ¬¡å¯¹è±¡å·¥å‚åˆ›å»º A çš„ä»£ç†å¯¹è±¡ã€‚æ¥ç€ C åœ¨åˆå§‹åŒ–çš„æ—¶å€™ä¹Ÿéœ€è¦ Aï¼Œåˆä¼šè°ƒç”¨ä¸€æ¬¡å¯¹è±¡å·¥å‚ï¼Œå¯èƒ½åˆåˆ›å»ºäº†ä¸€ä¸ª A çš„ä»£ç†å¯¹è±¡ã€‚è¿™æ · B å’Œ C æ‹¿åˆ°çš„å¯èƒ½å°±æ˜¯ä¸¤ä¸ªä¸åŒçš„ A ä»£ç†å¯¹è±¡ï¼Œè¿™å°±è¿åäº†å•ä¾‹ Bean çš„è¯­ä¹‰ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ServiceA</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ServiceB</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> serviceB</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Transactional</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // éœ€è¦ AOP ä»£ç†</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> methodA</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // ä¸šåŠ¡é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ServiceB</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ServiceA</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> serviceA</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // è·å¾—ä»£ç†å¯¹è±¡ A1</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ServiceC</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> serviceC</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ServiceC</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ServiceA</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> serviceA</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // å¯èƒ½è·å¾—ä»£ç†å¯¹è±¡ A2</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>äºŒçº§ç¼“å­˜å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å½“ç¬¬ä¸€æ¬¡é€šè¿‡å¯¹è±¡å·¥å‚åˆ›å»ºäº† A çš„æ—©æœŸå¼•ç”¨ä¹‹åï¼Œå°±æŠŠè¿™ä¸ªå¼•ç”¨æ”¾åˆ°äºŒçº§ç¼“å­˜ä¸­ï¼ŒåŒæ—¶ä»ä¸‰çº§ç¼“å­˜ä¸­ç§»é™¤å¯¹è±¡å·¥å‚ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ç¬¬ä¸€æ¬¡è·å– A</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ObjectFactory</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">A</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> factory </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> singletonFactories</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;serviceA&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> proxyA </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> factory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getObject</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // åˆ›å»ºä»£ç†</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">earlySingletonObjects</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">put</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;serviceA&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, proxyA);</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // ç¼“å­˜ä»£ç†</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">singletonFactories</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">remove</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;serviceA&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ç¬¬äºŒæ¬¡è·å– A</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> cachedA </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> earlySingletonObjects</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;serviceA&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // ç›´æ¥è¿”å›ç¼“å­˜çš„ä»£ç†</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// proxyA == cachedA  âœ“</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åç»­å¦‚æœå†æœ‰å…¶ä»– Bean éœ€è¦ Aï¼Œå°±ç›´æ¥ä»äºŒçº§ç¼“å­˜ä¸­è·å–ï¼Œä¸éœ€è¦å†è°ƒç”¨å¯¹è±¡å·¥å‚äº†ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¿«æ‰‹åŒå­¦ 4 ä¸€é¢åŸé¢˜ï¼šå¾ªç¯ä¾èµ–æœ‰äº†è§£è¿‡å—ï¼Ÿå‡ºç°å¾ªç¯ä¾èµ–çš„åŸå› ï¼Ÿä¸‰å¤§ç¼“å­˜å­˜å‚¨å†…å®¹çš„åŒºåˆ«ï¼Ÿå¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–ï¼Ÿå¦‚æœç¼ºå°‘ç¬¬äºŒçº§ç¼“å­˜ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ</li></ol></blockquote><!----><p>memoï¼š2025 å¹´ 7 æœˆ 6 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨æ˜Ÿçƒé‡Œçœ‹åˆ°ä¸€ä¸ªçƒå‹çš„<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">ç§‹æ‹›æ‰“å¡</a>ï¼Œå·²ç»æŒç»­ 30 å¤©äº†ï¼ŒæŒ‰ç…§ä»–è¿™ä¸ªèŠ‚å¥ä¸‹å»ï¼Œäº’è”ç½‘å¤§å‚çš„ offer åŸºæœ¬ä¸Šå°±ç®—æ˜¯é”å®šäº†ã€‚å¹¶ä¸”è¿˜æœ‰å‡†å¤‡ RAG MCP çš„å…«è‚¡ï¼Œå¾ˆæ£’ã€‚</p><figure><img src="/blog/assets/img/spring-20250706070700.cbc82cb2.png" alt="çƒå‹åœ¨æ˜Ÿçƒé‡Œçš„ç§‹æ‹›æ‰“å¡è®°å½•" tabindex="0" loading="lazy"><figcaption>çƒå‹åœ¨æ˜Ÿçƒé‡Œçš„ç§‹æ‹›æ‰“å¡è®°å½•</figcaption></figure><h2 id="aop" tabindex="-1"><a class="header-anchor" href="#aop"><span>AOP</span></a></h2><h3 id="_20-ğŸŒŸè¯´è¯´ä»€ä¹ˆæ˜¯-aop" tabindex="-1"><a class="header-anchor" href="#_20-ğŸŒŸè¯´è¯´ä»€ä¹ˆæ˜¯-aop"><span>20.ğŸŒŸè¯´è¯´ä»€ä¹ˆæ˜¯ AOPï¼Ÿ</span></a></h3><p>AOPï¼Œä¹Ÿå°±æ˜¯é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œç®€å•ç‚¹è¯´ï¼ŒAOP å°±æ˜¯æŠŠä¸€äº›ä¸šåŠ¡é€»è¾‘ä¸­çš„ç›¸åŒä»£ç æŠ½å–åˆ°ä¸€ä¸ªç‹¬ç«‹çš„æ¨¡å—ä¸­ï¼Œè®©ä¸šåŠ¡é€»è¾‘æ›´åŠ æ¸…çˆ½ã€‚</p><figure><img src="/blog/assets/img/spring-09dbcda4-7c1b-42d6-8520-1a5fc84abbde.27d3c177.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šæ¨ªå‘æŠ½å–" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šæ¨ªå‘æŠ½å–</figcaption></figure><p>----è¿™éƒ¨åˆ†é¢è¯•ä¸­å¯ä»¥ä¸èƒŒï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£ start----</p><p>ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬æœ‰å¾ˆå¤šä¸ª Service æ–¹æ³•ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½éœ€è¦è®°å½•æ‰§è¡Œæ—¥å¿—ã€æ£€æŸ¥æƒé™ã€ç®¡ç†äº‹åŠ¡ç­‰ç­‰ã€‚å¦‚æœæ²¡æœ‰ AOP çš„è¯ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦åœ¨æ¯ä¸ªæ–¹æ³•é‡Œéƒ½å†™è¿™æ ·çš„ä»£ç ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createUser</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">User</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> user) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;å¼€å§‹æ‰§è¡ŒcreateUseræ–¹æ³•&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // æƒé™æ£€æŸ¥</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hasPermission</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        throw</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> SecurityException</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ— æƒé™&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // å¼€å¯äº‹åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    transactionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">begin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    try</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // çœŸæ­£çš„ä¸šåŠ¡é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">save</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(user);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        transactionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">commit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;createUseræ–¹æ³•æ‰§è¡ŒæˆåŠŸ&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        transactionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">rollback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">error</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;createUseræ–¹æ³•æ‰§è¡Œå¤±è´¥&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, e);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        throw</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœæ¯ä¸ªæ–¹æ³•éƒ½è¿™æ ·å†™ï¼Œä»£ç å°±ä¼šå˜å¾—éå¸¸è‡ƒè‚¿ï¼ŒAOP å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒå¯ä»¥è®©æˆ‘ä»¬æŠŠè¿™äº›æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆå¦‚æ—¥å¿—ã€æƒé™ã€äº‹åŠ¡ç­‰ï¼‰ä»ä¸šåŠ¡ä»£ç ä¸­æŠ½å–å‡ºæ¥ã€‚</p><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®šä¹‰ä¸€ä¸ªåˆ‡é¢ï¼Œåœ¨åˆ‡é¢ä¸­ç»Ÿä¸€å¤„ç†è¿™äº›æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Aspect</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> LoggingAspect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Before</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;execution(* com.example.service.*.*(..))&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> logBefore</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">JoinPoint</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;å¼€å§‹æ‰§è¡Œæ–¹æ³•: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getSignature</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">AfterReturning</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;execution(* com.example.service.*.*(..))&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> logAfterReturning</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">JoinPoint</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ–¹æ³•æ‰§è¡ŒæˆåŠŸ: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getSignature</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">AfterThrowing</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">pointcut</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;execution(* com.example.service.*.*(..))&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">                   throwing</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;ex&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> logAfterThrowing</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">JoinPoint</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Throwable</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> ex</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">error</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ–¹æ³•æ‰§è¡Œå¤±è´¥: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getSignature</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(), ex);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åï¼Œä¸šåŠ¡ä»£ç å°±å˜å¾—éå¸¸å¹²å‡€äº†ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createUser</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">User</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> user) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // åªéœ€è¦å…³æ³¨ä¸šåŠ¡é€»è¾‘ï¼Œä¸éœ€è¦å…³å¿ƒæ—¥å¿—ã€æƒé™ã€äº‹åŠ¡ç­‰</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    userDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">save</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(user);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>----é¢è¯•ä¸­å¯ä»¥ä¸èƒŒï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£ end----</p><p>ä»æŠ€æœ¯å®ç°ä¸Šæ¥è¯´ï¼ŒAOP ä¸»è¦æ˜¯é€šè¿‡åŠ¨æ€ä»£ç†æ¥å®ç°çš„ã€‚å¦‚æœç›®æ ‡ç±»å®ç°äº†æ¥å£ï¼Œå°±ç”¨ JDK åŠ¨æ€ä»£ç†ï¼›å¦‚æœæ²¡æœ‰å®ç°æ¥å£ï¼Œå°±ç”¨ CGLIB æ¥åˆ›å»ºå­ç±»ä»£ç†ã€‚ä»£ç†å¯¹è±¡ä¼šåœ¨æ–¹æ³•æ‰§è¡Œå‰åæ’å…¥æˆ‘ä»¬å®šä¹‰çš„åˆ‡é¢é€»è¾‘ã€‚</p><figure><img src="/blog/assets/img/spring-20250707112900.8ac3de7f.png" alt="stack overflowï¼šJDK Proxy vs CGLIB Proxy" tabindex="0" loading="lazy"><figcaption>stack overflowï¼šJDK Proxy vs CGLIB Proxy</figcaption></figure><h4 id="spring-aop-æœ‰å“ªäº›æ ¸å¿ƒæ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#spring-aop-æœ‰å“ªäº›æ ¸å¿ƒæ¦‚å¿µ"><span>Spring AOP æœ‰å“ªäº›æ ¸å¿ƒæ¦‚å¿µï¼Ÿ</span></a></h4><p>Spring AOP æ˜¯ AOP çš„ä¸€ä¸ªå…·ä½“å®ç°ï¼Œæˆ‘æŒ‰ç…§åœ¨å·¥ä½œ/å­¦ä¹ ä¸­ç†è§£çš„é‡è¦ç¨‹åº¦æ¥è¯´ä¸€ä¸‹ï¼š</p><figure><img src="/blog/assets/img/spring-20250707114823.9bf99ab7.png" alt="DataFlair Teamï¼šAOP æ ¸å¿ƒæ¦‚å¿µ" tabindex="0" loading="lazy"><figcaption>DataFlair Teamï¼šAOP æ ¸å¿ƒæ¦‚å¿µ</figcaption></figure><p>â‘ ã€<strong>åˆ‡é¢</strong>ï¼šæˆ‘ä»¬å®šä¹‰çš„ä¸€ä¸ªç±»ï¼ŒåŒ…å«äº†è¦åœ¨ä»€ä¹ˆæ—¶å€™ã€ä»€ä¹ˆåœ°æ–¹æ‰§è¡Œä»€ä¹ˆé€»è¾‘ã€‚æ¯”å¦‚æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ—¥å¿—åˆ‡é¢ï¼Œä¸“é—¨è´Ÿè´£è®°å½•æ–¹æ³•çš„æ‰§è¡Œæƒ…å†µã€‚åœ¨ Spring ä¸­ï¼Œæˆ‘ä»¬ä¼šç”¨ <code>@Aspect</code> æ³¨è§£æ¥æ ‡è¯†ä¸€ä¸ªåˆ‡é¢ç±»ã€‚</p><p>â‘¡ã€<strong>åˆ‡ç‚¹</strong>ï¼šå®šä¹‰äº†åœ¨å“ªäº›åœ°æ–¹åº”ç”¨åˆ‡é¢é€»è¾‘ã€‚è¯´ç™½äº†å°±æ˜¯å‘Šè¯‰ Springï¼Œæˆ‘è¿™ä¸ªåˆ‡é¢è¦åœ¨å“ªäº›æ–¹æ³•ä¸Šç”Ÿæ•ˆã€‚æ¯”å¦‚æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªåˆ‡ç‚¹è¡¨è¾¾å¼ï¼Œè®©å®ƒåŒ¹é…æ‰€æœ‰ Service å±‚çš„æ–¹æ³•ï¼Œæˆ–è€…åŒ¹é…æŸä¸ªç‰¹å®šåŒ…ä¸‹çš„æ‰€æœ‰æ–¹æ³•ã€‚åœ¨ Spring ä¸­ç”¨ <code>@Pointcut</code> æ³¨è§£æ¥å®šä¹‰ï¼Œé€šå¸¸ä¼šå†™ä¸€äº›è¡¨è¾¾å¼ï¼Œæ¯”å¦‚ <code>execution( com.example.service..*(..))</code> è¿™æ ·çš„ã€‚</p><p>â‘¢ã€<strong>é€šçŸ¥</strong>ï¼šæ˜¯åˆ‡é¢ä¸­å…·ä½“è¦æ‰§è¡Œçš„ä»£ç é€»è¾‘ã€‚å®ƒæœ‰å‡ ç§ç±»å‹ï¼š<code>@Before</code> æ˜¯åœ¨æ–¹æ³•æ‰§è¡Œå‰æ‰§è¡Œï¼Œ<code>@After</code> æ˜¯åœ¨æ–¹æ³•æ‰§è¡Œåæ‰§è¡Œï¼Œ<code>@Around</code> æ˜¯ç¯ç»•é€šçŸ¥ï¼Œå¯ä»¥åœ¨æ–¹æ³•æ‰§è¡Œå‰åéƒ½æ‰§è¡Œï¼Œ<code>@AfterReturning</code> æ˜¯åœ¨æ–¹æ³•æ­£å¸¸è¿”å›åæ‰§è¡Œï¼Œ<code>@AfterThrowing</code> æ˜¯åœ¨æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åæ‰§è¡Œã€‚æˆ‘ä¸€èˆ¬ç”¨å¾—æœ€å¤šçš„æ˜¯ <code>@Around</code>ï¼Œå› ä¸ºå®ƒæœ€çµæ´»ï¼Œå¯ä»¥æ§åˆ¶æ–¹æ³•æ˜¯å¦æ‰§è¡Œï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹å‚æ•°å’Œè¿”å›å€¼ã€‚</p><p>â‘£ã€<strong>è¿æ¥ç‚¹</strong>ï¼šè¢«æ‹¦æˆªåˆ°çš„ç‚¹ï¼Œå› ä¸º Spring åªæ”¯æŒæ–¹æ³•ç±»å‹çš„è¿æ¥ç‚¹ï¼Œæ‰€ä»¥åœ¨ Spring ä¸­ï¼Œè¿æ¥ç‚¹æŒ‡çš„æ˜¯è¢«æ‹¦æˆªåˆ°çš„æ–¹æ³•ï¼Œå®é™…ä¸Šè¿æ¥ç‚¹è¿˜å¯ä»¥æ˜¯å­—æ®µæˆ–è€…æ„é€ æ–¹æ³•ã€‚</p><p>â‘¤ã€<strong>ç»‡å…¥</strong>ï¼šæ˜¯æŠŠåˆ‡é¢é€»è¾‘åº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡çš„è¿‡ç¨‹ã€‚Spring AOP æ˜¯åœ¨è¿è¡Œæ—¶é€šè¿‡åŠ¨æ€ä»£ç†æ¥å®ç°ç»‡å…¥çš„ï¼Œå½“æˆ‘ä»¬ä» Spring å®¹å™¨ä¸­è·å– Bean çš„æ—¶å€™ï¼Œå¦‚æœè¿™ä¸ª Bean éœ€è¦è¢«åˆ‡é¢å¤„ç†ï¼ŒSpring å°±ä¼šè¿”å›ä¸€ä¸ªä»£ç†å¯¹è±¡ç»™æˆ‘ä»¬ã€‚</p><p>â‘¥ã€<strong>ç›®æ ‡å¯¹è±¡</strong>ï¼šè¢«åˆ‡é¢å¤„ç†çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¹³æ—¶å†™çš„ Serviceã€Controller ç­‰ç±»ã€‚Spring AOP ä¼šåœ¨ç›®æ ‡å¯¹è±¡ä¸Šç»‡å…¥åˆ‡é¢é€»è¾‘ã€‚</p><p>å®ƒä»¬ä¹‹é—´çš„é€»è¾‘å…³ç³»å›¾æ˜¯è¿™æ ·çš„ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>åˆ‡é¢ï¼ˆAspectï¼‰</span></span>
<span class="line"><span>    â”œâ”€â”€ åˆ‡å…¥ç‚¹ï¼ˆPointcutï¼‰â”€â”€â”€ å®šä¹‰åœ¨å“ªé‡Œæ‰§è¡Œ</span></span>
<span class="line"><span>    â””â”€â”€ é€šçŸ¥ï¼ˆAdviceï¼‰   â”€â”€â”€ å®šä¹‰ä½•æ—¶æ‰§è¡Œä»€ä¹ˆ</span></span>
<span class="line"><span>            â”œâ”€â”€ @Before</span></span>
<span class="line"><span>            â”œâ”€â”€ @After</span></span>
<span class="line"><span>            â”œâ”€â”€ @AfterReturning</span></span>
<span class="line"><span>            â”œâ”€â”€ @AfterThrowing</span></span>
<span class="line"><span>            â””â”€â”€ @Around</span></span>
<span class="line"><span></span></span>
<span class="line"><span>ç›®æ ‡å¯¹è±¡ï¼ˆTargetï¼‰â”€â”€â†’ ä»£ç†å¯¹è±¡ï¼ˆProxyï¼‰â”€â”€â†’ ç»‡å…¥ï¼ˆWeavingï¼‰</span></span>
<span class="line"><span>     â†‘                                    â†“</span></span>
<span class="line"><span>è¿æ¥ç‚¹ï¼ˆJoin Pointï¼‰                    å®¢æˆ·ç«¯è°ƒç”¨</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="spring-aop-ç»‡å…¥æœ‰å“ªå‡ ç§æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#spring-aop-ç»‡å…¥æœ‰å“ªå‡ ç§æ–¹å¼"><span>Spring AOP ç»‡å…¥æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ</span></a></h4><p>ç»‡å…¥æœ‰ä¸‰ç§ä¸»è¦æ–¹å¼ï¼Œæˆ‘æŒ‰ç…§å®ƒä»¬çš„æ‰§è¡Œæ—¶æœºæ¥è¯´ä¸€ä¸‹ã€‚</p><figure><img src="/blog/assets/img/spring-20250707120111.828dd363.png" alt="AOP ç»‡å…¥æ–¹å¼" tabindex="0" loading="lazy"><figcaption>AOP ç»‡å…¥æ–¹å¼</figcaption></figure><p>ç¼–è¯‘æœŸç»‡å…¥æ˜¯åœ¨ç¼–è¯‘ Java æºç çš„æ—¶å€™å°±æŠŠåˆ‡é¢é€»è¾‘ç»‡å…¥åˆ°ç›®æ ‡ç±»ä¸­ã€‚è¿™ç§æ–¹å¼æœ€å…¸å‹çš„å®ç°å°±æ˜¯ AspectJ ç¼–è¯‘å™¨ã€‚å®ƒä¼šåœ¨ç¼–è¯‘çš„æ—¶å€™ç›´æ¥ä¿®æ”¹å­—èŠ‚ç ï¼ŒæŠŠåˆ‡é¢çš„é€»è¾‘æ’å…¥åˆ°ç›®æ ‡æ–¹æ³•ä¸­ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æºä»£ç </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Aspect</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> LoggingAspect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Before</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;execution(* com.example.service.*.*(..))&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> logBefore</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">JoinPoint</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ–¹æ³•æ‰§è¡Œå‰: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getSignature</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> saveUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> username</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ä¿å­˜ç”¨æˆ·: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> username);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·ç”Ÿæˆçš„ class æ–‡ä»¶å°±å·²ç»åŒ…å«äº†åˆ‡é¢é€»è¾‘ï¼Œè¿è¡Œæ—¶ä¸éœ€è¦é¢å¤–çš„ä»£ç†æœºåˆ¶ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> saveUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> username</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // ç»‡å…¥çš„åˆ‡é¢ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ–¹æ³•æ‰§è¡Œå‰: saveUser&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // åŸå§‹ä¸šåŠ¡ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ä¿å­˜ç”¨æˆ·: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> username);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¼–è¯‘æœŸç»‡å…¥çš„ä¼˜ç‚¹æ˜¯æ€§èƒ½æœ€å¥½ï¼Œå› ä¸ºæ²¡æœ‰ä»£ç†çš„å¼€é”€ï¼Œä½†ç¼ºç‚¹æ˜¯éœ€è¦ä½¿ç”¨ç‰¹æ®Šçš„ç¼–è¯‘å™¨ï¼Œè€Œä¸”æ¯”è¾ƒå¤æ‚ï¼Œåœ¨ Spring é¡¹ç›®ä¸­ç”¨å¾—ä¸å¤šã€‚</p><p>ç±»åŠ è½½æœŸç»‡å…¥æ˜¯åœ¨ JVM åŠ è½½ class æ–‡ä»¶çš„æ—¶å€™è¿›è¡Œç»‡å…¥ã€‚è¿™ç§æ–¹å¼é€šè¿‡ Java çš„ Instrumentation API æˆ–è€…è‡ªå®šä¹‰çš„ ClassLoader æ¥å®ç°ï¼Œåœ¨ç±»è¢«åŠ è½½åˆ° JVM ä¹‹å‰ä¿®æ”¹å­—èŠ‚ç ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> WeavingClassLoader</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ClassLoader</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    protected</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> findClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ClassNotFoundException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">        byte</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">classBytes</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> loadClassBytes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(name);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // åœ¨è¿™é‡Œè¿›è¡Œå­—èŠ‚ç ç»‡å…¥</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">        byte</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">wovenBytes</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> weaveAspects</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(classBytes);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> defineClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(name, wovenBytes, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">wovenBytes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">length</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;"> byte</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">[] </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">weaveAspects</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">byte</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">classBytes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // ä½¿ç”¨ ASM æˆ–å…¶ä»–å­—èŠ‚ç æ“ä½œåº“è¿›è¡Œç»‡å…¥</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> classBytes;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>AspectJ çš„ Load-Time Weaving å°±æ˜¯è¿™ç§æ–¹å¼çš„å…¸å‹å®ç°ã€‚å®ƒæ¯”ç¼–è¯‘æœŸç»‡å…¥æ›´çµæ´»ä¸€äº›ï¼Œä½†æ˜¯é…ç½®ç›¸å¯¹å¤æ‚ï¼Œéœ€è¦åœ¨ JVM å¯åŠ¨å‚æ•°ä¸­æŒ‡å®š Java agentï¼Œåœ¨ Spring ä¸­ä¹Ÿæœ‰æ”¯æŒï¼Œä½†ç”¨å¾—ä¸æ˜¯ç‰¹åˆ«å¤šã€‚</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># JVM å¯åŠ¨å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">java</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -javaagent:aspectjweaver.jar</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -jar</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> myapp.jar</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œæ—¶ç»‡å…¥æ˜¯æˆ‘ä»¬åœ¨ Spring ä¸­æœ€å¸¸è§çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡åŠ¨æ€ä»£ç†æ¥å®ç°ã€‚Spring AOP é‡‡ç”¨çš„å°±æ˜¯è¿™ç§æ–¹å¼ã€‚å½“ Spring å®¹å™¨å¯åŠ¨çš„æ—¶å€™ï¼Œå¦‚æœå‘ç°æŸä¸ª Bean éœ€è¦è¢«åˆ‡é¢å¤„ç†ï¼Œå°±ä¼šä¸ºè¿™ä¸ª Bean åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚å¦‚æœç›®æ ‡ç±»å®ç°äº†æ¥å£ï¼ŒSpring ä¼šä½¿ç”¨ JDK çš„åŠ¨æ€ä»£ç†æŠ€æœ¯ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æ¥å£</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> interface</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> saveUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> username</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// å®ç°ç±»</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserServiceImpl</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> saveUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> username</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ä¿å­˜ç”¨æˆ·: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> username);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Spring è‡ªåŠ¨åˆ›å»ºçš„ä»£ç†ï¼ˆä¼ªä»£ç ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserServiceProxy</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> target</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> List</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Advisor</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> advisors</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> saveUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> username</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // æ‰§è¡Œå‰ç½®é€šçŸ¥</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Advisor</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> advisor</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> :</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> advisors) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">advisor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getPointcut</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">matches</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;saveUser&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                advisor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getAdvice</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">before</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // æ‰§è¡Œç›®æ ‡æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        target</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">saveUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(username);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // æ‰§è¡Œåç½®é€šçŸ¥</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Advisor</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> advisor</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> :</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> advisors) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            advisor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getAdvice</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">after</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœç›®æ ‡ç±»æ²¡æœ‰å®ç°æ¥å£ï¼Œå°±ä¼šä½¿ç”¨ CGLIB æ¥åˆ›å»ºä¸€ä¸ªå­ç±»ä½œä¸ºä»£ç†ã€‚è¿è¡Œæ—¶ç»‡å…¥çš„ä¼˜ç‚¹æ˜¯å®ç°ç®€å•ï¼Œä¸éœ€è¦ç‰¹æ®Šçš„ç¼–è¯‘å™¨æˆ– JVM é…ç½®ï¼Œç¼ºç‚¹æ˜¯æœ‰ä¸€å®šçš„æ€§èƒ½å¼€é”€ï¼Œå› ä¸ºæ¯æ¬¡æ–¹æ³•è°ƒç”¨éƒ½è¦ç»è¿‡ä»£ç†ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æ²¡æœ‰æ¥å£çš„ç±»</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> OrderService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createOrder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> orderId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;åˆ›å»ºè®¢å•: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> orderId);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// CGLIB ç”Ÿæˆçš„ä»£ç†å­ç±»ï¼ˆä¼ªä»£ç ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> OrderService$$EnhancerByCGLIB$$12345</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> OrderService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MethodInterceptor</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> interceptor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createOrder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> orderId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // é€šè¿‡ MethodInterceptor æ‰§è¡Œåˆ‡é¢é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        interceptor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">intercept</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;createOrder&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">), </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[]{orderId}, </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                            new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> MethodProxy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                                @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                                public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> invokeSuper</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> obj</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                                    return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> OrderService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">super</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">createOrder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">((String) args[</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                                }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                            });</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Spring AOP é»˜è®¤çš„ç»‡å…¥æ–¹å¼å°±æ˜¯è¿è¡Œæ—¶ç»‡å…¥ï¼Œä½¿ç”¨èµ·æ¥éå¸¸ç®€å•ï¼Œåªéœ€è¦åŠ ä¸ª <code>@Aspect</code> æ³¨è§£å’Œç›¸åº”çš„é€šçŸ¥æ³¨è§£å°±å¯ä»¥äº†ã€‚è™½ç„¶æ€§èƒ½ä¸Šä¸å¦‚ç¼–è¯‘æœŸç»‡å…¥ï¼Œä½†æ˜¯å¯¹äºå¤§éƒ¨åˆ†ä¸šåŠ¡åœºæ™¯æ¥è¯´ï¼Œè¿™ç‚¹æ€§èƒ½å¼€é”€æ˜¯å®Œå…¨å¯ä»¥æ¥å—çš„ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Spring AOP çš„ä»£ç†åˆ›å»ºè¿‡ç¨‹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">EnableAspectJAutoProxy</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // å¯ç”¨ AOP è‡ªåŠ¨ä»£ç†</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AopConfig</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Spring å†…éƒ¨çš„ä»£ç†åˆ›å»ºé€»è¾‘ï¼ˆç®€åŒ–ç‰ˆï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DefaultAopProxyFactory</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AopProxyFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AopProxy</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createAopProxy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">AdvisedSupport</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> config</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">config</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isOptimize</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">||</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> config</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isProxyTargetClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">||</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> hasNoUserSuppliedProxyInterfaces</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(config)) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            // ä½¿ç”¨ CGLIB ä»£ç†</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> CglibAopProxy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(config);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            // ä½¿ç”¨ JDK åŠ¨æ€ä»£ç†</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> JdkDynamicAopProxy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(config);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="aspectj-æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#aspectj-æ˜¯ä»€ä¹ˆ"><span>AspectJ æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></h4><p>AspectJ æ˜¯ä¸€ä¸ª AOP æ¡†æ¶ï¼Œå®ƒå¯ä»¥åšå¾ˆå¤š Spring AOP å¹²ä¸äº†çš„äº‹æƒ…ï¼Œæ¯”å¦‚è¯´ç¼–è¯‘æ—¶ã€ç¼–è¯‘åå’Œç±»åŠ è½½æ—¶ç»‡å…¥åˆ‡é¢ã€‚å¹¶ä¸”æä¾›äº†å¾ˆå¤šå¤æ‚çš„åˆ‡ç‚¹è¡¨è¾¾å¼å’Œé€šçŸ¥ç±»å‹ã€‚</p><figure><img src="/blog/assets/img/spring-20240806100537.7e8481c1.png" alt="AspectJ å®˜ç½‘" tabindex="0" loading="lazy"><figcaption>AspectJ å®˜ç½‘</figcaption></figure><p>Spring AOP åªæ”¯æŒæ–¹æ³•çº§åˆ«çš„æ‹¦æˆªï¼Œè€Œä¸”åªèƒ½æ‹¦æˆª Spring å®¹å™¨ç®¡ç†çš„ Beanã€‚ä½†æ˜¯ AspectJ å¯ä»¥æ‹¦æˆªä»»ä½• Java å¯¹è±¡çš„æ–¹æ³•è°ƒç”¨ã€å­—æ®µè®¿é—®ã€æ„é€ æ–¹æ³•æ‰§è¡Œã€å¼‚å¸¸å¤„ç†ç­‰ç­‰ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// Spring AOP åªèƒ½åšåˆ°è¿™äº›</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Aspect</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SpringAopAspect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // âœ… å¯ä»¥æ‹¦æˆªï¼špublic æ–¹æ³•è°ƒç”¨</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Around</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;execution(public * com.example.service.*.*(..))&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> aroundPublicMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ProceedingJoinPoint</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> pjp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> pjp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">proceed</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // âŒ æ— æ³•æ‹¦æˆªï¼šå­—æ®µè®¿é—®</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // âŒ æ— æ³•æ‹¦æˆªï¼šæ„é€ å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // âŒ æ— æ³•æ‹¦æˆªï¼šç§æœ‰æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // âŒ æ— æ³•æ‹¦æˆªï¼šé™æ€æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="spring-aop-æœ‰å“ªäº›é€šçŸ¥æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#spring-aop-æœ‰å“ªäº›é€šçŸ¥æ–¹å¼"><span>Spring AOP æœ‰å“ªäº›é€šçŸ¥æ–¹å¼ï¼Ÿ</span></a></h4><p>Spring AOP æä¾›äº†å¤šç§é€šçŸ¥æ–¹å¼ï¼Œå…è®¸æˆ‘ä»¬åœ¨æ–¹æ³•æ‰§è¡Œçš„ä¸åŒé˜¶æ®µæ’å…¥é€»è¾‘ã€‚å¸¸ç”¨çš„é€šçŸ¥æ–¹å¼æœ‰ï¼š</p><ul><li>å‰ç½®é€šçŸ¥ (@Before)</li><li>è¿”å›é€šçŸ¥ (@AfterReturning)</li><li>å¼‚å¸¸é€šçŸ¥ (@AfterThrowing)</li><li>åç½®é€šçŸ¥ (@After)</li><li>ç¯ç»•é€šçŸ¥ (@Around)</li></ul><figure><img src="/blog/assets/img/spring-320fa34f-6620-419c-b17a-4f516a83caeb.606bf8d6.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring AOP é€šçŸ¥æ–¹å¼" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring AOP é€šçŸ¥æ–¹å¼</figcaption></figure><p>å‰ç½®é€šçŸ¥æ˜¯åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œçš„é€šçŸ¥ã€‚è¿™ç§é€šçŸ¥æ¯”è¾ƒç®€å•ï¼Œä¸»è¦ç”¨æ¥åšä¸€äº›å‡†å¤‡å·¥ä½œï¼Œæ¯”å¦‚å‚æ•°æ ¡éªŒã€æƒé™æ£€æŸ¥ã€è®°å½•æ–¹æ³•å¼€å§‹æ‰§è¡Œçš„æ—¥å¿—ç­‰ç­‰ã€‚å‰ç½®é€šçŸ¥æ— æ³•é˜»æ­¢ç›®æ ‡æ–¹æ³•çš„æ‰§è¡Œï¼Œä¹Ÿæ— æ³•ä¿®æ”¹æ–¹æ³•çš„å‚æ•°ï¼Œå®ƒåªèƒ½åœ¨æ–¹æ³•æ‰§è¡Œå‰åšä¸€äº›é¢å¤–çš„æ“ä½œã€‚æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ç»å¸¸ç”¨å®ƒæ¥è®°å½•æ“ä½œæ—¥å¿—ï¼Œæ¯”å¦‚è®°å½•è°åœ¨ä»€ä¹ˆæ—¶å€™è°ƒç”¨äº†ä»€ä¹ˆæ–¹æ³•ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Aspect</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> LoggingAspect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Before</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;execution(* com.example.service.*.*(..))&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> logBefore</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">JoinPoint</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // æ‰“å°æ–¹æ³•åå’Œå‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;è°ƒç”¨æ–¹æ³•: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getSignature</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;å‚æ•°: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Arrays</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getArgs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åç½®é€šçŸ¥æ˜¯åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå®Œæˆåæ‰§è¡Œçš„ï¼Œä¸ç®¡æ–¹æ³•æ˜¯æ­£å¸¸è¿”å›è¿˜æ˜¯æŠ›å‡ºå¼‚å¸¸éƒ½ä¼šæ‰§è¡Œã€‚è¿™ç§é€šçŸ¥ä¸»è¦ç”¨æ¥åšä¸€äº›æ¸…ç†å·¥ä½œï¼Œæ¯”å¦‚é‡Šæ”¾èµ„æºã€è®°å½•æ–¹æ³•æ‰§è¡Œå®Œæˆçš„æ—¥å¿—ç­‰ç­‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåç½®é€šçŸ¥æ‹¿ä¸åˆ°æ–¹æ³•çš„è¿”å›å€¼ï¼Œä¹Ÿæ•è·ä¸åˆ°å¼‚å¸¸ä¿¡æ¯ï¼Œå®ƒå°±æ˜¯çº¯ç²¹çš„åœ¨æ–¹æ³•æ‰§è¡Œååšä¸€äº›æ”¶å°¾å·¥ä½œã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Aspect</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> LoggingAspect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">After</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;execution(* com.example.service.*.*(..))&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> logAfter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">JoinPoint</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // æ‰“å°æ–¹æ³•æ‰§è¡Œå®Œæˆçš„æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ–¹æ³•æ‰§è¡Œå®Œæˆ: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getSignature</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿”å›é€šçŸ¥æ˜¯åœ¨ç›®æ ‡æ–¹æ³•æ­£å¸¸è¿”å›åæ‰§è¡Œçš„ã€‚è¿™ç§é€šçŸ¥å¯ä»¥è·å–åˆ°æ–¹æ³•çš„è¿”å›å€¼ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ³¨è§£ä¸­æŒ‡å®š returning å‚æ•°æ¥æ¥æ”¶è¿”å›å€¼ã€‚è¿”å›é€šçŸ¥ç»å¸¸ç”¨æ¥åšä¸€äº›åŸºäºè¿”å›ç»“æœçš„åç»­å¤„ç†ï¼Œæ¯”å¦‚ç¼“å­˜æ–¹æ³•çš„è¿”å›ç»“æœã€æ ¹æ®è¿”å›å€¼å‘é€é€šçŸ¥ç­‰ç­‰ã€‚å¦‚æœæ–¹æ³•æŠ›å‡ºå¼‚å¸¸çš„è¯ï¼Œè¿”å›é€šçŸ¥æ˜¯ä¸ä¼šæ‰§è¡Œçš„ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Aspect</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> LoggingAspect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">AfterReturning</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">pointcut</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;execution(* com.example.service.*.*(..))&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> returning</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;result&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> logAfterReturning</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">JoinPoint</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> result</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // æ‰“å°æ–¹æ³•æ‰§è¡Œå®Œæˆçš„æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ–¹æ³•æ‰§è¡Œå®Œæˆ: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getSignature</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // æ‰“å°æ–¹æ³•è¿”å›å€¼</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;è¿”å›å€¼: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> result);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¼‚å¸¸é€šçŸ¥æ˜¯åœ¨ç›®æ ‡æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åæ‰§è¡Œçš„ã€‚æˆ‘ä»¬å¯ä»¥åœ¨æ³¨è§£ä¸­æŒ‡å®š throwing å‚æ•°æ¥æ¥æ”¶å¼‚å¸¸å¯¹è±¡ã€‚å¼‚å¸¸é€šçŸ¥ä¸»è¦ç”¨æ¥åšå¼‚å¸¸å¤„ç†å’Œè®°å½•ï¼Œæ¯”å¦‚è®°å½•é”™è¯¯æ—¥å¿—ã€å‘é€å‘Šè­¦ã€å¼‚å¸¸ç»Ÿè®¡ç­‰ç­‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¼‚å¸¸é€šçŸ¥ä¸èƒ½å¤„ç†å¼‚å¸¸ï¼Œå¼‚å¸¸è¿˜æ˜¯ä¼šç»§ç»­å‘ä¸ŠæŠ›å‡ºã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Aspect</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> LoggingAspect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">AfterThrowing</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">pointcut</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;execution(* com.example.service.*.*(..))&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">                     throwing</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;ex&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> logAfterThrowing</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">JoinPoint</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Throwable</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> ex</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // æ‰“å°æ–¹æ³•åå’Œå¼‚å¸¸ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;æ–¹æ³•æ‰§è¡Œå¼‚å¸¸: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getSignature</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;å¼‚å¸¸ä¿¡æ¯: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> ex</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getMessage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¯ç»•é€šçŸ¥æ˜¯æœ€å¼ºå¤§ä¹Ÿæ˜¯æˆ‘ä»¬ç”¨å¾—æœ€å¤šçš„ä¸€ç§é€šçŸ¥ã€‚å®ƒå¯ä»¥åœ¨æ–¹æ³•æ‰§è¡Œå‰åéƒ½æ‰§è¡Œé€»è¾‘ï¼Œè€Œä¸”å¯ä»¥æ§åˆ¶ç›®æ ‡æ–¹æ³•æ˜¯å¦æ‰§è¡Œï¼Œè¿˜å¯ä»¥ä¿®æ”¹æ–¹æ³•çš„å‚æ•°å’Œè¿”å›å€¼ã€‚ç¯ç»•é€šçŸ¥çš„æ–¹æ³•å¿…é¡»æ¥æ”¶ä¸€ä¸ª ProceedingJoinPoint å‚æ•°ï¼Œé€šè¿‡è°ƒç”¨å…¶ <code>proceed()</code> æ–¹æ³•æ¥æ‰§è¡Œç›®æ ‡æ–¹æ³•ã€‚</p><p><a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a> é¡¹ç›®ä¸­å°±ä¸»è¦æ˜¯é€šè¿‡ç¯ç»•é€šçŸ¥æ¥å®ç°åˆ‡é¢ã€‚</p><figure><img src="/blog/assets/img/spring-20250707151431.0ff6b361.png" alt="æŠ€æœ¯æ´¾æºç ï¼šç¯ç»•é€šçŸ¥" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šç¯ç»•é€šçŸ¥</figcaption></figure><p>å¦‚æœæœ‰å¤šä¸ªåˆ‡é¢ï¼Œè¿˜å¯ä»¥é€šè¿‡ <code>@Order</code> æ³¨è§£æŒ‡å®šå…ˆåé¡ºåºï¼Œæ•°å­—è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Aspect</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Component</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> WebLogAspect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Logger</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> logger </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> LoggerFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getLogger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">WebLogAspect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Pointcut</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;@annotation(cn.fighter3.spring.aop_demo.WebLog)&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> webLog</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Before</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;webLog()&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> doBefore</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">JoinPoint</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Throwable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // å¼€å§‹æ‰“å°è¯·æ±‚æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        ServletRequestAttributes</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> attributes</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (ServletRequestAttributes) </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">RequestContextHolder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getRequestAttributes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        HttpServletRequest</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> request</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> attributes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getRequest</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // æ‰“å°è¯·æ±‚ç›¸å…³å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;========================================== Start ==========================================&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // æ‰“å°è¯·æ±‚ url</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;URL            : {}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">request</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getRequestURL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // æ‰“å° Http method</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;HTTP Method    : {}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">request</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // æ‰“å°è°ƒç”¨ controller çš„å…¨è·¯å¾„ä»¥åŠæ‰§è¡Œæ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Class Method   : {}.{}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getSignature</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getDeclaringTypeName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(), </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getSignature</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // æ‰“å°è¯·æ±‚çš„ IP</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;IP             : {}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">request</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getRemoteAddr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // æ‰“å°è¯·æ±‚å…¥å‚</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Request Args   : {}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ObjectMapper</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">writeValueAsString</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">joinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getArgs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">After</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;webLog()&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> doAfter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Throwable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // ç»“æŸåæ‰“ä¸ªåˆ†éš”çº¿ï¼Œæ–¹ä¾¿æŸ¥çœ‹</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;=========================================== End ===========================================&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Around</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;webLog()&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> doAround</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ProceedingJoinPoint</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> proceedingJoinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Throwable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        //å¼€å§‹æ—¶é—´</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        long</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> startTime</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">currentTimeMillis</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> result</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> proceedingJoinPoint</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">proceed</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // æ‰“å°å‡ºå‚</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Response Args  : {}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ObjectMapper</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">writeValueAsString</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(result));</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // æ‰§è¡Œè€—æ—¶</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Time-Consuming : {} ms&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">currentTimeMillis</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> startTime);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> result;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="spring-aop-å‘ç”Ÿåœ¨ä»€ä¹ˆæ—¶å€™" tabindex="-1"><a class="header-anchor" href="#spring-aop-å‘ç”Ÿåœ¨ä»€ä¹ˆæ—¶å€™"><span>Spring AOP å‘ç”Ÿåœ¨ä»€ä¹ˆæ—¶å€™ï¼Ÿ</span></a></h4><p>Spring AOP æ˜¯åœ¨ Bean çš„åˆå§‹åŒ–é˜¶æ®µå‘ç”Ÿçš„ï¼Œå…·ä½“æ¥è¯´æ˜¯åœ¨ Bean ç”Ÿå‘½å‘¨æœŸçš„åç½®å¤„ç†é˜¶æ®µã€‚</p><p>åœ¨ Bean å®ä¾‹åŒ–å®Œæˆã€å±æ€§æ³¨å…¥å®Œæˆä¹‹åï¼ŒSpring ä¼šè°ƒç”¨æ‰€æœ‰ BeanPostProcessor çš„ postProcessAfterInitialization æ–¹æ³•ï¼ŒAOP ä»£ç†çš„åˆ›å»ºå°±æ˜¯åœ¨è¿™ä¸ªé˜¶æ®µå®Œæˆçš„ã€‚</p><figure><img src="/blog/assets/img/spring-20240806102547.cc90620b.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šBeanPostProcessor" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šBeanPostProcessor</figcaption></figure><h4 id="ç®€å•æ€»ç»“ä¸€ä¸‹-aop" tabindex="-1"><a class="header-anchor" href="#ç®€å•æ€»ç»“ä¸€ä¸‹-aop"><span>ç®€å•æ€»ç»“ä¸€ä¸‹ AOP</span></a></h4><p>AOPï¼Œä¹Ÿå°±æ˜¯é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œæ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œæ—¨åœ¨æé«˜ä»£ç çš„æ¨¡å—åŒ–ã€‚æ¯”å¦‚è¯´å¯ä»¥å°†æ—¥å¿—è®°å½•ã€äº‹åŠ¡ç®¡ç†ç­‰åˆ†ç¦»å‡ºæ¥ï¼Œæ¥æé«˜ä»£ç çš„å¯é‡ç”¨æ€§ã€‚</p><p>AOP çš„æ ¸å¿ƒæ¦‚å¿µåŒ…æ‹¬åˆ‡é¢ã€è¿æ¥ç‚¹ã€é€šçŸ¥ã€åˆ‡ç‚¹å’Œç»‡å…¥ç­‰ã€‚</p><p>â‘  åƒæ—¥å¿—æ‰“å°ã€äº‹åŠ¡ç®¡ç†ç­‰éƒ½å¯ä»¥æŠ½ç¦»ä¸ºåˆ‡é¢ï¼Œå¯ä»¥å£°æ˜åœ¨ç±»çš„æ–¹æ³•ä¸Šã€‚åƒ <code>@Transactional</code> æ³¨è§£ï¼Œå°±æ˜¯ä¸€ä¸ªå…¸å‹çš„ AOP åº”ç”¨ï¼Œå®ƒå°±æ˜¯é€šè¿‡ AOP æ¥å®ç°äº‹åŠ¡ç®¡ç†çš„ã€‚æˆ‘ä»¬åªéœ€è¦åœ¨æ–¹æ³•ä¸Šæ·»åŠ  <code>@Transactional</code> æ³¨è§£ï¼ŒSpring å°±ä¼šåœ¨æ–¹æ³•æ‰§è¡Œå‰åæ·»åŠ äº‹åŠ¡ç®¡ç†çš„é€»è¾‘ã€‚</p><p>â‘¡ Spring AOP æ˜¯åŸºäºä»£ç†çš„ï¼Œå®ƒé»˜è®¤ä½¿ç”¨ JDK åŠ¨æ€ä»£ç†å’Œ CGLIB ä»£ç†æ¥å®ç° AOPã€‚</p><p>â‘¢ Spring AOP çš„ç»‡å…¥æ–¹å¼æ˜¯è¿è¡Œæ—¶ç»‡å…¥ï¼Œè€Œ AspectJ æ”¯æŒç¼–è¯‘æ—¶ç»‡å…¥ã€ç±»åŠ è½½æ—¶ç»‡å…¥ã€‚</p><h4 id="aopå’Œ-oop-çš„å…³ç³»" tabindex="-1"><a class="header-anchor" href="#aopå’Œ-oop-çš„å…³ç³»"><span>AOPå’Œ OOP çš„å…³ç³»ï¼Ÿ</span></a></h4><p>AOP å’Œ OOP æ˜¯äº’è¡¥çš„ç¼–ç¨‹æ€æƒ³ï¼š</p><ol><li>OOP é€šè¿‡ç±»å’Œå¯¹è±¡å°è£…æ•°æ®å’Œè¡Œä¸ºï¼Œä¸“æ³¨äºæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ã€‚</li><li>AOP æä¾›äº†è§£å†³æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆå¦‚æ—¥å¿—ã€æƒé™ã€äº‹åŠ¡ç­‰ï¼‰çš„æœºåˆ¶ï¼Œå°†è¿™äº›é€»è¾‘é›†ä¸­ç®¡ç†ã€‚</li></ol><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯ Java åç«¯å®ä¹ ä¸€é¢åŸé¢˜ï¼šè¯´è¯´ AOP çš„åŸç†ã€‚</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°ç±³ 25 å±Šæ—¥å¸¸å®ä¹ ä¸€é¢åŸé¢˜ï¼šè¯´è¯´ä½ å¯¹ AOP å’Œ IoC çš„ç†è§£ã€‚</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¿«æ‰‹é¢ç»åŒå­¦ 7 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šè¯´ä¸€ä¸‹ Spring AOP çš„å®ç°åŸç†</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°å…¬å¸é¢ç»åˆé›†åŒå­¦ 1 Java åç«¯é¢è¯•åŸé¢˜ï¼šä»‹ç» Spring IoC å’Œ AOP?</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ‹›å•†é“¶è¡Œé¢ç»åŒå­¦ 6 æ‹›é“¶ç½‘ç»œç§‘æŠ€é¢è¯•åŸé¢˜ï¼šSpringBootæ¡†æ¶çš„AOPã€IOC/DIï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢é¢ç»åŒå­¦ 4 ä¸€é¢é¢è¯•åŸé¢˜ï¼šSpring AOPå‘ç”Ÿåœ¨ä»€ä¹ˆæ—¶å€™</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç†æƒ³æ±½è½¦é¢ç»åŒå­¦ 2 ä¸€é¢é¢è¯•åŸé¢˜ï¼šSpring AOPçš„æ¦‚å¿µäº†è§£å—ï¼ŸAOPå’Œ OOP çš„å…³ç³»ï¼Ÿ</li></ol></blockquote><p>memoï¼š2025 å¹´ 7 æœˆ 7 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œæœ‰çƒå‹æé—®è¦ä¸€ä¸ªè¯¦ç»†ç‰ˆçš„å­¦ä¹ è®¡åˆ’è¡¨ï¼Œæˆ‘ç”¨äº†ä¸€ä¸ªæ—©ä¸Šçš„æ—¶é—´æ•´ç†äº†ä¸€ä¸ªä¸‰ä¸ªæœˆçš„å†²åˆºè®¡åˆ’ï¼ŒåŒ…æ‹¬å…«è‚¡ã€ç®—æ³•ã€é¡¹ç›®çš„å®‰æ’ï¼Œå·²ç»æ”¾åœ¨äº†<a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer"> Java é¢è¯•æŒ‡å—</a>ä¸­ï¼Œéœ€è¦çš„å°ä¼™ä¼´å¯ä»¥è‡ªå–åšä¸ªå‚è€ƒã€‚</p><figure><img src="/blog/assets/img/spring-20250707153345.0d0c3c0b.png" alt="å­¦ä¹ è®¡åˆ’è¡¨-ä¸‰ä¸ªæœˆç§‹æ‹›å†²åˆºè®¡åˆ’" tabindex="0" loading="lazy"><figcaption>å­¦ä¹ è®¡åˆ’è¡¨-ä¸‰ä¸ªæœˆç§‹æ‹›å†²åˆºè®¡åˆ’</figcaption></figure><h3 id="_21-ğŸŒŸaopçš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›" tabindex="-1"><a class="header-anchor" href="#_21-ğŸŒŸaopçš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›"><span>21.ğŸŒŸAOPçš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ</span></a></h3><p>ç­”ï¼šAOP åœ¨å®é™…å·¥ä½œ/ç¼–ç å­¦ä¹ ä¸­æœ‰å¾ˆå¤šåº”ç”¨åœºæ™¯ï¼Œæˆ‘æŒ‰ç…§ä½¿ç”¨é¢‘ç‡æ¥è¯´è¯´å‡ ä¸ªä¸»è¦çš„ã€‚</p><p>äº‹åŠ¡ç®¡ç†æ˜¯ç”¨å¾—æœ€å¤šçš„åœºæ™¯ï¼ŒåŸºæœ¬ä¸Šæ¯ä¸ªé¡¹ç›®éƒ½ä¼šç”¨åˆ°ã€‚åªéœ€è¦åœ¨ Service æ–¹æ³•ä¸ŠåŠ ä¸ª <code>@Transactional</code> æ³¨è§£ï¼ŒSpring å°±ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬ç®¡ç†äº‹åŠ¡çš„å¼€å¯ã€æäº¤å’Œå›æ»šã€‚</p><figure><img src="/blog/assets/img/spring-20250708161139.db4a5a57.png" alt="æŠ€æœ¯æ´¾æºç ï¼š@Transactionaläº‹åŠ¡" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼š@Transactionaläº‹åŠ¡</figcaption></figure><p>æ—¥å¿—è®°å½•ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„åº”ç”¨ã€‚åœ¨<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾å®æˆ˜é¡¹ç›®</a>ä¸­ï¼Œå°±åˆ©ç”¨äº† AOP æ¥æ‰“å°æ¥å£çš„å…¥å‚å’Œå‡ºå‚æ—¥å¿—ã€æ‰§è¡Œæ—¶é—´ï¼Œæ–¹ä¾¿åæœŸ bug æº¯æºå’Œæ€§èƒ½è°ƒä¼˜ã€‚</p><figure><img src="/blog/assets/img/spring-20240310180334.5ae3311c.png" alt="æ²‰é»˜ç‹äºŒï¼šæŠ€æœ¯æ´¾æ•™ç¨‹" tabindex="0" loading="lazy"><figcaption>æ²‰é»˜ç‹äºŒï¼šæŠ€æœ¯æ´¾æ•™ç¨‹</figcaption></figure><p>----è¿™éƒ¨åˆ†é¢è¯•å¯ä»¥ä¸èƒŒï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£ start----</p><p>ç¬¬ä¸€æ­¥ï¼Œå®šä¹‰ <code>@MdcDot</code> æ³¨è§£ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Target</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">({</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">ElementType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">METHOD</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> ElementType</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">TYPE</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">})</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Retention</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">RetentionPolicy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">RUNTIME</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Documented</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> @</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">interface</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;"> MdcDot</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    String</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> bizCode</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒæ­¥ï¼Œé…ç½® MdcAspect åˆ‡é¢ï¼Œæ‹¦æˆªå¸¦æœ‰ <code>@MdcDot</code> æ³¨è§£çš„æ–¹æ³•æˆ–ç±»ï¼Œåœ¨æ–¹æ³•æ‰§è¡Œå‰åè¿›è¡Œ MDC æ“ä½œï¼Œè®°å½•æ–¹æ³•æ‰§è¡Œè€—æ—¶ã€‚</p><figure><img src="/blog/assets/img/spring-20240310180741.4b57040c.png" alt="æŠ€æœ¯æ´¾é¡¹ç›®ï¼šé…ç½® AOP åˆ‡é¢" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾é¡¹ç›®ï¼šé…ç½® AOP åˆ‡é¢</figcaption></figure><p>ç¬¬ä¸‰æ­¥ï¼Œåœ¨éœ€è¦çš„åœ°æ–¹åŠ ä¸Š <code>@MdcDot</code> æ³¨è§£ã€‚</p><figure><img src="/blog/assets/img/spring-20240310181233.67958a40.png" alt="æŠ€æœ¯æ´¾é¡¹ç›®ï¼šä½¿ç”¨æ³¨è§£" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾é¡¹ç›®ï¼šä½¿ç”¨æ³¨è§£</figcaption></figure><p>ç¬¬å››æ­¥ï¼Œå½“æ¥å£è¢«è°ƒç”¨æ—¶ï¼Œå°±å¯ä»¥çœ‹åˆ°å¯¹åº”çš„æ‰§è¡Œæ—¥å¿—ã€‚</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>2023-06-16 11:06:13,008 [http-nio-8080-exec-3] INFO |00000000.1686884772947.468581113|101|c.g.p.forum.core.mdc.MdcAspect.handle(MdcAspect.java:47) - æ–¹æ³•æ‰§è¡Œè€—æ—¶: com.github.paicoding.forum.web.front.article.rest.ArticleRestController#recommend = 47</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>----é¢è¯•å¯ä»¥ä¸èƒŒï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£ end----</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰æƒé™æ§åˆ¶ã€æ€§èƒ½ç›‘æ§ã€ç¼“å­˜å¤„ç†ç­‰åœºæ™¯ã€‚æ€»çš„æ¥è¯´ï¼Œä»»ä½•éœ€è¦åœ¨å¤šä¸ªåœ°æ–¹é‡å¤æ‰§è¡Œçš„é€šç”¨é€»è¾‘ï¼Œéƒ½å¯ä»¥è€ƒè™‘ç”¨ AOP æ¥å®ç°ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œé¢ç»åŒå­¦ 5 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šAOPåº”ç”¨åœºæ™¯</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç†æƒ³æ±½è½¦é¢ç»åŒå­¦ 2 ä¸€é¢é¢è¯•åŸé¢˜ï¼šAOPçš„ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œé¢ç»åŒå­¦ 9 é¢è¯•åŸé¢˜ï¼šé¡¹ç›®ä¸­çš„AOPæ˜¯æ€ä¹ˆç”¨åˆ°çš„</li></ol></blockquote><p>memoï¼š2025 å¹´ 7 æœˆ 8 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨æ˜Ÿçƒçš„ VIP ç¾¤é‡Œåˆçœ‹åˆ°åœ¨å¹<a href="https://javabetter.cn/sidebar/sanfene/nixi.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­</a>çš„ï¼Œçƒå‹è¯´ç¾å›¢ã€å°çº¢ä¹¦å…«è‚¡éƒ½æ²¡é—®é¢˜ï¼Œçœ‹äºŒå“¥çš„è¶³å¤Ÿã€‚</p><figure><img src="/blog/assets/img/spring-20250708165006.5e5fcf01.png" alt="å¹äºŒå“¥çš„é¢æ¸£é€†è¢­" tabindex="0" loading="lazy"><figcaption>å¹äºŒå“¥çš„é¢æ¸£é€†è¢­</figcaption></figure><h3 id="_22-è¯´è¯´-spring-aop-å’Œ-aspectj-åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_22-è¯´è¯´-spring-aop-å’Œ-aspectj-åŒºåˆ«"><span>22.è¯´è¯´ Spring AOP å’Œ AspectJ åŒºåˆ«?</span></a></h3><p>Spring AOP åªæ”¯æŒæ–¹æ³•çº§åˆ«çš„ç»‡å…¥ï¼Œè€Œä¸”åªèƒ½æ‹¦æˆª Spring å®¹å™¨ç®¡ç†çš„ Beanã€‚ä½†æ˜¯ AspectJ å‡ ä¹å¯ä»¥ç»‡å…¥ä»»ä½•åœ°æ–¹ï¼ŒåŒ…æ‹¬æ–¹æ³•ã€å­—æ®µã€æ„é€ æ–¹æ³•ã€å¼‚å¸¸å¤„ç†ç­‰ç­‰ã€‚</p><figure><img src="/blog/assets/img/spring-d1dbe9d9-c55f-4293-8622-d9759064d613.dea9a133.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring AOPå’ŒAspectJå¯¹æ¯”" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring AOPå’ŒAspectJå¯¹æ¯”</figcaption></figure><p>ä»å®ç°æœºåˆ¶ä¸Šæ¥è¯´ï¼ŒSpring AOP æ˜¯åŸºäºåŠ¨æ€ä»£ç†å®ç°çš„ï¼Œåœ¨è¿è¡Œæ—¶ä¸ºç›®æ ‡å¯¹è±¡åˆ›å»ºä»£ç†ï¼Œé€šè¿‡ä»£ç†æ¥æ‰§è¡Œåˆ‡é¢é€»è¾‘ã€‚è€Œ AspectJ æ˜¯é€šè¿‡å­—èŠ‚ç ç»‡å…¥æ¥å®ç°çš„ï¼Œå®ƒç›´æ¥ä¿®æ”¹ç›®æ ‡ç±»çš„å­—èŠ‚ç ï¼ŒæŠŠåˆ‡é¢é€»è¾‘ç¼–ç»‡åˆ°ç›®æ ‡æ–¹æ³•ä¸­ã€‚</p><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¤§éƒ¨åˆ†æ—¶å€™ç”¨çš„éƒ½æ˜¯ Spring AOPï¼Œå› ä¸ºå®ƒèƒ½æ»¡è¶³ç»å¤§å¤šæ•°éœ€æ±‚ï¼Œè€Œä¸”ä½¿ç”¨ç®€å•ã€‚åªæœ‰åœ¨é‡åˆ° Spring AOP æ— æ³•è§£å†³çš„é—®é¢˜æ—¶ï¼Œæ¯”å¦‚éœ€è¦ç»‡å…¥ç¬¬ä¸‰æ–¹ jar åŒ…ä¸­çš„æ–¹æ³•ï¼Œæˆ–è€…ç›‘æ§å­—æ®µæ‰ä¼šè€ƒè™‘å¼•å…¥ AspectJã€‚</p><p>Spring AOP å€Ÿé‰´äº†å¾ˆå¤š AspectJ çš„æ¦‚å¿µå’Œæ³¨è§£ï¼Œæˆ‘ä»¬åœ¨ Spring ä¸­ä½¿ç”¨çš„ <code>@Aspect</code>ã€<code>@Pointcut</code> è¿™äº›æ³¨è§£ï¼Œå…¶å®éƒ½æ˜¯ AspectJ å®šä¹‰çš„ã€‚</p><h3 id="_23-è¯´è¯´-aop-å’Œåå°„çš„åŒºåˆ«-è¡¥å……" tabindex="-1"><a class="header-anchor" href="#_23-è¯´è¯´-aop-å’Œåå°„çš„åŒºåˆ«-è¡¥å……"><span>23.è¯´è¯´ AOP å’Œåå°„çš„åŒºåˆ«ï¼Ÿï¼ˆè¡¥å……ï¼‰</span></a></h3><blockquote><p>2024 å¹´ 7 æœˆ 27 æ—¥å¢è¡¥ã€‚</p></blockquote><p>åå°„ä¸»è¦æ˜¯ä¸ºäº†è®©ç¨‹åºèƒ½å¤Ÿæ£€æŸ¥å’Œæ“ä½œè‡ªèº«çš„ç»“æ„ï¼Œæ¯”å¦‚è·å–ç±»çš„ä¿¡æ¯ã€è°ƒç”¨æ–¹æ³•ã€è®¿é—®å­—æ®µç­‰ç­‰ã€‚è€Œ AOP åˆ™æ˜¯ä¸ºäº†åœ¨ä¸ä¿®æ”¹ä¸šåŠ¡ä»£ç çš„å‰æä¸‹ï¼ŒåŠ¨æ€åœ°ä¸ºæ–¹æ³•æ·»åŠ é¢å¤–çš„è¡Œä¸ºï¼Œæ¯”å¦‚æ—¥å¿—è®°å½•ã€äº‹åŠ¡ç®¡ç†ç­‰ã€‚</p><p>ä»æŠ€æœ¯å®ç°æ¥è¯´ï¼Œåå°„æ˜¯ Java è¯­è¨€æœ¬èº«æä¾›çš„åŠŸèƒ½ï¼Œé€šè¿‡ <code>java.lang.reflect</code> åŒ…ä¸‹çš„ API æ¥å®ç°ã€‚è€Œ AOP é€šå¸¸éœ€è¦æ¡†æ¶æ”¯æŒï¼Œæ¯”å¦‚ Spring AOP æ˜¯é€šè¿‡åŠ¨æ€ä»£ç†å®ç°çš„ï¼Œè€ŒåŠ¨æ€ä»£ç†åˆæ˜¯åŸºäºåå°„å®ç°çš„ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¾—ç‰©é¢ç»åŒå­¦ 9 é¢è¯•é¢˜ç›®åŸé¢˜ï¼šæŠ›å¼€Springï¼Œè®²è®²åå°„å’ŒåŠ¨æ€ä»£ç†ï¼Ÿé‚£ä¸‰ç§ä»£ç†æ¨¡å¼æ€ä¹ˆå®ç°çš„ï¼Ÿ</li></ol></blockquote><h3 id="_24-ğŸŒŸè¯´è¯´jdkåŠ¨æ€ä»£ç†å’Œcglibä»£ç†çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_24-ğŸŒŸè¯´è¯´jdkåŠ¨æ€ä»£ç†å’Œcglibä»£ç†çš„åŒºåˆ«"><span>24.ğŸŒŸè¯´è¯´JDKåŠ¨æ€ä»£ç†å’ŒCGLIBä»£ç†çš„åŒºåˆ«ï¼Ÿ</span></a></h3><p>JDK åŠ¨æ€ä»£ç†å’Œ CGLIB ä»£ç†æ˜¯ Spring AOP ç”¨æ¥åˆ›å»ºä»£ç†å¯¹è±¡çš„ä¸¤ç§æ–¹å¼ã€‚</p><figure><img src="/blog/assets/img/spring-20250709150533.39c12ad4.png" alt="logbasexï¼šJDK åŠ¨æ€ä»£ç†å’Œ CGLIB ä»£ç†" tabindex="0" loading="lazy"><figcaption>logbasexï¼šJDK åŠ¨æ€ä»£ç†å’Œ CGLIB ä»£ç†</figcaption></figure><p>ä»ä½¿ç”¨æ¡ä»¶æ¥è¯´ï¼ŒJDK åŠ¨æ€ä»£ç†è¦æ±‚ç›®æ ‡ç±»å¿…é¡»å®ç°è‡³å°‘ä¸€ä¸ªæ¥å£ï¼Œå› ä¸ºå®ƒæ˜¯åŸºäºæ¥å£æ¥åˆ›å»ºä»£ç†çš„ã€‚è€Œ CGLIB ä»£ç†ä¸éœ€è¦ç›®æ ‡ç±»å®ç°æ¥å£ï¼Œå®ƒæ˜¯é€šè¿‡ç»§æ‰¿ç›®æ ‡ç±»æ¥åˆ›å»ºä»£ç†çš„ã€‚</p><p>è¿™æ˜¯ä¸¤è€…æœ€æ ¹æœ¬çš„åŒºåˆ«ã€‚æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ª TransferService æ¥å£å’Œ TransferServiceImpl å®ç°ç±»ï¼Œå¦‚æœç”¨ JDK åŠ¨æ€ä»£ç†ï¼Œåˆ›å»ºçš„ä»£ç†å¯¹è±¡ä¼šå®ç° TransferService æ¥å£ï¼›</p><figure><img src="/blog/assets/img/spring-20250709152040.fd9008d0.png" alt="logbasexï¼šJDK åŠ¨æ€ä»£ç†" tabindex="0" loading="lazy"><figcaption>logbasexï¼šJDK åŠ¨æ€ä»£ç†</figcaption></figure><p>å¦‚æœç”¨ CGLIBï¼Œä»£ç†å¯¹è±¡ä¼šç»§æ‰¿ TransferServiceImpl ç±»ã€‚</p><figure><img src="/blog/assets/img/spring-20250709152111.e15ebe22.png" alt="logbasexï¼šCGLIB ä»£ç†" tabindex="0" loading="lazy"><figcaption>logbasexï¼šCGLIB ä»£ç†</figcaption></figure><p>ä»å®ç°åŸç†æ¥è¯´ï¼ŒJDK åŠ¨æ€ä»£ç†æ˜¯ Java åŸç”Ÿæ”¯æŒçš„ï¼Œå®ƒé€šè¿‡åå°„æœºåˆ¶åœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ›å»ºä¸€ä¸ªå®ç°äº†æŒ‡å®šæ¥å£çš„ä»£ç†ç±»ã€‚å½“æˆ‘ä»¬è°ƒç”¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•æ—¶ï¼Œä¼šè¢«è½¬å‘åˆ° InvocationHandler çš„ invoke æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•é‡Œæ’å…¥åˆ‡é¢é€»è¾‘ï¼Œç„¶åå†é€šè¿‡åå°„è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„çœŸå®æ–¹æ³•ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> JdkProxyExample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        UserService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> target</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> UserServiceImpl</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        UserService</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> proxy</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (UserService) </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Proxy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">newProxyInstance</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            target</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getClassLoader</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(),</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            target</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getInterfaces</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            (proxy1, method, args1) </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Before method: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">                Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> result</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">invoke</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(target, args1);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;After method: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> result;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        );</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        proxy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">findUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1L</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>CGLIB åˆ™æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„å­—èŠ‚ç ç”Ÿæˆåº“ï¼Œå®ƒé€šè¿‡ ASM å­—èŠ‚ç æ¡†æ¶åŠ¨æ€ç”Ÿæˆç›®æ ‡ç±»çš„å­ç±»ï¼Œç„¶åé‡å†™çˆ¶ç±»çš„æ–¹æ³•æ¥æ’å…¥åˆ‡é¢é€»è¾‘ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> CglibProxyExample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Enhancer</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> enhancer</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Enhancer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        enhancer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setSuperclass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">UserController</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        enhancer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setCallback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> MethodInterceptor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> intercept</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> obj</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Method</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MethodProxy</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> proxy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Throwable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Before method: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">                Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> result</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> proxy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">invokeSuper</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(obj, args);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;After method: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> result;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        });</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        UserController</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> proxy</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (UserController) </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">enhancer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">create</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        proxy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1L</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="é€‰æ‹©-cglib-è¿˜æ˜¯-jdk-åŠ¨æ€ä»£ç†" tabindex="-1"><a class="header-anchor" href="#é€‰æ‹©-cglib-è¿˜æ˜¯-jdk-åŠ¨æ€ä»£ç†"><span>é€‰æ‹© CGLIB è¿˜æ˜¯ JDK åŠ¨æ€ä»£ç†ï¼Ÿ</span></a></h4><p>å¦‚æœç›®æ ‡å¯¹è±¡æ²¡æœ‰å®ç°ä»»ä½•æ¥å£ï¼Œå°±åªèƒ½ä½¿ç”¨ CGLIB ä»£ç†ï¼Œå°±æ¯”å¦‚è¯´ Controller å±‚çš„ç±»ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æ²¡æœ‰å®ç°æ¥å£çš„Controller</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">RestController</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ArticleController</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">MdcDot</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">bizCode</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;article.create&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ResponseVo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> create</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">RequestBody</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ArticleReq</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> req</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // ä¸šåŠ¡é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœç›®æ ‡å¯¹è±¡å®ç°äº†æ¥å£ï¼Œé€šå¸¸é¦–é€‰ JDK åŠ¨æ€ä»£ç†ï¼Œæ¯”å¦‚è¯´ Service å±‚çš„ç±»ï¼Œä¸€èˆ¬éƒ½ä¼šå…ˆå®šä¹‰æ¥å£ï¼Œå†å®ç°æ¥å£ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// æ¥å£å®šä¹‰</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> interface</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ArticleService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> saveArticle</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Article</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> article</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// å®ç°ç±»</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ArticleServiceImpl</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ArticleService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Transactional</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">rollbackFor</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> saveArticle</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Article</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> article</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // ä¸šåŠ¡é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ Spring Boot 2.0 ä¹‹åï¼ŒSpring AOP é»˜è®¤ä½¿ç”¨ CGLIB ä»£ç†ã€‚è¿™æ˜¯å› ä¸º Spring Boot ä½œä¸ºä¸€ä¸ªè¿½æ±‚â€œçº¦å®šä¼˜äºé…ç½®â€çš„æ¡†æ¶ï¼Œé€‰æ‹© CGLIBï¼Œå¯ä»¥ç®€åŒ–å¼€å‘è€…çš„å¿ƒæ™ºè´Ÿæ‹…ï¼Œé¿å…å› ä¸ºå¿˜è®°å®ç°æ¥å£è€Œå¯¼è‡´ AOP ä¸ç”Ÿæ•ˆçš„é—®é¢˜ã€‚</p><figure><img src="/blog/assets/img/spring-20250714162356.745c8c5f.png" alt="æŠ€æœ¯æ´¾æºç ï¼šAopAutoConfiguration" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šAopAutoConfiguration</figcaption></figure><h4 id="ä½ ä¼šç”¨-jdk-åŠ¨æ€ä»£ç†å—" tabindex="-1"><a class="header-anchor" href="#ä½ ä¼šç”¨-jdk-åŠ¨æ€ä»£ç†å—"><span>ä½ ä¼šç”¨ JDK åŠ¨æ€ä»£ç†å—ï¼Ÿ</span></a></h4><p>ä¼šçš„ã€‚</p><p>å‡è®¾æˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªå°åœºæ™¯ï¼Œå®¢æœä¸­è½¬ï¼Œè§£å†³ç”¨æˆ·é—®é¢˜ï¼š</p><figure><img src="/blog/assets/img/spring-c5c4b247-62dd-43a2-a043-da51c58f77c8.3e717348.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šç”¨æˆ·å‘å®¢æœæé—®é¢˜" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šç”¨æˆ·å‘å®¢æœæé—®é¢˜</figcaption></figure><p>æˆ‘ä»¬å¯ä»¥ç”¨ JDK åŠ¨æ€ä»£ç†æ¥å®ç°è¿™ä¸ªåœºæ™¯ã€‚JDK åŠ¨æ€ä»£ç†çš„æ ¸å¿ƒæ˜¯é€šè¿‡åå°„æœºåˆ¶åœ¨è¿è¡Œæ—¶åˆ›å»ºä¸€ä¸ªå®ç°äº†æŒ‡å®šæ¥å£çš„ä»£ç†ç±»ã€‚</p><figure><img src="/blog/assets/img/spring-65b14a3f-2653-463e-af77-a8875d3d635c.931ceb27.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šJDKåŠ¨æ€ä»£ç†ç±»å›¾" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šJDKåŠ¨æ€ä»£ç†ç±»å›¾</figcaption></figure><p>ç¬¬ä¸€æ­¥ï¼Œåˆ›å»ºæ¥å£ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> interface</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ISolver</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> solve</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒæ­¥ï¼Œå®ç°æ¥å£ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Solver</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ISolver</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> solve</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ç–¯ç‹‚æ‰å¤´å‘è§£å†³é—®é¢˜â€¦â€¦&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬ä¸‰æ­¥ï¼Œä½¿ç”¨ç”¨åå°„ç”Ÿæˆç›®æ ‡å¯¹è±¡çš„ä»£ç†ï¼Œè¿™é‡Œç”¨äº†ä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»æ–¹å¼é‡å†™ InvocationHandler æ–¹æ³•ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ProxyFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ç»´æŠ¤ä¸€ä¸ªç›®æ ‡å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> target</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ProxyFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> target</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">target</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> target;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ä¸ºç›®æ ‡å¯¹è±¡ç”Ÿæˆä»£ç†å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getProxyInstance</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Proxy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">newProxyInstance</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">target</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getClassLoader</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(), </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">target</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getInterfaces</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(),</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> InvocationHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> invoke</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> proxy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Method</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Throwable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;è¯·é—®æœ‰ä»€ä¹ˆå¯ä»¥å¸®åˆ°æ‚¨ï¼Ÿ&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                        // è°ƒç”¨ç›®æ ‡å¯¹è±¡æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">                        Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> returnValue</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">invoke</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(target, args);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;é—®é¢˜å·²ç»è§£å†³å•¦ï¼&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">                        return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                });</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬å››æ­¥ï¼Œç”Ÿæˆä¸€ä¸ªä»£ç†å¯¹è±¡å®ä¾‹ï¼Œé€šè¿‡ä»£ç†å¯¹è±¡è°ƒç”¨ç›®æ ‡å¯¹è±¡æ–¹æ³•ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Client</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        //ç›®æ ‡å¯¹è±¡:ç¨‹åºå‘˜</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        ISolver</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> developer</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Solver</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        //ä»£ç†ï¼šå®¢æœå°å§å§</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        ISolver</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> csProxy</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (ISolver) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ProxyFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(developer).</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getProxyInstance</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        //ç›®æ ‡æ–¹æ³•ï¼šè§£å†³é—®é¢˜</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        csProxy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">solve</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä½ ä¼šç”¨-cglib-åŠ¨æ€ä»£ç†å—" tabindex="-1"><a class="header-anchor" href="#ä½ ä¼šç”¨-cglib-åŠ¨æ€ä»£ç†å—"><span>ä½ ä¼šç”¨ CGLIB åŠ¨æ€ä»£ç†å—ï¼Ÿ</span></a></h4><p>ä¼šçš„ã€‚</p><figure><img src="/blog/assets/img/spring-74da87af-20d1-4a5b-a212-3837a15f0bab.89e53258.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šCGLIBåŠ¨æ€ä»£ç†ç±»å›¾" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šCGLIBåŠ¨æ€ä»£ç†ç±»å›¾</figcaption></figure><p>ç¬¬ä¸€æ­¥ï¼šå®šä¹‰ç›®æ ‡ç±» Solverï¼Œå®šä¹‰ solve æ–¹æ³•ï¼Œæ¨¡æ‹Ÿè§£å†³é—®é¢˜çš„è¡Œä¸ºã€‚ç›®æ ‡ç±»ä¸éœ€è¦å®ç°ä»»ä½•æ¥å£ï¼Œè¿™ä¸ JDK åŠ¨æ€ä»£ç†çš„è¦æ±‚ä¸åŒã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Solver</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> solve</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ç–¯ç‹‚æ‰å¤´å‘è§£å†³é—®é¢˜â€¦â€¦&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒæ­¥ï¼šåˆ›å»ºä»£ç†å·¥å‚ ProxyFactoryï¼Œä½¿ç”¨ CGLIB çš„ Enhancer ç±»æ¥ç”Ÿæˆç›®æ ‡ç±»çš„å­ç±»ï¼ˆä»£ç†å¯¹è±¡ï¼‰ã€‚CGLIB å…è®¸æˆ‘ä»¬åœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ›å»ºä¸€ä¸ªç»§æ‰¿è‡ªç›®æ ‡ç±»çš„ä»£ç†ç±»ï¼Œå¹¶é‡å†™ç›®æ ‡æ–¹æ³•ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ProxyFactory</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MethodInterceptor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //ç»´æŠ¤ä¸€ä¸ªç›®æ ‡å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> target</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ProxyFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> target</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">target</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> target;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    //ä¸ºç›®æ ‡å¯¹è±¡ç”Ÿæˆä»£ç†å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getProxyInstance</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        //å·¥å…·ç±»</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Enhancer</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> en</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Enhancer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        //è®¾ç½®çˆ¶ç±»</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        en</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setSuperclass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">target</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        //è®¾ç½®å›è°ƒå‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        en</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setCallback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        //åˆ›å»ºå­ç±»å¯¹è±¡ä»£ç†</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> en</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">create</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> intercept</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> obj</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Method</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MethodProxy</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> proxy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Throwable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;è¯·é—®æœ‰ä»€ä¹ˆå¯ä»¥å¸®åˆ°æ‚¨ï¼Ÿ&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // æ‰§è¡Œç›®æ ‡å¯¹è±¡çš„æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> returnValue</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">invoke</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(target, args);</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;é—®é¢˜å·²ç»è§£å†³å•¦ï¼&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºå®¢æˆ·ç«¯ Clientï¼Œè·å–ä»£ç†å¯¹è±¡å¹¶è°ƒç”¨ç›®æ ‡æ–¹æ³•ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Client</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        //ç›®æ ‡å¯¹è±¡:ç¨‹åºå‘˜</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Solver</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> developer</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Solver</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        //ä»£ç†ï¼šå®¢æœå°å§å§</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        Solver</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> csProxy</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (Solver) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> ProxyFactory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(developer).</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getProxyInstance</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        //ç›®æ ‡æ–¹æ³•ï¼šè§£å†³é—®é¢˜</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        csProxy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">solve</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¸†è½¯åŒå­¦ 3 Java åç«¯ä¸€é¢çš„åŸé¢˜ï¼šcglib çš„åŸç†</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯é¢ç»åŒå­¦ 22 æš‘æœŸå®ä¹ ä¸€é¢é¢è¯•åŸé¢˜ï¼šSpring AOP å®ç°åŸç†</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°ç±³é¢ç»åŒå­¦ F é¢è¯•åŸé¢˜ï¼šä¸¤ç§åŠ¨æ€ä»£ç†çš„åŒºåˆ«</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨é¢ç»åŒå­¦ 8 Java åç«¯å®ä¹ ä¸€é¢é¢è¯•åŸé¢˜ï¼šspringçš„aopæ˜¯å¦‚ä½•å®ç°çš„</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯äº‘æ™ºé¢ç»åŒå­¦ 20 äºŒé¢é¢è¯•åŸé¢˜ï¼šspring aopçš„åº•å±‚åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢é¢ç»åŒå­¦ 3 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šjavaçš„åå°„æœºåˆ¶ï¼Œåå°„çš„åº”ç”¨åœºæ™¯AOPçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Œä¸åŠ¨æ€ä»£ç†å’Œåå°„æœ‰ä»€ä¹ˆåŒºåˆ«</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ¯”äºšè¿ªé¢ç»åŒå­¦ 12 Java æŠ€æœ¯é¢è¯•åŸé¢˜ï¼šä»£ç†ä»‹ç»ä¸€ä¸‹ï¼Œjdkå’Œcglibçš„åŒºåˆ«</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¿«æ‰‹åŒå­¦ 4 ä¸€é¢åŸé¢˜ï¼šSpring AOPçš„å®ç°åŸç†ï¼ŸJDKåŠ¨æ€ä»£ç†å’ŒCGLibåŠ¨æ€ä»£ç†çš„å„è‡ªå®ç°åŠå…¶åŒºåˆ«ï¼Ÿç°åœ¨éœ€è¦ç»Ÿè®¡æ–¹æ³•çš„å…·ä½“æ‰§è¡Œæ—¶é—´ï¼Œè¯´ä¸‹å¦‚ä½•ä½¿ç”¨AOPæ¥å®ç°ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç†æƒ³æ±½è½¦é¢ç»åŒå­¦ 2 ä¸€é¢é¢è¯•åŸé¢˜ï¼šäº†è§£AOPåº•å±‚æ˜¯æ€ä¹ˆåšçš„å—ï¼Ÿ</li></ol></blockquote><!----><p>memoï¼š2025 å¹´ 7 æœˆ 10 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨ç»™çƒå‹ä¿®æ”¹ç®€å†çš„æ—¶å€™ç¢°åˆ°ä¸€ä¸ª<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">å¯¹æ˜Ÿçƒéå¸¸è®¤å¯çš„çƒå‹</a>ï¼Œä»–åœ¨æˆ‘çš„å¸®åŠ©ä¸‹ä¹Ÿé¡ºåˆ©æ‰¾åˆ°äº†å®ä¹ ï¼Œå¹¶ä¸”å¤§å®¶ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œä»–æåˆ°çš„è¿™äº›è·¯çº¿è§„åˆ’é—®é¢˜ã€ç®€å†ä¹¦å†™é—®é¢˜ã€ç§‹æ‹›å‡†å¤‡é—®é¢˜ã€é¡¹ç›®é—®é¢˜ï¼Œéƒ½å¯ä»¥åœ¨æ˜Ÿçƒé‡Œæ‰¾åˆ°ç­”æ¡ˆã€‚</p><figure><img src="/blog/assets/img/spring-20250711172049.de3b9189.png" alt="çƒå‹å¯¹æ˜Ÿçƒçš„è®¤å¯" tabindex="0" loading="lazy"><figcaption>çƒå‹å¯¹æ˜Ÿçƒçš„è®¤å¯</figcaption></figure><h2 id="äº‹åŠ¡" tabindex="-1"><a class="header-anchor" href="#äº‹åŠ¡"><span>äº‹åŠ¡</span></a></h2><h3 id="_25-ğŸŒŸè¯´è¯´ä½ å¯¹springäº‹åŠ¡çš„ç†è§£" tabindex="-1"><a class="header-anchor" href="#_25-ğŸŒŸè¯´è¯´ä½ å¯¹springäº‹åŠ¡çš„ç†è§£"><span>25.ğŸŒŸè¯´è¯´ä½ å¯¹Springäº‹åŠ¡çš„ç†è§£ï¼Ÿ</span></a></h3><p>Spring æä¾›äº†ä¸¤ç§äº‹åŠ¡ç®¡ç†æ–¹å¼ï¼Œç¼–ç¨‹å¼äº‹åŠ¡å’Œå£°æ˜å¼äº‹åŠ¡ã€‚ç¼–ç¨‹å¼äº‹åŠ¡å°±æ˜¯æˆ‘ä»¬è¦æ‰‹åŠ¨è°ƒç”¨äº‹åŠ¡çš„å¼€å§‹ã€æäº¤ã€å›æ»šè¿™äº›æ“ä½œï¼Œè™½ç„¶çµæ´»ä½†æ˜¯ä»£ç æ¯”è¾ƒç¹çã€‚å£°æ˜å¼äº‹åŠ¡åªéœ€è¦åœ¨éœ€è¦äº‹åŠ¡çš„æ–¹æ³•ä¸ŠåŠ ä¸Š <code>@Transactional</code> æ³¨è§£å°±å¥½äº†ï¼ŒSpring ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨å¤„ç†äº‹åŠ¡çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚</p><figure><img src="/blog/assets/img/spring-20250711173334.c3382a4a.png" alt="Spring TransactionInterceptor" tabindex="0" loading="lazy"><figcaption>Spring TransactionInterceptor</figcaption></figure><p>----è¿™éƒ¨åˆ†å¯ä»¥ä¸èƒŒï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£ start----</p><p>ç¼–ç¨‹å¼äº‹åŠ¡å¯ä»¥ä½¿ç”¨ TransactionTemplate å’Œ PlatformTransactionManager æ¥å®ç°ï¼Œå…è®¸æˆ‘ä»¬åœ¨ä»£ç ä¸­ç›´æ¥æ§åˆ¶äº‹åŠ¡çš„è¾¹ç•Œã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AccountService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> TransactionTemplate</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> transactionTemplate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> setTransactionTemplate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">TransactionTemplate</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> transactionTemplate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">transactionTemplate</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> transactionTemplate;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> transfer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Double</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> money</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        transactionTemplate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">execute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> TransactionCallbackWithoutResult</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            protected</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> doInTransactionWithoutResult</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">TransactionStatus</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> status</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                // è½¬å‡º</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                accountDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">outMoney</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(out, money);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                // è½¬å…¥</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">                accountDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">inMoney</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(in, money);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        });</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>----è¿™éƒ¨åˆ†å¯ä»¥ä¸èƒŒï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£ end----</p><p>Spring äº‹åŠ¡çš„åº•å±‚å®ç°æ˜¯é€šè¿‡ AOP æ¥å®Œæˆçš„ã€‚å½“æˆ‘ä»¬åœ¨æ–¹æ³•ä¸ŠåŠ  <code>@Transactional</code> æ³¨è§£åï¼ŒSpring ä¼šä¸ºè¿™ä¸ª Bean åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œåœ¨æ–¹æ³•æ‰§è¡Œå‰å¼€å¯äº‹åŠ¡ï¼Œæ–¹æ³•æ­£å¸¸è¿”å›æ—¶æäº¤äº‹åŠ¡ï¼Œå¦‚æœæ–¹æ³•æŠ›å‡ºå¼‚å¸¸å°±å›æ»šäº‹åŠ¡ã€‚</p><p>å£°æ˜å¼äº‹åŠ¡çš„ä¼˜ç‚¹æ˜¯ä¸éœ€è¦åœ¨ä¸šåŠ¡é€»è¾‘ä»£ç ä¸­æºæ‚äº‹åŠ¡ç®¡ç†çš„ä»£ç ï¼Œç¼ºç‚¹æ˜¯ï¼Œæœ€ç»†ç²’åº¦åªèƒ½åˆ°æ–¹æ³•çº§åˆ«ï¼Œæ— æ³•åˆ°ä»£ç å—çº§åˆ«ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AccountService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AccountDao</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> accountDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Transactional</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> transfer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Double</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> money</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // è½¬å‡º</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        accountDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">outMoney</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(out, money);</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // è½¬å…¥</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        accountDao</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">inMoney</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(in, money);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œåŒå­¦ 10 åç«¯å®ä¹ ä¸€é¢çš„åŸé¢˜ï¼šSpring äº‹åŠ¡æ€ä¹ˆå®ç°çš„</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å†œä¸šé“¶è¡Œé¢ç»åŒå­¦ 7 Java åç«¯é¢è¯•åŸé¢˜ï¼šSpring å¦‚ä½•ä¿è¯äº‹åŠ¡</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ¯”äºšè¿ªé¢ç»åŒå­¦ 12 Java æŠ€æœ¯é¢è¯•åŸé¢˜ï¼šSpringçš„äº‹åŠ¡ç”¨è¿‡å—ï¼Œåœ¨é¡¹ç›®é‡Œé¢æ€ä¹ˆä½¿ç”¨çš„</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è™¾çš®é¢ç»åŒå­¦ 13 ä¸€é¢é¢è¯•åŸé¢˜ï¼šspringäº‹åŠ¡</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„é˜¿é‡Œäº‘é¢ç»åŒå­¦ 22 é¢ç»ï¼šå¦‚ä½•ä½¿ç”¨springå®ç°äº‹åŠ¡</li></ol></blockquote><p>memoï¼š2025 å¹´ 7 æœˆ 11 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">æœ‰çƒå‹åœ¨ VIP ç¾¤é‡Œè®²</a>ï¼Œé¢æ¸£é€†è¢­çš„ Redisã€MySQLã€JVM ç¯‡éå¸¸å¼ºï¼›å¦å¤–ä¸€ä¸ªçƒå‹ä¹Ÿæ˜¯ç»§ç»­å£ç¢‘è¯´ï¼Œé¢è¿‡å‡ æ¬¡å…¨åŒ…è¿‡ã€‚ğŸ˜„</p><figure><img src="/blog/assets/img/spring-20250711174214.5fa93a02.png" alt="çƒå‹å¯¹é¢æ¸£é€†è¢­çš„è®¤å¯" tabindex="0" loading="lazy"><figcaption>çƒå‹å¯¹é¢æ¸£é€†è¢­çš„è®¤å¯</figcaption></figure><h3 id="_26-å£°æ˜å¼äº‹åŠ¡çš„å®ç°åŸç†äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#_26-å£°æ˜å¼äº‹åŠ¡çš„å®ç°åŸç†äº†è§£å—"><span>26.å£°æ˜å¼äº‹åŠ¡çš„å®ç°åŸç†äº†è§£å—ï¼Ÿ</span></a></h3><p>Spring çš„å£°æ˜å¼äº‹åŠ¡ç®¡ç†æ˜¯é€šè¿‡ AOP å’Œä»£ç†æœºåˆ¶å®ç°çš„ï¼Œå¤§è‡´å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µã€‚</p><p>ç¬¬ä¸€ä¸ªé˜¶æ®µå‘ç”Ÿåœ¨ Spring å®¹å™¨å¯åŠ¨æ—¶ï¼Œå®ƒä¼šæ‰«ææ‰€æœ‰çš„ Beanã€‚å¦‚æœå‘ç°æŸä¸ª Bean çš„æ–¹æ³•ä¸Šæ ‡æ³¨äº† <code>@Transactional</code> æ³¨è§£ï¼ŒSpring ä¸ä¼šç›´æ¥è¿”å›è¿™ä¸ªåŸå§‹çš„ Bean å®ä¾‹ã€‚è€Œæ˜¯ä¸ºè¿™ä¸ª Bean åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚è¿™ä¸ªä»£ç†å¯¹è±¡æ‹¥æœ‰å’ŒåŸå§‹å¯¹è±¡å®Œå…¨ç›¸åŒçš„æ–¹æ³•ï¼Œä½†åœ¨å†…éƒ¨æ‚„æ‚„åœ°åŒ…è£¹äº†äº‹åŠ¡å¤„ç†çš„é€»è¾‘ã€‚</p><figure><img src="/blog/assets/img/spring-20250715175632.3baa0221.png" alt="æŠ€æœ¯æ´¾æºç ï¼š@Transactionalæ³¨è§£" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼š@Transactionalæ³¨è§£</figcaption></figure><p>ç¬¬äºŒä¸ªé˜¶æ®µå‘ç”Ÿåœ¨æ–¹æ³•è°ƒç”¨çš„è¿è¡Œé˜¶æ®µï¼Œå½“æˆ‘ä»¬çš„ä»£ç è°ƒç”¨é‚£ä¸ªè¢« <code>@Transactional</code> æ³¨è§£ä¿®é¥°çš„æ–¹æ³•æ—¶ï¼Œå®é™…ä¸Šè°ƒç”¨çš„æ˜¯ Spring åˆ›å»ºçš„é‚£ä¸ªä»£ç†å¯¹è±¡çš„æ–¹æ³•ã€‚</p><figure><img src="/blog/assets/img/spring-97493c7f-c596-4e98-a6a8-dab254d6d1ab.d8f4cde5.png" alt="å›¾ç‰‡æ¥æºç½‘æ˜“æŠ€æœ¯ä¸“æ " tabindex="0" loading="lazy"><figcaption>å›¾ç‰‡æ¥æºç½‘æ˜“æŠ€æœ¯ä¸“æ </figcaption></figure><p>äº‹åŠ¡æ‹¦æˆªå™¨ä¼šåœ¨ä»£ç†å¯¹è±¡æ‰§è¡ŒçœŸæ­£çš„ä¸šåŠ¡é€»è¾‘ä¹‹å‰ï¼Œæ ¹æ® <code>@Transactional</code> æ³¨è§£çš„é…ç½®è·å–äº‹åŠ¡å±æ€§ï¼Œæ¯”å¦‚ä¼ æ’­è¡Œä¸ºã€éš”ç¦»çº§åˆ«ç­‰ï¼Œç„¶åé€šè¿‡äº‹åŠ¡ç®¡ç†å™¨æ¥å¼€å¯ä¸€ä¸ªæ–°çš„äº‹åŠ¡ã€‚å¹¶ä»æ•°æ®åº“è¿æ¥æ± è·å–ä¸€ä¸ªè¿æ¥ï¼Œå…³é—­å…¶è‡ªåŠ¨æäº¤ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> TransactionInterceptor</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MethodInterceptor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> invoke</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MethodInvocation</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> invocation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Throwable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // è·å–äº‹åŠ¡å±æ€§</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        TransactionAttribute</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> txAttr</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getTransactionAttribute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">invocation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(), </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">invocation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getThis</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // å¼€å§‹äº‹åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        TransactionStatus</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> status</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> transactionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getTransaction</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(txAttr);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            // æ‰§è¡Œç›®æ ‡æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">            Object</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> retVal</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> invocation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">proceed</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            // æäº¤äº‹åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            transactionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">commit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(status);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> retVal;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Throwable</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> ex</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            // å›æ»šäº‹åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">            transactionManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">rollback</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(status);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            throw</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ex;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¥ç€ï¼Œä»£ç†å¯¹è±¡ä¼šè°ƒç”¨åŸå§‹ Bean å®ä¾‹ä¸­çœŸæ­£çš„ä¸šåŠ¡æ–¹æ³•ï¼Œå¦‚æœä¸šåŠ¡æ–¹æ³•é¡ºåˆ©æ‰§è¡Œå®Œæ¯•ï¼Œæ²¡æœ‰æŠ›å‡ºä»»ä½•å¼‚å¸¸ï¼Œé‚£ä¹ˆæ‹¦æˆªå™¨å°±ä¼šé€šè¿‡äº‹åŠ¡ç®¡ç†å™¨æäº¤äº‹åŠ¡ï¼Œå°†ä¹‹å‰çš„æ‰€æœ‰æ•°æ®åº“æ“ä½œæ°¸ä¹…ä¿å­˜ã€‚</p><p>å¦‚æœä¸šåŠ¡æ–¹æ³•æŠ›å‡ºäº†å¼‚å¸¸ï¼Œæ‹¦æˆªå™¨ä¼šæ•è·åˆ°è¿™ä¸ªå¼‚å¸¸ï¼Œå¹¶é€šè¿‡äº‹åŠ¡ç®¡ç†å™¨å›æ»šäº‹åŠ¡ï¼Œå°†ä¹‹å‰çš„æ‰€æœ‰æ•°æ®åº“æ“ä½œæ’¤é”€ã€‚</p><p>æœ€åï¼Œæ— è®ºäº‹åŠ¡æ˜¯æäº¤è¿˜æ˜¯å›æ»šï¼Œæ‹¦æˆªå™¨éƒ½ä¼šé‡Šæ”¾æ•°æ®åº“è¿æ¥ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œåŒå­¦ 10 åç«¯å®ä¹ ä¸€é¢çš„åŸé¢˜ï¼šSpring äº‹åŠ¡æ€ä¹ˆå®ç°çš„</li></ol></blockquote><p>memoï¼š2025 å¹´ 7 æœˆ 15 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">ç»™çƒå‹ä¿®æ”¹ç®€å†æ—¶</a>ï¼Œçœ‹åˆ°çƒå‹è¯´ç®€å†ä¿®æ”¹åæ‹¿åˆ°äº†æ˜Ÿç¯ç§‘æŠ€å†…æ¨çš„å®ä¹ æœºä¼šï¼Œä¹Ÿå­¦åˆ°äº†å¾ˆå¤šï¼Œå¹¶ä¸”çœŸè¯šçš„æ„Ÿè°¢äº† Java æ–¹é¢çš„å…«è‚¡é¢è¯•é¢˜å¯¹ä»–çš„å¸®åŠ©ã€‚è®²çœŸï¼Œèƒ½çœ‹åˆ°å¤§å®¶æœ€çœŸå®çš„åé¦ˆï¼Œæˆ‘æŒºå¼€å¿ƒçš„ã€‚</p><figure><img src="/blog/assets/img/spring-20250715180830.7d07ed6b.png" alt="æ˜Ÿç¯å®ä¹ çš„çƒå‹å¯¹æ˜ŸçƒæœåŠ¡çš„è®¤å¯" tabindex="0" loading="lazy"><figcaption>æ˜Ÿç¯å®ä¹ çš„çƒå‹å¯¹æ˜ŸçƒæœåŠ¡çš„è®¤å¯</figcaption></figure><h3 id="_27-transactionalåœ¨å“ªäº›æƒ…å†µä¸‹ä¼šå¤±æ•ˆ" tabindex="-1"><a class="header-anchor" href="#_27-transactionalåœ¨å“ªäº›æƒ…å†µä¸‹ä¼šå¤±æ•ˆ"><span>27.@Transactionalåœ¨å“ªäº›æƒ…å†µä¸‹ä¼šå¤±æ•ˆï¼Ÿ</span></a></h3><p><code>@Transactional</code> è™½ç„¶ç”¨èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œä½†ç¡®å®æœ‰ä¸€äº›â€œå‘â€ï¼Œå¦‚æœä½¿ç”¨ä¸å½“æ˜¯ä¼šå¯¼è‡´äº‹åŠ¡å¤±æ•ˆçš„ã€‚æ ¹æ®æˆ‘çš„ç†è§£å’Œå®è·µï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§å¸¸è§æƒ…å†µï¼š</p><p>ç¬¬ä¸€ç§ï¼Œ<code>@Transactional</code> æ³¨è§£ç”¨åœ¨é public ä¿®é¥°çš„æ–¹æ³•ä¸Šã€‚</p><p>Spring çš„ AOP ä»£ç†æœºåˆ¶å†³å®šäº†å®ƒæ— æ³•ä»£ç† private æ–¹æ³•ã€‚å› ä¸º private æ–¹æ³•åœ¨å­ç±»ä¸­æ˜¯ä¸å¯è§çš„ï¼Œä»£ç†ç±»æ— æ³•è¦†ç›–å®ƒã€‚å› æ­¤ï¼Œåœ¨ private æ–¹æ³•ä¸ŠåŠ  <code>@Transactional</code> æ³¨è§£æ˜¯å®Œå…¨æ— æ•ˆçš„ã€‚åŒç†ï¼Œprotected å’Œ default æƒé™çš„æ–¹æ³•ä¹Ÿåº”é¿å…ä½¿ç”¨ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">protected</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> TransactionAttribute</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> computeTransactionAttribute</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Method</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    Class</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">?</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> targetClass) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // Don&#39;t allow no-public methods as required.</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">allowPublicMethodsOnly</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&amp;&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> !</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Modifier</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isPublic</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">method</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getModifiers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">())</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒç§ï¼Œæ–¹æ³•å†…éƒ¨è°ƒç”¨ï¼Œè¿™ä¹Ÿæ˜¯æœ€å®¹æ˜“è¢«å¿½ç•¥çš„ä¸€ç§å¤±æ•ˆåœºæ™¯ã€‚å¦‚æœåœ¨ä¸€ä¸ªç±»çš„æ–¹æ³• A ä¸­ï¼Œç›´æ¥è°ƒç”¨æœ¬ç±»çš„å¦å¤–ä¸€ä¸ªåŠ äº† <code>@Transactional</code> çš„æ–¹æ³• Bï¼Œé‚£ä¹ˆæ–¹æ³• B çš„äº‹åŠ¡æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ã€‚</p><p>è¿™æ˜¯å› ä¸ºæ–¹æ³• A è°ƒç”¨æ–¹æ³• B æ—¶ï¼Œä½¿ç”¨çš„æ˜¯ this å¼•ç”¨ï¼Œç›´æ¥è®¿é—®åŸå§‹å¯¹è±¡çš„æ–¹æ³•ï¼Œç»•è¿‡äº† Spring çš„ä»£ç†å¯¹è±¡ï¼Œä¹Ÿå°±å¯¼è‡´ä»£ç†å¯¹è±¡ä¸­çš„äº‹åŠ¡é€»è¾‘æ²¡æœ‰æœºä¼šæ‰§è¡Œã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> UserService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Transactional</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">User</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> user</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // ç›´æ¥è°ƒç”¨æœ¬ç±»çš„å¦ä¸€ä¸ªæ–¹æ³•ï¼Œäº‹åŠ¡ä¸ä¼šç”Ÿæ•ˆ</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        saveUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(user);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> saveUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">User</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> user</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // ä¿å­˜ç”¨æˆ·é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è§£å†³æ–¹æ³•æ˜¯æŠŠå½“å‰ç±»ä½œä¸ºä¸€ä¸ª Bean æ³¨å…¥åˆ°è‡ªå·±ä¸­ï¼Œç„¶åé€šè¿‡è¿™ä¸ªæ³¨å…¥çš„ Bean æ¥è°ƒç”¨æ–¹æ³• Bã€‚</p><figure><img src="/blog/assets/img/spring-20250716144039.4db557d5.png" alt="æ´¾èªæ˜æºç ï¼š@Transactional ä¸é€‚ç”¨ this è°ƒç”¨" tabindex="0" loading="lazy"><figcaption>æ´¾èªæ˜æºç ï¼š@Transactional ä¸é€‚ç”¨ this è°ƒç”¨</figcaption></figure><p>ç¬¬ä¸‰ç§ï¼Œå¦‚æœåœ¨äº‹åŠ¡æ–¹æ³•å†…éƒ¨ç”¨ try-catch æ•è·äº†å¼‚å¸¸ï¼Œä½†æ²¡æœ‰åœ¨ catch å—ä¸­å°†å¼‚å¸¸é‡æ–°æŠ›å‡ºï¼Œæˆ–è€…æŠ›å‡ºä¸€ä¸ªæ–°çš„èƒ½è§¦å‘å›æ»šçš„å¼‚å¸¸ï¼Œé‚£ä¹ˆ Spring çš„äº‹åŠ¡æ‹¦æˆªå™¨å°±æ— æ³•æ„ŸçŸ¥åˆ°å¼‚å¸¸çš„å‘ç”Ÿï¼Œä¹Ÿå°±æ²¡åŠæ³•å›æ»šã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Transactional</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> process</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    try</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // ä¸šåŠ¡é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // æ•è·å¼‚å¸¸ä½†æ²¡æœ‰é‡æ–°æŠ›å‡º</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // äº‹åŠ¡ä¸ä¼šå›æ»š</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬å››ç§ï¼ŒSpring äº‹åŠ¡é»˜è®¤åªå¯¹ RuntimeException å’Œ Error ç±»å‹çš„å¼‚å¸¸è¿›è¡Œå›æ»šã€‚å¦‚æœåœ¨ä»£ç ä¸­æŠ›å‡ºçš„æ˜¯ä¸€ä¸ªChecked Exceptionï¼Œæ˜¯ Exception çš„å­ç±»ä½†ä¸æ˜¯ RuntimeException çš„å­ç±»ï¼Œåˆæ²¡æœ‰é€šè¿‡ <code>@Transactional(rollbackFor = Exception.class)</code> æŒ‡å®šäº‹åŠ¡å›å½’çš„å¼‚å¸¸ç±»å‹ï¼Œé‚£ä¹ˆäº‹åŠ¡åŒæ ·ä¸ä¼šå›æ»šã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Transactional</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> process</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() throws Exception {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // æŠ›å‡ºä¸€ä¸ª Checked Exception       </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    throw</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> SQLException</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;This is a checked exception&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/blog/assets/img/spring-04053b02-3264-4d7f-b868-560a0333f08d.eb84c5b7.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpringé»˜è®¤æ”¯æŒçš„å¼‚å¸¸å›æ»š" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpringé»˜è®¤æ”¯æŒçš„å¼‚å¸¸å›æ»š</figcaption></figure><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°ç±³æ˜¥æ‹›åŒå­¦ K ä¸€é¢é¢è¯•åŸé¢˜ï¼šäº‹åŠ¡ä¼ æ’­ï¼Œprotected å’Œ private åŠ äº‹åŠ¡ä¼šç”Ÿæ•ˆå—,è¿˜æœ‰é‚£äº›ä¸ç”Ÿæ•ˆçš„æƒ…å†µ</li></ol></blockquote><p>memoï¼š2025 å¹´ 7 æœˆ 16 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">ç»™çƒå‹ä¿®æ”¹ç®€å†æ—¶</a>ï¼Œçœ‹åˆ°ä¸€ä¸ªä¸­å›½æµ·æ´‹å¤§å­¦æœ¬ï¼Œå››å·å¤§å­¦ç¡•çš„çƒå‹ï¼Œéå¸¸ä¼˜ç§€ï¼ŒåŸºæœ¬ä¸Šæ ¡å›­ç»å†å’Œè£èª‰å¥–é¡¹ç®—æ˜¯æ‹‰æ»¡äº†ã€‚èƒ½å¸®åŠ©åˆ°è¿™ä¹ˆå¤šä¼˜ç§€çš„çƒå‹ï¼Œæˆ‘ä¹Ÿå¾ˆå¼€å¿ƒã€‚</p><figure><img src="/blog/assets/img/spring-20250716145121.60aed817.png" alt="ä¸­å›½æµ·æ´‹å¤§å­¦æœ¬ï¼Œå››å·å¤§å­¦ç¡•çš„çƒå‹" tabindex="0" loading="lazy"><figcaption>ä¸­å›½æµ·æ´‹å¤§å­¦æœ¬ï¼Œå››å·å¤§å­¦ç¡•çš„çƒå‹</figcaption></figure><h3 id="_28-è¯´è¯´springäº‹åŠ¡çš„éš”ç¦»çº§åˆ«" tabindex="-1"><a class="header-anchor" href="#_28-è¯´è¯´springäº‹åŠ¡çš„éš”ç¦»çº§åˆ«"><span>28.è¯´è¯´Springäº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Ÿ</span></a></h3><p>äº‹åŠ¡çš„éš”ç¦»çº§åˆ«å®šä¹‰äº†ä¸€ä¸ªäº‹åŠ¡å¯ä»¥å—å…¶ä»–å¹¶å‘äº‹åŠ¡å½±å“çš„ç¨‹åº¦ã€‚SQL æ ‡å‡†å®šä¹‰çš„å››ä¸ªéš”ç¦»çº§åˆ«ï¼ŒSpring éƒ½æ”¯æŒï¼Œå®šä¹‰åœ¨ TransactionDefinition æ¥å£ä¸­ã€‚</p><figure><img src="/blog/assets/img/spring-20240326082116.552659e8.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šTransactionDefinition" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šTransactionDefinition</figcaption></figure><p>Spring åœ¨æ ‡å‡†çš„éš”ç¦»çº§åˆ«ä¸Šå®šä¹‰äº†äº”ä¸ªéš”ç¦»çº§åˆ«ï¼š</p><p>å…¶ä¸­ DEFAULT è¡¨ç¤ºä½¿ç”¨åº•å±‚æ•°æ®åº“çš„é»˜è®¤éš”ç¦»çº§åˆ«ã€‚æ¯”å¦‚è¯´å¯¹äº MySQL æ¥è¯´ï¼Œé»˜è®¤çš„éš”ç¦»çº§åˆ«æ˜¯å¯é‡å¤è¯»ï¼Œé‚£å°±ç”¨å¯é‡å¤è¯»ï¼›å¯¹äº Oracle æ¥è¯´ï¼Œé»˜è®¤æ˜¯è¯»å·²æäº¤ï¼Œé‚£å°±ç”¨è¯»å·²æäº¤ã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿé€šå¸¸éƒ½ç”¨ DEFAULTï¼Œè®©æ•°æ®åº“è‡ªå·±å†³å®šåˆé€‚çš„éš”ç¦»çº§åˆ«ã€‚</p><p>è¯»æœªæäº¤æ˜¯æœ€ä½çš„éš”ç¦»çº§åˆ«ï¼Œå…è®¸è¯»å–æœªæäº¤çš„æ•°æ®ã€‚è¿™ç§çº§åˆ«ä¼šå‡ºç°è„è¯»é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªäº‹åŠ¡å¯èƒ½ä¼šè¯»åˆ°å¦ä¸€ä¸ªäº‹åŠ¡è¿˜æ²¡æäº¤çš„æ•°æ®ã€‚æ¯”å¦‚ A äº‹åŠ¡ä¿®æ”¹äº†ä¸€æ¡æ•°æ®ä½†è¿˜æ²¡æäº¤ï¼ŒB äº‹åŠ¡å°±èƒ½è¯»åˆ°è¿™ä¸ªä¿®æ”¹åçš„å€¼ï¼Œå¦‚æœ A äº‹åŠ¡åæ¥å›æ»šäº†ï¼ŒB äº‹åŠ¡è¯»åˆ°çš„å°±æ˜¯è„æ•°æ®ã€‚è¿™ä¸ªçº§åˆ«åœ¨å®é™…é¡¹ç›®ä¸­åŸºæœ¬ä¸ä¼šä½¿ç”¨ï¼Œå› ä¸ºæ•°æ®ä¸€è‡´æ€§æ— æ³•ä¿è¯ã€‚</p><p>è¯»å·²æäº¤è§£å†³äº†è„è¯»é—®é¢˜ï¼Œä½†ä¼šå‡ºç°ä¸å¯é‡å¤è¯»é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­å¤šæ¬¡è¯»å–åŒä¸€æ¡æ•°æ®ï¼Œå¯èƒ½å¾—åˆ°ä¸åŒçš„ç»“æœã€‚æ¯”å¦‚ A äº‹åŠ¡å…ˆè¯»äº†ä¸€æ¡æ•°æ®ï¼Œç„¶å B äº‹åŠ¡ä¿®æ”¹å¹¶æäº¤äº†è¿™æ¡æ•°æ®ï¼ŒA äº‹åŠ¡å†æ¬¡è¯»å–æ—¶å°±ä¼šå‘ç°æ•°æ®å˜äº†ã€‚</p><p>å¯é‡å¤è¯»ä¿è¯åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­å¤šæ¬¡è¯»å–åŒä¸€æ¡æ•°æ®çš„ç»“æœæ˜¯ä¸€è‡´çš„ï¼Œè§£å†³äº†ä¸å¯é‡å¤è¯»é—®é¢˜ã€‚ä½†æ˜¯ä¼šå‡ºç°å¹»è¯»é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­å¤šæ¬¡æ‰§è¡ŒåŒä¸€ä¸ªæŸ¥è¯¢ï¼Œå¯èƒ½ä¼šçœ‹åˆ°ä¸åŒæ•°é‡çš„è®°å½•ã€‚æ¯”å¦‚ A äº‹åŠ¡æŸ¥è¯¢æŸä¸ªæ¡ä»¶çš„è®°å½•æ•°æ˜¯ 10 æ¡ï¼Œç„¶å B äº‹åŠ¡æ’å…¥äº†ä¸€æ¡ç¬¦åˆæ¡ä»¶çš„è®°å½•å¹¶æäº¤ï¼ŒA äº‹åŠ¡å†æ¬¡æŸ¥è¯¢æ—¶å¯èƒ½ä¼šçœ‹åˆ° 11 æ¡è®°å½•ã€‚MySQL çš„ InnoDB å­˜å‚¨å¼•æ“é€šè¿‡ä¸´é”®é”åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šè§£å†³äº†å¹»è¯»é—®é¢˜ã€‚</p><p>ä¸²è¡ŒåŒ–æ˜¯æœ€é«˜çš„éš”ç¦»çº§åˆ«ï¼Œå®Œå…¨ä¸²è¡ŒåŒ–æ‰§è¡Œäº‹åŠ¡ï¼Œå¯ä»¥è§£å†³æ‰€æœ‰å¹¶å‘é—®é¢˜ï¼ŒåŒ…æ‹¬è„è¯»ã€ä¸å¯é‡å¤è¯»å’Œå¹»è¯»ã€‚ä½†æ˜¯æ€§èƒ½æ˜¯æœ€å·®çš„ï¼Œå› ä¸ºäº‹åŠ¡åŸºæœ¬ä¸Šæ˜¯æ’é˜Ÿæ‰§è¡Œçš„ã€‚åœ¨å®é™…é¡¹ç›®ä¸­å¾ˆå°‘ä½¿ç”¨ï¼Œé™¤éå¯¹æ•°æ®ä¸€è‡´æ€§æœ‰æé«˜çš„è¦æ±‚ã€‚</p><p>åœ¨ Spring ä¸­è®¾ç½®éš”ç¦»çº§åˆ«ä¹Ÿå¾ˆç®€å•ï¼Œå¯ä»¥åœ¨ <code>@Transactional</code> æ³¨è§£ä¸­é€šè¿‡ isolation å±æ€§æ¥æŒ‡å®šã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Transactional</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">isolation</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Isolation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">READ_UNCOMMITTED</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> someMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ä¸šåŠ¡é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸è¿‡åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¾ˆå°‘æ‰‹åŠ¨è®¾ç½®éš”ç¦»çº§åˆ«ï¼Œé€šå¸¸éƒ½æ˜¯ä½¿ç”¨æ•°æ®åº“çš„é»˜è®¤çº§åˆ«ï¼Œåªæœ‰åœ¨é‡åˆ°ç‰¹å®šçš„å¹¶å‘é—®é¢˜æ—¶æ‰ä¼šè€ƒè™‘è°ƒæ•´ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„åä¸ºé¢ç»åŒå­¦ 8 æŠ€æœ¯äºŒé¢é¢è¯•åŸé¢˜ï¼šSpring ä¸­çš„äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Œäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°ç±³é¢ç»åŒå­¦ E ç¬¬äºŒä¸ªéƒ¨é—¨ Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šspring çš„éš”ç¦»æœºåˆ¶ï¼Œé»˜è®¤æ˜¯å“ªä¸€ç§</li></ol></blockquote><p>memoï¼š2025 å¹´ 7 æœˆ 13 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">å¸®çƒå‹ä¿®æ”¹ç®€å†æ—¶</a>ï¼Œç¢°åˆ°ä¸€ä¸ªç”µå­ç§‘æŠ€å¤§å­¦ç¡•å£«ã€åä¸­ç§‘æŠ€å¤§å­¦æœ¬çš„çƒå‹ï¼Œä»–è¯´åˆ°ï¼Œè‡ªå·±ä¹Ÿåœ¨æ¨èæ˜Ÿçƒç»™å¸ˆå¼Ÿä»¬ï¼ŒçœŸçš„éå¸¸æ¬£æ…°ï¼Œèƒ½æœ‰è¿™æ ·çš„å£ç¢‘ï¼Œå¾ˆæ„ŸåŠ¨ï¼Œå¿…é¡»è¦æ„Ÿè°¢çƒå‹ä»¬çš„æ”¯æŒã€‚</p><figure><img src="/blog/assets/img/spring-20250713101016.f0929c60.png" alt="çƒå‹å¯¹æ˜Ÿçƒçš„å£ç¢‘" tabindex="0" loading="lazy"><figcaption>çƒå‹å¯¹æ˜Ÿçƒçš„å£ç¢‘</figcaption></figure><h3 id="_29-ğŸŒŸè¯´è¯´springçš„äº‹åŠ¡ä¼ æ’­æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#_29-ğŸŒŸè¯´è¯´springçš„äº‹åŠ¡ä¼ æ’­æœºåˆ¶"><span>29.ğŸŒŸè¯´è¯´Springçš„äº‹åŠ¡ä¼ æ’­æœºåˆ¶ï¼Ÿ</span></a></h3><p>ç®€å•æ¥è¯´ï¼Œå½“ä¸€ä¸ªäº‹åŠ¡æ–¹æ³• A è°ƒç”¨å¦ä¸€ä¸ªäº‹åŠ¡æ–¹æ³• B æ—¶ï¼Œæ–¹æ³• B çš„äº‹åŠ¡åº”è¯¥å¦‚ä½•è¿è¡Œï¼Ÿæ˜¯åŠ å…¥æ–¹æ³• A çš„ç°æœ‰äº‹åŠ¡ï¼Œè¿˜æ˜¯å¼€å¯ä¸€ä¸ªæ–°äº‹åŠ¡ï¼Œæˆ–è€…ä»¥éäº‹åŠ¡æ–¹å¼è¿è¡Œï¼Ÿè¿™å°±æ˜¯äº‹åŠ¡ä¼ æ’­æœºåˆ¶è¦è§£å†³çš„é—®é¢˜ã€‚</p><p>Spring å®šä¹‰äº†ä¸ƒç§äº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼Œå…¶ä¸­ REQUIRED æ˜¯é»˜è®¤çš„ä¼ æ’­è¡Œä¸ºï¼Œè¡¨ç¤ºå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åŠ å…¥è¯¥äº‹åŠ¡ï¼›å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡ã€‚</p><figure><img src="/blog/assets/img/spring-a6e2a8dc-9771-4d8b-9d91-76ddee98af1a.5f423532.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šäº‹åŠ¡ä¼ æ’­æœºåˆ¶" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šäº‹åŠ¡ä¼ æ’­æœºåˆ¶</figcaption></figure><p>æ¯”å¦‚è¯´åœ¨<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾å®æˆ˜é¡¹ç›®</a>ä¸­ï¼Œä¸€ä¸ªç”¨æˆ·è§£é”ä»˜è´¹æ–‡ç« çš„æ“ä½œï¼Œä¼šæ¶‰åŠåˆ°åˆ›å»ºæ”¯ä»˜è®¢å•ã€æ›´æ–°è®¢å•çŠ¶æ€ç­‰å¥½å‡ ä¸ªæ•°æ®åº“æ“ä½œã€‚</p><figure><img src="/blog/assets/img/spring-20250714160050.ae6137e0.png" alt="æŠ€æœ¯æ´¾æºç ï¼šSpringäº‹åŠ¡ä¼ æ’­æœºåˆ¶" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šSpringäº‹åŠ¡ä¼ æ’­æœºåˆ¶</figcaption></figure><p>è¿™äº›ä¸åŒæ“ä½œçš„æ–¹æ³•å°±å¯ä»¥æ”¾åœ¨ä¸€ä¸ª <code>@Transactional</code> æ³¨è§£çš„æ–¹æ³•é‡Œï¼Œå®ƒä»¬å°±è‡ªåŠ¨åœ¨åŒä¸€ä¸ªäº‹åŠ¡é‡Œäº†ï¼Œè¦ä¹ˆä¸€èµ·æˆåŠŸï¼Œè¦ä¹ˆä¸€èµ·å¤±è´¥ã€‚</p><p>å½“ç„¶ï¼Œè¿˜æœ‰ä¸€äº›ç‰¹æ®Šæƒ…å†µã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å¸Œæœ›è®°å½•ä¸€äº›æ“ä½œæ—¥å¿—ï¼Œä½†ä¸æƒ³å› ä¸ºä¸»ä¸šåŠ¡å¤±è´¥å¯¼è‡´æ—¥å¿—å›æ»šã€‚è¿™æ—¶å€™ REQUIRES_NEW å°±æ´¾ä¸Šç”¨åœºäº†ã€‚å®ƒä¸ç®¡å½“å‰æœ‰æ²¡æœ‰äº‹åŠ¡ï¼Œéƒ½é‡æ–°å¼€å¯ä¸€ä¸ªå…¨æ–°çš„ã€ç‹¬ç«‹çš„äº‹åŠ¡æ¥æ‰§è¡Œã€‚è¿™æ ·ï¼Œæ—¥å¿—ä¿å­˜çš„äº‹åŠ¡å’Œä¸»ä¸šåŠ¡çš„äº‹åŠ¡å°±äº’ä¸å¹²æ‰°ï¼Œå³ä½¿ä¸»ä¸šåŠ¡å¤±è´¥å›æ»šï¼Œæ—¥å¿—ä¹Ÿèƒ½å¦¥å¦¥åœ°ä¿å­˜ä¸‹æ¥ã€‚</p><p>å¦å¤–ï¼Œè¿˜æœ‰åƒ SUPPORTSã€ NOT_SUPPORTED è¿™äº›ã€‚SUPPORTS æ¯”è¾ƒä½›ç³»ï¼Œæœ‰äº‹åŠ¡å°±ç”¨ï¼Œæ²¡äº‹åŠ¡å°±ä¸ç”¨ï¼Œé€‚åˆä¸€äº›ä¸é‡è¦çš„æ›´æ–°æ“ä½œã€‚è€Œ NOT_SUPPORTED åˆ™æ›´å¹²è„†ï¼Œå®ƒä¼šæŠŠå½“å‰çš„äº‹åŠ¡æŒ‚èµ·ï¼Œä»¥éäº‹åŠ¡çš„æ–¹å¼å»æ‰§è¡Œã€‚æ¯”å¦‚è¯´æˆ‘ä»¬çš„äº‹åŠ¡é‡Œéœ€è¦è°ƒç”¨ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„ã€å“åº”å¾ˆæ…¢çš„æ¥å£ï¼Œå¦‚æœè¿™ä¸ªè°ƒç”¨ä¹ŸåŒ…å«åœ¨äº‹åŠ¡é‡Œï¼Œå°±ä¼šé•¿æ—¶é—´å ç”¨æ•°æ®åº“è¿æ¥ã€‚æŠŠå®ƒç”¨ NOT_SUPPORTED åŒ…èµ·æ¥ï¼Œå°±å¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Transactional</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">propagation</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> Propagation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">NOT_SUPPORTED</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> callExternalApi</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // è°ƒç”¨ç¬¬ä¸‰æ–¹æ¥å£</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€åè¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„ NESTEDï¼ŒåµŒå¥—äº‹åŠ¡ã€‚å®ƒæœ‰ç‚¹åƒ REQUIRES_NEWï¼Œä½†åˆä¸å®Œå…¨ä¸€æ ·ã€‚NESTED æ˜¯çˆ¶äº‹åŠ¡çš„ä¸€ä¸ªå­äº‹åŠ¡ï¼Œçˆ¶äº‹åŠ¡å›æ»šï¼Œå®ƒè‚¯å®šä¹Ÿå¾—å›æ»šã€‚ä½†å®ƒè‡ªå·±å›æ»šï¼Œå´ä¸ä¼šå½±å“åˆ°çˆ¶äº‹åŠ¡ã€‚è¿™ä¸ªç‰¹æ€§åœ¨å¤„ç†ä¸€äº›æ‰¹é‡æ“ä½œï¼Œå¸Œæœ›èƒ½éƒ¨åˆ†å›æ»šçš„åœºæ™¯ä¸‹ç‰¹åˆ«æœ‰ç”¨ã€‚ä¸è¿‡å®ƒéœ€è¦æ•°æ®åº“æ”¯æŒ Savepoint åŠŸèƒ½ï¼ŒMySQL å°±æ”¯æŒã€‚</p><h4 id="äº‹åŠ¡èƒ½åœ¨æ–°çº¿ç¨‹ä¸­ä¼ æ’­å—" tabindex="-1"><a class="header-anchor" href="#äº‹åŠ¡èƒ½åœ¨æ–°çº¿ç¨‹ä¸­ä¼ æ’­å—"><span>äº‹åŠ¡èƒ½åœ¨æ–°çº¿ç¨‹ä¸­ä¼ æ’­å—ï¼Ÿ</span></a></h4><p>äº‹åŠ¡ä¼ æ’­æœºåˆ¶æ˜¯é€šè¿‡ <a href="https://javabetter.cn/thread/ThreadLocal.html" target="_blank" rel="noopener noreferrer">ThreadLocal</a> å®ç°çš„ï¼Œæ‰€ä»¥ï¼Œå¦‚æœè°ƒç”¨çš„æ–¹æ³•æ˜¯åœ¨æ–°çº¿ç¨‹ä¸­ï¼Œäº‹åŠ¡ä¼ æ’­å°±ä¼šå¤±æ•ˆã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Transactional</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> parentMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(() </span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">-&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> childMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">())</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> childMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // è¿™é‡Œçš„æ“ä½œå°†ä¸ä¼šåœ¨ parentMethod çš„äº‹åŠ¡èŒƒå›´å†…æ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="protected-å’Œ-private-æ–¹æ³•åŠ äº‹åŠ¡ä¼šç”Ÿæ•ˆå—" tabindex="-1"><a class="header-anchor" href="#protected-å’Œ-private-æ–¹æ³•åŠ äº‹åŠ¡ä¼šç”Ÿæ•ˆå—"><span>protected å’Œ private æ–¹æ³•åŠ äº‹åŠ¡ä¼šç”Ÿæ•ˆå—ï¼Ÿ</span></a></h4><p>æˆ‘çš„ç†è§£æ˜¯ï¼šåœ¨ private æ–¹æ³•ä¸ŠåŠ äº‹åŠ¡æ˜¯è‚¯å®šä¸ä¼šç”Ÿæ•ˆçš„ï¼Œè€Œ protected æ–¹æ³•åœ¨ç‰¹å®šçš„ä»£ç†æ¨¡å¼ä¸‹æ˜¯å¯èƒ½ç”Ÿæ•ˆçš„ï¼Œä½†è¿™ä¸¤ç§ç”¨æ³•éƒ½åº”è¯¥é¿å…ï¼Œä¸æ˜¯æ¨èçš„ä½¿ç”¨æ–¹å¼ã€‚</p><p>è¿™èƒŒåæ¶‰åŠåˆ° Spring AOP çš„ä»£ç†æœºåˆ¶ã€‚</p><p>æˆ‘å…ˆè¯´ä¸€ä¸‹ JDK åŠ¨æ€ä»£ç†ï¼Œå®ƒè¦æ±‚ç›®æ ‡ç±»å¿…é¡»å®ç°ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ¥å£ã€‚ä¹Ÿå°±æ„å‘³ç€ä»£ç†åªèƒ½æ‹¦æˆªæ¥å£ä¸­å£°æ˜çš„æ–¹æ³•ï¼Œè€Œ protected å’Œ private æ–¹æ³•å¹¶ä¸èƒ½åœ¨æ¥å£ä¸­å£°æ˜ï¼Œå› æ­¤åœ¨ JDK åŠ¨æ€ä»£ç†ä¸‹ï¼Œè¿™äº›æ–¹æ³•çš„äº‹åŠ¡æ³¨è§£æ˜¯ä¼šè¢«ç›´æ¥å¿½ç•¥çš„ã€‚</p><p>é‚£ Spring Boot 2.0 ä¹‹åï¼ŒSpring AOP é»˜è®¤ä½¿ç”¨çš„æ˜¯ CGLIB ä»£ç†ã€‚CGLIB ä»£ç†æ˜¯é€šè¿‡ç»§æ‰¿ç›®æ ‡ç±»æ¥åˆ›å»ºä»£ç†å¯¹è±¡çš„ã€‚</p><p>é‚£å¯¹äº private æ–¹æ³•æ¥è¯´ï¼Œç”±äºæ— æ³•è¢«å­ç±»é‡å†™ï¼Œæ‰€ä»¥ CGLIB ä»£ç†ä¹Ÿæ— æ³•æ‹¦æˆªï¼Œäº‹åŠ¡ä¹Ÿå°±æ— æ³•ç”Ÿæ•ˆã€‚å¯¹äº protected æ–¹æ³•æ¥è¯´ï¼Œå› ä¸ºå®ƒå¯ä»¥è¢«å­ç±»é‡å†™ï¼Œæ‰€ä»¥ç†è®ºä¸Šäº‹åŠ¡æ˜¯ç”Ÿæ•ˆçš„ã€‚</p><p>----è¿™éƒ¨åˆ†å¯ä»¥ä¸èƒŒï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£ start----</p><p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª protected æ–¹æ³•ï¼Œåä¸º <code>protectedTransactionalMethod</code> ï¼Œå®ƒè¢« <code>@Transactional</code> æ³¨è§£æ ‡è®°ã€‚è¿™ä¸ªæ–¹æ³•ä¼šå…ˆå‘æ•°æ®åº“ä¸­æ’å…¥ä¸€æ¡è®°å½•ï¼ˆä¸€ä¸ª TestEntity å®ä¾‹ï¼‰ã€‚ç´§æ¥ç€ï¼Œå®ƒä¼šç«‹å³æŠ›å‡ºä¸€ä¸ª RuntimeException ã€‚</p><figure><img src="/blog/assets/img/spring-20250714171236.a339e4f7.png" alt="æ´¾èªæ˜æºç ï¼šæµ‹è¯• protected æ–¹æ³•çš„äº‹åŠ¡æ˜¯å¦ç”Ÿæ•ˆ" tabindex="0" loading="lazy"><figcaption>æ´¾èªæ˜æºç ï¼šæµ‹è¯• protected æ–¹æ³•çš„äº‹åŠ¡æ˜¯å¦ç”Ÿæ•ˆ</figcaption></figure><ul><li>å¦‚æœäº‹åŠ¡ç”Ÿæ•ˆï¼šå½“ RuntimeException æŠ›å‡ºæ—¶ï¼ŒSpring çš„äº‹åŠ¡ç®¡ç†å™¨ä¼šæ•è·å®ƒï¼Œå¹¶è§¦å‘äº‹åŠ¡å›æ»šã€‚è¿™æ„å‘³ç€ï¼Œä¹‹å‰æ’å…¥æ•°æ®åº“çš„é‚£æ¡è®°å½•ä¼šè¢«æ’¤é”€ã€‚æœ€ç»ˆï¼Œæ•°æ®åº“é‡Œä¸ä¼šç•™ä¸‹è¿™æ¡è®°å½•ã€‚</li><li>å¦‚æœäº‹åŠ¡å¤±æ•ˆï¼šå³ä½¿ RuntimeException è¢«æŠ›å‡ºï¼Œç”±äºæ²¡æœ‰äº‹åŠ¡ç®¡ç†ï¼Œå·²ç»æ‰§è¡Œçš„æ•°æ®åº“æ’å…¥æ“ä½œä¸ä¼šè¢«æ’¤é”€ã€‚æœ€ç»ˆï¼Œæ•°æ®åº“é‡Œä¼šç•™ä¸‹è¿™æ¡è®°å½•ã€‚</li></ul><p>æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª public æ–¹æ³• <code>testProtectedTransaction</code> ï¼Œå®ƒé€šè¿‡ <code>this.protectedTransactionalMethod()</code> çš„æ–¹å¼ç›´æ¥è°ƒç”¨äº†é‚£ä¸ª protected æ–¹æ³•ã€‚æ¥ç€æˆ‘ä»¬è®¿é—® <code>/api/v1/test/transaction/protected</code> æ¥è§¦å‘è¿™ä¸ªè°ƒç”¨ã€‚</p><p>ç»“æœï¼šæ•°æ®åº“ä¸­ä¼šç•™ä¸‹ä¸€æ¡åä¸º &#39;test-protected&#39; çš„è®°å½•ã€‚è¿™è¯æ˜äº†ç”±äºæ˜¯å†…éƒ¨è°ƒç”¨ï¼Œç»•è¿‡äº† Spring AOP ä»£ç†ï¼Œ<code>@Transactional</code> æ³¨è§£æ²¡æœ‰ç”Ÿæ•ˆã€‚</p><p>æˆ‘ä»¬åˆ›å»ºäº†å¦ä¸€ä¸ª public æ–¹æ³• <code>testProtectedTransactionWithSelfProxy</code>ã€‚åœ¨è¿™ä¸ªæ–¹æ³•é‡Œï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªâ€œè‡ªæ³¨å…¥â€çš„ä»£ç†å¯¹è±¡ self æ¥è°ƒç”¨ <code>self.protectedTransactionalMethod()</code>ã€‚æ¥ç€æˆ‘ä»¬é€šè¿‡è®¿é—® <code>/api/v1/test/transaction/protected/proxy</code> æ¥è§¦å‘è¿™ä¸ªè°ƒç”¨ã€‚</p><p>ç»“æœï¼šæ•°æ®åº“ä¸­ä¸ä¼šç•™ä¸‹åä¸º &#39;test-protected-proxy&#39; çš„è®°å½•ã€‚è¿™è¯æ˜é€šè¿‡ä»£ç†å¯¹è±¡çš„è°ƒç”¨ï¼ŒSpring AOP æˆåŠŸæ‹¦æˆªå¹¶å¼€å¯äº†äº‹åŠ¡ï¼Œæœ€ç»ˆåœ¨å¼‚å¸¸å‘ç”Ÿæ—¶æ­£ç¡®åœ°å›æ»šäº†äº‹åŠ¡ã€‚</p><figure><img src="/blog/assets/img/spring-20250714171739.fd1f3332.png" alt="æ´¾èªæ˜æºç ï¼šprotected æ–¹æ³•çš„äº‹åŠ¡ç”Ÿæ•ˆç»“æœ" tabindex="0" loading="lazy"><figcaption>æ´¾èªæ˜æºç ï¼šprotected æ–¹æ³•çš„äº‹åŠ¡ç”Ÿæ•ˆç»“æœ</figcaption></figure><p>----è¿™éƒ¨åˆ†å¯ä»¥ä¸èƒŒï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£ end----</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œåŒå­¦ 10 åç«¯å®ä¹ ä¸€é¢çš„åŸé¢˜ï¼šäº‹åŠ¡çš„ä¼ æ’­æœºåˆ¶</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°ç±³æ˜¥æ‹›åŒå­¦ K ä¸€é¢é¢è¯•åŸé¢˜ï¼šäº‹åŠ¡ä¼ æ’­ï¼Œprotected å’Œ private åŠ äº‹åŠ¡ä¼šç”Ÿæ•ˆå—,è¿˜æœ‰é‚£äº›ä¸ç”Ÿæ•ˆçš„æƒ…å†µ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„åä¸ºé¢ç»åŒå­¦ 8 æŠ€æœ¯äºŒé¢é¢è¯•åŸé¢˜ï¼šSpring ä¸­çš„äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Œäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„oppo é¢ç»åŒå­¦ 8 åç«¯å¼€å‘ç§‹æ‹›ä¸€é¢é¢è¯•åŸé¢˜ï¼šè®²ä¸€ä¸‹Springäº‹åŠ¡ä¼ æ’­æœºåˆ¶</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„é˜¿é‡Œäº‘é¢ç»åŒå­¦ 22 é¢ç»ï¼šä»‹ç»äº‹åŠ¡ä¼ æ’­æ¨¡å‹</li></ol></blockquote><p>memoï¼š2025 å¹´ 7 æœˆ 14 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">å¸®çƒå‹ä¿®æ”¹ç®€å†æ—¶</a>ï¼Œä¸€ä¸ªæµ™æ±Ÿå¤§å­¦ç¡•å£«çš„çƒå‹ä¸ä»…æ‹¿åˆ°äº†è…¾è®¯ WXG çš„å®ä¹  offerï¼Œç§‹æ‹›ä¹Ÿå¼€å§‹åŒæ­¥è¿›è¡Œäº†ï¼Œæˆ‘åªèƒ½è¯´ä¼˜ç§€çš„çƒå‹çœŸçš„èµ¶æ—©ä¸èµ¶æ™šå•Šï¼</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250714172641.png" alt="æµ™å¤§ç¡•ã€WXG å®ä¹ å¼€å§‹ç§‹æ‹›" tabindex="0" loading="lazy"><figcaption>æµ™å¤§ç¡•ã€WXG å®ä¹ å¼€å§‹ç§‹æ‹›</figcaption></figure><!----><h2 id="mvc" tabindex="-1"><a class="header-anchor" href="#mvc"><span>MVC</span></a></h2><h3 id="_30-spring-mvc-çš„æ ¸å¿ƒç»„ä»¶æœ‰å“ªäº›" tabindex="-1"><a class="header-anchor" href="#_30-spring-mvc-çš„æ ¸å¿ƒç»„ä»¶æœ‰å“ªäº›"><span>30.Spring MVC çš„æ ¸å¿ƒç»„ä»¶æœ‰å“ªäº›ï¼Ÿ</span></a></h3><p>Spring MVC ä½œä¸º Spring æ¡†æ¶ä¸­å¤„ç† Web è¯·æ±‚çš„æ ¸å¿ƒæ¨¡å—ï¼Œå®ƒçš„è®¾è®¡éµå¾ªäº†ç»å…¸çš„ MVC æ¨¡å¼ï¼Œæ ¹æ®æˆ‘çš„ç†è§£ï¼Œå®ƒçš„æ ¸å¿ƒç»„ä»¶ä¸»è¦åŒ…æ‹¬ï¼š</p><p>å‰ç«¯æ§åˆ¶å™¨ DispatcherServletï¼Œè¿™æ˜¯ Spring MVC çš„å…¥å£å’Œæ ¸å¿ƒè°ƒåº¦å™¨ã€‚å½“ä¸€ä¸ª HTTP è¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨æ—¶ï¼Œé¦–å…ˆç”± DispatcherServlet æ¥æ”¶ã€‚å®ƒè´Ÿè´£å°†è¯·æ±‚åˆ†å‘åˆ°åˆé€‚çš„å¤„ç†å™¨ï¼Œä¹Ÿå°±æ˜¯ Controller ä¸­çš„æ–¹æ³•ï¼Œå¹¶åè°ƒå…¶ä»–ç»„ä»¶çš„å·¥ä½œã€‚</p><figure><img src="/blog/assets/img/spring-20250717090650.cb355a57.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šSpring MVC ç»„ä»¶" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šSpring MVC ç»„ä»¶</figcaption></figure><p>åœ¨ Spring Boot é¡¹ç›®ä¸­ï¼ŒDispatcherServlet çš„å¯åŠ¨æ˜¯é€šè¿‡è‡ªåŠ¨é…ç½®å®Œæˆçš„ã€‚Spring Boot ä¼šè‡ªåŠ¨æ³¨å†Œä¸€ä¸ªé»˜è®¤çš„ DispatcherServletï¼Œå¹¶å°†å…¶æ˜ å°„åˆ° <code>/</code>ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ServletRegistrationBean</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">DispatcherServlet</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> dispatcherServletRegistration</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DispatcherServlet</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> dispatcherServlet) {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    ServletRegistrationBean</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">DispatcherServlet</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> registration </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ServletRegistrationBean</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(dispatcherServlet</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;/&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // é»˜è®¤æ˜ å°„è·¯å¾„ä¸º &quot;/&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    registration</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;dispatcherServlet&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> registration</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¤„ç†å™¨æ˜ å°„ HandlerMappingï¼Œå½“ä¸€ä¸ªè¯·æ±‚è¿›æ¥æ—¶ï¼Œå‰ç«¯æ§åˆ¶å™¨ä¼šè¯¢é—®å¤„ç†å™¨æ˜ å°„ï¼šâ€œè¿™ä¸ª URL åº”è¯¥ç”±å“ªä¸ª Controller çš„å“ªä¸ªæ–¹æ³•æ¥å¤„ç†ï¼Ÿâ€ç„¶åå®ƒå°±ä¼šæ ¹æ® <code>@RequestMapping</code>ã€<code>@GetMapping</code> è¿™äº›æ³¨è§£æ¥åŒ¹é…è¯·æ±‚ã€‚</p><figure><img src="/blog/assets/img/spring-20250717091424.dc45fbab.png" alt="æŠ€æœ¯æ´¾æºç ï¼šHandlerMapping" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šHandlerMapping</figcaption></figure><p>å¤„ç†å™¨ Handlerï¼Œå®é™…ä¸Šå°±æ˜¯æˆ‘ä»¬å†™çš„ Controller æ–¹æ³•ï¼Œè¿™æ˜¯çœŸæ­£å¤„ç†ä¸šåŠ¡é€»è¾‘çš„åœ°æ–¹ã€‚</p><p>å¤„ç†å™¨é€‚é…å™¨ HandlerAdapterï¼Œè´Ÿè´£è°ƒç”¨è¯¥å¤„ç†å™¨çš„æ–¹æ³•ï¼Œå¹¶å¤„ç†å‚æ•°ç»‘å®šã€ç±»å‹è½¬æ¢ç­‰ã€‚å› ä¸ºå¤„ç†å™¨å¯èƒ½æœ‰ä¸åŒçš„ç±»å‹ï¼Œæ¯”å¦‚æ³¨è§£æ–¹å¼ã€å®ç°æ¥å£æ–¹å¼ç­‰ï¼Œå¤„ç†å™¨é€‚é…å™¨å°±æ˜¯ä¸ºäº†ç»Ÿä¸€è°ƒç”¨æ–¹å¼ã€‚</p><p>è§†å›¾è§£æå™¨ ViewResolverï¼Œå¤„ç†å®Œä¸šåŠ¡é€»è¾‘åï¼Œå¦‚æœéœ€è¦æ¸²æŸ“è§†å›¾ï¼ŒViewResolver ä¼šæ ¹æ®è¿”å›çš„è§†å›¾åç§°è§£æå®é™…çš„è§†å›¾å¯¹è±¡ï¼Œæ¯”å¦‚ Thymeleafã€‚åœ¨å‰åç«¯åˆ†ç¦»çš„é¡¹ç›®ä¸­ï¼Œè¿™ä¸ªç»„ä»¶æ›´å¤šç”¨äºè¿”å› JSON æ•°æ®ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250717092624.png" alt="æŠ€æœ¯æ´¾æºç ï¼šViewResolver" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šViewResolver</figcaption></figure><p>å¼‚å¸¸å¤„ç†å™¨ HandlerExceptionResolverï¼Œæ•è·å¹¶å¤„ç†è¯·æ±‚å¤„ç†è¿‡ç¨‹ä¸­æŠ›å‡ºçš„å¼‚å¸¸ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>@ControllerAdvice</code> å’Œ <code>@ExceptionHandler</code> æ¥è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†é€»è¾‘ï¼Œç¡®ä¿è¿”å›å‹å¥½çš„é”™è¯¯å“åº”ã€‚</p><figure><img src="/blog/assets/img/spring-20250717092904.f570321f.png" alt="æŠ€æœ¯æ´¾æºç ï¼šHandlerExceptionResolver" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šHandlerExceptionResolver</figcaption></figure><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰æ–‡ä»¶ä¸Šä¼ è§£æå™¨ MultipartResolverï¼Œç”¨äºå¤„ç†æ–‡ä»¶ä¸Šä¼ è¯·æ±‚ï¼›æ‹¦æˆªå™¨ HandlerInterceptorï¼Œç”¨äºåœ¨è¯·æ±‚å¤„ç†å‰åæ‰§è¡Œä¸€äº›é¢å¤–çš„é€»è¾‘ï¼Œæ¯”å¦‚æƒé™æ ¡éªŒã€æ—¥å¿—è®°å½•ç­‰ã€‚</p><p>memoï¼š2025 å¹´ 7 æœˆ 17 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œæ˜¨å¤©<a href="https://t.zsxq.com/LXlx7" target="_blank" rel="noopener noreferrer">æœ‰çƒå‹è¯´æ‰‹å†™äº†ä¸€ä¸ª Redis çš„è½®å­é¡¹ç›®</a>ï¼Œç”¨çš„ Go è¯­è¨€ï¼Œæˆ‘ä»Šå¤©å»çœ‹äº†ä¸€ä¸‹ doc å’Œä»£ç ï¼Œå†™å¾—éå¸¸å¥½ï¼Œä»£ç æ³¨é‡Šå¾ˆæ¸…æ™°ï¼Œdoc å†™å¾—å¾ˆè¯¦ç»†ï¼Œèƒ½çœ‹å¾—å‡ºçƒå‹çš„ç”¨å¿ƒã€‚æ‰‹å†™è½®å­æ˜¯éå¸¸è€ƒéªŒä¸€ä¸ªäººçš„èƒ½åŠ›çš„ï¼Œæˆ‘çœ‹ä»–å®ç°çš„åŠŸèƒ½æœ‰ï¼šå­—ç¬¦ä¸²å’Œæ•£åˆ—çš„æ•°æ®ç±»å‹ã€RESP åè®®è§£æå™¨ã€ä½¿ç”¨goroutine æ¥åŒæ—¶å¤„ç†å¤šä¸ªè¿æ¥ã€æŒä¹…åŒ– AOF åè®®ç­‰ï¼Œéå¸¸å¼ºã€‚</p><figure><img src="/blog/assets/img/spring-20250717095915.5cce7339.png" alt="æ‰‹å†™ Redis çš„çƒå‹" tabindex="0" loading="lazy"><figcaption>æ‰‹å†™ Redis çš„çƒå‹</figcaption></figure><h3 id="_31-ğŸŒŸspring-mvc-çš„å·¥ä½œæµç¨‹äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#_31-ğŸŒŸspring-mvc-çš„å·¥ä½œæµç¨‹äº†è§£å—"><span>31.ğŸŒŸSpring MVC çš„å·¥ä½œæµç¨‹äº†è§£å—ï¼Ÿ</span></a></h3><p>ç®€å•æ¥è¯´ï¼ŒSpring MVC æ˜¯ä¸€ä¸ªåŸºäº Servlet çš„è¯·æ±‚å¤„ç†æ¡†æ¶ï¼Œæ ¸å¿ƒæµç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºï¼šè¯·æ±‚æ¥æ”¶ â†’ è·¯ç”±åˆ†å‘ â†’ æ§åˆ¶å™¨å¤„ç† â†’ è§†å›¾è§£æã€‚</p><figure><img src="/blog/assets/img/spring-e29a122b-db07-48b8-8289-7251032e87a1.90866381.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring MVCçš„å·¥ä½œæµç¨‹" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring MVCçš„å·¥ä½œæµç¨‹</figcaption></figure><figure><img src="/blog/assets/img/spring-20240506102456.8a47f795.png" alt="å›¾ç‰‡æ¥æºäºç½‘ç»œï¼šSpringMVCå·¥ä½œæµç¨‹å›¾" tabindex="0" loading="lazy"><figcaption>å›¾ç‰‡æ¥æºäºç½‘ç»œï¼šSpringMVCå·¥ä½œæµç¨‹å›¾</figcaption></figure><figure><img src="/blog/assets/img/spring-20240506103022.198f73e8.png" alt="_æœªæ¥å¯æœŸï¼šSpringMVCå·¥ä½œæµç¨‹å›¾" tabindex="0" loading="lazy"><figcaption>_æœªæ¥å¯æœŸï¼šSpringMVCå·¥ä½œæµç¨‹å›¾</figcaption></figure><p>ç”¨æˆ·å‘èµ·çš„ HTTP è¯·æ±‚ï¼Œé¦–å…ˆä¼šè¢« DispatcherServlet æ•è·ï¼Œè¿™æ˜¯ Spring MVC çš„â€œå‰ç«¯æ§åˆ¶å™¨â€ï¼Œè´Ÿè´£æ‹¦æˆªæ‰€æœ‰è¯·æ±‚ï¼Œèµ·åˆ°ç»Ÿä¸€å…¥å£çš„ä½œç”¨ã€‚</p><p>DispatcherServlet æ¥æ”¶åˆ°è¯·æ±‚åï¼Œä¼šæ ¹æ® URLã€è¯·æ±‚æ–¹æ³•ç­‰ä¿¡æ¯ï¼Œäº¤ç»™ HandlerMapping è¿›è¡Œè·¯ç”±åŒ¹é…ï¼ŒæŸ¥æ‰¾å¯¹åº”çš„å¤„ç†å™¨ï¼Œä¹Ÿå°±æ˜¯ Controller ä¸­çš„å…·ä½“æ–¹æ³•ã€‚</p><figure><img src="/blog/assets/img/spring-20250718105710.7f43c450.png" alt="æŠ€æœ¯æ´¾æºç ï¼šController" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šController</figcaption></figure><p>æ‰¾åˆ°å¯¹åº” Controller æ–¹æ³•åï¼ŒDispatcherServlet ä¼šå§”æ‰˜ç»™å¤„ç†å™¨é€‚é…å™¨ HandlerAdapter è¿›è¡Œè°ƒç”¨ã€‚å¤„ç†å™¨é€‚é…å™¨è´Ÿè´£æ‰§è¡Œæ–¹æ³•æœ¬èº«ï¼Œå¹¶å¤„ç†å‚æ•°ç»‘å®šã€æ•°æ®ç±»å‹è½¬æ¢ç­‰ã€‚åœ¨æ³¨è§£é©±åŠ¨å¼€å‘ä¸­ï¼Œå¸¸ç”¨çš„æ˜¯ RequestMappingHandlerAdapterã€‚è¿™ä¸€å±‚ä¼šæŠŠè¯·æ±‚å‚æ•°è‡ªåŠ¨æ³¨å…¥åˆ°æ–¹æ³•å½¢å‚ä¸­ï¼Œå¹¶è°ƒç”¨ Controller æ‰§è¡Œå®é™…çš„ä¸šåŠ¡é€»è¾‘ã€‚</p><figure><img src="/blog/assets/img/spring-20250718105928.fd624152.png" alt="æŠ€æœ¯æ´¾æºç ï¼šRequestMappingHandlerAdapter" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šRequestMappingHandlerAdapter</figcaption></figure><p>Controller æ–¹æ³•æœ€ç»ˆä¼šè¿”å›ç»“æœï¼Œæ¯”å¦‚è§†å›¾åç§°ã€ModelAndView æˆ–ç›´æ¥è¿”å› JSON æ•°æ®ã€‚</p><p>å½“ Controller æ–¹æ³•è¿”å›è§†å›¾åæ—¶ï¼ŒDispatcherServlet ä¼šè°ƒç”¨ ViewResolver å°†å…¶è§£æä¸ºå®é™…çš„ View å¯¹è±¡ï¼Œæ¯”å¦‚ Thymeleaf é¡µé¢ã€‚åœ¨å‰åç«¯åˆ†ç¦»çš„æ¥å£é¡¹ç›®ä¸­ï¼Œè¿™ä¸€æ­¥åˆ™é€šå¸¸æ˜¯è¿”å› JSON æ•°æ®ã€‚</p><p>æœ€åï¼Œç”± View å¯¹è±¡å®Œæˆæ¸²æŸ“ï¼Œæˆ–è€…å°† JSON ç»“æœç›´æ¥é€šè¿‡ DispatcherServlet è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p><h4 id="ä¸ºä»€ä¹ˆè¿˜éœ€è¦-handleradapter" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆè¿˜éœ€è¦-handleradapter"><span>ä¸ºä»€ä¹ˆè¿˜éœ€è¦ HandlerAdapterï¼Ÿ</span></a></h4><p>Spring MVC æ”¯æŒå¤šç§é£æ ¼çš„å¤„ç†å™¨ï¼Œæ¯”å¦‚åŸºäº <code>@Controller</code> æ³¨è§£çš„å¤„ç†å™¨ã€å®ç°äº† Controller æ¥å£çš„å¤„ç†å™¨ç­‰ã€‚å¦‚æœæ²¡æœ‰å¤„ç†å™¨é€‚é…å™¨ï¼ŒDispatcherServlet å°±éœ€è¦ç¡¬ç¼–ç æ¯ç§å¤„ç†å™¨çš„è°ƒç”¨æ–¹å¼ï¼Œæ¡†æ¶å°±ä¼šå˜å¾—éå¸¸åƒµç¡¬â€”â€”æ–°å¢ä¸€ç§ Controller ç±»å‹ï¼Œå°±å¿…é¡»æ”¹ DispatcherServlet çš„ä»£ç ã€‚</p><p>å› æ­¤ï¼ŒSpring å¼•å…¥äº† HandlerAdapter ä½œä¸ºé€‚é…å™¨ï¼Œå±è”½ä¸åŒæ§åˆ¶å™¨çš„å·®å¼‚ï¼Œç»™ DispatcherServlet æä¾›ä¸€ä¸ªç»Ÿä¸€çš„è°ƒç”¨å…¥å£ã€‚</p><p>æ¯”å¦‚è¯´ï¼Œå¦‚æœæ˜¯å®ç°äº† Controller æ¥å£çš„å¤„ç†å™¨ï¼ŒDispatcherServlet ä¼šä½¿ç”¨ SimpleControllerHandlerAdapter æ¥é€‚é…å®ƒã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SimpleControllerHandlerAdapter</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HandlerAdapter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> boolean</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> supports</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> handler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">		return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (handler </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">instanceof</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Controller);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Nullable</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">	public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ModelAndView</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> handle</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">HttpServletRequest</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> request</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">HttpServletResponse</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> response</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> handler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">			throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">		return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ((Controller) handler).</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">handleRequest</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(request, response);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ... çœç•¥ä¸€ä¸ªæ— å…³æ–¹æ³• ...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœæ˜¯ä½¿ç”¨ <code>@RequestMapping</code> æ³¨è§£çš„å¤„ç†å™¨ï¼ŒDispatcherServlet åˆ™ä¼šä½¿ç”¨ RequestMappingHandlerAdapter æ¥é€‚é…ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> RequestMappingHandlerAdapter</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HandlerAdapter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">   </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> boolean</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> supports</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> handler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (handler </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">instanceof</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> HandlerMethod);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Nullable</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ModelAndView</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> handle</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">HttpServletRequest</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> request</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">HttpServletResponse</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> response</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Object</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> handler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            throws</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Exception</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">        HandlerMethod</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> handlerMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (HandlerMethod) handler;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // æ‰§è¡Œæ–¹æ³•å¹¶è¿”å› ModelAndView      </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> invokeHandlerMethod</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(handlerMethod, request, response);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯ Java åç«¯å®ä¹ ä¸€é¢åŸé¢˜ï¼šè¯´è¯´å‰ç«¯å‘èµ·è¯·æ±‚åˆ° SpringMVC çš„æ•´ä¸ªå¤„ç†æµç¨‹ã€‚</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å›½ä¼é¢è¯•åŸé¢˜ï¼šè¯´è¯´ SpringMVC çš„æµç¨‹å§</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°å…¬å¸é¢ç»åŒå­¦ 5 Java åç«¯é¢è¯•åŸé¢˜ï¼šspringMVC å·¥ä½œæµç¨‹ æˆ‘å¤§æ¦‚å°±æ˜¯æŒ‰é¢æ¸£é€†è¢­é‡Œç­”çš„ï¼Œç­”åˆ°ä¸€åŠæ‰“æ–­æˆ‘ï¼šç„¶åä¼šæœ‰ä¸ª Handlerï¼Œè¿™ä¸ª Handler æ˜¯ä»€ä¹ˆä¸œè¥¿å•Šã€‚å‰é¢ Handler ä¸æ˜¯å·²ç»çŸ¥é“ controller äº†å—ï¼Œæˆ‘ç›´æ¥æ‰§è¡Œä¸å°±è¡Œäº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦ Adapter å‘¢ã€‚</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œé¢ç»åŒå­¦ 8 é¢è¯•åŸé¢˜ï¼šSpringMVCæ¡†æ¶</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨åŒå­¦ 17 åç«¯æŠ€æœ¯é¢è¯•åŸé¢˜ï¼šspringmvcæ‰§è¡Œæµç¨‹</li></ol></blockquote><p>memoï¼š2025 å¹´ 7 æœˆ 18 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">å¸®çƒå‹ä¿®æ”¹ç®€å†æ—¶</a>ï¼Œç¢°åˆ°ä¸€ä¸ªè£èª‰å¥–é¡¹åŸºæœ¬æ‹‰æ»¡çš„çƒå‹ï¼Œå›½å®¶åŠ±å¿—å¥–å­¦é‡‘ã€çœçº§æ¯”èµ›ã€æ ¡çº§ä¸‰å¥½å­¦ç”Ÿç­‰ï¼Œé‚£è¿™é‡Œä¹Ÿæ˜¯æ¸©é¦¨æé†’ä¸€ä¸‹å¤§å®¶ï¼Œå­¦æ ¡çš„è£èª‰å¥–é¡¹å¦‚æœä½ æœ‰èƒ½åŠ›äº‰å–ï¼Œæœ‰æ—¶é—´äº‰å–ï¼Œè¿˜æ˜¯å°½é‡äº‰å–ä¸€ä¸‹çš„ï¼Œå°¤å…¶æ˜¯æ±‚èŒå¤®å›½ä¼çš„æ—¶å€™ï¼Œä¼šéå¸¸æœ‰ç”¨ã€‚</p><figure><img src="/blog/assets/img/spring-20250718111849.be74633b.png" alt="è£èª‰å¥–é¡¹åŸºæœ¬æ‹‰æ»¡çš„çƒå‹" tabindex="0" loading="lazy"><figcaption>è£èª‰å¥–é¡¹åŸºæœ¬æ‹‰æ»¡çš„çƒå‹</figcaption></figure><h3 id="_32-springmvc-restful-é£æ ¼çš„æ¥å£æµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„å‘¢" tabindex="-1"><a class="header-anchor" href="#_32-springmvc-restful-é£æ ¼çš„æ¥å£æµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„å‘¢"><span>32.SpringMVC Restful é£æ ¼çš„æ¥å£æµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ</span></a></h3><p>åœ¨ä¼ ç»Ÿçš„ MVC ä¸­ï¼ŒController æ–¹æ³•é€šå¸¸è¿”å›ä¸€ä¸ªè§†å›¾åç§°æˆ–è€… ModelAndView å¯¹è±¡ï¼Œç„¶åç”±è§†å›¾è§£æå™¨ ViewResolver è§£æå¹¶æ¸²æŸ“æˆ HTML é¡µé¢ã€‚ä½†åœ¨ RESTful æ¶æ„ä¸­ï¼Œé€šå¸¸è¿”å›çš„æ˜¯ JSON æˆ– XMLï¼Œä¸å†æ˜¯ä¸€ä¸ªå®Œæ•´çš„é¡µé¢ã€‚</p><p>å…¶ä¸­å¾ˆé‡è¦çš„ä¸¤ä¸ªæ³¨è§£ï¼š<code>@RestController</code> ç›¸å½“äº <code>@Controller</code> å’Œ <code>@ResponseBody</code> çš„ç»“åˆã€‚å½“åœ¨ä¸€ä¸ªç±»ä¸Šä½¿ç”¨ <code>@RestController</code> æ—¶ï¼Œå®ƒä¼šå‘Šè¯‰ Spring è¿™ä¸ªç±»ä¸­æ‰€æœ‰æ–¹æ³•çš„è¿”å›å€¼éƒ½åº”è¯¥è¢«ç›´æ¥å†™å…¥ HTTP å“åº”ä½“ä¸­ï¼Œè€Œä¸å†è¢«è§£æä¸ºè§†å›¾ã€‚</p><p><code>@ResponseBody</code> å¯ä»¥ç”¨åœ¨æ–¹æ³•çº§åˆ«ï¼Œä½œç”¨ç›¸åŒã€‚å®ƒæ ‡å¿—ç€è¯¥æ–¹æ³•çš„è¿”å›å€¼å°†ä½œä¸ºå“åº”ä½“å†…å®¹ï¼ŒSpring ä¼šè·³è¿‡è§†å›¾è§£æçš„æ­¥éª¤ã€‚</p><p>HttpMessageConverter æ˜¯å®ç° RESTful é£æ ¼çš„å…³é”®ã€‚å½“ Spring æ£€æµ‹åˆ° <code>@ResponseBody</code> æ³¨è§£æ—¶ï¼Œå®ƒä¼šä½¿ç”¨ HttpMessageConverter æ¥å°† Controller æ–¹æ³•è¿”å›çš„ Java å¯¹è±¡åºåˆ—åŒ–æˆæŒ‡å®šçš„æ ¼å¼ï¼Œå¦‚ JSONã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœç±»è·¯å¾„ä¸‹æœ‰ Jackson åº“ï¼ŒSpring Boot ä¼šè‡ªåŠ¨é…ç½® MappingJackson2HttpMessageConverter æ¥å¤„ç† JSON çš„è½¬æ¢ã€‚ç›¸åº”çš„ï¼Œå¯¹äºå¸¦æœ‰ <code>@RequestBody</code> æ³¨è§£çš„æ–¹æ³•å‚æ•°ï¼Œå®ƒä¹Ÿä¼šç”¨è¿™ä¸ªè½¬æ¢å™¨å°†è¯·æ±‚ä½“ä¸­çš„ JSON æ•°æ®ååºåˆ—åŒ–æˆ Java å¯¹è±¡ã€‚</p><figure><img src="/blog/assets/img/spring-20250719102056.36eb4135.png" alt="æŠ€æœ¯æ´¾æºç ï¼šMappingJackson2HttpMessageConverter" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šMappingJackson2HttpMessageConverter</figcaption></figure><p>æ‰€ä»¥ï¼ŒRESTful æ¥å£çš„æµç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºï¼šè¯·æ±‚åˆ°è¾¾å‰ç«¯æ§åˆ¶å™¨ DispatcherServlet â†’ é€šè¿‡ HandlerMapping æ‰¾åˆ°å¯¹åº”çš„ Controller æ–¹æ³• â†’ æ‰§è¡Œæ–¹æ³•å¹¶è¿”å›æ•°æ® â†’ ä½¿ç”¨ HttpMessageConverter å°†æ•°æ®è½¬æ¢ä¸º JSON æˆ– XML æ ¼å¼ â†’ ç›´æ¥å†™å…¥ HTTP å“åº”ä½“ã€‚</p><figure><img src="/blog/assets/img/spring-2da963a0-5da9-4b3a-aafd-fd8dbc7e1807.95d111eb.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring MVC Restfulè¯·æ±‚å“åº”ç¤ºæ„å›¾" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring MVC Restfulè¯·æ±‚å“åº”ç¤ºæ„å›¾</figcaption></figure><p>æ€»ç»“æ¥è¯´ï¼ŒRESTful æ¥å£çš„æµç¨‹é€šè¿‡ <code>@RestController</code> å’Œ HttpMessageConverter â€œæŠ„äº†è¿‘é“â€ï¼Œçœç•¥äº† ViewResolver å’Œ View çš„æ¸²æŸ“è¿‡ç¨‹ï¼Œç›´æ¥å°†æ•°æ®è½¬æ¢ä¸ºæŒ‡å®šçš„æ ¼å¼è¿”å›ï¼Œéå¸¸é€‚åˆå‰åç«¯åˆ†ç¦»çš„åº”ç”¨åœºæ™¯ã€‚</p><!----><p>memoï¼š2025 å¹´ 7 æœˆ 19 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©æœ‰<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">çƒå‹</a>ç§ä¿¡æˆ‘è¯´ï¼Œæ‹¿åˆ°äº†äº¬ä¸œçš„å®ä¹  offerï¼Œé—®æ¥ä¸‹æ¥çš„ç§‹æ‹›è¯¥æ€ä¹ˆå‡†å¤‡ï¼Ÿé‚£ 7 æœˆä»½å®ä¹  Offer ç¡®å®ä¼šæ¯”è¾ƒå°‘ï¼Œä½†ä»ç„¶æœ‰ä¸€éƒ¨åˆ†ï¼Œå¦‚æœè¿™ä¸ªé˜¶æ®µè¿˜æƒ³è¦å†²å®ä¹ çš„è¯ï¼Œç¡®å®å¯ä»¥æ¡æ¼ã€‚</p><figure><img src="/blog/assets/img/spring-20250719103018.b3d06c04.png" alt="çƒå‹æ‹¿åˆ°äº¬ä¸œå®ä¹  offer äº†" tabindex="0" loading="lazy"><figcaption>çƒå‹æ‹¿åˆ°äº¬ä¸œå®ä¹  offer äº†</figcaption></figure><h2 id="spring-boot" tabindex="-1"><a class="header-anchor" href="#spring-boot"><span>Spring Boot</span></a></h2><h3 id="_33-ğŸŒŸä»‹ç»ä¸€ä¸‹-springboot" tabindex="-1"><a class="header-anchor" href="#_33-ğŸŒŸä»‹ç»ä¸€ä¸‹-springboot"><span>33.ğŸŒŸä»‹ç»ä¸€ä¸‹ SpringBootï¼Ÿ</span></a></h3><p>Spring Boot å¯ä»¥è¯´æ˜¯ Spring ç”Ÿæ€çš„ä¸€ä¸ªé‡å¤§çªç ´ï¼Œå®ƒæå¤§åœ°ç®€åŒ–äº† Spring åº”ç”¨çš„å¼€å‘å’Œéƒ¨ç½²è¿‡ç¨‹ã€‚</p><figure><img src="/blog/assets/img/spring-d9164ee6-5c86-4313-8fd9-efb9acfa5f0b.792a164f.png" alt="SpringBootå›¾æ ‡" tabindex="0" loading="lazy"><figcaption>SpringBootå›¾æ ‡</figcaption></figure><p>ä»¥å‰æˆ‘ä»¬ç”¨ Spring å¼€å‘é¡¹ç›®çš„æ—¶å€™ï¼Œéœ€è¦é…ç½®ä¸€å¤§å † XML æ–‡ä»¶ï¼ŒåŒ…æ‹¬ Bean çš„å®šä¹‰ã€æ•°æ®æºé…ç½®ã€äº‹åŠ¡é…ç½®ç­‰ç­‰ï¼Œéå¸¸ç¹çã€‚è€Œä¸”è¿˜è¦æ‰‹åŠ¨ç®¡ç†å„ç§ jar åŒ…çš„ä¾èµ–å…³ç³»ï¼Œå¾ˆå®¹æ˜“å‡ºç°ç‰ˆæœ¬å†²çªçš„é—®é¢˜ã€‚éƒ¨ç½²çš„æ—¶å€™è¿˜è¦å•ç‹¬æ­å»º Tomcat æœåŠ¡å™¨ï¼Œæ•´ä¸ªè¿‡ç¨‹å¾ˆå¤æ‚ã€‚Spring Boot å°±æ˜¯ä¸ºäº†è§£å†³è¿™äº›ç—›ç‚¹è€Œç”Ÿçš„ã€‚</p><p>â€œçº¦å®šå¤§äºé…ç½®â€æ˜¯ Spring Boot æœ€æ ¸å¿ƒçš„ç†å¿µã€‚å®ƒé¢„è®¾äº†å¾ˆå¤šé»˜è®¤é…ç½®ï¼Œæ¯”å¦‚é»˜è®¤ä½¿ç”¨å†…åµŒçš„ Tomcat æœåŠ¡å™¨ï¼Œé»˜è®¤çš„æ—¥å¿—æ¡†æ¶æ˜¯ Logback ç­‰ç­‰ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å¼€å‘è€…å°±åªéœ€è¦å…³æ³¨ä¸šåŠ¡é€»è¾‘ï¼Œä¸ç”¨å†çº ç»“äºå„ç§é…ç½®ç»†èŠ‚ã€‚</p><p>è‡ªåŠ¨è£…é…ä¹Ÿæ˜¯ Spring Boot çš„ä¸€å¤§ç‰¹è‰²ï¼Œå®ƒä¼šæ ¹æ®é¡¹ç›®ä¸­å¼•å…¥çš„ä¾èµ–è‡ªåŠ¨é…ç½®åˆé€‚çš„ Beanã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å¼•å…¥äº† Spring Data JPAï¼ŒSpring Boot å°±ä¼šè‡ªåŠ¨é…ç½®æ•°æ®æºï¼›æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å¼•å…¥äº† Spring Securityï¼ŒSpring Boot å°±ä¼šè‡ªåŠ¨é…ç½®å®‰å…¨ç›¸å…³çš„ Beanã€‚</p><p>Spring Boot è¿˜æä¾›äº†å¾ˆå¤šå¼€ç®±å³ç”¨çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ Actuator ç›‘æ§ã€DevTools å¼€å‘å·¥å…·ã€Spring Boot Starter ç­‰ç­‰ã€‚Actuator å¯ä»¥è®©æˆ‘ä»¬è½»æ¾ç›‘æ§åº”ç”¨çš„å¥åº·çŠ¶æ€ã€æ€§èƒ½æŒ‡æ ‡ç­‰ï¼›DevTools å¯ä»¥åŠ å¿«å¼€å‘æ•ˆç‡ï¼Œæ¯”å¦‚è‡ªåŠ¨é‡å¯ã€çƒ­éƒ¨ç½²ç­‰ï¼›Spring Boot Starter åˆ™æ˜¯ä¸€äº›é¢„é…ç½®å¥½çš„ä¾èµ–é›†åˆï¼Œè®©æˆ‘ä»¬å¯ä»¥å¿«é€Ÿå¼•å…¥æŸäº›å¸¸ç”¨çš„åŠŸèƒ½ã€‚</p><h4 id="spring-bootå¸¸ç”¨æ³¨è§£æœ‰å“ªäº›" tabindex="-1"><a class="header-anchor" href="#spring-bootå¸¸ç”¨æ³¨è§£æœ‰å“ªäº›"><span>Spring Bootå¸¸ç”¨æ³¨è§£æœ‰å“ªäº›ï¼Ÿ</span></a></h4><p>Spring Boot çš„æ³¨è§£å¾ˆå¤šï¼Œæˆ‘å°±æŒ‘ä¸¤ä¸ªè¯´ä¸€ä¸‹å§ã€‚</p><ul><li><code>@SpringBootApplication</code>ï¼šè¿™æ˜¯ Spring Boot çš„æ ¸å¿ƒæ³¨è§£ï¼Œå®ƒæ˜¯ä¸€ä¸ªç»„åˆæ³¨è§£ï¼ŒåŒ…å«äº† <code>@Configuration</code>ã€<code>@EnableAutoConfiguration</code> å’Œ <code>@ComponentScan</code>ã€‚å®ƒæ ‡å¿—ç€ä¸€ä¸ª Spring Boot åº”ç”¨çš„å…¥å£ã€‚</li><li><code>@SpringBootTest</code>ï¼šç”¨äºæµ‹è¯• Spring Boot åº”ç”¨çš„æ³¨è§£ï¼Œå®ƒä¼šåŠ è½½æ•´ä¸ª Spring ä¸Šä¸‹æ–‡ï¼Œé€‚åˆé›†æˆæµ‹è¯•ã€‚</li></ul><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„åä¸º OD é¢ç»ä¸­å‡ºç°è¿‡è¯¥é¢˜ï¼šè®²è®² Spring Boot çš„ç‰¹æ€§ã€‚</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç™¾åº¦é¢ç»åŒå­¦ 1 æ–‡å¿ƒä¸€è¨€ 25 å®ä¹  Java åç«¯é¢è¯•åŸé¢˜ï¼šSpringBootåŸºæœ¬åŸç†</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å›½ä¼é›¶ç¢é¢ç»åŒå­¦ 9 é¢è¯•åŸé¢˜ï¼šSpringbootåŸºäºSpringçš„é…ç½®æœ‰å“ªå‡ ç§</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„é˜¿é‡Œäº‘é¢ç»åŒå­¦ 22 é¢ç»ï¼šspringbootå¸¸ç”¨æ³¨è§£</li></ol></blockquote><p>memoï¼š2025 å¹´ 7 æœˆ 20 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åˆæœ‰<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">çƒå‹</a>å‘ç§ä¿¡è¯´ï¼Œåæ‚”æ²¡æœ‰æ—©ä¸€ç‚¹åŠ å…¥æ˜Ÿçƒï¼ŒåŠ å…¥æ˜Ÿçƒåï¼Œæ‰å‘ç°å¤§å®¶æ—©æ—©å°±ä¸ºè‡ªå·±çš„æœªæ¥å»æ‹¼æäº†ã€‚å¾ˆçœŸå®ï¼Œå¥½å§ï¼Œè¿™å°±æ˜¯æ˜Ÿçƒçš„ä»·å€¼æ‰€åœ¨ï¼Œ100 å¤šå—é’±çš„é—¨ç¥¨å°±èƒ½æä¾›å­¦æ ¡å‡ ä¸‡å­¦è´¹ç»™ä½ ä¸äº†çš„ä¸œè¥¿ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-ä»å­¦æ ¡åˆ°èŒåœºï¼Œä¸€èˆ¬éƒ½è¿™æ ·ï¼Œæ­£å¸¸çš„ï¼Œæƒ³å¹²äº†ï¼Œ.png" alt="çƒå‹å¯¹æ˜Ÿçƒçš„è®¤å¯" tabindex="0" loading="lazy"><figcaption>çƒå‹å¯¹æ˜Ÿçƒçš„è®¤å¯</figcaption></figure><h3 id="_34-ğŸŒŸspring-bootçš„è‡ªåŠ¨è£…é…åŸç†äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#_34-ğŸŒŸspring-bootçš„è‡ªåŠ¨è£…é…åŸç†äº†è§£å—"><span>34.ğŸŒŸSpring Bootçš„è‡ªåŠ¨è£…é…åŸç†äº†è§£å—ï¼Ÿ</span></a></h3><p>åœ¨ Spring Boot ä¸­ï¼Œå¼€å¯è‡ªåŠ¨è£…é…çš„æ³¨è§£æ˜¯<code>@EnableAutoConfiguration</code>ã€‚è¿™ä¸ªæ³¨è§£ä¼šå‘Šè¯‰ Spring å»æ‰«ææ‰€æœ‰å¯ç”¨çš„è‡ªåŠ¨é…ç½®ç±»ã€‚</p><figure><img src="/blog/assets/img/spring-20240316121711.5c7fe0f6.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼š@EnableAutoConfiguration æºç " tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼š@EnableAutoConfiguration æºç </figcaption></figure><p>Spring Boot ä¸ºäº†è¿›ä¸€æ­¥ç®€åŒ–ï¼ŒæŠŠè¿™ä¸ªæ³¨è§£åŒ…å«åˆ°äº† <code>@SpringBootApplication</code> æ³¨è§£ä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æˆ‘ä»¬åœ¨ä¸»ç±»ä¸Šä½¿ç”¨ <code>@SpringBootApplication</code> æ³¨è§£æ—¶ï¼Œå®é™…ä¸Šå°±å·²ç»å¼€å¯äº†è‡ªåŠ¨è£…é…ã€‚</p><p>å½“ main æ–¹æ³•è¿è¡Œçš„æ—¶å€™ï¼ŒSpring ä¼šå»ç±»è·¯å¾„ä¸‹æ‰¾ <code>spring.factories</code> è¿™ä¸ªæ–‡ä»¶ï¼Œè¯»å–é‡Œé¢é…ç½®çš„è‡ªåŠ¨é…ç½®ç±»åˆ—è¡¨ã€‚æ¯”å¦‚åœ¨æˆ‘ä»¬çš„<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾é¡¹ç›®</a>ä¸­ï¼Œpaicoding-core å’Œ paicoding-service æ¨¡å—é‡Œéƒ½æœ‰ spring.factoriesï¼Œåˆ†åˆ«æ³¨å†Œäº† ForumCoreAutoConfig å’Œ ServiceAutoConfigï¼Œè¿™ä¸¤ä¸ªé…ç½®ç±»å°±ä¼šåœ¨é¡¹ç›®å¯åŠ¨çš„æ—¶å€™è¢«è‡ªåŠ¨åŠ è½½ã€‚</p><figure><img src="https://cdn.tobebetterjavaer.com/stutymore/spring-20250726163615.png" alt="æŠ€æœ¯æ´¾æºç ï¼šspring.factories" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šspring.factories</figcaption></figure><p>ç„¶åæ¯ä¸ªè‡ªåŠ¨é…ç½®ç±»å†…éƒ¨ï¼Œé€šå¸¸ä¼šæœ‰ä¸€ä¸ª <code>@Configuration</code> æ³¨è§£ï¼ŒåŒæ—¶ç»“åˆå„ç§ <code>@Conditional</code> æ³¨è§£æ¥åšæ¡ä»¶æ§åˆ¶ã€‚åƒ<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a>çš„ RabbitMqAutoConfig ç±»ï¼Œå°±ç”¨äº† <code>@ConditionalOnProperty</code> æ³¨è§£æ¥åˆ¤æ–­é…ç½®æ–‡ä»¶é‡Œæœ‰æ²¡æœ‰å¼€å¯ rabbitmq.switchFlagï¼Œæ¥å†³å®šæ˜¯å¦åˆå§‹åŒ– RabbitMQ æ¶ˆè´¹çº¿ç¨‹ã€‚</p><figure><img src="/blog/assets/img/spring-20250726163759.bbd805e8.png" alt="æŠ€æœ¯æ´¾æºç ï¼šRabbitMqAutoConfig" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾æºç ï¼šRabbitMqAutoConfig</figcaption></figure><p>å¦å¤–ä¸€ä¸ªå¸¸è§çš„åœºæ™¯æ˜¯è‡ªåŠ¨æ³¨å…¥ Beanï¼Œæ¯”å¦‚<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a>çš„ ServiceAutoConfig ä¸­å°±ç”¨äº† <code>@ComponentScan</code> æ¥æ‰«æ service åŒ…ï¼Œ<code>@MapperScan</code> æ‰«æ MyBatis çš„ mapper æ¥å£ï¼Œå®ç°ä¸šåŠ¡å±‚å’Œ DAO å±‚çš„è‡ªåŠ¨è£…é…ã€‚</p><p>å…·ä½“çš„æ‰§è¡Œè¿‡ç¨‹å¯ä»¥æ€»ç»“ä¸ºï¼šSpring Boot é¡¹ç›®åœ¨å¯åŠ¨æ—¶åŠ è½½æ‰€æœ‰çš„è‡ªåŠ¨é…ç½®ç±»ï¼Œç„¶åé€ä¸ªæ£€æŸ¥å®ƒä»¬çš„ç”Ÿæ•ˆæ¡ä»¶ï¼Œå½“æ¡ä»¶æ»¡è¶³æ—¶å°±å®ä¾‹åŒ–å¹¶åˆ›å»ºç›¸åº”çš„ Beanã€‚</p><figure><img src="/blog/assets/img/spring-df77ee15-2ff0-4ec7-8e65-e4ebb8ba88f1.5a50a5e9.png" alt="ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring Bootçš„è‡ªåŠ¨è£…é…åŸç†" tabindex="0" loading="lazy"><figcaption>ä¸‰åˆ†æ¶é¢æ¸£é€†è¢­ï¼šSpring Bootçš„è‡ªåŠ¨è£…é…åŸç†</figcaption></figure><p>è‡ªåŠ¨è£…é…çš„æ‰§è¡Œæ—¶æœºæ˜¯åœ¨ Spring å®¹å™¨å¯åŠ¨çš„æ—¶å€™ã€‚å…·ä½“æ¥è¯´æ˜¯åœ¨ ConfigurationClassPostProcessor è¿™ä¸ª BeanPostProcessor ä¸­å¤„ç†çš„ï¼Œå®ƒä¼šè§£æ <code>@Configuration</code> ç±»ï¼ŒåŒ…æ‹¬é€šè¿‡ <code>@Import</code> å¯¼å…¥çš„è‡ªåŠ¨é…ç½®ç±»ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">protected</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> AutoConfigurationEntry</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getAutoConfigurationEntry</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">AnnotationMetadata</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> annotationMetadata) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // æ£€æŸ¥è‡ªåŠ¨é…ç½®æ˜¯å¦å¯ç”¨ã€‚å¦‚æœ@ConditionalOnClassç­‰æ¡ä»¶æ³¨è§£ä½¿å¾—è‡ªåŠ¨é…ç½®ä¸é€‚ç”¨äºå½“å‰ç¯å¢ƒï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºçš„é…ç½®æ¡ç›®ã€‚</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">isEnabled</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(annotationMetadata)) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> EMPTY_ENTRY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // è·å–å¯åŠ¨ç±»ä¸Šçš„@EnableAutoConfigurationæ³¨è§£çš„å±æ€§ï¼Œè¿™å¯èƒ½åŒ…æ‹¬å¯¹ç‰¹å®šè‡ªåŠ¨é…ç½®ç±»çš„æ’é™¤ã€‚</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    AnnotationAttributes</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> attributes </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getAttributes</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(annotationMetadata)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ä»spring.factoriesä¸­è·å–æ‰€æœ‰å€™é€‰çš„è‡ªåŠ¨é…ç½®ç±»ã€‚è¿™æ˜¯é€šè¿‡åŠ è½½META-INF/spring.factoriesæ–‡ä»¶ä¸­å¯¹åº”çš„æ¡ç›®æ¥å®ç°çš„ã€‚</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    List</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> configurations </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getCandidateConfigurations</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(annotationMetadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> attributes)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ç§»é™¤é…ç½®åˆ—è¡¨ä¸­çš„é‡å¤é¡¹ï¼Œç¡®ä¿æ¯ä¸ªè‡ªåŠ¨é…ç½®ç±»åªè¢«è€ƒè™‘ä¸€æ¬¡ã€‚</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    configurations </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> removeDuplicates</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(configurations)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // æ ¹æ®æ³¨è§£å±æ€§è§£æå‡ºéœ€è¦æ’é™¤çš„è‡ªåŠ¨é…ç½®ç±»ã€‚</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    Set</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> exclusions </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getExclusions</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(annotationMetadata</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> attributes)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // æ£€æŸ¥æ’é™¤çš„ç±»æ˜¯å¦å­˜åœ¨äºå€™é€‰é…ç½®ä¸­ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    checkExcludedClasses</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(configurations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> exclusions)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ä»å€™é€‰é…ç½®ä¸­ç§»é™¤æ’é™¤çš„ç±»ã€‚</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    configurations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">removeAll</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(exclusions);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // åº”ç”¨è¿‡æ»¤å™¨è¿›ä¸€æ­¥ç­›é€‰è‡ªåŠ¨é…ç½®ç±»ã€‚è¿‡æ»¤å™¨å¯èƒ½åŸºäºæ¡ä»¶æ³¨è§£å¦‚@ConditionalOnBeanç­‰æ¥æ’é™¤ç‰¹å®šçš„é…ç½®ç±»ã€‚</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    configurations </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getConfigurationClassFilter</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">filter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(configurations);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // è§¦å‘è‡ªåŠ¨é…ç½®å¯¼å…¥äº‹ä»¶ï¼Œå…è®¸ç›‘å¬å™¨å¯¹è‡ªåŠ¨é…ç½®è¿‡ç¨‹è¿›è¡Œå¹²é¢„ã€‚</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    fireAutoConfigurationImportEvents</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(configurations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> exclusions)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªåŒ…å«æœ€ç»ˆç¡®å®šçš„è‡ªåŠ¨é…ç½®ç±»å’Œæ’é™¤çš„é…ç½®ç±»çš„AutoConfigurationEntryå¯¹è±¡ã€‚</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> AutoConfigurationEntry</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(configurations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> exclusions)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ»´æ»´åŒå­¦ 2 æŠ€æœ¯äºŒé¢çš„åŸé¢˜ï¼šSpringBoot å¯åŠ¨æ—¶ä¸ºä»€ä¹ˆèƒ½å¤Ÿè‡ªåŠ¨è£…é…</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯é¢ç»åŒå­¦ 22 æš‘æœŸå®ä¹ ä¸€é¢é¢è¯•åŸé¢˜ï¼šSpring Boot å¦‚ä½•åšåˆ°å¯åŠ¨çš„æ—¶å€™æ³¨å…¥ä¸€äº› bean</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ¯”äºšè¿ªé¢ç»åŒå­¦ 3 Java æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šè¯´ä¸€ä¸‹ Spring Boot çš„è‡ªåŠ¨è£…é…åŸç†</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å†œä¸šé“¶è¡ŒåŒå­¦ 1 é¢è¯•åŸé¢˜ï¼šspring boot çš„è‡ªåŠ¨è£…é…</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç™¾åº¦é¢ç»åŒå­¦ 1 æ–‡å¿ƒä¸€è¨€ 25 å®ä¹  Java åç«¯é¢è¯•åŸé¢˜ï¼šSpringBootå¦‚ä½•å®ç°è‡ªåŠ¨è£…é…</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ OPPO é¢ç»åŒå­¦ 1 é¢è¯•åŸé¢˜ï¼šè‡ªåŠ¨é…ç½®æ€ä¹ˆå®ç°çš„ï¼Ÿ</li></ol></blockquote><p>memoï¼š2025 å¹´ 7 æœˆ 21 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©æœ‰<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">çƒå‹</a>å‘ç§ä¿¡è¯´ï¼Œæ‹¿åˆ°äº†äºšä¿¡ç§‘æŠ€+æ–°çŸ³å™¨æ— äººè½¦çš„ offerï¼Œé—®æˆ‘è¯¥å¦‚ä½•é€‰æ‹©ï¼Œå¦‚æœæ˜¯ä½ ï¼Œä½ ä¼šå¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿ</p><figure><img src="/blog/assets/img/spring-20250726164552.7a8366d3.png" alt="äºšä¿¡ç§‘æŠ€+æ–°çŸ³å™¨æ— äººè½¦çš„ offer" tabindex="0" loading="lazy"><figcaption>äºšä¿¡ç§‘æŠ€+æ–°çŸ³å™¨æ— äººè½¦çš„ offer</figcaption></figure><h3 id="_35-ğŸŒŸå¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ª-springboot-starter" tabindex="-1"><a class="header-anchor" href="#_35-ğŸŒŸå¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ª-springboot-starter"><span>35.ğŸŒŸå¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ª SpringBoot Starter?</span></a></h3><p>ç¬¬ä¸€æ­¥ï¼ŒSpringBoot å®˜æ–¹å»ºè®®ç¬¬ä¸‰æ–¹ starter çš„å‘½åæ ¼å¼æ˜¯ xxx-spring-boot-starterï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªåä¸º <code>my-spring-boot-starter</code> çš„é¡¹ç›®ï¼Œä¸€å…±åŒ…æ‹¬ä¸¤ä¸ªæ¨¡å—ï¼Œä¸€ä¸ªæ˜¯ autoconfigure æ¨¡å—ï¼ŒåŒ…å«è‡ªåŠ¨é…ç½®é€»è¾‘ï¼›ä¸€ä¸ªæ˜¯ starter æ¨¡å—ï¼ŒåªåŒ…å«ä¾èµ–å£°æ˜ã€‚</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">properties</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spring.boot.version</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;2.3.1.RELEASE&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">spring.boot.version</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">properties</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependencies</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;spring-boot-autoconfigure&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;${spring.boot.version}&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">groupId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;spring-boot-starter&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">artifactId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;${spring.boot.version}&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependency</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">dependencies</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒæ­¥ï¼Œåˆ›å»ºä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»ï¼Œé€šå¸¸åœ¨ autoconfigure åŒ…ä¸‹ï¼Œè¯¥ç±»çš„ä½œç”¨æ˜¯æ ¹æ®é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§æ¥åˆ›å»ºå’Œé…ç½® Beanã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">EnableConfigurationProperties</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">MyStarterProperties</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MyServiceAutoConfiguration</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Bean</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">ConditionalOnMissingBean</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MyService</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> myService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">MyStarterProperties</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> properties</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> MyService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">properties</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getMessage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬ä¸‰æ­¥ï¼Œåˆ›å»ºä¸€ä¸ªé…ç½®å±æ€§ç±»ï¼Œç”¨äºè¯»å–é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§ã€‚é€šå¸¸ä½¿ç”¨ <code>@ConfigurationProperties</code> æ³¨è§£æ¥æ ‡è®°è¿™ä¸ªç±»ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">ConfigurationProperties</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">prefix</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;mystarter&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MyStarterProperties</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> message </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ä¸é”™å•Š!&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getMessage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> message;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> setMessage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> message</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">message</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> message;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬å››æ­¥ï¼Œåˆ›å»ºä¸€ä¸ªç®€å•çš„æœåŠ¡ç±»ï¼Œç”¨äºæä¾›ä¸šåŠ¡é€»è¾‘ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MyService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> message</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> MyService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> message</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">message</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> message;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getMessage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> message;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äº”æ­¥ï¼Œåœ¨ <code>src/main/resources/META-INF</code> ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º spring.factories æ–‡ä»¶ï¼Œå‘Šè¯‰ SpringBoot åœ¨å¯åŠ¨æ—¶è¦åŠ è½½æˆ‘ä»¬çš„è‡ªåŠ¨é…ç½®ç±»ã€‚</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>org.springframework.boot.autoconfigure.EnableAutoConfiguration=\</span></span>
<span class="line"><span>com.itwanger.mystarter.autoconfigure.MyServiceAutoConfiguration</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬å…­æ­¥ï¼Œä½¿ç”¨ Maven æ‰“åŒ…è¿™ä¸ªé¡¹ç›®ã€‚</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mvn</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> clean</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç¬¬ä¸ƒæ­¥ï¼Œåœ¨å…¶ä»–çš„ Spring Boot é¡¹ç›®ä¸­ï¼Œé€šè¿‡ Maven æ¥æ·»åŠ è¿™ä¸ªè‡ªå®šä¹‰çš„ Starter ä¾èµ–ï¼Œå¹¶é€šè¿‡ application.properties é…ç½®ä¿¡æ¯ï¼š</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">mystarter.message=javabetter.cn</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç„¶åå°±å¯ä»¥åœ¨ Spring Boot é¡¹ç›®ä¸­æ³¨å…¥ MyStarterProperties æ¥ä½¿ç”¨å®ƒã€‚</p><figure><img src="/blog/assets/img/spring-20240409114642.a13b61aa.png" alt="MyStarterProperties æ³¨å…¥ç¤ºä¾‹" tabindex="0" loading="lazy"><figcaption>MyStarterProperties æ³¨å…¥ç¤ºä¾‹</figcaption></figure><p>å¯åŠ¨é¡¹ç›®ï¼Œç„¶ååœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>localhost:8081/hello</code>ï¼Œå°±å¯ä»¥çœ‹åˆ°è¿”å›çš„å†…å®¹æ˜¯ <code>javabetter.cn</code>ï¼Œè¯´æ˜æˆ‘ä»¬çš„è‡ªå®šä¹‰ Starter å·²ç»æˆåŠŸå·¥ä½œäº†ã€‚</p><figure><img src="/blog/assets/img/spring-20240409114610.42fedf7f.png" alt="äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šè‡ªå®šä¹‰ Spring Boot Stater" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯ï¼šè‡ªå®šä¹‰ Spring Boot Stater</figcaption></figure><h4 id="spring-boot-starter-çš„åŸç†äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#spring-boot-starter-çš„åŸç†äº†è§£å—"><span>Spring Boot Starter çš„åŸç†äº†è§£å—ï¼Ÿ</span></a></h4><p>Starter çš„æ ¸å¿ƒæ€æƒ³æ˜¯æŠŠç›¸å…³çš„ä¾èµ–æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œè®©å¼€å‘è€…åªéœ€è¦å¼•å…¥ä¸€ä¸ª starter ä¾èµ–ï¼Œå°±èƒ½è·å¾—å®Œæ•´çš„åŠŸèƒ½æ¨¡å—ã€‚</p><p>å½“æˆ‘ä»¬åœ¨ pom.xml ä¸­å¼•å…¥ä¸€ä¸ª starter æ—¶ï¼ŒMaven å°±ä¼šè‡ªåŠ¨è§£æè¿™ä¸ª starter çš„ä¾èµ–æ ‘ï¼ŒæŠŠæ‰€æœ‰éœ€è¦çš„ jar åŒ…éƒ½ä¸‹è½½ä¸‹æ¥ã€‚</p><p>æ¯ä¸ª starter éƒ½ä¼šåŒ…å«å¯¹åº”çš„è‡ªåŠ¨é…ç½®ç±»ï¼Œè¿™äº›é…ç½®ç±»é€šè¿‡æ¡ä»¶æ³¨è§£æ¥åˆ¤æ–­æ˜¯å¦åº”è¯¥ç”Ÿæ•ˆã€‚æ¯”å¦‚å½“æˆ‘ä»¬å¼•å…¥äº† <code>spring-boot-starter-web</code>ï¼Œå®ƒä¼šè‡ªåŠ¨é…ç½® Spring MVCã€å†…åµŒçš„ Tomcat æœåŠ¡å™¨ç­‰ã€‚</p><p>spring.factories æ–‡ä»¶æ˜¯ Spring Boot è‡ªåŠ¨è£…é…çš„æ ¸å¿ƒï¼Œå®ƒä½äºæ¯ä¸ª starter çš„ <code>META-INF</code> ç›®å½•ä¸‹ã€‚è¿™ä¸ªæ–‡ä»¶åˆ—å‡ºäº†æ‰€æœ‰çš„è‡ªåŠ¨é…ç½®ç±»ï¼ŒSpring Boot åœ¨å¯åŠ¨æ—¶ä¼šè¯»å–è¿™ä¸ªæ–‡ä»¶ï¼ŒåŠ è½½å¯¹åº”çš„é…ç½®ç±»ã€‚</p><div class="language-properties line-numbers-mode" data-highlighter="shiki" data-ext="properties" data-title="properties" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">org.springframework.boot.autoconfigure.EnableAutoConfiguration</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">com.example.demo.autoconfigure.DemoAutoConfiguration,\</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">com.example.demo.autoconfigure.AnotherAutoConfiguration</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å­—èŠ‚è·³åŠ¨é¢ç»åŒå­¦ 1 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šä½ å°è£…è¿‡ springboot starter å—ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯äº‘æ™ºé¢ç»åŒå­¦ 20 äºŒé¢é¢è¯•åŸé¢˜ï¼šSpring Boot Starter çš„åŸç†äº†è§£å—ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¿«æ‰‹åŒå­¦ 4 ä¸€é¢åŸé¢˜ï¼šä¸ºä»€ä¹ˆä½¿ç”¨SpringBootï¼ŸSpringBootè‡ªåŠ¨è£…é…çš„åŸç†åŠæµç¨‹ï¼Ÿ@Importçš„ä½œç”¨ï¼Ÿå¦‚æœæƒ³è®©SpringBootå¯¹è‡ªå®šä¹‰çš„jaråŒ…è¿›è¡Œè‡ªåŠ¨é…ç½®çš„è¯ï¼Œéœ€è¦æ€ä¹ˆåšï¼Ÿ</li></ol></blockquote><p>memoï¼š2025 å¹´ 7 æœˆ 22 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©æœ‰<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">çƒå‹</a>åœ¨ VIP ç¾¤é‡ŒèŠå¤©ï¼Œå‘ç°ä¸¤ä¸ªäººéƒ½åœ¨å°çº¢ä¹¦ï¼Œæœ‰ç¼˜åˆ†çš„å¾ˆï¼Œé‚£èƒ½å»å°çº¢ä¹¦å®ä¹ ï¼ŒåŸºæœ¬ä¸Šç§‹æ‹›å°±ç®—æ˜¯ç¨³å¦‚è€ç‹—äº†ğŸ˜„ï¼Œè¿™å®¶ç‹¬è§’å…½çš„å®ä¹ å«é‡‘é‡è¿˜æ˜¯éå¸¸é«˜çš„ã€‚</p><figure><img src="/blog/assets/img/spring-20250727165400.fe9384b5.png" alt="åœ¨å°çº¢ä¹¦å®ä¹ çš„çƒå‹çœŸä¸å°‘" tabindex="0" loading="lazy"><figcaption>åœ¨å°çº¢ä¹¦å®ä¹ çš„çƒå‹çœŸä¸å°‘</figcaption></figure><h3 id="_36-ğŸŒŸspring-boot-å¯åŠ¨åŸç†äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#_36-ğŸŒŸspring-boot-å¯åŠ¨åŸç†äº†è§£å—"><span>36.ğŸŒŸSpring Boot å¯åŠ¨åŸç†äº†è§£å—ï¼Ÿ</span></a></h3><p>Spring Boot çš„å¯åŠ¨ä¸»è¦å›´ç»•ä¸¤ä¸ªæ ¸å¿ƒå±•å¼€ï¼Œä¸€ä¸ªæ˜¯ <code>@SpringBootApplication</code> æ³¨è§£ï¼Œä¸€ä¸ªæ˜¯ <code>SpringApplication.run()</code> æ–¹æ³•ã€‚</p><figure><img src="/blog/assets/img/spring-68744556-a1ba-4e1f-a092-1582875f0da6.4ed4b2a0.png" alt="SpringBoot å¯åŠ¨å¤§è‡´æµç¨‹-å›¾ç‰‡æ¥æºç½‘ç»œ" tabindex="0" loading="lazy"><figcaption>SpringBoot å¯åŠ¨å¤§è‡´æµç¨‹-å›¾ç‰‡æ¥æºç½‘ç»œ</figcaption></figure><p>æˆ‘å…ˆè¯´ä¸€ä¸‹ <code>@SpringBootApplication</code> æ³¨è§£ï¼Œå®ƒæ˜¯ä¸€ä¸ªç»„åˆæ³¨è§£ï¼ŒåŒ…å«äº† <code>@SpringBootConfiguration</code>ã€<code>@EnableAutoConfiguration</code> å’Œ <code>@ComponentScan</code>ï¼Œè¿™ä¸‰ä¸ªæ³¨è§£çš„ä½œç”¨åˆ†åˆ«æ˜¯ï¼š</p><ul><li><code>@SpringBootConfiguration</code>ï¼šæ ‡è®°è¿™ä¸ªç±»æ˜¯ä¸€ä¸ª Spring Boot é…ç½®ç±»ï¼Œç›¸å½“äºä¸€ä¸ª Spring é…ç½®æ–‡ä»¶ã€‚</li><li><code>@EnableAutoConfiguration</code>ï¼šå‘Šè¯‰ Spring Boot å¯ä»¥è¿›è¡Œè‡ªåŠ¨é…ç½®ã€‚æ¯”å¦‚è¯´ï¼Œé¡¹ç›®å¼•å…¥äº† Spring MVC çš„ä¾èµ–ï¼Œé‚£ä¹ˆ Spring Boot å°±ä¼šè‡ªåŠ¨é…ç½® DispatcherServletã€HandlerMapping ç­‰ç»„ä»¶ã€‚</li><li><code>@ComponentScan</code>ï¼šæ‰«æå½“å‰åŒ…åŠå…¶å­åŒ…ä¸‹çš„ç»„ä»¶ï¼Œæ³¨å†Œä¸º Beanã€‚</li></ul><figure><img src="/blog/assets/img/spring-20250810182536.1aa274cc.png" alt="æ´¾èªæ˜æºç ï¼šå¯åŠ¨ç±»" tabindex="0" loading="lazy"><figcaption>æ´¾èªæ˜æºç ï¼šå¯åŠ¨ç±»</figcaption></figure><p>å¥½ï¼Œæ¥ä¸‹æ¥æˆ‘å†è¯´ä¸€ä¸‹ <code>SpringApplication.run()</code> æ–¹æ³•ï¼Œå®ƒæ˜¯ Spring Boot é¡¹ç›®çš„å¯åŠ¨å…¥å£ï¼Œå†…éƒ¨æµç¨‹å¤§è‡´å¯ä»¥åˆ†ä¸º 5 ä¸ªæ­¥éª¤ï¼š</p><p>â‘ ã€åˆ›å»º SpringApplication å®ä¾‹ï¼Œå¹¶è¯†åˆ«åº”ç”¨ç±»å‹ï¼Œæ¯”å¦‚è¯´æ˜¯æ ‡å‡†çš„ Servlet Web è¿˜æ˜¯å“åº”å¼çš„ WebFluxï¼Œç„¶åå‡†å¤‡ç›‘å¬å™¨å’Œåˆå§‹åŒ–ç›‘å¬å®¹å™¨ã€‚</p><p>â‘¡ã€åˆ›å»ºå¹¶å‡†å¤‡ ApplicationContextï¼Œå°†ä¸»ç±»ä½œä¸ºé…ç½®æºè¿›è¡ŒåŠ è½½ã€‚</p><p>â‘¢ã€åˆ·æ–° Spring ä¸Šä¸‹æ–‡ï¼Œè§¦å‘ Bean çš„å®ä¾‹åŒ–ï¼Œæ¯”å¦‚è¯´æ‰«æå¹¶æ³¨å†Œ <code>@ComponentScan</code> æŒ‡å®šè·¯å¾„ä¸‹çš„ Beanã€‚</p><p>â‘£ã€è§¦å‘è‡ªåŠ¨é…ç½®ï¼Œåœ¨ Spring Boot 2.7 åŠä¹‹å‰æ˜¯é€šè¿‡ spring.factories åŠ è½½çš„ï¼Œ3.x æ˜¯é€šè¿‡è¯»å– <code>AutoConfiguration.imports</code>ï¼Œå¹¶ç»“åˆ <code>@ConditionalOn</code> ç³»åˆ—æ³¨è§£ä¾æ®æ¡ä»¶æ³¨å†Œ Beanã€‚</p><p>â‘¤ã€å¦‚æœå¼•å…¥äº† Web ç›¸å…³ä¾èµ–ï¼Œä¼šåˆ›å»ºå¹¶å¯åŠ¨ Tomcat å®¹å™¨ï¼Œå®Œæˆ HTTP ç«¯å£ç›‘å¬ã€‚</p><p>å…³é”®çš„ä»£ç é€»è¾‘å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ConfigurableApplicationContext</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> run</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> args</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // 1. åˆ›å»ºå¯åŠ¨æ—¶çš„ç›‘å¬å™¨å¹¶è§¦å‘å¯åŠ¨äº‹ä»¶</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    SpringApplicationRunListeners</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> listeners </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getRunListeners</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(args)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    listeners</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">starting</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // 2. å‡†å¤‡è¿è¡Œç¯å¢ƒ</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    ConfigurableEnvironment</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> environment </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> prepareEnvironment</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(listeners)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    configureIgnoreBeanInfo</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(environment)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // 3. åˆ›å»ºä¸Šä¸‹æ–‡</span></span>
<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    ConfigurableApplicationContext</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> context </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createApplicationContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    try</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // 4. å‡†å¤‡ä¸Šä¸‹æ–‡</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        prepareContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> environment</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> listeners</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> args)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // 5. åˆ·æ–°ä¸Šä¸‹æ–‡ï¼Œå®Œæˆ Bean åˆå§‹åŒ–å’Œè£…é…</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        refreshContext</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(context)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // 6. è°ƒç”¨è¿è¡Œå™¨</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        afterRefresh</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> args)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // 7. è§¦å‘å¯åŠ¨å®Œæˆäº‹ä»¶</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        listeners</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">started</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(context);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> ex</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        handleRunFailure</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> ex</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> listeners)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä¸ºä»€ä¹ˆ-spring-boot-åœ¨å¯åŠ¨çš„æ—¶å€™èƒ½å¤Ÿæ‰¾åˆ°-main-æ–¹æ³•ä¸Šçš„-springbootapplication-æ³¨è§£" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆ-spring-boot-åœ¨å¯åŠ¨çš„æ—¶å€™èƒ½å¤Ÿæ‰¾åˆ°-main-æ–¹æ³•ä¸Šçš„-springbootapplication-æ³¨è§£"><span>ä¸ºä»€ä¹ˆ Spring Boot åœ¨å¯åŠ¨çš„æ—¶å€™èƒ½å¤Ÿæ‰¾åˆ° main æ–¹æ³•ä¸Šçš„@SpringBootApplication æ³¨è§£ï¼Ÿ</span></a></h4><p>å…¶å® Spring Boot å¹¶ä¸æ˜¯è‡ªå·±æ‰¾åˆ° <code>@SpringBootApplication</code> æ³¨è§£çš„ï¼Œè€Œæ˜¯æˆ‘ä»¬é€šè¿‡ç¨‹åºå‘Šè¯‰å®ƒçš„ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">SpringBootApplication</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MyApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        SpringApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">MyApplication</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, args);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬æŠŠ <code>Application.class</code> ä½œä¸ºå‚æ•°ä¼ ç»™äº† run æ–¹æ³•ã€‚è¿™ä¸ª Application ç±»æ ‡æ³¨äº† <code>@SpringBootApplication</code> æ³¨è§£ï¼Œç”¨æ¥å‘Šè¯‰ Spring Bootï¼šè¯·ç”¨è¿™ä¸ªç±»ä½œä¸ºé…ç½®ç±»æ¥å¯åŠ¨ã€‚</p><p>ç„¶åï¼ŒSpringApplication åœ¨è¿è¡Œæ—¶å°±ä¼šæŠŠè¿™ä¸ªç±»æ³¨å†Œåˆ° Spring å®¹å™¨ä¸­ã€‚</p><h4 id="spring-boot-é»˜è®¤çš„åŒ…æ‰«æè·¯å¾„æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#spring-boot-é»˜è®¤çš„åŒ…æ‰«æè·¯å¾„æ˜¯ä»€ä¹ˆ"><span>Spring Boot é»˜è®¤çš„åŒ…æ‰«æè·¯å¾„æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></h4><p>Spring Boot é»˜è®¤çš„åŒ…æ‰«æè·¯å¾„æ˜¯ä¸»ç±»æ‰€åœ¨çš„åŒ…åŠå…¶å­åŒ…ã€‚</p><p>æ¯”å¦‚è¯´åœ¨<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾å®æˆ˜é¡¹ç›®</a>ä¸­ï¼Œå¯åŠ¨ç±»<code>QuickForumApplication</code>æ‰€åœ¨çš„åŒ…æ˜¯<code>com.github.paicoding.forum.web</code>ï¼Œé‚£ä¹ˆ Spring Boot é»˜è®¤ä¼šæ‰«æ<code>com.github.paicoding.forum.web</code>åŒ…åŠå…¶å­åŒ…ä¸‹çš„æ‰€æœ‰ç»„ä»¶ã€‚</p><figure><img src="/blog/assets/img/spring-20240327105552.583849b3.png" alt="æ²‰é»˜ç‹äºŒï¼šæŠ€æœ¯æ´¾é¡¹ç›®æˆªå›¾" tabindex="0" loading="lazy"><figcaption>æ²‰é»˜ç‹äºŒï¼šæŠ€æœ¯æ´¾é¡¹ç›®æˆªå›¾</figcaption></figure><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ»´æ»´åŒå­¦ 2 æŠ€æœ¯äºŒé¢çš„åŸé¢˜ï¼šä¸ºä»€ä¹ˆ Spring Boot å¯åŠ¨æ—¶èƒ½æ‰¾åˆ° Main ç±»ä¸Šé¢çš„æ³¨è§£</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„è…¾è®¯é¢ç»åŒå­¦ 22 æš‘æœŸå®ä¹ ä¸€é¢é¢è¯•åŸé¢˜ï¼šSpring Boot é»˜è®¤çš„åŒ…æ‰«æè·¯å¾„ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¾®ä¼—é“¶è¡ŒåŒå­¦ 1 Java åç«¯ä¸€é¢çš„åŸé¢˜ï¼š@SpringBootApplication æ³¨è§£äº†è§£å—ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å›½ä¼é›¶ç¢é¢ç»åŒå­¦ 9 é¢è¯•åŸé¢˜ï¼šSpringbootçš„å·¥ä½œåŸç†ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œé¢ç»åŒå­¦ 5 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šSpringBootå¯åŠ¨æµç¨‹ï¼ˆå¿˜äº†ï¼‰</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å“”å“©å“”å“©åŒå­¦ 1 äºŒé¢é¢è¯•åŸé¢˜ï¼šspringBootå¯åŠ¨æœºåˆ¶ï¼Œå¯åŠ¨ä¹‹ååšäº†å“ªäº›æ­¥éª¤</li></ol></blockquote><p>memoï¼š2025 å¹´ 8 æœˆ 10 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©åœ¨<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">ä¿®æ”¹çƒå‹ç®€å†</a>çš„æ—¶å€™ï¼Œå¾ˆæ„ŸåŠ¨ï¼Œå› ä¸ºæœ‰çƒå‹è¯´ï¼Œä»–ç»™å‘¨å›´å¾ˆå¤šäººå®‰åˆ©äº†äºŒå“¥çš„ç¼–ç¨‹æ˜Ÿçƒï¼Œå¹¶ä¸”åå‘å¾ˆä¸é”™ã€‚çœŸçš„å¾ˆæ„Ÿè°¢ï¼Œçƒå‹ä»¬çš„å£ç¢‘ï¼Œæ²¡æœ‰å¤§å®¶ï¼ŒçœŸèµ°ä¸åˆ°ç°åœ¨ã€‚</p><figure><img src="/blog/assets/img/spring-20250810185253.3a4ffcfb.png" alt="æ„Ÿè°¢çƒå‹å¯¹æ˜Ÿçƒçš„å£ç¢‘" tabindex="0" loading="lazy"><figcaption>æ„Ÿè°¢çƒå‹å¯¹æ˜Ÿçƒçš„å£ç¢‘</figcaption></figure><h3 id="_37-è¯´ä¸€ä¸‹-springboot-å’Œ-springmvc-çš„åŒºåˆ«-è¡¥å……" tabindex="-1"><a class="header-anchor" href="#_37-è¯´ä¸€ä¸‹-springboot-å’Œ-springmvc-çš„åŒºåˆ«-è¡¥å……"><span>37.è¯´ä¸€ä¸‹ SpringBoot å’Œ SpringMVC çš„åŒºåˆ«ï¼Ÿï¼ˆè¡¥å……ï¼‰</span></a></h3><blockquote><p>2024 å¹´ 04 æœˆ 04 æ—¥å¢è¡¥</p></blockquote><p>SpringMVC æ˜¯ Spring çš„ä¸€ä¸ªæ¨¡å—ï¼Œä¸“é—¨ç”¨æ¥åš Web å¼€å‘ï¼Œå¤„ç† HTTP è¯·æ±‚å’Œå“åº”ã€‚è€ŒSpring Boot çš„ç›®æ ‡æ˜¯ç®€åŒ– Spring åº”ç”¨çš„å¼€å‘è¿‡ç¨‹ï¼Œå¯ä»¥é€šè¿‡ starter çš„æ–¹å¼å¿«é€Ÿé›†æˆ SpringMVCã€‚</p><p>ä¼ ç»Ÿçš„ Web é¡¹ç›®é€šå¸¸éœ€è¦æ‰‹åŠ¨é…ç½®å¾ˆå¤šä¸œè¥¿ï¼Œæ¯”å¦‚ DispatcherServletã€ViewResolverã€HandlerMapping ç­‰ç­‰ã€‚è€Œ Spring Boot åˆ™é€šè¿‡è‡ªåŠ¨è£…é…çš„æ–¹å¼ï¼Œå¸®æˆ‘ä»¬çœå»äº†è¿™äº›ç¹ççš„é…ç½®ã€‚</p><p>Spring Boot è¿˜å†…ç½®äº†ä¸€ä¸ªåµŒå…¥å¼çš„ Servlet å®¹å™¨ï¼Œæ¯”å¦‚ Tomcatï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸éœ€è¦åƒä¼ ç»Ÿçš„ Web é¡¹ç›®é‚£æ ·éœ€è¦é…ç½® Tomcat å®¹å™¨ï¼Œç„¶åå¯¼å‡º war åŒ…å†è¿è¡Œã€‚åªéœ€è¦æ‰“åŒ…æˆä¸€ä¸ª JAR æ–‡ä»¶ï¼Œå°±å¯ä»¥ç›´æ¥é€šè¿‡ <code>java -jar</code> å‘½ä»¤è¿è¡Œã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ»´æ»´åŒå­¦ 2 æŠ€æœ¯äºŒé¢çš„åŸé¢˜ï¼šSpringBoot å’Œ SpringMVC çš„åŒºåˆ«</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„äº¬ä¸œé¢ç»åŒå­¦ 5 Java åç«¯æŠ€æœ¯ä¸€é¢é¢è¯•åŸé¢˜ï¼šSpringBootä¸SpringMVCåŒºåˆ«</li></ol></blockquote><h3 id="_38-spring-boot-å’Œ-spring-æœ‰ä»€ä¹ˆåŒºåˆ«-è¡¥å……" tabindex="-1"><a class="header-anchor" href="#_38-spring-boot-å’Œ-spring-æœ‰ä»€ä¹ˆåŒºåˆ«-è¡¥å……"><span>38.Spring Boot å’Œ Spring æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿï¼ˆè¡¥å……ï¼‰</span></a></h3><blockquote><p>2024 å¹´ 07 æœˆ 09 æ—¥æ–°å¢</p></blockquote><p>ä»å®šä½ä¸Šæ¥è¯´ï¼ŒSpring æ˜¯ä¸€ä¸ªå®Œæ•´çš„åº”ç”¨å¼€å‘æ¡†æ¶ï¼Œæä¾›äº† IoC å®¹å™¨ã€AOP ç­‰å„ç§åŠŸèƒ½æ¨¡å—ã€‚Spring Boot ä¸æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ¡†æ¶ï¼Œè€Œæ˜¯åŸºäº Spring æ¡†æ¶çš„è„šæ‰‹æ¶ï¼Œå®ƒçš„ç›®æ ‡æ˜¯è®© Spring åº”ç”¨çš„å¼€å‘å’Œéƒ¨ç½²å˜å¾—ç®€å•é«˜æ•ˆã€‚</p><p>Spring é¡¹ç›®éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨ç®¡ç†æ¯ä¸ª jar åŒ…çš„ç‰ˆæœ¬ï¼Œç»å¸¸ä¼šé‡åˆ°ç‰ˆæœ¬å†²çªçš„é—®é¢˜ã€‚æ¯”å¦‚æˆ‘ä»¬è¦ç”¨ Spring MVCï¼Œéœ€è¦å¼•å…¥ spring-webmvcã€jackson-databindã€hibernate-validator ç­‰ä¸€å †ä¾èµ–ï¼Œè¿˜è¦ç¡®ä¿ç‰ˆæœ¬å…¼å®¹ã€‚Spring Boot é€šè¿‡ starter æœºåˆ¶è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œåªéœ€è¦å¼•å…¥ spring-boot-starter-web è¿™ä¸€ä¸ªä¾èµ–å°±å¯ä»¥äº†ï¼Œå®ƒåŒ…å«äº†æ‰€æœ‰ç›¸å…³çš„ jar åŒ…ï¼Œè€Œä¸”ç‰ˆæœ¬éƒ½æ˜¯æµ‹è¯•è¿‡çš„ï¼Œå¯ä»¥å…¼å®¹çš„ã€‚</p><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å°ç±³åŒå­¦ F é¢è¯•åŸé¢˜ï¼šSpring Boot å’Œ Spring çš„åŒºåˆ«</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ OPPO é¢ç»åŒå­¦ 1 é¢è¯•åŸé¢˜ï¼šè¯´ä¸€ä¸‹Springå’ŒSpringbootä¹‹é—´æœ‰ä»€ä¹ˆå·®å¼‚ï¼Ÿ</li></ol></blockquote><p>memoï¼š2025 å¹´ 8 æœˆ 11 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©æœ‰<a href="https://javabetter.cn/zhishixingqiu/" target="_blank" rel="noopener noreferrer">çƒå‹</a>åœ¨ VIP ç¾¤é‡Œäº¤æµè¯´ï¼Œç”¨äºŒå“¥çš„é¡¹ç›®ï¼Œè½»æ¾è¿‡å¤§å‚çš„ç®€å†åˆç­›ï¼ŒåŒ…æ‹¬å°ç±³å’Œç¾å›¢ã€‚</p><figure><img src="/blog/assets/img/spring-20250811113549.b1327d57.png" alt="äºŒå“¥æ˜Ÿçƒçš„é¡¹ç›®ï¼Œè½»æ¾è¿‡ç®€å†åˆç­›" tabindex="0" loading="lazy"><figcaption>äºŒå“¥æ˜Ÿçƒçš„é¡¹ç›®ï¼Œè½»æ¾è¿‡ç®€å†åˆç­›</figcaption></figure><h2 id="spring-cloud" tabindex="-1"><a class="header-anchor" href="#spring-cloud"><span>Spring Cloud</span></a></h2><h3 id="_39-å¯¹-springcloud-äº†è§£å¤šå°‘" tabindex="-1"><a class="header-anchor" href="#_39-å¯¹-springcloud-äº†è§£å¤šå°‘"><span>39.å¯¹ SpringCloud äº†è§£å¤šå°‘ï¼Ÿ</span></a></h3><p>Spring Cloud å…¶å®æ˜¯ä¸€å¥—åŸºäº Spring Boot çš„å¾®æœåŠ¡å…¨å®¶æ¡¶ï¼Œå¸®æˆ‘ä»¬æŠŠåˆ†å¸ƒå¼ç³»ç»Ÿé‡Œçš„åŸºç¡€è®¾æ–½åšäº†ä¸€ä¸ªâ€œæ‹¿æ¥å³ç”¨â€çš„å°è£…ï¼Œæ¯”å¦‚æœåŠ¡æ³¨å†Œä¸å‘ç°ã€é…ç½®ç®¡ç†ã€è´Ÿè½½å‡è¡¡ã€ç†”æ–­é™æµã€é“¾è·¯è¿½è¸ªè¿™äº›ã€‚</p><p>æˆ‘è‡ªå·±ç”¨å¾—æ¯”è¾ƒå¤šçš„æ˜¯ Spring Cloud Alibaba è¿™ä¸€å¥—ï¼Œ<a href="https://javabetter.cn/zhishixingqiu/pmhub.html" target="_blank" rel="noopener noreferrer">PmHub è¿™ä¸ªé¡¹ç›®</a>å°±æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ï¼š</p><ul><li>æˆ‘ä»¬ä½¿ç”¨ Nacos åšæœåŠ¡æ³¨å†Œå’Œé…ç½®ä¸­å¿ƒï¼Œå¹¶ä¸”å°†é…ç½®ä¿¡æ¯æŒä¹…åŒ–åˆ°äº† MySQL ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥ç»Ÿä¸€ç®¡ç†æ³¨å†Œä¿¡æ¯å’Œé…ç½®ä¿¡æ¯ï¼Œè¿˜æ”¯æŒåŠ¨æ€åˆ·æ–°é…ç½®ã€‚</li><li>ä½¿ç”¨ Gateway åš API ç½‘å…³ï¼Œæ”¯æŒè·¯ç”±è½¬å‘ã€å…¨å±€è¿‡æ»¤å™¨ã€é™æµç­‰åŠŸèƒ½ã€‚</li><li>ä½¿ç”¨ Sentinel åšç†”æ–­ã€é™æµã€é™çº§ç­–ç•¥ï¼Œç»“åˆä¸šåŠ¡è‡ªå®šä¹‰è§„åˆ™æ¯”è¾ƒæ–¹ä¾¿ã€‚</li><li>ä½¿ç”¨ OpenFeign åšæœåŠ¡é—´çš„å£°æ˜å¼è°ƒç”¨ï¼Œæ¯” RestTemplate æ›´çœä»£ç ï¼Œä¹Ÿæ›´æ¸…æ™°å¯ç»´æŠ¤ã€‚</li><li>ä½¿ç”¨ Seata å¤„ç†åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œè¿™ä¸ªåœ¨è®¢å•ã€æ”¯ä»˜ã€å®¡æ‰¹æµåœºæ™¯ä¸­ç”¨å¾—æ¯”è¾ƒå¤šã€‚</li></ul><figure><img src="/blog/assets/img/spring-20250812185540.8bf59ab4.png" alt="itxiaoshenï¼šSpring Cloud Alibaba" tabindex="0" loading="lazy"><figcaption>itxiaoshenï¼šSpring Cloud Alibaba</figcaption></figure><p>æˆ‘è§‰å¾— Spring Cloud æœ€å¤§çš„ä»·å€¼æ˜¯ç»Ÿä¸€äº†æŠ€æœ¯æ ˆå’Œç¼–ç¨‹æ¨¡å‹ï¼Œä¸éœ€è¦æˆ‘ä»¬å»è‡ªå·±ä»é›¶å®ç°æ³¨å†Œä¸­å¿ƒã€ç†”æ–­å™¨è¿™äº›åŸºç¡€è®¾æ–½ã€‚</p><h4 id="ä»€ä¹ˆæ˜¯å¾®æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯å¾®æœåŠ¡"><span>ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ</span></a></h4><p>å¾®æœåŠ¡å°±æ˜¯æŠŠä¸€ä¸ªå¤§çš„ã€å¤æ‚çš„å•ä½“åº”ç”¨ï¼Œæ‹†æˆä¸€ä¸ªä¸ªå›´ç»•ä¸šåŠ¡åŠŸèƒ½ç‹¬ç«‹éƒ¨ç½²çš„å°æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡ç»´æŠ¤è‡ªå·±çš„æ•°æ®å’Œé€»è¾‘ï¼ŒæœåŠ¡ä¹‹é—´é€šè¿‡è½»é‡çº§çš„é€šä¿¡æœºåˆ¶ï¼ˆæ¯”å¦‚ gRPCï¼‰æ¥åä½œã€‚</p><figure><img src="/blog/assets/img/spring-2b988a72-0739-4fed-b271-eaf12589444f.83cb5cd5.png" alt="SpringCloud" tabindex="0" loading="lazy"><figcaption>SpringCloud</figcaption></figure><p>å¾®æœåŠ¡çš„æ ¸å¿ƒä»·å€¼æˆ‘è®¤ä¸ºæ˜¯ï¼šä¸šåŠ¡ä¹‹é—´çš„è¾¹ç•Œæ›´æ¸…æ™°äº†ï¼Œä¸åŒå›¢é˜Ÿå¯ä»¥ç‹¬ç«‹å¼€å‘ã€éƒ¨ç½²ã€æ‰©å±•æŸä¸ªåŠŸèƒ½ï¼Œä¸ä¼šå› ä¸ºä¸€ä¸ªå°çš„æ”¹åŠ¨å°±è¦æŠŠæ•´å¥—ç³»ç»Ÿé‡æ–°ä¸Šçº¿ã€‚</p><p>åƒ <a href="https://javabetter.cn/zhishixingqiu/pmhub.html" target="_blank" rel="noopener noreferrer">PmHub è¿™ä¸ªé¡¹ç›®</a> å°±æ˜¯ä»å•ä½“æ‹†åˆ†æˆå¾®æœåŠ¡çš„ï¼ŒåŒ…æ‹¬å¯åŠ¨ç½‘å…³ã€è®¤è¯ã€æµç¨‹ã€é¡¹ç›®ç®¡ç†ã€ä»£ç ç”Ÿæˆç­‰å¤šä¸ªæœåŠ¡ã€‚</p><figure><img src="/blog/assets/img/spring-20250812190247.50352a41.png" alt="PmHub çš„ç³»ç»Ÿæ¶æ„å›¾" tabindex="0" loading="lazy"><figcaption>PmHub çš„ç³»ç»Ÿæ¶æ„å›¾</figcaption></figure><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„æ¯”äºšè¿ªåŒå­¦ 1 é¢è¯•åŸé¢˜ï¼šSpringCloud äº†è§£å¤šå°‘ï¼Ÿ</li></ol></blockquote><p>memoï¼š2025 å¹´ 8 æœˆ 12 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">å¸®çƒå‹ä¿®æ”¹ç®€å†</a>çš„æ—¶å€™ï¼Œç¢°åˆ°ä¸€ä¸ªçƒå‹è¯´ï¼šæ„Ÿè°¢äºŒå“¥å¯¹æˆ‘ç®€å†çš„ä¿®æ”¹ï¼Œæ²¡æœ‰äºŒå“¥ç»å¯¹è¿›ä¸äº†å­—èŠ‚ã€‚çœ‹å®ŒåçœŸçš„éå¸¸æ„ŸåŠ¨ï¼Œè§‰å¾—è‡ªå·±åšçš„äº‹æƒ…ç¡®å®æœ‰æ„ä¹‰ã€‚</p><figure><img src="/blog/assets/img/spring-äºŒå“¥æ™šä¸Šå¥½ï¼Œè°¢è°¢æ‚¨æ˜¥æ‹›æ—¶å¯¹æˆ‘ç®€å†çš„ä¿®æ”¹ï¼Œæ²¡æœ‰äºŒå“¥æˆ‘ç»å¯¹è¿›ä¸äº†å­—èŠ‚ã€‚.51aa7aa5.png" alt="çƒå‹å¯¹äºŒå“¥ç®€å†ä¿®æ”¹çš„è®¤å¯" tabindex="0" loading="lazy"><figcaption>çƒå‹å¯¹äºŒå“¥ç®€å†ä¿®æ”¹çš„è®¤å¯</figcaption></figure><h2 id="è¡¥å……" tabindex="-1"><a class="header-anchor" href="#è¡¥å……"><span>è¡¥å……</span></a></h2><h3 id="_40-springtask-äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#_40-springtask-äº†è§£å—"><span>40.SpringTask äº†è§£å—ï¼Ÿ</span></a></h3><p>SpringTask æ˜¯ Spring æ¡†æ¶æä¾›çš„ä¸€ä¸ªè½»é‡çº§çš„ä»»åŠ¡è°ƒåº¦æ¡†æ¶ï¼Œå®ƒå…è®¸æˆ‘ä»¬å¼€å‘è€…é€šè¿‡ç®€å•çš„æ³¨è§£æ¥é…ç½®å’Œç®¡ç†å®šæ—¶ä»»åŠ¡ã€‚</p><p>ä½¿ç”¨èµ·æ¥ä¹Ÿéå¸¸æ–¹ä¾¿ï¼Œé¦–å…ˆä½¿ç”¨ <code>@EnableScheduling</code> å¼€å¯å®šæ—¶ä»»åŠ¡çš„æ”¯æŒã€‚</p><figure><img src="/blog/assets/img/spring-20240422094511.b06615bf.png" alt="æŠ€æœ¯æ´¾çš„å¯åŠ¨ç±»å°±æœ‰è¯¥æ³¨è§£çš„å½±å­" tabindex="0" loading="lazy"><figcaption>æŠ€æœ¯æ´¾çš„å¯åŠ¨ç±»å°±æœ‰è¯¥æ³¨è§£çš„å½±å­</figcaption></figure><p>ç„¶ååœ¨éœ€è¦å®šæ—¶ä»»åŠ¡çš„æ–¹æ³•ä¸ŠåŠ ä¸Š <code>@Scheduled</code> æ³¨è§£ï¼Œæ”¯æŒ fixedRateã€fixedDelay å’Œ cron è¡¨è¾¾å¼ã€‚<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾å®æˆ˜é¡¹ç›®</a>ä¸­ï¼Œå°±ä½¿ç”¨è¿‡ cron è¡¨è¾¾å¼åœ¨æ¯å¤©å‡Œæ™¨å®šæ—¶åˆ·æ–°æ–‡ç« çš„ sitemapã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Scheduled</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">cron</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;0 15 5 * * ?&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> autoRefreshCache</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;å¼€å§‹åˆ·æ–°sitemap.xmlçš„urlåœ°å€ï¼Œé¿å…å‡ºç°æ•°æ®ä¸ä¸€è‡´é—®é¢˜!&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    refreshSitemap</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;åˆ·æ–°å®Œæˆï¼&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ç”¨springtaskèµ„æºå ç”¨å¤ªé«˜-æœ‰ä»€ä¹ˆå…¶ä»–çš„æ–¹å¼è§£å†³-è¡¥å……" tabindex="-1"><a class="header-anchor" href="#ç”¨springtaskèµ„æºå ç”¨å¤ªé«˜-æœ‰ä»€ä¹ˆå…¶ä»–çš„æ–¹å¼è§£å†³-è¡¥å……"><span>ç”¨SpringTaskèµ„æºå ç”¨å¤ªé«˜ï¼Œæœ‰ä»€ä¹ˆå…¶ä»–çš„æ–¹å¼è§£å†³ï¼Ÿï¼ˆè¡¥å……ï¼‰</span></a></h4><blockquote><p>2024å¹´05æœˆ27æ—¥æ–°å¢</p></blockquote><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦åˆ†æä¸€ä¸‹ SpringTask èµ„æºå ç”¨é«˜çš„åŸå› ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpringTask ä¼šä½¿ç”¨å•çº¿ç¨‹æ‰§è¡Œæ‰€æœ‰å®šæ—¶ä»»åŠ¡ï¼Œå¦‚æœæŸä¸ªä»»åŠ¡æ‰§è¡Œæ—¶é—´é•¿æˆ–è€…ä»»åŠ¡æ•°é‡å¤šï¼Œå°±ä¼šé€ æˆé˜»å¡ã€‚è€Œä¸”å®ƒæ˜¯åŸºäºå†…å­˜çš„ï¼Œæ‰€æœ‰ä»»åŠ¡ä¿¡æ¯éƒ½ä¿å­˜åœ¨ JVM ä¸­ï¼Œåº”ç”¨é‡å¯åä»»åŠ¡çŠ¶æ€å°±ä¸¢å¤±äº†ã€‚</p><p>é‚£æˆ‘ä»¬å¯ä»¥é€šè¿‡é…ç½®çº¿ç¨‹æ± æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">EnableScheduling</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ScheduleConfig</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> SchedulingConfigurer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> configureTasks</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ScheduledTaskRegistrar</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> taskRegistrar</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        taskRegistrar</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setScheduler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Executors</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">newScheduledThreadPool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦å¤–ï¼Œå°±æ˜¯å¯ä»¥å°† SpringTask è¿ç§»åˆ°å…¶ä»–çš„ä»»åŠ¡è°ƒåº¦æ¡†æ¶ï¼Œæ¯”å¦‚ Quartzã€XXL-JOB ç­‰ã€‚</p><p>Quartz åŠŸèƒ½æ›´å¼ºå¤§ï¼Œæ”¯æŒé›†ç¾¤ã€æŒä¹…åŒ–ã€çµæ´»çš„è°ƒåº¦ç­–ç•¥ã€‚è¿˜å¯ä»¥æŠŠä»»åŠ¡ä¿¡æ¯æŒä¹…åŒ–åˆ°æ•°æ®åº“ï¼Œæ”¯æŒé›†ç¾¤éƒ¨ç½²ï¼Œä¸€ä¸ªèŠ‚ç‚¹æŒ‚äº†å…¶ä»–èŠ‚ç‚¹å¯ä»¥æ¥ç®¡ä»»åŠ¡ã€‚</p><p>ä½¿ç”¨ XXL-JOB æ˜¯åˆ†å¸ƒå¼åœºæ™¯ä¸‹æ›´å½»åº•çš„è§£å†³æ–¹æ¡ˆï¼Œæœ‰ç‹¬ç«‹çš„è°ƒåº¦ä¸­å¿ƒï¼Œä»»åŠ¡é…ç½®å’Œæ‰§è¡Œå¯ä»¥åˆ†ç¦»ï¼›æ”¯æŒåˆ†ç‰‡æ‰§è¡Œï¼Œå¤§ä»»åŠ¡å¯ä»¥æ‹†åˆ†æˆå¤šä¸ªå­ä»»åŠ¡å¹¶è¡Œå¤„ç†ã€‚</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/**</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    * 2ã€åˆ†ç‰‡å¹¿æ’­ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    */</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">XxlJob</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;shardingJobHandler&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> shardingJobHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">() throws Exception {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // åˆ†ç‰‡å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> shardIndex </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> com</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">xxl</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">job</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">core</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">XxlJobHelper</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getShardIndex</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> shardTotal </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> com</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">xxl</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">job</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">core</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">XxlJobHelper</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getShardTotal</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    logger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;åˆ†ç‰‡å¹¿æ’­ä»»åŠ¡å¼€å§‹æ‰§è¡Œï¼Œå½“å‰åˆ†ç‰‡åºå· = {}, æ€»åˆ†ç‰‡æ•° = {}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, shardIndex, shardTotal);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œæ ¹æ®åˆ†ç‰‡å‚æ•°å¤„ç†ä¸åŒçš„æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    for</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> shardIndex</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> i </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">+=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> shardTotal) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        logger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;ç¬¬{}ç‰‡, å¤„ç†æ•°æ®: {}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, shardIndex, i);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">        </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // æ¨¡æ‹Ÿå¤„ç†æ•°æ®çš„æ—¶é—´</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        TimeUnit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">MILLISECONDS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sleep</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    logger</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;åˆ†ç‰‡å¹¿æ’­ä»»åŠ¡æ‰§è¡Œå®Œæˆ&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„å¾®ä¼—é“¶è¡ŒåŒå­¦ 1 Java åç«¯ä¸€é¢çš„åŸé¢˜ï¼šSpringTask äº†è§£å—ï¼Ÿ</li><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„é˜¿é‡Œé¢ç»åŒå­¦ 1 é—²é±¼åç«¯ä¸€é¢çš„åŸé¢˜ï¼šè®¢å•è¶…æ—¶ï¼Œç”¨springtaskèµ„æºå ç”¨å¤ªé«˜ï¼Œæœ‰ä»€ä¹ˆå…¶ä»–çš„æ–¹å¼è§£å†³?</li></ol></blockquote><p>memoï¼š2025 å¹´ 8 æœˆ 16 æ—¥ä¿®æ”¹è‡³æ­¤ï¼Œä»Šå¤©<a href="https://javabetter.cn/zhishixingqiu/jianli.html" target="_blank" rel="noopener noreferrer">å¸®çƒå‹ä¿®æ”¹ç®€å†</a>çš„æ—¶å€™ï¼Œç¢°åˆ°ä¸€ä¸ªçƒå‹è¯´ï¼šæš‘æœŸå®ä¹ çš„æ—¶å€™ä½¿ç”¨äº†<a href="https://javabetter.cn/zhishixingqiu/paicoding.html" target="_blank" rel="noopener noreferrer">æŠ€æœ¯æ´¾</a>ï¼Œä¹Ÿæ‰¾äºŒå“¥ä¿®æ”¹äº†ç®€å†ï¼Œæœ€åæ‹¿åˆ°äº†å“ˆå•°çš„å®ä¹ ï¼Œéå¸¸æ„Ÿè°¢ã€‚é‚£è¯´å®è¯æ¯æ¬¡ç¢°åˆ°çƒå‹è¿™æ ·çš„åé¦ˆï¼Œéƒ½æŒºå¼€å¿ƒçš„ã€‚</p><figure><img src="/blog/assets/img/spring-20250816105951.882ba150.png" alt="å¸®çƒå‹ä¿®æ”¹ç®€å†æ‹¿åˆ°äº†å“ˆå•°çš„å®ä¹ " tabindex="0" loading="lazy"><figcaption>å¸®çƒå‹ä¿®æ”¹ç®€å†æ‹¿åˆ°äº†å“ˆå•°çš„å®ä¹ </figcaption></figure><h3 id="_41-spring-cache-äº†è§£å—" tabindex="-1"><a class="header-anchor" href="#_41-spring-cache-äº†è§£å—"><span>41.Spring Cache äº†è§£å—ï¼Ÿ</span></a></h3><p>Spring Cache æ˜¯ Spring æ¡†æ¶æä¾›çš„ä¸€ä¸ªç¼“å­˜æŠ½è±¡ï¼Œå®ƒé€šè¿‡ç»Ÿä¸€çš„æ¥å£æ¥æ”¯æŒå¤šç§ç¼“å­˜å®ç°ï¼ˆå¦‚ Redisã€Caffeine ç­‰ï¼‰ã€‚</p><p>å®ƒé€šè¿‡æ³¨è§£ï¼ˆå¦‚ <code>@Cacheable</code>ã€<code>@CachePut</code>ã€<code>@CacheEvict</code>ï¼‰æ¥å®ç°ç¼“å­˜ç®¡ç†ï¼Œæå¤§ç®€åŒ–äº†ä»£ç å®ç°ã€‚</p><ul><li>@Cacheableï¼šç¼“å­˜æ–¹æ³•çš„è¿”å›å€¼ã€‚</li><li>@CachePutï¼šç”¨äºæ›´æ–°ç¼“å­˜ï¼Œæ¯æ¬¡è°ƒç”¨æ–¹æ³•éƒ½ä¼šå°†ç»“æœé‡æ–°å†™å…¥ç¼“å­˜ã€‚</li><li>@CacheEvictï¼šç”¨äºåˆ é™¤ç¼“å­˜ã€‚</li></ul><p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p><figure><img src="/blog/assets/img/spring-20241031111306.8cab104b.png" alt="äºŒå“¥çš„Java è¿›é˜¶ä¹‹è·¯ï¼šSpring Cache" tabindex="0" loading="lazy"><figcaption>äºŒå“¥çš„Java è¿›é˜¶ä¹‹è·¯ï¼šSpring Cache</figcaption></figure><h4 id="spring-cache-å’Œ-redis-æœ‰ä»€ä¹ˆåŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#spring-cache-å’Œ-redis-æœ‰ä»€ä¹ˆåŒºåˆ«"><span>Spring Cache å’Œ Redis æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</span></a></h4><ol><li><strong>Spring Cache</strong> æ˜¯ Spring æ¡†æ¶æä¾›çš„ä¸€ä¸ªç¼“å­˜æŠ½è±¡ï¼Œå®ƒé€šè¿‡æ³¨è§£æ¥å®ç°ç¼“å­˜ç®¡ç†ï¼Œæ”¯æŒå¤šç§ç¼“å­˜å®ç°ï¼ˆå¦‚ Redisã€Caffeine ç­‰ï¼‰ã€‚</li><li><strong>Redis</strong> æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„ç¼“å­˜ä¸­é—´ä»¶ï¼Œæ”¯æŒå¤šç§æ•°æ®ç±»å‹ï¼ˆå¦‚ Stringã€Hashã€Listã€Setã€ZSetï¼‰ï¼Œè¿˜æ”¯æŒæŒä¹…åŒ–ã€é›†ç¾¤ã€ä¸»ä»å¤åˆ¶ç­‰ã€‚</li></ol><p>Spring Cache é€‚åˆç”¨äºå•æœºã€è½»é‡çº§å’ŒçŸ­æ—¶ç¼“å­˜åœºæ™¯ï¼Œèƒ½å¤Ÿé€šè¿‡æ³¨è§£è½»æ¾æ§åˆ¶ç¼“å­˜ç®¡ç†ã€‚</p><p>Redis æ˜¯ä¸€ç§åˆ†å¸ƒå¼ç¼“å­˜è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒå¤šç§æ•°æ®ç»“æ„å’Œé«˜å¹¶å‘è®¿é—®ï¼Œé€‚åˆåˆ†å¸ƒå¼ç³»ç»Ÿå’Œé«˜å¹¶å‘åœºæ™¯ï¼Œå¯ä»¥æä¾›æ•°æ®æŒä¹…åŒ–å’Œå¤šç§æ·˜æ±°ç­–ç•¥ã€‚</p><p>åœ¨å®é™…å¼€å‘ä¸­ï¼ŒSpring Cache å’Œ Redis å¯ä»¥ç»“åˆä½¿ç”¨ï¼ŒSpring Cache æä¾›ç®¡ç†ç¼“å­˜çš„æ³¨è§£ï¼Œè€Œ Redis åˆ™ä½œä¸ºåˆ†å¸ƒå¼ç¼“å­˜çš„å®ç°ï¼Œæä¾›å…±äº«ç¼“å­˜æ”¯æŒã€‚</p><h4 id="æœ‰äº†-redis-ä¸ºä»€ä¹ˆè¿˜éœ€è¦-spring-cache" tabindex="-1"><a class="header-anchor" href="#æœ‰äº†-redis-ä¸ºä»€ä¹ˆè¿˜éœ€è¦-spring-cache"><span>æœ‰äº† Redis ä¸ºä»€ä¹ˆè¿˜éœ€è¦ Spring Cacheï¼Ÿ</span></a></h4><p>è™½ç„¶ Redis éå¸¸å¼ºå¤§ï¼Œä½† Spring Cache æä¾›äº†ä¸€å±‚ç¼“å­˜æŠ½è±¡ï¼Œç®€åŒ–äº†ç¼“å­˜çš„ç®¡ç†ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨æ–¹æ³•ä¸Šé€šè¿‡æ³¨è§£æ¥å®ç°ç¼“å­˜é€»è¾‘ï¼Œå‡å°‘äº†æ‰‹åŠ¨æ“ä½œ Redis çš„ä»£ç é‡ã€‚</p><p>Spring Cache è¿˜èƒ½çµæ´»åˆ‡æ¢åº•å±‚ç¼“å­˜å®ç°ã€‚æ­¤å¤–ï¼ŒSpring Cache æ”¯æŒäº‹åŠ¡æ€§ç¼“å­˜å’Œæ¡ä»¶ç¼“å­˜ï¼Œä¾¿äºåœ¨å¤æ‚åœºæ™¯ä¸­ç¡®ä¿æ•°æ®ä¸€è‡´æ€§ã€‚</p><h4 id="è¯´è¯´spring-cache-çš„åº•å±‚åŸç†" tabindex="-1"><a class="header-anchor" href="#è¯´è¯´spring-cache-çš„åº•å±‚åŸç†"><span>è¯´è¯´Spring Cache çš„åº•å±‚åŸç†ï¼Ÿ</span></a></h4><p>Spring Cache æ˜¯åŸºäº AOP å’Œç¼“å­˜æŠ½è±¡å±‚å®ç°çš„ã€‚å®ƒé€šè¿‡ AOP æ‹¦æˆªè¢« @Cacheableã€@CachePut å’Œ @CacheEvict æ³¨è§£çš„æ–¹æ³•ï¼Œåœ¨æ–¹æ³•è°ƒç”¨å‰åè‡ªåŠ¨æ‰§è¡Œç¼“å­˜é€»è¾‘ã€‚</p><figure><img src="/blog/assets/img/spring-20241031113743.26bf5e8e.png" alt="é“¿ç„¶æ¶æ„ï¼šSpring Cache æ¶æ„" tabindex="0" loading="lazy"><figcaption>é“¿ç„¶æ¶æ„ï¼šSpring Cache æ¶æ„</figcaption></figure><p>å…¶æä¾›çš„ CacheManager å’Œ Cache ç­‰æ¥å£ï¼Œä¸ä¾èµ–å…·ä½“çš„ç¼“å­˜å®ç°ï¼Œå› æ­¤å¯ä»¥çµæ´»åœ°é›†æˆ Redisã€Caffeine ç­‰å¤šç§ç¼“å­˜ã€‚</p><ul><li>ConcurrentMapCacheManagerï¼šåŸºäº Java ConcurrentMap çš„æœ¬åœ°ç¼“å­˜å®ç°ã€‚</li><li>RedisCacheManagerï¼šåŸºäº Redis çš„åˆ†å¸ƒå¼ç¼“å­˜å®ç°ã€‚</li><li>CaffeineCacheManagerï¼šåŸºäº Caffeine çš„ç¼“å­˜å®ç°ã€‚</li></ul><blockquote><ol><li><a href="https://javabetter.cn/zhishixingqiu/mianshi.html" target="_blank" rel="noopener noreferrer">Java é¢è¯•æŒ‡å—ï¼ˆä»˜è´¹ï¼‰</a>æ”¶å½•çš„ç¾å›¢åŒå­¦ 9 ä¸€é¢é¢è¯•åŸé¢˜ï¼šä»‹ç»ä¸€ä¸‹springcache å’Œredisï¼ŸSpring cacheå’Œredisä¹‹é—´çš„å„åº”ç”¨åœ¨ä»€ä¹ˆåœºæ™¯ï¼Ÿæœ‰äº†redisä¸ºä»€ä¹ˆè¿˜è¦ç”¨springcaheï¼Ÿspringcache åº•å±‚åŸç†ï¼ŒåŸºäºä»€ä¹ˆå®ç°çš„ï¼Ÿ</li></ol></blockquote><hr><p>å›¾æ–‡è¯¦è§£ 41 é“ Spring é¢è¯•é«˜é¢‘é¢˜ï¼Œè¿™æ¬¡åŠæ‰“é¢è¯•å®˜ï¼Œæˆ‘è§‰å¾—ç¨³äº†ï¼ˆæ‰‹åŠ¨ dogï¼‰ã€‚æ•´ç†ï¼šæ²‰é»˜ç‹äºŒï¼Œæˆ³<a href="https://mp.weixin.qq.com/s/EQge6DmgIqYITM3mAxkatg" target="_blank" rel="noopener noreferrer">è½¬è½½é“¾æ¥</a>ï¼Œä½œè€…ï¼šä¸‰åˆ†æ¶ï¼Œæˆ³<a href="https://mp.weixin.qq.com/s/Y17S85ntHm_MLTZMJdtjQQ" target="_blank" rel="noopener noreferrer">åŸæ–‡é“¾æ¥</a>ã€‚</p><p><em>æ²¡æœ‰ä»€ä¹ˆä½¿æˆ‘åœç•™â€”â€”é™¤äº†ç›®çš„ï¼Œçºµç„¶å²¸æ—æœ‰ç«ç‘°ã€æœ‰ç»¿è«ã€æœ‰å®é™çš„æ¸¯æ¹¾ï¼Œæˆ‘æ˜¯ä¸ç³»ä¹‹èˆŸ</em>ã€‚</p><p><strong>ç³»åˆ—å†…å®¹</strong>ï¼š</p><ul><li><a href="https://javabetter.cn/sidebar/sanfene/javase.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­ Java SE ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/javathread.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­ Java é›†åˆæ¡†æ¶ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/collection.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­ Java å¹¶å‘ç¼–ç¨‹ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/jvm.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­ JVM ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/spring.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­ Spring ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/redis.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­ Redis ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/mybatis.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­ MyBatis ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/mysql.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­ MySQL ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/os.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­æ“ä½œç³»ç»Ÿç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/network.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­è®¡ç®—æœºç½‘ç»œç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/rocketmq.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­ RocketMQ ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/fenbushi.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­åˆ†å¸ƒå¼ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/weifuwu.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­å¾®æœåŠ¡ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/shejimoshi.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­è®¾è®¡æ¨¡å¼ç¯‡ ğŸ‘</a></li><li><a href="https://javabetter.cn/sidebar/sanfene/linux.html" target="_blank" rel="noopener noreferrer">é¢æ¸£é€†è¢­ Linux ç¯‡ ğŸ‘</a></li></ul><hr><p>GitHub ä¸Šæ ‡æ˜Ÿ 10000+ çš„å¼€æºçŸ¥è¯†åº“ã€Š<a href="https://github.com/itwanger/toBeBetterJavaer" target="_blank" rel="noopener noreferrer">äºŒå“¥çš„ Java è¿›é˜¶ä¹‹è·¯</a>ã€‹ç¬¬ä¸€ç‰ˆ PDF ç»ˆäºæ¥äº†ï¼åŒ…æ‹¬ Java åŸºç¡€è¯­æ³•ã€æ•°ç»„&amp;å­—ç¬¦ä¸²ã€OOPã€é›†åˆæ¡†æ¶ã€Java IOã€å¼‚å¸¸å¤„ç†ã€Java æ–°ç‰¹æ€§ã€ç½‘ç»œç¼–ç¨‹ã€NIOã€å¹¶å‘ç¼–ç¨‹ã€JVM ç­‰ç­‰ï¼Œå…±è®¡ 32 ä¸‡ä½™å­—ï¼Œ500+å¼ æ‰‹ç»˜å›¾ï¼Œå¯ä»¥è¯´æ˜¯é€šä¿—æ˜“æ‡‚ã€é£è¶£å¹½é»˜â€¦â€¦è¯¦æƒ…æˆ³ï¼š<a href="https://javabetter.cn/overview/" target="_blank" rel="noopener noreferrer">å¤ªèµäº†ï¼ŒGitHub ä¸Šæ ‡æ˜Ÿ 10000+ çš„ Java æ•™ç¨‹</a></p><p>å¾®ä¿¡æœ <strong>æ²‰é»˜ç‹äºŒ</strong> æˆ–æ‰«æä¸‹æ–¹äºŒç»´ç å…³æ³¨äºŒå“¥çš„åŸåˆ›å…¬ä¼—å·æ²‰é»˜ç‹äºŒï¼Œå›å¤ <strong>222</strong> å³å¯å…è´¹é¢†å–ã€‚</p><figure><img src="/blog/assets/img/gongzhonghao.3d747207.jpeg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/JL-20191210/blog/edit/main/src/Interview/Java/05-Springé¢è¯•é¢˜/5.SpringB.md" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<!----></a></div><div class="vp-meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/blog/Interview/Java/05-Spring%E9%9D%A2%E8%AF%95%E9%A2%98/5.SpringA.html" aria-label="é¢æ¸£é€†è¢­-Spring"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->é¢æ¸£é€†è¢­-Spring</div></a><!----></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">å“Ÿå¼~</div><div class="vp-copyright">Copyright Â© 2025 ä¸‰åˆ†æ¶&æ²‰é»˜ç‹äºŒ </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script src="/blog/assets/js/runtime~app.5b07cc97.js" defer></script><script src="/blog/assets/js/12710.15d38a93.js" defer></script><script src="/blog/assets/js/app.07bc7e99.js" defer></script>
  </body>
</html>
