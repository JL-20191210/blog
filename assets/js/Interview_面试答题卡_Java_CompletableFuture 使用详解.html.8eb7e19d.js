"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[18993],{66262:(t,e)=>{e.A=(t,e)=>{const n=t.__vccOpts||t;for(const[t,s]of e)n[t]=s;return n}},14750:(t,e,n)=>{n.r(e),n.d(e,{comp:()=>l,data:()=>i});var s=n(20641);const a={},l=(0,n(66262).A)(a,[["render",function(t,e){return(0,s.uX)(),(0,s.CE)("div",null,e[0]||(e[0]=[(0,s.Fv)('<h1 id="ğŸ“-java-é¢è¯•ç­”é¢˜å¡-completablefutureä½¿ç”¨è¯¦è§£" tabindex="-1"><a class="header-anchor" href="#ğŸ“-java-é¢è¯•ç­”é¢˜å¡-completablefutureä½¿ç”¨è¯¦è§£"><span>ğŸ“ Java é¢è¯•ç­”é¢˜å¡ï¼šCompletableFutureä½¿ç”¨è¯¦è§£</span></a></h1><h3 id="âœ…-1-ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#âœ…-1-ç®€ä»‹"><span><strong>âœ… 1. ç®€ä»‹</strong></span></a></h3><ul><li>CompletableFuture æ˜¯ Java 8 å¼•å…¥çš„å¼‚æ­¥ç¼–ç¨‹ APIï¼Œå±äº java.util.concurrent åŒ…ã€‚</li><li>æ”¯æŒéé˜»å¡ã€é“¾å¼ç¼–ç¨‹é£æ ¼ã€‚</li><li>æ˜¯ Future çš„å¢å¼ºç‰ˆï¼Œæ”¯æŒå›è°ƒã€ç»„åˆå¤šä¸ªä»»åŠ¡ç»“æœã€å¼‚å¸¸å¤„ç†ç­‰ã€‚</li></ul><h3 id="âœ…-2-å¸¸ç”¨æ–¹æ³•åˆ†ç±»æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#âœ…-2-å¸¸ç”¨æ–¹æ³•åˆ†ç±»æ€»ç»“"><span><strong>âœ… 2. å¸¸ç”¨æ–¹æ³•åˆ†ç±»æ€»ç»“</strong></span></a></h3><table><thead><tr><th><strong>ç±»å‹</strong></th><th><strong>æ–¹æ³•</strong></th><th><strong>æè¿°</strong></th></tr></thead><tbody><tr><td>åˆ›å»ºå¼‚æ­¥ä»»åŠ¡</td><td>supplyAsync() / runAsync()</td><td>å¼‚æ­¥è·å–å€¼ / å¼‚æ­¥æ‰§è¡Œæ— è¿”å›ä»»åŠ¡</td></tr><tr><td>ä»»åŠ¡ä¸²è”</td><td>thenApply() / thenAccept()</td><td>æ¥æ”¶ä¸Šä¸€æ­¥ç»“æœå¹¶ç»§ç»­å¤„ç†</td></tr><tr><td>ç»„åˆä»»åŠ¡</td><td>thenCombine() / allOf() / anyOf()</td><td>å¤šä¸ªä»»åŠ¡å¹¶å‘æ‰§è¡Œä¸ç»„åˆ</td></tr><tr><td>å¼‚å¸¸å¤„ç†</td><td>exceptionally() / handle()</td><td>æ•è·å¹¶å¤„ç†å¼‚å¸¸</td></tr><tr><td>é˜»å¡è·å–ç»“æœ</td><td>get() / join()</td><td>è·å–æœ€ç»ˆç»“æœï¼ˆåŒæ­¥ï¼‰</td></tr></tbody></table><h3 id="âœ…-3-å¿«é€Ÿç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#âœ…-3-å¿«é€Ÿç¤ºä¾‹"><span><strong>âœ… 3. å¿«é€Ÿç¤ºä¾‹</strong></span></a></h3><h4 id="ğŸ”¹-3-1-åˆ›å»ºå¼‚æ­¥ä»»åŠ¡" tabindex="-1"><a class="header-anchor" href="#ğŸ”¹-3-1-åˆ›å»ºå¼‚æ­¥ä»»åŠ¡"><span><strong>ğŸ”¹ 3.1 åˆ›å»ºå¼‚æ­¥ä»»åŠ¡</strong></span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>CompletableFuture&lt;String&gt; future = CompletableFuture.supplyAsync(() -&gt; {</span></span>\n<span class="line"><span>    // æ¨¡æ‹Ÿè€—æ—¶ä»»åŠ¡</span></span>\n<span class="line"><span>    sleep(1000);</span></span>\n<span class="line"><span>    return &quot;Hello&quot;;</span></span>\n<span class="line"><span>});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ğŸ”¹-3-2-thenapply-ä¸²è¡Œè½¬æ¢" tabindex="-1"><a class="header-anchor" href="#ğŸ”¹-3-2-thenapply-ä¸²è¡Œè½¬æ¢"><span><strong>ğŸ”¹ 3.2 thenApplyï¼šä¸²è¡Œè½¬æ¢</strong></span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>future.thenApply(result -&gt; result + &quot; World&quot;)</span></span>\n<span class="line"><span>      .thenAccept(System.out::println);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ğŸ”¹-3-3-thencombine-åˆå¹¶ä¸¤ä¸ªä»»åŠ¡ç»“æœ" tabindex="-1"><a class="header-anchor" href="#ğŸ”¹-3-3-thencombine-åˆå¹¶ä¸¤ä¸ªä»»åŠ¡ç»“æœ"><span><strong>ğŸ”¹ 3.3 thenCombineï¼šåˆå¹¶ä¸¤ä¸ªä»»åŠ¡ç»“æœ</strong></span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>CompletableFuture&lt;String&gt; f1 = CompletableFuture.supplyAsync(() -&gt; &quot;A&quot;);</span></span>\n<span class="line"><span>CompletableFuture&lt;String&gt; f2 = CompletableFuture.supplyAsync(() -&gt; &quot;B&quot;);</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>f1.thenCombine(f2, (a, b) -&gt; a + b)</span></span>\n<span class="line"><span>  .thenAccept(System.out::println); // è¾“å‡º AB</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ğŸ”¹-3-4-allof-ç­‰å¾…å¤šä¸ªä»»åŠ¡å…¨éƒ¨å®Œæˆ" tabindex="-1"><a class="header-anchor" href="#ğŸ”¹-3-4-allof-ç­‰å¾…å¤šä¸ªä»»åŠ¡å…¨éƒ¨å®Œæˆ"><span><strong>ğŸ”¹ 3.4 allOfï¼šç­‰å¾…å¤šä¸ªä»»åŠ¡å…¨éƒ¨å®Œæˆ</strong></span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>CompletableFuture&lt;Void&gt; all = CompletableFuture.allOf(f1, f2);</span></span>\n<span class="line"><span>all.join(); // é˜»å¡ç›´åˆ°æ‰€æœ‰ä»»åŠ¡å®Œæˆ</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ğŸ”¹-3-5-exceptionally-å¤„ç†å¼‚å¸¸" tabindex="-1"><a class="header-anchor" href="#ğŸ”¹-3-5-exceptionally-å¤„ç†å¼‚å¸¸"><span><strong>ğŸ”¹ 3.5 exceptionallyï¼šå¤„ç†å¼‚å¸¸</strong></span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>CompletableFuture&lt;String&gt; failFuture = CompletableFuture.supplyAsync(() -&gt; {</span></span>\n<span class="line"><span>    if (true) throw new RuntimeException(&quot;å‡ºé”™äº†&quot;);</span></span>\n<span class="line"><span>    return &quot;OK&quot;;</span></span>\n<span class="line"><span>});</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>failFuture</span></span>\n<span class="line"><span>    .exceptionally(e -&gt; &quot;é»˜è®¤å€¼&quot;)</span></span>\n<span class="line"><span>    .thenAccept(System.out::println); // è¾“å‡ºï¼šé»˜è®¤å€¼</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="âœ…-4-ä½¿ç”¨åœºæ™¯æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#âœ…-4-ä½¿ç”¨åœºæ™¯æ€»ç»“"><span><strong>âœ… 4. ä½¿ç”¨åœºæ™¯æ€»ç»“</strong></span></a></h3><table><thead><tr><th><strong>åœºæ™¯</strong></th><th><strong>è§£å†³æ–¹æ¡ˆ</strong></th></tr></thead><tbody><tr><td>å¼‚æ­¥æ‰§è¡Œåå°ä»»åŠ¡</td><td>supplyAsync()</td></tr><tr><td>å¤šä¸ªä»»åŠ¡å¹¶å‘æ‰§è¡Œ + ç­‰å¾…å…¨éƒ¨å®Œæˆ</td><td>allOf()</td></tr><tr><td>å¤šä¸ªä»»åŠ¡å–ä¸€ä¸ªæœ€å¿«è¿”å›ç»“æœ</td><td>anyOf()</td></tr><tr><td>å¼‚æ­¥å›è°ƒå¤„ç† / ä¸²è”ç»“æœ</td><td>thenApply() / thenAccept()</td></tr><tr><td>å¼‚å¸¸æ¢å¤æœºåˆ¶</td><td>exceptionally() / handle()</td></tr></tbody></table><h3 id="âœ…-5-é˜»å¡-vs-éé˜»å¡æ–¹æ³•åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#âœ…-5-é˜»å¡-vs-éé˜»å¡æ–¹æ³•åŒºåˆ«"><span><strong>âœ… 5. é˜»å¡ vs éé˜»å¡æ–¹æ³•åŒºåˆ«</strong></span></a></h3><table><thead><tr><th><strong>æ–¹æ³•</strong></th><th><strong>ç±»å‹</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td>get()</td><td>é˜»å¡</td><td>ä¼šæŠ›å¼‚å¸¸</td></tr><tr><td>join()</td><td>é˜»å¡</td><td>ä¸æŠ›æ£€æŸ¥å¼‚å¸¸ï¼ˆæ¨èï¼‰</td></tr></tbody></table><h3 id="âœ…-6-æ¨èå†™æ³•-é“¾å¼ã€éé˜»å¡" tabindex="-1"><a class="header-anchor" href="#âœ…-6-æ¨èå†™æ³•-é“¾å¼ã€éé˜»å¡"><span><strong>âœ… 6. æ¨èå†™æ³•ï¼ˆé“¾å¼ã€éé˜»å¡ï¼‰</strong></span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>CompletableFuture.supplyAsync(() -&gt; &quot;Step 1&quot;)</span></span>\n<span class="line"><span>    .thenApply(s -&gt; s + &quot; + Step 2&quot;)</span></span>\n<span class="line"><span>    .thenAccept(System.out::println);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="âœ…-7-å’Œ-future-çš„åŒºåˆ«-é‡ç‚¹" tabindex="-1"><a class="header-anchor" href="#âœ…-7-å’Œ-future-çš„åŒºåˆ«-é‡ç‚¹"><span><strong>âœ… 7. å’Œ Future çš„åŒºåˆ«ï¼ˆé‡ç‚¹ï¼‰</strong></span></a></h3><table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th>Future</th><th>CompletableFuture</th></tr></thead><tbody><tr><td>å¼‚æ­¥</td><td>æœ‰é™æ”¯æŒ</td><td>å®Œå…¨æ”¯æŒ</td></tr><tr><td>é˜»å¡</td><td>åªèƒ½ get()</td><td>å¯éé˜»å¡ã€å›è°ƒ</td></tr><tr><td>ä¸²è”ä»»åŠ¡</td><td>âŒ ä¸æ”¯æŒ</td><td>âœ… thenApply() ç­‰æ”¯æŒé“¾å¼è°ƒç”¨</td></tr><tr><td>å¼‚å¸¸å¤„ç†</td><td>âŒ ä¸æ–¹ä¾¿</td><td>âœ… æ”¯æŒ exceptionally()</td></tr><tr><td>å¤šä»»åŠ¡ç»„åˆ</td><td>âŒ æ— æ³•å¤„ç†å¤šä¸ªä»»åŠ¡</td><td>âœ… allOf()ã€anyOf() ç­‰</td></tr></tbody></table><h3 id="ğŸ¯-æ€»ç»“ä¸€æ®µè¯ç­”æ³•-é¢è¯•å›ç­”æ¨¡æ¿" tabindex="-1"><a class="header-anchor" href="#ğŸ¯-æ€»ç»“ä¸€æ®µè¯ç­”æ³•-é¢è¯•å›ç­”æ¨¡æ¿"><span><strong>ğŸ¯ æ€»ç»“ä¸€æ®µè¯ç­”æ³•ï¼ˆé¢è¯•å›ç­”æ¨¡æ¿ï¼‰</strong></span></a></h3><blockquote><p>Java ä¸­çš„ CompletableFuture æ˜¯å¯¹ Future çš„å¢å¼ºï¼Œæ”¯æŒå¼‚æ­¥æ‰§è¡Œã€ä»»åŠ¡é“¾å¼ç»„åˆã€å›è°ƒå¤„ç†ä¸å¼‚å¸¸æ•è·ç­‰åŠŸèƒ½ï¼Œé€‚åˆåœ¨å¤šçº¿ç¨‹å¹¶å‘ä»»åŠ¡å¤„ç†ã€å¾®æœåŠ¡è°ƒç”¨èšåˆç­‰åœºæ™¯ä¸­ä½¿ç”¨ã€‚å®ƒæ˜¯ Java 8 å‡½æ•°å¼ç¼–ç¨‹ + å¼‚æ­¥æ¨¡å‹ç»“åˆçš„é‡è¦å·¥å…·ï¼Œå°¤å…¶é€‚åˆæ›¿ä»£ä¼ ç»Ÿçš„ Future.get() çš„é˜»å¡è°ƒç”¨ã€‚</p></blockquote>',26)]))}]]),i=JSON.parse('{"path":"/Interview/%E9%9D%A2%E8%AF%95%E7%AD%94%E9%A2%98%E5%8D%A1/Java/CompletableFuture%20%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3.html","title":"ğŸ“ Java é¢è¯•ç­”é¢˜å¡ï¼šCompletableFutureä½¿ç”¨è¯¦è§£","lang":"zh-CN","frontmatter":{"gitInclude":[]},"headers":[{"level":3,"title":"âœ… 1. ç®€ä»‹","slug":"âœ…-1-ç®€ä»‹","link":"#âœ…-1-ç®€ä»‹","children":[]},{"level":3,"title":"âœ… 2. å¸¸ç”¨æ–¹æ³•åˆ†ç±»æ€»ç»“","slug":"âœ…-2-å¸¸ç”¨æ–¹æ³•åˆ†ç±»æ€»ç»“","link":"#âœ…-2-å¸¸ç”¨æ–¹æ³•åˆ†ç±»æ€»ç»“","children":[]},{"level":3,"title":"âœ… 3. å¿«é€Ÿç¤ºä¾‹","slug":"âœ…-3-å¿«é€Ÿç¤ºä¾‹","link":"#âœ…-3-å¿«é€Ÿç¤ºä¾‹","children":[]},{"level":3,"title":"âœ… 4. ä½¿ç”¨åœºæ™¯æ€»ç»“","slug":"âœ…-4-ä½¿ç”¨åœºæ™¯æ€»ç»“","link":"#âœ…-4-ä½¿ç”¨åœºæ™¯æ€»ç»“","children":[]},{"level":3,"title":"âœ… 5. é˜»å¡ vs éé˜»å¡æ–¹æ³•åŒºåˆ«","slug":"âœ…-5-é˜»å¡-vs-éé˜»å¡æ–¹æ³•åŒºåˆ«","link":"#âœ…-5-é˜»å¡-vs-éé˜»å¡æ–¹æ³•åŒºåˆ«","children":[]},{"level":3,"title":"âœ… 6. æ¨èå†™æ³•ï¼ˆé“¾å¼ã€éé˜»å¡ï¼‰","slug":"âœ…-6-æ¨èå†™æ³•-é“¾å¼ã€éé˜»å¡","link":"#âœ…-6-æ¨èå†™æ³•-é“¾å¼ã€éé˜»å¡","children":[]},{"level":3,"title":"âœ… 7. å’Œ Future çš„åŒºåˆ«ï¼ˆé‡ç‚¹ï¼‰","slug":"âœ…-7-å’Œ-future-çš„åŒºåˆ«-é‡ç‚¹","link":"#âœ…-7-å’Œ-future-çš„åŒºåˆ«-é‡ç‚¹","children":[]},{"level":3,"title":"ğŸ¯ æ€»ç»“ä¸€æ®µè¯ç­”æ³•ï¼ˆé¢è¯•å›ç­”æ¨¡æ¿ï¼‰","slug":"ğŸ¯-æ€»ç»“ä¸€æ®µè¯ç­”æ³•-é¢è¯•å›ç­”æ¨¡æ¿","link":"#ğŸ¯-æ€»ç»“ä¸€æ®µè¯ç­”æ³•-é¢è¯•å›ç­”æ¨¡æ¿","children":[]}],"readingTime":{"minutes":2.07,"words":622},"filePathRelative":"Interview/é¢è¯•ç­”é¢˜å¡/Java/CompletableFuture ä½¿ç”¨è¯¦è§£.md","excerpt":"\\n<h3><strong>âœ… 1. ç®€ä»‹</strong></h3>\\n<ul>\\n<li>CompletableFuture æ˜¯ Java 8 å¼•å…¥çš„å¼‚æ­¥ç¼–ç¨‹ APIï¼Œå±äº java.util.concurrent åŒ…ã€‚</li>\\n<li>æ”¯æŒéé˜»å¡ã€é“¾å¼ç¼–ç¨‹é£æ ¼ã€‚</li>\\n<li>æ˜¯ Future çš„å¢å¼ºç‰ˆï¼Œæ”¯æŒå›è°ƒã€ç»„åˆå¤šä¸ªä»»åŠ¡ç»“æœã€å¼‚å¸¸å¤„ç†ç­‰ã€‚</li>\\n</ul>\\n<h3><strong>âœ… 2. å¸¸ç”¨æ–¹æ³•åˆ†ç±»æ€»ç»“</strong></h3>\\n<table>\\n<thead>\\n<tr>\\n<th><strong>ç±»å‹</strong></th>\\n<th><strong>æ–¹æ³•</strong></th>\\n<th><strong>æè¿°</strong></th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td>åˆ›å»ºå¼‚æ­¥ä»»åŠ¡</td>\\n<td>supplyAsync() / runAsync()</td>\\n<td>å¼‚æ­¥è·å–å€¼ / å¼‚æ­¥æ‰§è¡Œæ— è¿”å›ä»»åŠ¡</td>\\n</tr>\\n<tr>\\n<td>ä»»åŠ¡ä¸²è”</td>\\n<td>thenApply() / thenAccept()</td>\\n<td>æ¥æ”¶ä¸Šä¸€æ­¥ç»“æœå¹¶ç»§ç»­å¤„ç†</td>\\n</tr>\\n<tr>\\n<td>ç»„åˆä»»åŠ¡</td>\\n<td>thenCombine() / allOf() / anyOf()</td>\\n<td>å¤šä¸ªä»»åŠ¡å¹¶å‘æ‰§è¡Œä¸ç»„åˆ</td>\\n</tr>\\n<tr>\\n<td>å¼‚å¸¸å¤„ç†</td>\\n<td>exceptionally() / handle()</td>\\n<td>æ•è·å¹¶å¤„ç†å¼‚å¸¸</td>\\n</tr>\\n<tr>\\n<td>é˜»å¡è·å–ç»“æœ</td>\\n<td>get() / join()</td>\\n<td>è·å–æœ€ç»ˆç»“æœï¼ˆåŒæ­¥ï¼‰</td>\\n</tr>\\n</tbody>\\n</table>"}')}}]);