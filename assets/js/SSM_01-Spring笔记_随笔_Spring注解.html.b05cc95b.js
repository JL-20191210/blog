"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[66436],{66262:(i,s)=>{s.A=(i,s)=>{const a=i.__vccOpts||i;for(const[i,n]of s)a[i]=n;return a}},58133:(i,s,a)=>{a.r(s),a.d(s,{comp:()=>t,data:()=>l});var n=a(20641);const e={},t=(0,a(66262).A)(e,[["render",function(i,s){return(0,n.uX)(),(0,n.CE)("div",null,s[0]||(s[0]=[(0,n.Fv)('<h1 id="springæ³¨è§£" tabindex="-1"><a class="header-anchor" href="#springæ³¨è§£"><span>Springæ³¨è§£</span></a></h1><h2 id="aop" tabindex="-1"><a class="header-anchor" href="#aop"><span>AOP</span></a></h2><h3 id="propertysource" tabindex="-1"><a class="header-anchor" href="#propertysource"><span>@PropertySource</span></a></h3><p>ç”¨äºæŒ‡å®šå¤–éƒ¨çš„é…ç½®æ–‡ä»¶è·¯å¾„ï¼Œå¹¶å°†æ–‡ä»¶ä¸­çš„å±æ€§åŠ è½½åˆ° Spring çš„ Environment ä¸­ï¼Œæ–¹ä¾¿åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨</p><h3 id="import" tabindex="-1"><a class="header-anchor" href="#import"><span>@Import</span></a></h3><p>å¯ä»¥å¸®åŠ©ä½ å°†å¤šä¸ªé…ç½®ç±»æ¨¡å—åŒ–åœ°å¯¼å…¥åˆ°ä¸€ä¸ªä¸»é…ç½®ç±»ä¸­ï¼Œé¿å…å•ä¸€é…ç½®ç±»è¿‡äºåºå¤§</p><h3 id="runwith" tabindex="-1"><a class="header-anchor" href="#runwith"><span>@RunWith</span></a></h3><p><code>@RunWith</code> çš„ä½œç”¨æ˜¯ä¸ºæµ‹è¯•ç±»æŒ‡å®šä¸€ä¸ªè‡ªå®šä¹‰çš„ <strong>Test Runner</strong>ï¼ŒJUnit é»˜è®¤ä½¿ç”¨çš„è¿è¡Œå™¨<code>BlockJUnit4ClassRunner</code>ï¼Œä½†å¯ä»¥é€šè¿‡ <code>@RunWith</code> æ¥æŒ‡å®šå…¶ä»–çš„æµ‹è¯•è¿è¡Œå™¨</p><h3 id="contextconfiguration" tabindex="-1"><a class="header-anchor" href="#contextconfiguration"><span>@ContextConfiguration</span></a></h3><p><code>@ContextConfiguration</code> æ˜¯ Spring æµ‹è¯•æ¡†æ¶ä¸­çš„ä¸€ä¸ªæ³¨è§£ï¼Œå®ƒç”¨äºæŒ‡å®šåŠ è½½ Spring ä¸Šä¸‹æ–‡çš„é…ç½®ï¼Œé€šå¸¸ä¸ <code>@RunWith(SpringRunner.class)</code> ä¸€èµ·ä½¿ç”¨ã€‚è¿™ä¸ªæ³¨è§£åœ¨è¿›è¡Œ Spring é›†æˆæµ‹è¯•æ—¶éå¸¸æœ‰ç”¨ï¼Œèƒ½å¤Ÿè®©æµ‹è¯•ç±»åŠ è½½ Spring é…ç½®ï¼Œå¹¶æ³¨å…¥ Spring å®¹å™¨ä¸­çš„ Bean</p><h3 id="repository" tabindex="-1"><a class="header-anchor" href="#repository"><span>@Repository</span></a></h3><p><code>@Repository</code> æ³¨è§£å°†ä¸€ä¸ªç±»æ ‡è¯†ä¸º DAO å±‚çš„ç»„ä»¶</p><h2 id="äº‹åŠ¡" tabindex="-1"><a class="header-anchor" href="#äº‹åŠ¡"><span>äº‹åŠ¡</span></a></h2><h3 id="enabletransactionmanagement" tabindex="-1"><a class="header-anchor" href="#enabletransactionmanagement"><span>@EnableTransactionManagement</span></a></h3><p>è®¾ç½®å½“å‰Springç¯å¢ƒä¸­å¼€å¯æ³¨è§£å¼äº‹åŠ¡æ”¯æŒ</p><p>ğŸ”¥äº‹åŠ¡ç®¡ç†å™¨è¦æ ¹æ®ä½¿ç”¨æŠ€æœ¯è¿›è¡Œé€‰æ‹©ï¼ŒMybatisæ¡†æ¶ä½¿ç”¨çš„æ˜¯JDBCäº‹åŠ¡ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨<code>DataSourceTransactionManager</code></p><h3 id="transactional" tabindex="-1"><a class="header-anchor" href="#transactional"><span>@Transactional</span></a></h3><p>ğŸ± ä¸ºå½“å‰ä¸šåŠ¡å±‚æ–¹æ³•æ·»åŠ äº‹åŠ¡</p><p>ğŸŒ³ <code> @Transactional(rollbackFor = {IOException.class})</code>ï¼šåœ¨ Spring çš„äº‹åŠ¡ç®¡ç†ä¸­ï¼Œé‡åˆ° <code>IOException</code> å¼‚å¸¸æ—¶ï¼Œäº‹åŠ¡ä¼šè¿›è¡Œå›æ»šã€‚é»˜è®¤Springçš„äº‹åŠ¡åªä¼šå¯¹<code>Errorå¼‚å¸¸</code>å’Œ<code>RuntimeExceptionå¼‚å¸¸</code>åŠå…¶å­ç±»è¿›è¡Œäº‹åŠ¡å›æ»šï¼Œå…¶ä»–çš„å¼‚å¸¸ç±»å‹æ˜¯ä¸ä¼šå›æ»šçš„</p><p>ğŸŒ³<code>@Transactional(propagation = Propagation.REQUIRES_NEW)</code>:propagationè®¾ç½®äº‹åŠ¡å±æ€§ï¼šä¼ æ’­è¡Œä¸ºè®¾ç½®ä¸ºå½“å‰æ“ä½œéœ€è¦æ–°äº‹åŠ¡</p><h2 id="web" tabindex="-1"><a class="header-anchor" href="#web"><span>Web</span></a></h2><h3 id="exceptionhandler" tabindex="-1"><a class="header-anchor" href="#exceptionhandler"><span>@ExceptionHandler</span></a></h3><table><thead><tr><th>åç§°</th><th>@ExceptionHandler</th></tr></thead><tbody><tr><td>ç±»å‹</td><td><mark>æ–¹æ³•æ³¨è§£</mark></td></tr><tr><td>ä½ç½®</td><td>ä¸“ç”¨äºå¼‚å¸¸å¤„ç†çš„æ§åˆ¶å™¨æ–¹æ³•ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>è®¾ç½®æŒ‡å®šå¼‚å¸¸çš„å¤„ç†æ–¹æ¡ˆï¼ŒåŠŸèƒ½ç­‰åŒäºæ§åˆ¶å™¨æ–¹æ³•ï¼Œ<br>å‡ºç°å¼‚å¸¸åç»ˆæ­¢åŸå§‹æ§åˆ¶å™¨æ‰§è¡Œ,å¹¶è½¬å…¥å½“å‰æ–¹æ³•æ‰§è¡Œ</td></tr></tbody></table><p>Spring æ¡†æ¶ä¸­ç”¨æ¥å¤„ç†æ§åˆ¶å™¨ï¼ˆControllerï¼‰æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸çš„æ³¨è§£ã€‚å®ƒå…è®¸ä½ æŒ‡å®šä¸€ä¸ªæ–¹æ³•æ¥å¤„ç†ç‰¹å®šç±»å‹çš„å¼‚å¸¸ï¼Œå¹¶ä¸”å¯ä»¥è‡ªå®šä¹‰è¿”å›çš„é”™è¯¯ä¿¡æ¯æˆ–å“åº”</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">ControllerAdvice</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> GlobalExceptionHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">ExceptionHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">ResponseStatus</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">HttpStatus</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">INTERNAL_SERVER_ERROR</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> handleGlobalException</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Exception</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Model</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> model</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">        model</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">addAttribute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;error&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getMessage</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;errorPage&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ğŸ”¥@RestControllerAdviceåŒ…å«@ControllerAdvice</p><h3 id="restcontrolleradvice" tabindex="-1"><a class="header-anchor" href="#restcontrolleradvice"><span>@RestControllerAdvice</span></a></h3><table><thead><tr><th>åç§°</th><th>@RestControllerAdvice</th></tr></thead><tbody><tr><td>ç±»å‹</td><td><mark>ç±»æ³¨è§£</mark></td></tr><tr><td>ä½ç½®</td><td>Resté£æ ¼å¼€å‘çš„æ§åˆ¶å™¨å¢å¼ºç±»å®šä¹‰ä¸Šæ–¹</td></tr><tr><td>ä½œç”¨</td><td>ä¸ºResté£æ ¼å¼€å‘çš„æ§åˆ¶å™¨ç±»åšå¢å¼º</td></tr></tbody></table>',28)]))}]]),l=JSON.parse('{"path":"/SSM/01-Spring%E7%AC%94%E8%AE%B0/%E9%9A%8F%E7%AC%94/Spring%E6%B3%A8%E8%A7%A3.html","title":"Springæ³¨è§£","lang":"zh-CN","frontmatter":{"gitInclude":[]},"headers":[{"level":2,"title":"AOP","slug":"aop","link":"#aop","children":[{"level":3,"title":"@PropertySource","slug":"propertysource","link":"#propertysource","children":[]},{"level":3,"title":"@Import","slug":"import","link":"#import","children":[]},{"level":3,"title":"@RunWith","slug":"runwith","link":"#runwith","children":[]},{"level":3,"title":"@ContextConfiguration","slug":"contextconfiguration","link":"#contextconfiguration","children":[]},{"level":3,"title":"@Repository","slug":"repository","link":"#repository","children":[]}]},{"level":2,"title":"äº‹åŠ¡","slug":"äº‹åŠ¡","link":"#äº‹åŠ¡","children":[{"level":3,"title":"@EnableTransactionManagement","slug":"enabletransactionmanagement","link":"#enabletransactionmanagement","children":[]},{"level":3,"title":"@Transactional","slug":"transactional","link":"#transactional","children":[]}]},{"level":2,"title":"Web","slug":"web","link":"#web","children":[{"level":3,"title":"@ExceptionHandler","slug":"exceptionhandler","link":"#exceptionhandler","children":[]},{"level":3,"title":"@RestControllerAdvice","slug":"restcontrolleradvice","link":"#restcontrolleradvice","children":[]}]}],"readingTime":{"minutes":1.93,"words":579},"filePathRelative":"SSM/01-Springç¬”è®°/éšç¬”/Springæ³¨è§£.md","excerpt":"\\n<h2>AOP</h2>\\n<h3>@PropertySource</h3>\\n<p>ç”¨äºæŒ‡å®šå¤–éƒ¨çš„é…ç½®æ–‡ä»¶è·¯å¾„ï¼Œå¹¶å°†æ–‡ä»¶ä¸­çš„å±æ€§åŠ è½½åˆ° Spring çš„ Environment ä¸­ï¼Œæ–¹ä¾¿åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨</p>\\n<h3>@Import</h3>\\n<p>å¯ä»¥å¸®åŠ©ä½ å°†å¤šä¸ªé…ç½®ç±»æ¨¡å—åŒ–åœ°å¯¼å…¥åˆ°ä¸€ä¸ªä¸»é…ç½®ç±»ä¸­ï¼Œé¿å…å•ä¸€é…ç½®ç±»è¿‡äºåºå¤§</p>\\n<h3>@RunWith</h3>\\n<p><code>@RunWith</code> çš„ä½œç”¨æ˜¯ä¸ºæµ‹è¯•ç±»æŒ‡å®šä¸€ä¸ªè‡ªå®šä¹‰çš„ <strong>Test Runner</strong>ï¼ŒJUnit é»˜è®¤ä½¿ç”¨çš„è¿è¡Œå™¨<code>BlockJUnit4ClassRunner</code>ï¼Œä½†å¯ä»¥é€šè¿‡ <code>@RunWith</code> æ¥æŒ‡å®šå…¶ä»–çš„æµ‹è¯•è¿è¡Œå™¨</p>"}')}}]);