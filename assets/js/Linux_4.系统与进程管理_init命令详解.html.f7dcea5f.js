"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[55871],{66262:(i,s)=>{s.A=(i,s)=>{const a=i.__vccOpts||i;for(const[i,n]of s)a[i]=n;return a}},82637:(i,s,a)=>{a.r(s),a.d(s,{comp:()=>t,data:()=>e});var n=a(20641);const l={},t=(0,a(66262).A)(l,[["render",function(i,s){return(0,n.uX)(),(0,n.CE)("div",null,s[0]||(s[0]=[(0,n.Fv)('<h1 id="init命令详解" tabindex="-1"><a class="header-anchor" href="#init命令详解"><span>init命令详解</span></a></h1><h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述"><span>概述</span></a></h2><blockquote><p>把控制命令发送给 init 守护程序。</p><p>init 进程号始终为 1，发送 TERM 信号给 init 会终止所有用户进程、守护进程等。</p><hr><p>init 可用于<code>安全</code>关闭 重启 停止计算机，init 是所有进程的祖先，是 Linux 系统不可或缺的程序。</p><p>强制直接关闭 Linux 系统计算机电源可能导致进程数据丢失，使系统处于不稳定状态 (甚至损坏硬件设备)。</p><hr><p><code>shutdown</code>命令需有 root 权限，shutdown 是把信号发送给<code>init</code>命令，要求 init 改变 runlevel，以此进行相关操作。</p><p>关机或重启计算机实际上是 <code>runlevel</code> 的调整，因此，也可使用 <code>init</code> 命令 (需 root 权限) 直接调整 <code>runlevel </code>进行相关操作。</p></blockquote><h2 id="参数" tabindex="-1"><a class="header-anchor" href="#参数"><span>参数</span></a></h2><p>init + 运行级别</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">init</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [OPTIONS...] COMMAND</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Send</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> control</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> commands</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> init</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> daemon.</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Commands:</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">              Power-off</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> machine</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">              Reboot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> machine</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  2,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 3,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 4,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 5</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     Start</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> runlevelX.target</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> unit</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  1,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> s,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        Enter</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rescue</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mode</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  q,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Q</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">           Reload</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> init</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> daemon</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> configuration</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  u,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> U</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">           Reexecute</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> init</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> daemon</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>init 0：安全关闭计算机</p><p>init 6：重启计算机</p><p>init 1 ：单用户模式（救援模式）</p><p>init 2：多用户，没有NFS不联网</p><p>init 3：完全多用户模式（正常运行级别）</p><p>init 4：没用</p><p>init 5：图形化界面</p></blockquote><h2 id="开机默认级别设置" tabindex="-1"><a class="header-anchor" href="#开机默认级别设置"><span>开机默认级别设置</span></a></h2><h3 id="centos" tabindex="-1"><a class="header-anchor" href="#centos"><span>centos</span></a></h3><p>修改<code>/etc/inittab</code>文件</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1.</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # inittab       This file describes how the INIT process should set up    </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">2.</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  #               the system in a certain run-level.    </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">3.</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  #    </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">4.</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # Author:       Miquel van Smoorenburg, &lt;miquels@drinkel.nl.mugnet.org&gt;    </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">5.</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  #               Modified for RHS Linux by Marc Ewing and Donnie Barnes    </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">6.</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  #   </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">7.</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # Default runlevel. The runlevels used by RHS are:    </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">8.</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  #   0 - halt (Do NOT set initdefault to this)    </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">9.</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  #   1 - Single user mode    </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">10.</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #   2 - Multiuser, without NFS (The same as 3, if you do not have networking)    </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">11.</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #   3 - Full multiuser mode    </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">12.</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #   4 - unused    </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">13.</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #   5 - X11    </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">14.</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #   6 - reboot (Do NOT set initdefault to this)    </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">15.</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #     </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">16.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> id:3:initdefault:</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>第16行：</p><p>id:3:initdefault: 默认启动命令行模式</p><p>id:5:initdefault: 默认启动图形化界面模式</p><hr><p>⚠️不能设置为0或者6，会造成反复关机和重启</p></blockquote><h3 id="ubuntu" tabindex="-1"><a class="header-anchor" href="#ubuntu"><span>ubuntu</span></a></h3><p>修改<code>/etc/default/grub</code>文件</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># If you change this file, run &#39;update-grub&#39; afterwards to update</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># /boot/grub/grub.cfg.</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># For full documentation of the options in this file, see:</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#   info -f grub -n &#39;Simple configuration&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">GRUB_DEFAULT</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">0</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">GRUB_TIMEOUT_STYLE</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">hidden</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">GRUB_TIMEOUT</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">0</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">GRUB_DISTRIBUTOR</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">lsb_release</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 2&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/null </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">||</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Debian`</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">GRUB_CMDLINE_LINUX_DEFAULT</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;quiet splash&quot;</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">GRUB_CMDLINE_LINUX</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>修改配置项</p><p>GRUB_CMDLINE_LINUX_DEFAULT=&quot;text&quot; 默认启动命令行模式</p><p>GRUB_CMDLINE_LINUX_DEFAULT=&quot;quiet splash&quot; 默认启动图形化界面模式</p><hr><p>修改后更新 Grub 配置：<code>sudo update-grub</code></p><p>重启系统：<code>sudo reboot</code></p></blockquote><p>或者使用<code>systemctl</code>修改</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> set-default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> multi-user.target</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #默认启动命令行模式</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> set-default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> graphical.target</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #默认启动图形化界面模式</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>重启系统：<code>sudo reboot</code></p></blockquote>',19)]))}]]),e=JSON.parse('{"path":"/Linux/4.%E7%B3%BB%E7%BB%9F%E4%B8%8E%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/init%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3.html","title":"init命令详解","lang":"zh-CN","frontmatter":{"icon":"fa-brands fa-linux","date":"2024-10-27T00:00:00.000Z","category":["Linux"],"tag":["总结"],"gitInclude":[]},"headers":[{"level":2,"title":"概述","slug":"概述","link":"#概述","children":[]},{"level":2,"title":"参数","slug":"参数","link":"#参数","children":[]},{"level":2,"title":"开机默认级别设置","slug":"开机默认级别设置","link":"#开机默认级别设置","children":[{"level":3,"title":"centos","slug":"centos","link":"#centos","children":[]},{"level":3,"title":"ubuntu","slug":"ubuntu","link":"#ubuntu","children":[]}]}],"readingTime":{"minutes":2.15,"words":644},"filePathRelative":"Linux/4.系统与进程管理/init命令详解.md","localizedDate":"2024年10月27日","excerpt":"\\n<h2>概述</h2>\\n<blockquote>\\n<p>把控制命令发送给 init 守护程序。</p>\\n<p>init 进程号始终为 1，发送 TERM 信号给 init 会终止所有用户进程、守护进程等。</p>\\n<hr>\\n<p>init 可用于<code>安全</code>关闭 重启 停止计算机，init 是所有进程的祖先，是 Linux 系统不可或缺的程序。</p>\\n<p>强制直接关闭 Linux 系统计算机电源可能导致进程数据丢失，使系统处于不稳定状态 (甚至损坏硬件设备)。</p>\\n<hr>\\n<p><code>shutdown</code>命令需有 root 权限，shutdown 是把信号发送给<code>init</code>命令，要求 init 改变 runlevel，以此进行相关操作。</p>\\n<p>关机或重启计算机实际上是 <code>runlevel</code> 的调整，因此，也可使用 <code>init</code> 命令 (需 root 权限) 直接调整 <code>runlevel </code>进行相关操作。</p>\\n</blockquote>"}')}}]);