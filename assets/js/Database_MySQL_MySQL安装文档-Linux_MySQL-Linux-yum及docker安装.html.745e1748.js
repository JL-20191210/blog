"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[96114],{66262:(s,i)=>{i.A=(s,i)=>{const l=s.__vccOpts||s;for(const[s,a]of i)l[s]=a;return l}},68828:(s,i,l)=>{l.r(i),l.d(i,{comp:()=>c,data:()=>p});var a=l(20641);const e=l.p+"assets/img/1683039274644-14bf0b86-9fd2-4df8-9aab-2374ae50ac35.d1eb8f03.png",t=l.p+"assets/img/1683039565021-9a2dafcc-c79a-48db-aba0-b4abe4689125.58bc932f.png",n=l.p+"assets/img/1683039823896-f9050750-c2a6-40fe-bd6a-6e0d03d7b53d.ada260f6.png",r=l.p+"assets/img/1683040028830-206bb40e-f2b1-4394-91c4-f152c304f590.b88d4479.png",h=l.p+"assets/img/1683041925046-01ef7836-3f60-48e2-bfd7-88e265cf6002.a0985255.png",o=l.p+"assets/img/1683042108511-6c5474fb-3ce6-426e-b31c-8130c7385b22.dc856150.png",d={},c=(0,l(66262).A)(d,[["render",function(s,i){return(0,a.uX)(),(0,a.CE)("div",null,[i[0]||(i[0]=(0,a.Fv)('<h1 id="mysql8-0使用yum或docker安装" tabindex="-1"><a class="header-anchor" href="#mysql8-0使用yum或docker安装"><span>MySQL8.0使用Yum或docker安装</span></a></h1><h2 id="普通安装" tabindex="-1"><a class="header-anchor" href="#普通安装"><span>普通安装</span></a></h2><h3 id="获取源安装包" tabindex="-1"><a class="header-anchor" href="#获取源安装包"><span>获取源安装包</span></a></h3><ul><li>确定当前linux系统内核版本：[root@localhost ~]# cat /etc/redhat-release</li><li>进入官网下载匹配的安装包：https://dev.mysql.com/downloads/repo/yum/</li><li>假设为centos7则对应的版本为</li><li><img src="'+e+'" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></li></ul>',4)),(0,a.Q3)(" more "),i[1]||(i[1]=(0,a.Fv)('<h3 id="安装mysql源" tabindex="-1"><a class="header-anchor" href="#安装mysql源"><span>安装MySQL源</span></a></h3><ul><li>将下载完成的安装包上传至Linux</li><li>root用户执行安装命令：[root@localhost ~]# rpm -Uvh mysql80-community-release-el7-3.noarch.rpm</li><li><img src="'+t+'" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></li><li>检查是否安装成功：执行成功后会在/etc/yum.repos.d/目录下生成两个repo文件mysql-community.repo及 mysql-community-source.repo</li><li>查看MySQL资源：[root@localhost ~]# yum repolist enabled | grep &quot;mysql.<em>-community.</em>&quot;</li><li><img src="'+n+'" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></li></ul><h3 id="指定版本安装" tabindex="-1"><a class="header-anchor" href="#指定版本安装"><span>指定版本安装</span></a></h3><ul><li>使用MySQL Yum Repository安装MySQL，默认会选择当前最新的稳定版本</li><li>使用命令：[root@localhost ~]# yum repolist all | grep mysql，查看当前yum repolist的所有版本</li><li><img src="'+r+'" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></li><li>disable8.0版本：[root@localhost ~]# yum-config-manager --disable mysql80-community（安装8.0不执行本句）</li><li>enable5.7版本：[root@localhost ~]# yum-config-manager --enable mysql57-community（安装8.0不执行本句）</li><li>安装mysql：[root@localhost ~]# yum install mysql-community-server</li></ul><h3 id="启动及配置" tabindex="-1"><a class="header-anchor" href="#启动及配置"><span>启动及配置</span></a></h3><ul><li>启动/停止/重启：[root@localhost ~]# systemctl start/stop/restart mysqld.service</li><li>查看服务状态：[root@localhost ~]# systemctl status mysqld.service</li><li>MySQL第一次启动后会创建超级管理员账号root@localhost，初始密码存储在日志文件中：[root@localhost ~]# grep &#39;temporary password&#39; /var/log/mysqld.log</li><li>登录MySQL：[root@localhost ~]# mysql -uroot -p</li><li>修改密码：mysql&gt;ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;password&#39;;（如果想使用简单密码需要修改数据库密码策略）</li><li>查看数据库编码：mysql&gt;SHOW VARIABLES LIKE &#39;character%&#39;;</li><li>修改配置文件：[root@localhost ~]# vim /etc/my.cnf</li><li>添加：</li></ul><p>[mysqld]</p><p>character_set_server=utf8</p><p>init-connect=&#39;SET NAMES utf8&#39;</p><h3 id="设置密码策略-可使用简单密码" tabindex="-1"><a class="header-anchor" href="#设置密码策略-可使用简单密码"><span>设置密码策略（可使用简单密码）</span></a></h3><ul><li>查看管理密码的变量：mysql&gt;SHOW VARIABLES LIKE &#39;validate_password%&#39;;</li><li><img src="'+h+'" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></li><li>VARIABLES n.变量</li><li>修改变量：mysql&gt;set global validate_password.policy=LOW;</li><li>其他变量也可自定义</li><li><img src="'+o+'" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></li></ul><h3 id="设置开机自动启动" tabindex="-1"><a class="header-anchor" href="#设置开机自动启动"><span>设置开机自动启动</span></a></h3><p>[root@localhost ~]# systemctl enable mysqld</p><p>[root@localhost ~]# systemctl daemon-reload</p><h3 id="允许远程登录" tabindex="-1"><a class="header-anchor" href="#允许远程登录"><span>允许远程登录</span></a></h3><ul><li>关闭防火墙：[root@localhost ~]#systemctl stop firewalld</li><li>设置其他用户可连接：</li></ul><p>切换数据库：mysql&gt;use mysql;</p><p>查看允许访问用户：mysql&gt; select host from user where user = &#39;root&#39;;</p><p>修改为所有用户可访问：mysql&gt; update user set host = &#39;%&#39; where user =&#39;root&#39;;</p><ul><li>重启MySQL：[root@localhost ~]# systemctl restart mysqld</li></ul><h2 id="docker安装" tabindex="-1"><a class="header-anchor" href="#docker安装"><span>Docker安装</span></a></h2><blockquote><p>在Docker中安装MySQL 8.0并将容器的数据目录映射到本地主机，并设置容器的重启策略为“始终重启”：</p></blockquote><h3 id="拉取mysql-8-0镜像" tabindex="-1"><a class="header-anchor" href="#拉取mysql-8-0镜像"><span><strong>拉取MySQL 8.0镜像</strong>：</span></a></h3><p>运行以下命令来从Docker Hub上拉取MySQL 8.0镜像：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pull</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mysql:8.0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="创建并运行mysql容器并映射数据目录" tabindex="-1"><a class="header-anchor" href="#创建并运行mysql容器并映射数据目录"><span><strong>创建并运行MySQL容器并映射数据目录</strong>：</span></a></h3><p>运行以下命令来创建并运行一个MySQL容器，并将容器内的 <code>/var/lib/mysql</code> 数据目录映射到本地主机的一个目录（例如 <code>/path/to/your/mysql/data</code>），同时设置重启策略为“始终重启”：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mysql</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-d </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-p </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">3306:3306</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">--restart </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">always</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-v </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/datavol/docker/mysql/log:/var/log/mysql</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-v </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/datavol/docker/mysql/data:/var/lib/mysql</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-v </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/datavol/docker/mysql/conf:/etc/mysql/conf.d</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-e </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">MYSQL_ROOT_PASSWORD=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">123456</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">mysql:8.0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="连接到mysql容器" tabindex="-1"><a class="header-anchor" href="#连接到mysql容器"><span><strong>连接到MySQL容器</strong>：</span></a></h3><p>使用以下命令连接到MySQL容器：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> exec</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -it</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mysql-container</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mysql</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -uroot</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="管理mysql容器" tabindex="-1"><a class="header-anchor" href="#管理mysql容器"><span><strong>管理MySQL容器</strong>：</span></a></h3><ul><li>停止容器：<code>docker stop mysql-container</code></li><li>重新启动容器：<code>docker start mysql-container</code></li><li>删除容器：<code>docker rm mysql-container</code></li></ul>',33))])}]]),p=JSON.parse('{"path":"/Database/MySQL/MySQL%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3-Linux/MySQL-Linux-yum%E5%8F%8Adocker%E5%AE%89%E8%A3%85.html","title":"MySQL8.0使用Yum或docker安装","lang":"zh-CN","frontmatter":{"icon":"pen-to-square","date":"2024-11-16T00:00:00.000Z","category":["MySQL"],"tag":["安装","yum安装","docker安装"],"gitInclude":[]},"headers":[{"level":2,"title":"普通安装","slug":"普通安装","link":"#普通安装","children":[{"level":3,"title":"获取源安装包","slug":"获取源安装包","link":"#获取源安装包","children":[]},{"level":3,"title":"安装MySQL源","slug":"安装mysql源","link":"#安装mysql源","children":[]},{"level":3,"title":"指定版本安装","slug":"指定版本安装","link":"#指定版本安装","children":[]},{"level":3,"title":"启动及配置","slug":"启动及配置","link":"#启动及配置","children":[]},{"level":3,"title":"设置密码策略（可使用简单密码）","slug":"设置密码策略-可使用简单密码","link":"#设置密码策略-可使用简单密码","children":[]},{"level":3,"title":"设置开机自动启动","slug":"设置开机自动启动","link":"#设置开机自动启动","children":[]},{"level":3,"title":"允许远程登录","slug":"允许远程登录","link":"#允许远程登录","children":[]}]},{"level":2,"title":"Docker安装","slug":"docker安装","link":"#docker安装","children":[{"level":3,"title":"拉取MySQL 8.0镜像：","slug":"拉取mysql-8-0镜像","link":"#拉取mysql-8-0镜像","children":[]},{"level":3,"title":"创建并运行MySQL容器并映射数据目录：","slug":"创建并运行mysql容器并映射数据目录","link":"#创建并运行mysql容器并映射数据目录","children":[]},{"level":3,"title":"连接到MySQL容器：","slug":"连接到mysql容器","link":"#连接到mysql容器","children":[]},{"level":3,"title":"管理MySQL容器：","slug":"管理mysql容器","link":"#管理mysql容器","children":[]}]}],"readingTime":{"minutes":2.64,"words":792},"filePathRelative":"Database/MySQL/MySQL安装文档-Linux/MySQL-Linux-yum及docker安装.md","localizedDate":"2024年11月16日","excerpt":"\\n<h2>普通安装</h2>\\n<h3>获取源安装包</h3>\\n<ul>\\n<li>确定当前linux系统内核版本：[root@localhost ~]# cat /etc/redhat-release</li>\\n<li>进入官网下载匹配的安装包：https://dev.mysql.com/downloads/repo/yum/</li>\\n<li>假设为centos7则对应的版本为</li>\\n<li><figcaption>img</figcaption></li>\\n</ul>\\n"}')}}]);