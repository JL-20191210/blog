"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[55224],{66262:(l,o)=>{o.A=(l,o)=>{const i=l.__vccOpts||l;for(const[l,e]of o)i[l]=e;return i}},74548:(l,o,i)=>{i.r(o),i.d(o,{comp:()=>n,data:()=>s});var e=i(20641);const t={},n=(0,i(66262).A)(t,[["render",function(l,o){return(0,e.uX)(),(0,e.CE)("div",null,o[0]||(o[0]=[(0,e.Fv)('<h1 id="📝-面试问答套装-数据库-分布式-性能方向" tabindex="-1"><a class="header-anchor" href="#📝-面试问答套装-数据库-分布式-性能方向"><span>📝 面试问答套装（数据库/分布式/性能方向）</span></a></h1><hr><h2 id="一、项目数据量与表设计" tabindex="-1"><a class="header-anchor" href="#一、项目数据量与表设计"><span>一、项目数据量与表设计</span></a></h2><p><strong>1. 每天产生多少数据，总量大概多少？</strong></p><ul><li>日增 3~5 万条业务数据</li><li>核心表总量 200~300 万行，辅助表累计千万级</li><li>口语总结：</li></ul><blockquote><p>我们系统每天产生约 3~5 万条数据，核心表总量两三百万，日志和历史表累计千万级，整体数据量较大。</p></blockquote><p><strong>2. 核心业务表有哪些？数据量？</strong></p><ul><li>核心表：<code>demand</code>、<code>demand_process</code>、<code>status_sync</code>、<code>message_log</code>、<code>report_history</code></li><li>数据量从 100 万到 2,000 万不等</li><li>口语总结：</li></ul><blockquote><p>核心业务表包括需求主表、处理表、状态同步表、MQ日志表和报表归档表，总量超过 3,000 万条。</p></blockquote><p><strong>3. 数据库是单实例还是多实例？读写分离有吗？</strong></p><ul><li>PostgreSQL 主从架构，主库写、从库读</li><li>口语总结：</li></ul><blockquote><p>数据库采用主从架构，写入主库，查询走从库，保证性能与高可用。</p></blockquote><p><strong>4. 表是单表还是分表/分区？分区策略？</strong></p><ul><li>核心小表单表，大表按时间分区（按月/季度）</li><li>日志表按月分区，历史归档</li><li>口语总结：</li></ul><blockquote><p>高频大表按时间分区，日志表每月一张，历史数据归档，提升查询性能。</p></blockquote><p><strong>5. 为什么没做水平分库？未来扩展如何？</strong></p><ul><li>现有数据量和分区+读写分离+缓存足够</li><li>后期可引入 Sharding 或 Citus</li><li>口语总结：</li></ul><blockquote><p>目前分区+读写分离+缓存满足性能，未来可水平分库。</p></blockquote><hr><h2 id="二、分布式事务与数据一致性" tabindex="-1"><a class="header-anchor" href="#二、分布式事务与数据一致性"><span>二、分布式事务与数据一致性</span></a></h2><p><strong>1. 多库之间的数据一致性如何保证？</strong></p><ul><li>核心链路用 Seata AT + <code>@GlobalTransactional</code> → 强一致性</li><li>非核心链路本地事务 + 消息表 + 定时任务 → 最终一致性</li><li>缓存用延迟双删 + 异步 MQ 刷新</li><li>口语总结：</li></ul><blockquote><p>核心用 Seata 强一致性，非核心用可靠消息最终一致性，缓存通过延迟双删保持一致。</p></blockquote><p><strong>2. MQ 消息出错或重复消费怎么处理？</strong></p><ul><li>消息表 + 定时任务重试</li><li>消费端幂等处理</li><li>口语总结：</li></ul><blockquote><p>MQ 消息失败通过重试补偿，消费端幂等保证不会重复处理。</p></blockquote><p><strong>3. 为什么选择 Seata？优缺点？</strong></p><ul><li>优点：简单集成，自动管理分布式事务，回滚统一</li><li>缺点：依赖 Seata Server，网络延迟可能影响性能</li><li>口语总结：</li></ul><blockquote><p>Seata 集成方便，适合业务链路，但网络延迟需考虑性能。</p></blockquote><hr><h2 id="三、系统-qps-与性能" tabindex="-1"><a class="header-anchor" href="#三、系统-qps-与性能"><span>三、系统 QPS 与性能</span></a></h2><p><strong>1. 系统平均和峰值 QPS？</strong></p><ul><li>平均：≈100 QPS</li><li>峰值：≈1,000–1,200 QPS</li><li>口语总结：</li></ul><blockquote><p>平均约 100 QPS，峰值演练时可达 1,000 多。</p></blockquote><p><strong>2. 写入和查询比例？</strong></p><ul><li>写：约 20%（平均 20 QPS，峰值 300 QPS）</li><li>读：约 80%（平均 80 QPS，峰值 900 QPS）</li><li>口语总结：</li></ul><blockquote><p>写入较少，读请求占比大，查询和报表压力最大。</p></blockquote><p><strong>3. QPS 峰值如何应对？</strong></p><ul><li>Redis 缓存削峰 60–75%</li><li>PostgreSQL 读写分离</li><li>分区表 + 历史归档</li><li>异步 MQ + 导出限流分页</li><li>口语总结：</li></ul><blockquote><p>高峰通过缓存、读写分离、分区和异步处理保证系统稳定。</p></blockquote><hr><h2 id="四、数据库与-sql-优化" tabindex="-1"><a class="header-anchor" href="#四、数据库与-sql-优化"><span>四、数据库与 SQL 优化</span></a></h2><p><strong>1. 做了哪些索引优化？</strong></p><ul><li>联合索引：<code>status</code> + <code>region_id</code> + <code>update_time</code></li><li>高频查询字段单独索引</li><li>口语总结：</li></ul><blockquote><p>为状态和区域等高频字段建联合索引，提升查询性能。</p></blockquote><p><strong>2. 查询性能瓶颈如何解决？</strong></p><ul><li>优化 SQL（UNION 合并实拍+历史表）</li><li>减少跨表 JOIN 和跨系统调用</li><li>Redis 缓存热点数据</li><li>口语总结：</li></ul><blockquote><p>优化 SQL 和缓存，实现秒级响应。</p></blockquote><p><strong>3. 报表导出如何优化？</strong></p><ul><li>EasyExcel 流式分页写入</li><li>索引优化 + 历史数据归档</li><li>口语总结：</li></ul><blockquote><p>流式分页+索引优化，使报表生成从分钟级优化到秒级。</p></blockquote><hr><h2 id="五、分布式架构与微服务" tabindex="-1"><a class="header-anchor" href="#五、分布式架构与微服务"><span>五、分布式架构与微服务</span></a></h2><p><strong>1. 项目如何拆分微服务？</strong></p><ul><li>需求管理、需求处理、状态同步、报表导出</li><li>每个服务多实例容器化部署，Nacos 服务发现</li><li>口语总结：</li></ul><blockquote><p>微服务拆分明确，多副本部署 + Nacos 自动负载均衡。</p></blockquote><p><strong>2. RabbitMQ 作用？</strong></p><ul><li>异步消息传递，跨节点同步，削峰容错</li><li>口语总结：</li></ul><blockquote><p>MQ 异步处理保证节点间数据一致，提升系统可用性。</p></blockquote><p><strong>3. 容器化（Docker）优势？</strong></p><ul><li>快速上线、环境隔离、高可用</li><li>口语总结：</li></ul><blockquote><p>Docker 保证快速部署和环境一致性，支持弹性扩容。</p></blockquote><hr><p>💡 <strong>使用方法</strong></p><ul><li>按模块练习回答，每块用一句口语总结</li><li>面试官可追问细节，你只需展开关键点</li><li>熟练后可一口气讲完数据库/性能/事务相关问题</li></ul>',65)]))}]]),s=JSON.parse('{"path":"/Interview/Java/00-%E9%A1%B9%E7%9B%AE%E7%9B%B8%E5%85%B3/%E6%95%B0%E6%8D%AE%E5%BA%93-%E5%88%86%E5%B8%83%E5%BC%8F-%E6%80%A7%E8%83%BD.html","title":"📝 面试问答套装（数据库/分布式/性能方向）","lang":"zh-CN","frontmatter":{"gitInclude":[]},"headers":[{"level":2,"title":"一、项目数据量与表设计","slug":"一、项目数据量与表设计","link":"#一、项目数据量与表设计","children":[]},{"level":2,"title":"二、分布式事务与数据一致性","slug":"二、分布式事务与数据一致性","link":"#二、分布式事务与数据一致性","children":[]},{"level":2,"title":"三、系统 QPS 与性能","slug":"三、系统-qps-与性能","link":"#三、系统-qps-与性能","children":[]},{"level":2,"title":"四、数据库与 SQL 优化","slug":"四、数据库与-sql-优化","link":"#四、数据库与-sql-优化","children":[]},{"level":2,"title":"五、分布式架构与微服务","slug":"五、分布式架构与微服务","link":"#五、分布式架构与微服务","children":[]}],"readingTime":{"minutes":3.93,"words":1178},"filePathRelative":"Interview/Java/00-项目相关/数据库-分布式-性能.md","excerpt":"\\n<hr>\\n<h2>一、项目数据量与表设计</h2>\\n<p><strong>1. 每天产生多少数据，总量大概多少？</strong></p>\\n<ul>\\n<li>日增 3~5 万条业务数据</li>\\n<li>核心表总量 200~300 万行，辅助表累计千万级</li>\\n<li>口语总结：</li>\\n</ul>\\n<blockquote>\\n<p>我们系统每天产生约 3~5 万条数据，核心表总量两三百万，日志和历史表累计千万级，整体数据量较大。</p>\\n</blockquote>\\n<p><strong>2. 核心业务表有哪些？数据量？</strong></p>\\n<ul>\\n<li>核心表：<code>demand</code>、<code>demand_process</code>、<code>status_sync</code>、<code>message_log</code>、<code>report_history</code></li>\\n<li>数据量从 100 万到 2,000 万不等</li>\\n<li>口语总结：</li>\\n</ul>"}')}}]);