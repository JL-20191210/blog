"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[9982],{66262:(i,s)=>{s.A=(i,s)=>{const n=i.__vccOpts||i;for(const[i,a]of s)n[i]=a;return n}},49099:(i,s,n)=>{n.r(s),n.d(s,{comp:()=>l,data:()=>t});var a=n(20641);const e={},l=(0,n(66262).A)(e,[["render",function(i,s){return(0,a.uX)(),(0,a.CE)("div",null,[s[0]||(s[0]=(0,a.Lk)("blockquote",null,[(0,a.Lk)("p",null,[(0,a.Lk)("code",null,'@FeignClient("coupon")'),(0,a.eW)(" 注解用于声明一个 Feign 客户端，表示当前接口是一个远程服务的调用接口，通过 Feign 来实现 HTTP 请求的自动代理。"),(0,a.Lk)("code",null,"@FeignClient"),(0,a.eW)(" 中的 "),(0,a.Lk)("code",null,'"coupon"'),(0,a.eW)(" 表示目标服务的名称，Feign 会通过服务发现机制（如 Nacos、Eureka 等）找到该服务，并发起 HTTP 请求。")])],-1)),(0,a.Q3)(" more "),s[1]||(s[1]=(0,a.Fv)('<h3 id="主要功能" tabindex="-1"><a class="header-anchor" href="#主要功能"><span>主要功能：</span></a></h3><ul><li><strong>服务发现</strong>：<code>@FeignClient</code> 注解会根据传入的 <code>&quot;coupon&quot;</code> 服务名，在服务发现平台（如 Nacos、Eureka 等）中查找相应的服务实例。</li><li><strong>自动化调用</strong>：Feign 会自动将接口的方法转换为对应的 HTTP 请求，简化远程服务的调用。</li><li><strong>负载均衡</strong>：当有多个实例时，Feign 会通过负载均衡机制选择合适的服务实例。</li></ul><h3 id="使用场景" tabindex="-1"><a class="header-anchor" href="#使用场景"><span>使用场景：</span></a></h3><p>通常，<code>@FeignClient</code> 用于服务之间的调用，比如：</p><ul><li>微服务架构中，一个服务调用另一个服务的 API。</li><li>不需要手动编写 HTTP 请求代码，Feign 会帮你完成。</li></ul><h3 id="主要属性" tabindex="-1"><a class="header-anchor" href="#主要属性"><span>主要属性：</span></a></h3><ul><li><strong><code>value</code> 或 <code>name</code></strong>：指定 Feign 客户端要调用的服务名称，通常和 Nacos 或其他服务发现平台中注册的服务名称一致。</li><li><strong><code>url</code></strong>：如果不使用服务发现，而是直接指定一个固定的 URL 进行调用，可以使用 <code>url</code> 属性。</li><li><strong><code>fallback</code></strong>：指定一个降级处理类，当远程服务不可用时，会调用该类中的方法。</li><li><strong><code>path</code></strong>：可以指定该 Feign 客户端的基础路径。</li></ul><h3 id="例子" tabindex="-1"><a class="header-anchor" href="#例子"><span>例子：</span></a></h3><p>假设有一个名为 <code>coupon</code> 的服务，我们可以使用 <code>@FeignClient(&quot;coupon&quot;)</code> 来调用该服务。</p><h4 id="_1-服务端-coupon-的配置" tabindex="-1"><a class="header-anchor" href="#_1-服务端-coupon-的配置"><span>1. 服务端（<code>coupon</code>）的配置：</span></a></h4><p>在 <code>coupon</code> 服务中，需要在 Nacos 中注册并暴露 API。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>yaml复制代码# coupon 服务配置</span></span>\n<span class="line"><span>spring:</span></span>\n<span class="line"><span>  cloud:</span></span>\n<span class="line"><span>    nacos:</span></span>\n<span class="line"><span>      discovery:</span></span>\n<span class="line"><span>        service: coupon  # 注册到 Nacos 的服务名称</span></span>\n<span class="line"><span>        server-addr: nacos-server:8848  # Nacos 服务地址</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-客户端-调用方-使用-feignclient-调用-coupon-服务" tabindex="-1"><a class="header-anchor" href="#_2-客户端-调用方-使用-feignclient-调用-coupon-服务"><span>2. 客户端（调用方）使用 <code>@FeignClient</code> 调用 <code>coupon</code> 服务：</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">java复制代码</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">FeignClient</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;coupon&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 这里的 &quot;coupon&quot; 与服务名称一致</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> interface</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> CouponClient</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">GetMapping</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/coupon/discounts&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span></span>\n<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    String</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getDiscounts</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // 调用 coupon 服务中的接口</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-使用-feign-客户端" tabindex="-1"><a class="header-anchor" href="#_3-使用-feign-客户端"><span>3. 使用 Feign 客户端：</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Service</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> CouponService</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">Autowired</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> CouponClient</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> couponClient</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> getCouponDiscounts</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> couponClient</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getDiscounts</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 调用远程服务的接口</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="其他常见属性" tabindex="-1"><a class="header-anchor" href="#其他常见属性"><span>其他常见属性：</span></a></h3><ul><li><p><code>fallback</code></p><p>：降级处理。假如服务不可用时，可以指定一个降级方法类：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>java复制代码@FeignClient(name = &quot;coupon&quot;, fallback = CouponClientFallback.class)</span></span>\n<span class="line"><span>public interface CouponClient {</span></span>\n<span class="line"><span>    @GetMapping(&quot;/coupon/discounts&quot;)</span></span>\n<span class="line"><span>    String getDiscounts();</span></span>\n<span class="line"><span>}</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>@Component</span></span>\n<span class="line"><span>public class CouponClientFallback implements CouponClient {</span></span>\n<span class="line"><span>    @Override</span></span>\n<span class="line"><span>    public String getDiscounts() {</span></span>\n<span class="line"><span>        return &quot;Service is unavailable, please try again later.&quot;;  // 服务不可用时的返回</span></span>\n<span class="line"><span>    }</span></span>\n<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结：</span></a></h3><ul><li><code>@FeignClient(&quot;coupon&quot;)</code> 是用来声明 Feign 客户端，<code>&quot;coupon&quot;</code> 是该客户端要调用的远程服务的名称。</li><li><code>@FeignClient</code> 会自动实现接口，简化远程调用过程，结合服务发现（如 Nacos）来实现服务的动态调用。</li><li>服务名称必须和在服务发现平台（如 Nacos）中注册的服务名称一致，确保 Feign 客户端能够正确地进行服务发现和请求。</li></ul>',20))])}]]),t=JSON.parse('{"path":"/Spring/%E6%B3%A8%E8%A7%A3/@FeignClient.html","title":"","lang":"zh-CN","frontmatter":{"icon":"fa-solid fa-hashtag","date":"2025-01-02T00:00:00.000Z","category":["Spring"],"tag":["注解"],"gitInclude":[]},"headers":[{"level":3,"title":"主要功能：","slug":"主要功能","link":"#主要功能","children":[]},{"level":3,"title":"使用场景：","slug":"使用场景","link":"#使用场景","children":[]},{"level":3,"title":"主要属性：","slug":"主要属性","link":"#主要属性","children":[]},{"level":3,"title":"例子：","slug":"例子","link":"#例子","children":[]},{"level":3,"title":"其他常见属性：","slug":"其他常见属性","link":"#其他常见属性","children":[]},{"level":3,"title":"总结：","slug":"总结","link":"#总结","children":[]}],"readingTime":{"minutes":2.44,"words":733},"filePathRelative":"Spring/注解/@FeignClient.md","localizedDate":"2025年1月2日","excerpt":"<blockquote>\\n<p><code>@FeignClient(\\"coupon\\")</code> 注解用于声明一个 Feign 客户端，表示当前接口是一个远程服务的调用接口，通过 Feign 来实现 HTTP 请求的自动代理。<code>@FeignClient</code> 中的 <code>\\"coupon\\"</code> 表示目标服务的名称，Feign 会通过服务发现机制（如 Nacos、Eureka 等）找到该服务，并发起 HTTP 请求。</p>\\n</blockquote>\\n"}')}}]);