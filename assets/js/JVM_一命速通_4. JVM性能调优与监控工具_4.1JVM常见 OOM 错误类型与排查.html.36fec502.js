"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[28519],{66262:(i,s)=>{s.A=(i,s)=>{const a=i.__vccOpts||i;for(const[i,e]of s)a[i]=e;return a}},55496:(i,s,a)=>{a.r(s),a.d(s,{comp:()=>t,data:()=>l});var e=a(20641);const h={},t=(0,a(66262).A)(h,[["render",function(i,s){const a=(0,e.g2)("RouteLink");return(0,e.uX)(),(0,e.CE)("div",null,[s[2]||(s[2]=(0,e.Lk)("h1",{id:"ğŸ§¨-4-1-jvm-å¸¸è§-oom-é”™è¯¯ç±»å‹ä¸æ’æŸ¥",tabindex:"-1"},[(0,e.Lk)("a",{class:"header-anchor",href:"#ğŸ§¨-4-1-jvm-å¸¸è§-oom-é”™è¯¯ç±»å‹ä¸æ’æŸ¥"},[(0,e.Lk)("span",null,"ğŸ§¨ 4.1 JVM å¸¸è§ OOM é”™è¯¯ç±»å‹ä¸æ’æŸ¥")])],-1)),s[3]||(s[3]=(0,e.Lk)("p",null,"OutOfMemoryErrorï¼ˆOOMï¼‰æ˜¯ JVM ä¸­æœ€è‡´å‘½çš„è¿è¡Œæ—¶é”™è¯¯ä¹‹ä¸€ï¼Œç›´æ¥å½±å“ç³»ç»Ÿç¨³å®šæ€§ã€‚ä¸åŒç±»å‹çš„ OOM æŒ‡å‘ JVM å†…éƒ¨ä¸åŒçš„å†…å­˜åŒºåŸŸã€‚",-1)),s[4]||(s[4]=(0,e.Lk)("hr",null,null,-1)),(0,e.Q3)(" more "),s[5]||(s[5]=(0,e.Fv)('<h2 id="ğŸ’¥-oom-é”™è¯¯ç±»å‹æ€»è§ˆ" tabindex="-1"><a class="header-anchor" href="#ğŸ’¥-oom-é”™è¯¯ç±»å‹æ€»è§ˆ"><span>ğŸ’¥ OOM é”™è¯¯ç±»å‹æ€»è§ˆ</span></a></h2><table><thead><tr><th>é”™è¯¯ç±»å‹</th><th>å‡ºç°åœºæ™¯è¯´æ˜</th></tr></thead><tbody><tr><td>Java heap space</td><td>å †å†…å­˜ä¸è¶³ï¼Œå¸¸å› å¯¹è±¡è¿‡å¤š/æœªåŠæ—¶å›æ”¶</td></tr><tr><td>GC overhead limit exceeded</td><td>GC æ—¶é—´å æ¯”è¿‡é«˜ï¼ˆ&gt;98%ï¼‰ï¼Œå‡ ä¹æ— å¯å›æ”¶å†…å­˜</td></tr><tr><td>Metaspace / PermGen space</td><td>ç±»åŠ è½½å…ƒæ•°æ®ç©ºé—´ä¸è¶³ï¼ˆJDK 8 ä¹‹å‰ä¸º PermGenï¼‰</td></tr><tr><td>Direct buffer memory</td><td>ç›´æ¥å†…å­˜æº¢å‡ºï¼Œå¦‚ NIO ByteBuffer æœªé‡Šæ”¾</td></tr><tr><td>Requested array size exceeds VM limit</td><td>æ•°ç»„åˆ›å»ºè¿‡å¤§ï¼Œå¦‚ <code>new int[Integer.MAX_VALUE]</code></td></tr><tr><td>Unable to create new native thread</td><td>æœ¬åœ°çº¿ç¨‹æ•°è€—å°½ï¼Œæ— æ³•åˆ†é…æ–°çº¿ç¨‹</td></tr></tbody></table><hr><h2 id="ğŸ§ª-å…¸å‹ç¤ºä¾‹ä¸é‡ç°" tabindex="-1"><a class="header-anchor" href="#ğŸ§ª-å…¸å‹ç¤ºä¾‹ä¸é‡ç°"><span>ğŸ§ª å…¸å‹ç¤ºä¾‹ä¸é‡ç°</span></a></h2><h3 id="_1-java-heap-space" tabindex="-1"><a class="header-anchor" href="#_1-java-heap-space"><span>1. Java heap space</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">List</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;">byte</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">[]</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> list </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ArrayList</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">while</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) {</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    list</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">add</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#C18401;--shiki-dark:#C678DD;"> byte</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1024</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> *</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1024</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]);</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // æ¯æ¬¡ç”³è¯·1MB</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é…ç½®ï¼š<code>-Xmx64m</code>ï¼Œè§¦å‘å †æº¢å‡º</p><hr><h3 id="_2-gc-overhead-limit-exceeded" tabindex="-1"><a class="header-anchor" href="#_2-gc-overhead-limit-exceeded"><span>2. GC overhead limit exceeded</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Map</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> map </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> HashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">while</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) {</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    map</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">put</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">UUID</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">randomUUID</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(), </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;OOM&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>GC è¶… 98% æ—¶é—´å›æ”¶ä¸åˆ° 2% çš„å †ï¼ŒJVM ä¿æŠ¤æ€§æŠ›å‡ºå¼‚å¸¸</p><hr><h3 id="_3-metaspace-jdk-8" tabindex="-1"><a class="header-anchor" href="#_3-metaspace-jdk-8"><span>3. Metaspaceï¼ˆJDK 8+ï¼‰</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">while</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) {</span></span>\n<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    ClassPool</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> pool </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> ClassPool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">getDefault</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>\n<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    CtClass</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> cc </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> pool</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">makeClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">UUID</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">randomUUID</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">().</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">());</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    cc</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">toClass</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // åŠ¨æ€ç”Ÿæˆç±»ï¼Œå¯¼è‡´å…ƒç©ºé—´è†¨èƒ€</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é…ç½®ï¼š<code>-XX:MaxMetaspaceSize=64m</code></p><hr><h3 id="_4-direct-buffer-memory" tabindex="-1"><a class="header-anchor" href="#_4-direct-buffer-memory"><span>4. Direct buffer memory</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">while</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">) {</span></span>\n<span class="line"><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">    ByteBuffer</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> buffer </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> ByteBuffer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">allocateDirect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1024</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> *</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1024</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    Thread</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sleep</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é…ç½®ï¼š<code>-XX:MaxDirectMemorySize=64m</code></p><hr><h2 id="ğŸ”-oom-é—®é¢˜æ’æŸ¥æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#ğŸ”-oom-é—®é¢˜æ’æŸ¥æ–¹æ³•"><span>ğŸ” OOM é—®é¢˜æ’æŸ¥æ–¹æ³•</span></a></h2><h3 id="âœ…-1-æŸ¥çœ‹é”™è¯¯æ—¥å¿—å †æ ˆ" tabindex="-1"><a class="header-anchor" href="#âœ…-1-æŸ¥çœ‹é”™è¯¯æ—¥å¿—å †æ ˆ"><span>âœ… 1. æŸ¥çœ‹é”™è¯¯æ—¥å¿—å †æ ˆ</span></a></h3><ul><li>æ˜ç¡®æ˜¯å“ªç§ OOM é”™è¯¯</li><li>æŸ¥çœ‹å¼‚å¸¸ç±»ã€ä»£ç ä½ç½®ã€çº¿ç¨‹å</li></ul><h3 id="âœ…-2-ä½¿ç”¨å †è½¬å‚¨æ–‡ä»¶åˆ†æ" tabindex="-1"><a class="header-anchor" href="#âœ…-2-ä½¿ç”¨å †è½¬å‚¨æ–‡ä»¶åˆ†æ"><span>âœ… 2. ä½¿ç”¨å †è½¬å‚¨æ–‡ä»¶åˆ†æ</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-XX:+HeapDumpOnOutOfMemoryError</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-XX:HeapDumpPath</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">=/path/to/dump.hprof</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨å·¥å…·ï¼š<code>MAT</code>ã€<code>jvisualvm</code>ã€<code>GCEasy</code></p><h3 id="âœ…-3-åˆ†æ-gc-æ—¥å¿—" tabindex="-1"><a class="header-anchor" href="#âœ…-3-åˆ†æ-gc-æ—¥å¿—"><span>âœ… 3. åˆ†æ GC æ—¥å¿—</span></a></h3><p>ç»“åˆ <code>-Xlog:gc*</code> æˆ– <code>-XX:+PrintGCDetails</code> åˆ†æé¢‘ç¹ GC æƒ…å†µ</p><h3 id="âœ…-4-å®šä½çº¿ç¨‹-ç±»åŠ è½½-ç›´æ¥å†…å­˜é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#âœ…-4-å®šä½çº¿ç¨‹-ç±»åŠ è½½-ç›´æ¥å†…å­˜é—®é¢˜"><span>âœ… 4. å®šä½çº¿ç¨‹/ç±»åŠ è½½/ç›´æ¥å†…å­˜é—®é¢˜</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">jmap</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -heap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">pi</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">d&gt;</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">jmap</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -clstats</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">pi</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">d&gt;</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">jcmd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">pi</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">d&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">VM.native_memory</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> summary</span></span>\n<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">ulimit</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">   # æŸ¥çœ‹æœ€å¤§çº¿ç¨‹æ•°é™åˆ¶</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="ğŸ›¡ï¸-å¸¸è§è§£å†³æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#ğŸ›¡ï¸-å¸¸è§è§£å†³æ–¹æ¡ˆ"><span>ğŸ›¡ï¸ å¸¸è§è§£å†³æ–¹æ¡ˆ</span></a></h2><table><thead><tr><th>ç±»å‹</th><th>è§£å†³æ€è·¯</th></tr></thead><tbody><tr><td>å †æº¢å‡º</td><td>å¢åŠ  <code>-Xmx</code>ã€ä¼˜åŒ–ç¼“å­˜ã€æ’æŸ¥å†…å­˜æ³„æ¼</td></tr><tr><td>GC overhead</td><td>å‡å°‘å¯¹è±¡åˆ›å»ºã€è°ƒæ•´ GC ç­–ç•¥/æ™‹å‡è§„åˆ™</td></tr><tr><td>Metaspace</td><td>é™åˆ¶åŠ¨æ€ç±»ç”Ÿæˆï¼ˆå¦‚ Spring CGLIBï¼‰</td></tr><tr><td>DirectMemory</td><td>é™åˆ¶ NIO ä½¿ç”¨ã€æ·»åŠ ä¸»åŠ¨é‡Šæ”¾é€»è¾‘</td></tr><tr><td>æœ¬åœ°çº¿ç¨‹è€—å°½</td><td>é™ä½çº¿ç¨‹æ± å¤§å°ã€æé«˜ ulimit é…ç½®</td></tr></tbody></table><hr><h2 id="ğŸ“-å°ç»“" tabindex="-1"><a class="header-anchor" href="#ğŸ“-å°ç»“"><span>ğŸ“ å°ç»“</span></a></h2><ul><li>OOM é”™è¯¯æ¥æºå¤šæ ·ï¼Œå®šä½è¦ç»“åˆæ—¥å¿—ã€dump æ–‡ä»¶ã€GC è¡Œä¸ºåˆ†æ</li><li>ä¸»åŠ¨å¼€å¯å †è½¬å‚¨ä¸ NMT æ˜¯ç”Ÿäº§ç³»ç»Ÿçš„å¿…å¤‡ä¿éšœ</li><li>ä»£ç ä¸­è°¨æ…å¤„ç†å¯¹è±¡ç”Ÿå‘½å‘¨æœŸã€åŠ¨æ€ç±»ã€çº¿ç¨‹ä¸ç¼“å†²åŒº</li></ul><hr>',37)),(0,e.Lk)("p",null,[s[1]||(s[1]=(0,e.eW)("ğŸ‘‰ ä¸‹ä¸€ç¯‡æ¨èï¼š")),(0,e.bF)(a,{to:"/JVM/%E4%B8%80%E5%91%BD%E9%80%9F%E9%80%9A/4.%20JVM%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98%E4%B8%8E%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7/4.2%E5%A6%82%E4%BD%95%E5%88%86%E6%9E%90%20Java%20%E5%A0%86%E8%BD%AC%E5%82%A8%E6%96%87%E4%BB%B6%EF%BC%88hprof%EF%BC%89.html"},{default:(0,e.k6)((()=>s[0]||(s[0]=[(0,e.eW)("4.2 å¦‚ä½•åˆ†æ Java å †è½¬å‚¨æ–‡ä»¶ï¼ˆhprofï¼‰")]))),_:1})])])}]]),l=JSON.parse('{"path":"/JVM/%E4%B8%80%E5%91%BD%E9%80%9F%E9%80%9A/4.%20JVM%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98%E4%B8%8E%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7/4.1JVM%E5%B8%B8%E8%A7%81%20OOM%20%E9%94%99%E8%AF%AF%E7%B1%BB%E5%9E%8B%E4%B8%8E%E6%8E%92%E6%9F%A5.html","title":"4.1 JVM å¸¸è§ OOM é”™è¯¯ç±»å‹ä¸æ’æŸ¥","lang":"zh-CN","frontmatter":{"title":"4.1 JVM å¸¸è§ OOM é”™è¯¯ç±»å‹ä¸æ’æŸ¥","icon":"fa-solid fa-bug","date":"2025-07-10T00:00:00.000Z","author":"JeanHu","category":["JVM"],"tag":["JVM","OOM","æ’æŸ¥","å†…å­˜æ³„æ¼"],"summary":"æœ¬æ–‡æ¢³ç†äº† JVM ä¸­å¸¸è§çš„ OOMï¼ˆOutOfMemoryErrorï¼‰é”™è¯¯ç±»å‹ï¼Œç»“åˆå®é™…æ¡ˆä¾‹è¯¦è§£å†…å­˜æº¢å‡ºçš„æˆå› ã€è¯Šæ–­å·¥å…·ä¸æ’æŸ¥æ€è·¯ï¼Œå¸®åŠ©å¼€å‘è€…é«˜æ•ˆå®šä½å†…å­˜é—®é¢˜ã€‚","gitInclude":[]},"headers":[{"level":2,"title":"ğŸ’¥ OOM é”™è¯¯ç±»å‹æ€»è§ˆ","slug":"ğŸ’¥-oom-é”™è¯¯ç±»å‹æ€»è§ˆ","link":"#ğŸ’¥-oom-é”™è¯¯ç±»å‹æ€»è§ˆ","children":[]},{"level":2,"title":"ğŸ§ª å…¸å‹ç¤ºä¾‹ä¸é‡ç°","slug":"ğŸ§ª-å…¸å‹ç¤ºä¾‹ä¸é‡ç°","link":"#ğŸ§ª-å…¸å‹ç¤ºä¾‹ä¸é‡ç°","children":[{"level":3,"title":"1. Java heap space","slug":"_1-java-heap-space","link":"#_1-java-heap-space","children":[]},{"level":3,"title":"2. GC overhead limit exceeded","slug":"_2-gc-overhead-limit-exceeded","link":"#_2-gc-overhead-limit-exceeded","children":[]},{"level":3,"title":"3. Metaspaceï¼ˆJDK 8+ï¼‰","slug":"_3-metaspace-jdk-8","link":"#_3-metaspace-jdk-8","children":[]},{"level":3,"title":"4. Direct buffer memory","slug":"_4-direct-buffer-memory","link":"#_4-direct-buffer-memory","children":[]}]},{"level":2,"title":"ğŸ” OOM é—®é¢˜æ’æŸ¥æ–¹æ³•","slug":"ğŸ”-oom-é—®é¢˜æ’æŸ¥æ–¹æ³•","link":"#ğŸ”-oom-é—®é¢˜æ’æŸ¥æ–¹æ³•","children":[{"level":3,"title":"âœ… 1. æŸ¥çœ‹é”™è¯¯æ—¥å¿—å †æ ˆ","slug":"âœ…-1-æŸ¥çœ‹é”™è¯¯æ—¥å¿—å †æ ˆ","link":"#âœ…-1-æŸ¥çœ‹é”™è¯¯æ—¥å¿—å †æ ˆ","children":[]},{"level":3,"title":"âœ… 2. ä½¿ç”¨å †è½¬å‚¨æ–‡ä»¶åˆ†æ","slug":"âœ…-2-ä½¿ç”¨å †è½¬å‚¨æ–‡ä»¶åˆ†æ","link":"#âœ…-2-ä½¿ç”¨å †è½¬å‚¨æ–‡ä»¶åˆ†æ","children":[]},{"level":3,"title":"âœ… 3. åˆ†æ GC æ—¥å¿—","slug":"âœ…-3-åˆ†æ-gc-æ—¥å¿—","link":"#âœ…-3-åˆ†æ-gc-æ—¥å¿—","children":[]},{"level":3,"title":"âœ… 4. å®šä½çº¿ç¨‹/ç±»åŠ è½½/ç›´æ¥å†…å­˜é—®é¢˜","slug":"âœ…-4-å®šä½çº¿ç¨‹-ç±»åŠ è½½-ç›´æ¥å†…å­˜é—®é¢˜","link":"#âœ…-4-å®šä½çº¿ç¨‹-ç±»åŠ è½½-ç›´æ¥å†…å­˜é—®é¢˜","children":[]}]},{"level":2,"title":"ğŸ›¡ï¸ å¸¸è§è§£å†³æ–¹æ¡ˆ","slug":"ğŸ›¡ï¸-å¸¸è§è§£å†³æ–¹æ¡ˆ","link":"#ğŸ›¡ï¸-å¸¸è§è§£å†³æ–¹æ¡ˆ","children":[]},{"level":2,"title":"ğŸ“ å°ç»“","slug":"ğŸ“-å°ç»“","link":"#ğŸ“-å°ç»“","children":[]}],"readingTime":{"minutes":2.35,"words":704},"filePathRelative":"JVM/ä¸€å‘½é€Ÿé€š/4. JVMæ€§èƒ½è°ƒä¼˜ä¸ç›‘æ§å·¥å…·/4.1JVMå¸¸è§ OOM é”™è¯¯ç±»å‹ä¸æ’æŸ¥.md","localizedDate":"2025å¹´7æœˆ10æ—¥","excerpt":"\\n<p>OutOfMemoryErrorï¼ˆOOMï¼‰æ˜¯ JVM ä¸­æœ€è‡´å‘½çš„è¿è¡Œæ—¶é”™è¯¯ä¹‹ä¸€ï¼Œç›´æ¥å½±å“ç³»ç»Ÿç¨³å®šæ€§ã€‚ä¸åŒç±»å‹çš„ OOM æŒ‡å‘ JVM å†…éƒ¨ä¸åŒçš„å†…å­˜åŒºåŸŸã€‚</p>\\n<hr>\\n"}')}}]);