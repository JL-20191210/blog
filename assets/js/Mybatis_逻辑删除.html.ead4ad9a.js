"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[5342],{6262:(i,s)=>{s.A=(i,s)=>{const a=i.__vccOpts||i;for(const[i,l]of s)a[i]=l;return a}},3921:(i,s,a)=>{a.r(s),a.d(s,{comp:()=>n,data:()=>t});var l=a(641);const e={},n=(0,a(6262).A)(e,[["render",function(i,s){return(0,l.uX)(),(0,l.CE)("div",null,s[0]||(s[0]=[(0,l.Fv)('<h1 id="逻辑删除" tabindex="-1"><a class="header-anchor" href="#逻辑删除"><span>逻辑删除</span></a></h1><p><a href="https://baomidou.com/guides/logic-delete/" target="_blank" rel="noopener noreferrer">逻辑删除支持 | MyBatis-Plus</a></p><h2 id="原理" tabindex="-1"><a class="header-anchor" href="#原理"><span>原理</span></a></h2><blockquote><p>数据表中设计一个字段表示记录为“已删除”而非物理删除</p></blockquote><h2 id="使用方法" tabindex="-1"><a class="header-anchor" href="#使用方法"><span>使用方法</span></a></h2><h3 id="步骤-1-配置全局逻辑删除属性" tabindex="-1"><a class="header-anchor" href="#步骤-1-配置全局逻辑删除属性"><span>步骤 1: 配置全局逻辑删除属性</span></a></h3><p>在 <code>application.yml</code> 中配置 MyBatis-Plus 的全局逻辑删除属性：</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">mybatis-plus</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  global-config</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    db-config</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      logic-delete-field</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">deleted</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 全局逻辑删除字段名</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      logic-delete-value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 逻辑已删除值</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      logic-not-delete-value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 逻辑未删除值</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="步骤-2-在实体类中使用-tablelogic-注解" tabindex="-1"><a class="header-anchor" href="#步骤-2-在实体类中使用-tablelogic-注解"><span>步骤 2: 在实体类中使用 <code>@TableLogic</code> 注解</span></a></h3><p>在实体类中，对应数据库表的逻辑删除字段上添加 <code>@TableLogic</code> 注解：</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> com.baomidou.mybatisplus.annotation.TableLogic</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> User</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // 其他字段...</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    @</span><span style="--shiki-light:#A626A4;--shiki-dark:#E5C07B;">TableLogic</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    </span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Integer</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> deleted</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>🌳<code>@TableLogic(value = &quot;1&quot; , delval = &quot;0&quot; )</code>:定义表独享的逻辑删除规则，解决某些表中逻辑删除与全局逻辑删除规则相反的问题</p><p>🌽<code>value = &quot;1&quot; </code>: 逻辑未删除的值是1</p><p>🌽<code>delval = &quot;0&quot; </code>: 逻辑删除的值是0</p>',14)]))}]]),t=JSON.parse('{"path":"/Mybatis/%E9%80%BB%E8%BE%91%E5%88%A0%E9%99%A4.html","title":"逻辑删除","lang":"zh-CN","frontmatter":{"gitInclude":[]},"headers":[{"level":2,"title":"原理","slug":"原理","link":"#原理","children":[]},{"level":2,"title":"使用方法","slug":"使用方法","link":"#使用方法","children":[{"level":3,"title":"步骤 1: 配置全局逻辑删除属性","slug":"步骤-1-配置全局逻辑删除属性","link":"#步骤-1-配置全局逻辑删除属性","children":[]},{"level":3,"title":"步骤 2: 在实体类中使用 @TableLogic 注解","slug":"步骤-2-在实体类中使用-tablelogic-注解","link":"#步骤-2-在实体类中使用-tablelogic-注解","children":[]}]}],"readingTime":{"minutes":0.78,"words":233},"filePathRelative":"Mybatis/逻辑删除.md","excerpt":"\\n<p><a href=\\"https://baomidou.com/guides/logic-delete/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">逻辑删除支持 | MyBatis-Plus</a></p>\\n<h2>原理</h2>\\n<blockquote>\\n<p>数据表中设计一个字段表示记录为“已删除”而非物理删除</p>\\n</blockquote>\\n<h2>使用方法</h2>\\n<h3>步骤 1: 配置全局逻辑删除属性</h3>\\n<p>在 <code>application.yml</code> 中配置 MyBatis-Plus 的全局逻辑删除属性：</p>"}')}}]);