# 📝 SQL 中 `FROM A, B` 与 `JOIN` 的区别详解

在日常开发或面试中，经常会被问到：
 **「SQL 里 `FROM A, B` 和 `JOIN` 有什么区别？」**
 很多人以为它们是等价的，其实并不完全正确。本文将深入解析这两种写法的区别，并扩展一些常见的陷阱和最佳实践。

------

## 1️⃣ 基本写法对比

### 🔹 传统逗号分隔

```sql
SELECT *
FROM A, B
WHERE A.id = B.id;
```

👉 这是 SQL-92 之前的写法，本质上是 **笛卡尔积 + 过滤条件**。
 先做 `A × B`，然后再用 `WHERE` 进行筛选。

------

### 🔹 显式 `JOIN`

```sql
SELECT *
FROM A
INNER JOIN B ON A.id = B.id;
```

👉 这是 SQL-92 及之后推荐的写法，逻辑上直接告诉数据库：
 “我想把 A 和 B 按 `id` 连接起来”。

------

## 2️⃣ 结果等价，但语义不同

从结果来看，`FROM A, B WHERE ...` 和 `INNER JOIN ... ON ...` 在功能上是 **等价的**。
 但是，`JOIN` 写法的语义更清晰：

- **旧写法（逗号）**：先做笛卡尔积，再用 `WHERE` 过滤。
- **新写法（JOIN）**：直接告诉数据库怎么连接，**避免误解**。

------

## 3️⃣ 常见问题与陷阱

### ⚠️ 1. 忘记写 `WHERE`

```sql
SELECT *
FROM A, B;
```

👉 这会生成笛卡尔积（Cross Join），结果集大小 = `|A| × |B|`，非常危险。

------

### ⚠️ 2. `JOIN` 不写 `ON`

```sql
SELECT *
FROM A JOIN B;
```

👉 在 MySQL / PostgreSQL 中会报错，除非显式使用 `CROSS JOIN`：

```sql
SELECT *
FROM A CROSS JOIN B;
```

这才等价于 `FROM A, B`。

------

### ⚠️ 3. LEFT JOIN/RIGHT JOIN 必须带 `ON`

```sql
SELECT *
FROM A LEFT JOIN B;
```

👉 错误！必须写 `ON` 指定条件：

```sql
SELECT *
FROM A LEFT JOIN B ON A.id = B.id;
```

------

## 4️⃣ 性能与可读性对比

- **性能**：现代数据库优化器会自动转换，两者执行计划通常相同。
- **可读性**：`JOIN ... ON` 语义更清晰，便于团队协作与维护。

💡 建议在项目中 **统一使用显式 JOIN**，特别是涉及多个表时。

------

## 5️⃣ 拓展知识：几种 JOIN 的区别

| 写法         | 含义                       | 是否需要 `ON` |
| ------------ | -------------------------- | ------------- |
| `INNER JOIN` | 取两表交集                 | ✅ 必须        |
| `LEFT JOIN`  | 取左表全部，右表匹配的部分 | ✅ 必须        |
| `RIGHT JOIN` | 取右表全部，左表匹配的部分 | ✅ 必须        |
| `FULL JOIN`  | 左右表的并集               | ✅ 必须        |
| `CROSS JOIN` | 笛卡尔积                   | ❌ 不需要      |

------

## 6️⃣ 实际开发建议

1. **少用逗号分隔**，除非是很简单的临时查询。
2. **统一使用 JOIN ... ON**，代码语义清晰，维护成本更低。
3. **注意 JOIN 顺序**，有时候会影响优化器的执行计划。
4. **善用 EXPLAIN**，查看 SQL 执行计划，避免笛卡尔积带来的性能问题。

------

## 🎯 总结

- `FROM A, B WHERE ...` 是旧写法，等价于 **INNER JOIN**。
- `JOIN ... ON ...` 是新写法，语义清晰，推荐使用。
- 不写 `ON` 的 `JOIN` 会报错，除非是 `CROSS JOIN`。
- 实际项目中，**建议统一使用显式 JOIN**，避免歧义和性能问题。

------

👉 面试回答示例：

> "`FROM A, B` 属于旧写法，本质是笛卡尔积加条件过滤，而 `JOIN ... ON` 是 SQL-92 引入的标准写法，语义更清晰，也能避免遗漏条件导致的笛卡尔积。现在的数据库执行计划基本一样，但在团队开发中推荐使用显式 JOIN。"