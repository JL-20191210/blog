---
title: 60道 MySQL 精选面试题(优化版)
category:
  - 面试题
tag:
  - 面试题
---

# 60道 MySQL 精选面试题(优化版)

## 基础

### 1.关系型和非关系型数据库的区别？

**关系型数据库的优点是：**

1. 容易理解和使用，用表格形式组织数据，结构清晰，便与操作
2. 保障数据一致性，遵循ACID原则（原子性，一致性，隔离性，持久性），保证事务处理的可靠性与一致性
3. 数据更新开销低，插入更新删除操作高效
4. 查询能力强大，可以使用带有where，join的语句。适合多表联查

**非关系型数据库(NoSQL)的优点：**

1. 读写性能高效，因为不经过SQL解析，读写速度快，高并发场景下表现优秀
2. 存储结构灵活，包括键值对，文档或列式存储等多种存储结构，适合JSON，二进制等多样化数据存储
3. 支持多种数据类型，能处理结构化，半结构化和非结构化数据，比如图片，视频，日志，文档等
4. 水平扩展型强，非关系型数据库支持横向扩展，能够处理大规模数据，如Redis（内存数据库）、MongoDB（文档数据库）、HBase（列式数据库），适用于大数据、高可用的场景，如日志系统、地理位置存储等。

---

### 2.详细说一下一条 MySQL 语句执行的步骤

1. 客户端发起请求
2. 连接器验证身份信息及权限，验证通过将用户连接到查询处理层
3. 查询缓存：如果查询缓存开启，存在缓存结果则直接返回，否则执行后续操作
4. 分析器：对SQL语句进行词法和语法分析。MySQL将SQL语句解析为一个结构化的查询树，检查语法是否合法。如果存在语法错误会报错并停止执行。如果语法正确，则会生成一个抽象语法树（AST）。
5. 优化器：选择最优的执行计划。常见优化包括：查询重写，索引选择，JOIN操作顺序优化等
6. 执行器（Executor）
    在执行阶段，执行器会检查用户是否具有足够的权限来执行这个查询（如对相关表的读取权限）。如果用户权限验证通过，执行器将通过合适的存储引擎（例如 InnoDB 或 MyISAM）执行查询操作。
7. 执行器：检查用户权限是否支持当前查询。通过则使用存储引擎执行查询
8. 存储引擎：获取数据后返回。若开启查询缓存则会将结果缓存

## 索引相关

### 3.MySQL 使用索引的原因？

- :fire: 使用索引就是为了提高数据查询的效率，就像书的目录一样，利用索引可以快速定位数据位置，而不需要遍历整个表

- 创建唯一性索引，可以保证数据库表中每一行数据的唯一性
- 避免不必要的排序和临时表生成
- 加速表之间连接的操作，将随机 IO 变为顺序 IO



### 4、索引的三种常见底层数据结构以及优缺点

三种常见的索引底层数据结构：分别是哈希表、有序数组和搜索树。

- 哈希表这种适用于等值查询的场景，比如 memcached 以及其它一些 NoSQL 引擎，不适合范围查询。
- 有序数组索引只适用于静态存储引擎，等值和范围查询性能好，但更新数据成本高。
- N 叉树由于读写上的性能优点以及适配磁盘访问模式以及广泛应用在数据库引擎中。
- 扩展（以 InnoDB 的一个整数字段索引为例，这个 N 差不多是 1200。棵树高是 4 的时候，就可以存 1200 的 3 次方个值，这已经 17 亿了。考虑到树根的数据块总是在内存中的，一个 10 亿行的表上一个整数字段的索引，查找一个值最多只需要访问 3 次磁盘。其实，树的第二层也有很大概率在内存中，那么访问磁盘的平均次数就更少了。）
